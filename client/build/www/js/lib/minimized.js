
(function(window,undefined){var document=window.document,navigator=window.navigator,location=window.location;var jQuery=(function(){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery);},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rdigit=/\d/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase();},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector){return this;}
if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this;}
if(selector==="body"&&!context&&document.body){this.context=document;this[0]=document.body;this.selector=selector;this.length=1;return this;}
if(typeof selector==="string"){if(selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3){match=[null,selector,null];}else{match=quickExpr.exec(selector);}
if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true);}else{selector=[doc.createElement(ret[1])];}}else{ret=jQuery.buildFragment([match[1]],[doc]);selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes;}
return jQuery.merge(this,selector);}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2]){return rootjQuery.find(selector);}
this.length=1;this[0]=elem;}
this.context=document;this.selector=selector;return this;}}else if(!context||context.jquery){return(context||rootjQuery).find(selector);}else{return this.constructor(context).find(selector);}}else if(jQuery.isFunction(selector)){return rootjQuery.ready(selector);}
if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context;}
return jQuery.makeArray(selector,this);},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length;},toArray:function(){return slice.call(this,0);},get:function(num){return num==null?this.toArray():(num<0?this[this.length+num]:this[num]);},pushStack:function(elems,name,selector){var ret=this.constructor();if(jQuery.isArray(elems)){push.apply(ret,elems);}else{jQuery.merge(ret,elems);}
ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector;}else if(name){ret.selector=this.selector+"."+name+"("+selector+")";}
return ret;},each:function(callback,args){return jQuery.each(this,callback,args);},ready:function(fn){jQuery.bindReady();readyList.done(fn);return this;},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","));},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem);}));},end:function(){return this.prevObject||this.constructor(null);},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2;}
if(typeof target!=="object"&&!jQuery.isFunction(target)){target={};}
if(length===i){target=this;--i;}
for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[];}else{clone=src&&jQuery.isPlainObject(src)?src:{};}
target[name]=jQuery.extend(deep,clone,copy);}else if(copy!==undefined){target[name]=copy;}}}}
return target;};jQuery.extend({noConflict:function(deep){if(window.$===jQuery){window.$=_$;}
if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery;}
return jQuery;},isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++;}else{jQuery.ready(true);}},ready:function(wait){if((wait===true&&!--jQuery.readyWait)||(wait!==true&&!jQuery.isReady)){if(!document.body){return setTimeout(jQuery.ready,1);}
jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return;}
readyList.resolveWith(document,[jQuery]);if(jQuery.fn.trigger){jQuery(document).trigger("ready").unbind("ready");}}},bindReady:function(){if(readyList){return;}
readyList=jQuery._Deferred();if(document.readyState==="complete"){return setTimeout(jQuery.ready,1);}
if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false);}else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null;}catch(e){}
if(document.documentElement.doScroll&&toplevel){doScrollCheck();}}},isFunction:function(obj){return jQuery.type(obj)==="function";},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array";},isWindow:function(obj){return obj&&typeof obj==="object"&&"setInterval"in obj;},isNaN:function(obj){return obj==null||!rdigit.test(obj)||isNaN(obj);},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object";},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false;}
try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}}catch(e){return false;}
var key;for(key in obj){}
return key===undefined||hasOwn.call(obj,key);},isEmptyObject:function(obj){for(var name in obj){return false;}
return true;},error:function(msg){throw msg;},parseJSON:function(data){if(typeof data!=="string"||!data){return null;}
data=jQuery.trim(data);if(window.JSON&&window.JSON.parse){return window.JSON.parse(data);}
if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))){return(new Function("return "+data))();}
jQuery.error("Invalid JSON: "+data);},parseXML:function(data){var xml,tmp;try{if(window.DOMParser){tmp=new DOMParser();xml=tmp.parseFromString(data,"text/xml");}else{xml=new ActiveXObject("Microsoft.XMLDOM");xml.async="false";xml.loadXML(data);}}catch(e){xml=undefined;}
if(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data);}
return xml;},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){(window.execScript||function(data){window["eval"].call(window,data);})(data);}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase);},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase();},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break;}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break;}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break;}}}else{for(;i<length;){if(callback.call(object[i],i,object[i++])===false){break;}}}}
return object;},trim:trim?function(text){return text==null?"":trim.call(text);}:function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"");},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);if(array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array)){push.call(ret,array);}else{jQuery.merge(ret,array);}}
return ret;},inArray:function(elem,array){if(!array){return-1;}
if(indexOf){return indexOf.call(array,elem);}
for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i;}}
return-1;},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j];}}else{while(second[j]!==undefined){first[i++]=second[j++];}}
first.length=i;return first;},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++){retVal=!!callback(elems[i],i);if(inv!==retVal){ret.push(elems[i]);}}
return ret;},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length==="number"&&((length>0&&elems[0]&&elems[length-1])||length===0||jQuery.isArray(elems));if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value;}}}else{for(key in elems){value=callback(elems[key],key,arg);if(value!=null){ret[ret.length]=value;}}}
return ret.concat.apply([],ret);},guid:1,proxy:function(fn,context){if(typeof context==="string"){var tmp=fn[context];context=fn;fn=tmp;}
if(!jQuery.isFunction(fn)){return undefined;}
var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)));};proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++;return proxy;},access:function(elems,key,value,exec,fn,pass){var length=elems.length;if(typeof key==="object"){for(var k in key){jQuery.access(elems,k,key[k],exec,fn,value);}
return elems;}
if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);}
return elems;}
return length?fn(elems[0],key):undefined;},now:function(){return(new Date()).getTime();},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"};},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context);}
jQuery.extend(true,jQuerySub,this);jQuerySub.superclass=this;jQuerySub.fn=jQuerySub.prototype=this();jQuerySub.fn.constructor=jQuerySub;jQuerySub.sub=this.sub;jQuerySub.fn.init=function init(selector,context){if(context&&context instanceof jQuery&&!(context instanceof jQuerySub)){context=jQuerySub(context);}
return jQuery.fn.init.call(this,selector,context,rootjQuerySub);};jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub;},browser:{}});jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase();});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version;}
if(jQuery.browser.webkit){jQuery.browser.safari=true;}
if(rnotwhite.test("\xA0")){trimLeft=/^[\s\xA0]+/;trimRight=/[\s\xA0]+$/;}
rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready();};}else if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready();}};}
function doScrollCheck(){if(jQuery.isReady){return;}
try{document.documentElement.doScroll("left");}catch(e){setTimeout(doScrollCheck,1);return;}
jQuery.ready();}
return jQuery;})();var
promiseMethods="done fail isResolved isRejected promise then always pipe".split(" "),sliceDeferred=[].slice;jQuery.extend({_Deferred:function(){var
callbacks=[],fired,firing,cancelled,deferred={done:function(){if(!cancelled){var args=arguments,i,length,elem,type,_fired;if(fired){_fired=fired;fired=0;}
for(i=0,length=args.length;i<length;i++){elem=args[i];type=jQuery.type(elem);if(type==="array"){deferred.done.apply(deferred,elem);}else if(type==="function"){callbacks.push(elem);}}
if(_fired){deferred.resolveWith(_fired[0],_fired[1]);}}
return this;},resolveWith:function(context,args){if(!cancelled&&!fired&&!firing){args=args||[];firing=1;try{while(callbacks[0]){callbacks.shift().apply(context,args);}}
finally{fired=[context,args];firing=0;}}
return this;},resolve:function(){deferred.resolveWith(this,arguments);return this;},isResolved:function(){return!!(firing||fired);},cancel:function(){cancelled=1;callbacks=[];return this;}};return deferred;},Deferred:function(func){var deferred=jQuery._Deferred(),failDeferred=jQuery._Deferred(),promise;jQuery.extend(deferred,{then:function(doneCallbacks,failCallbacks){deferred.done(doneCallbacks).fail(failCallbacks);return this;},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(this,arguments);},fail:failDeferred.done,rejectWith:failDeferred.resolveWith,reject:failDeferred.resolve,isRejected:failDeferred.isResolved,pipe:function(fnDone,fnFail){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"]},function(handler,data){var fn=data[0],action=data[1],returned;if(jQuery.isFunction(fn)){deferred[handler](function(){returned=fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().then(newDefer.resolve,newDefer.reject);}else{newDefer[action+"With"](this===deferred?newDefer:this,[returned]);}});}else{deferred[handler](newDefer[action]);}});}).promise();},promise:function(obj){if(obj==null){if(promise){return promise;}
promise=obj={};}
var i=promiseMethods.length;while(i--){obj[promiseMethods[i]]=deferred[promiseMethods[i]];}
return obj;}});deferred.done(failDeferred.cancel).fail(deferred.cancel);delete deferred.cancel;if(func){func.call(deferred,deferred);}
return deferred;},when:function(firstParam){var args=arguments,i=0,length=args.length,count=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred();function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value;if(!(--count)){deferred.resolveWith(deferred,sliceDeferred.call(args,0));}};}
if(length>1){for(;i<length;i++){if(args[i]&&jQuery.isFunction(args[i].promise)){args[i].promise().then(resolveFunc(i),deferred.reject);}else{--count;}}
if(!count){deferred.resolveWith(deferred,args);}}else if(deferred!==firstParam){deferred.resolveWith(deferred,length?[firstParam]:[]);}
return deferred.promise();}});jQuery.support=(function(){var div=document.createElement("div"),documentElement=document.documentElement,all,a,select,opt,input,marginDiv,support,fragment,body,testElementParent,testElement,testElementStyle,tds,events,eventName,i,isSupported;div.setAttribute("className","t");div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";all=div.getElementsByTagName("*");a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a){return{};}
select=document.createElement("select");opt=select.appendChild(document.createElement("option"));input=div.getElementsByTagName("input")[0];support={leadingWhitespace:(div.firstChild.nodeType===3),tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:(a.getAttribute("href")==="/a"),opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:(input.value==="on"),optSelected:opt.selected,getSetAttribute:div.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};input.checked=true;support.noCloneChecked=input.cloneNode(true).checked;select.disabled=true;support.optDisabled=!opt.disabled;try{delete div.test;}catch(e){support.deleteExpando=false;}
if(!div.addEventListener&&div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function(){support.noCloneEvent=false;});div.cloneNode(true).fireEvent("onclick");}
input=document.createElement("input");input.value="t";input.setAttribute("type","radio");support.radioValue=input.value==="t";input.setAttribute("checked","checked");div.appendChild(input);fragment=document.createDocumentFragment();fragment.appendChild(div.firstChild);support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="";div.style.width=div.style.paddingLeft="1px";body=document.getElementsByTagName("body")[0];testElement=document.createElement(body?"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body){jQuery.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});}
for(i in testElementStyle){testElement.style[i]=testElementStyle[i];}
testElement.appendChild(div);testElementParent=body||documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);support.appendChecked=input.checked;support.boxModel=div.offsetWidth===2;if("zoom"in div.style){div.style.display="inline";div.style.zoom=1;support.inlineBlockNeedsLayout=(div.offsetWidth===2);div.style.display="";div.innerHTML="<div style='width:4px;'></div>";support.shrinkWrapBlocks=(div.offsetWidth!==2);}
div.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";tds=div.getElementsByTagName("td");isSupported=(tds[0].offsetHeight===0);tds[0].style.display="";tds[1].style.display="none";support.reliableHiddenOffsets=isSupported&&(tds[0].offsetHeight===0);div.innerHTML="";if(document.defaultView&&document.defaultView.getComputedStyle){marginDiv=document.createElement("div");marginDiv.style.width="0";marginDiv.style.marginRight="0";div.appendChild(marginDiv);support.reliableMarginRight=(parseInt((document.defaultView.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)===0;}
testElement.innerHTML="";testElementParent.removeChild(testElement);if(div.attachEvent){for(i in{submit:1,change:1,focusin:1}){eventName="on"+i;isSupported=(eventName in div);if(!isSupported){div.setAttribute(eventName,"return;");isSupported=(typeof div[eventName]==="function");}
support[i+"Bubbles"]=isSupported;}}
testElement=fragment=select=opt=body=marginDiv=div=input=null;return support;})();jQuery.boxModel=jQuery.support.boxModel;var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{"embed":true,"object":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000","applet":true},hasData:function(elem){elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando];return!!elem&&!isEmptyDataObject(elem);},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,ret,internalKey=jQuery.expando,getByName=typeof name==="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:elem[jQuery.expando]&&jQuery.expando;if((!id||(pvt&&id&&(cache[id]&&!cache[id][internalKey])))&&getByName&&data===undefined){return;}
if(!id){if(isNode){elem[jQuery.expando]=id=++jQuery.uuid;}else{id=jQuery.expando;}}
if(!cache[id]){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}}
if(typeof name==="object"||typeof name==="function"){if(pvt){cache[id][internalKey]=jQuery.extend(cache[id][internalKey],name);}else{cache[id]=jQuery.extend(cache[id],name);}}
thisCache=cache[id];if(pvt){if(!thisCache[internalKey]){thisCache[internalKey]={};}
thisCache=thisCache[internalKey];}
if(data!==undefined){thisCache[jQuery.camelCase(name)]=data;}
if(name==="events"&&!thisCache[name]){return thisCache[internalKey]&&thisCache[internalKey].events;}
if(getByName){ret=thisCache[name];if(ret==null){ret=thisCache[jQuery.camelCase(name)];}}else{ret=thisCache;}
return ret;},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem)){return;}
var thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(!cache[id]){return;}
if(name){thisCache=pvt?cache[id][internalKey]:cache[id];if(thisCache){if(!thisCache[name]){name=jQuery.camelCase(name);}
delete thisCache[name];if(!isEmptyDataObject(thisCache)){return;}}}
if(pvt){delete cache[id][internalKey];if(!isEmptyDataObject(cache[id])){return;}}
var internalCache=cache[id][internalKey];if(jQuery.support.deleteExpando||!cache.setInterval){delete cache[id];}else{cache[id]=null;}
if(internalCache){cache[id]={};if(!isNode){cache[id].toJSON=jQuery.noop;}
cache[id][internalKey]=internalCache;}else if(isNode){if(jQuery.support.deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}else{elem[jQuery.expando]=null;}}},_data:function(elem,name,data){return jQuery.data(elem,name,data,true);},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match){return!(match===true||elem.getAttribute("classid")!==match);}}
return true;}});jQuery.fn.extend({data:function(key,value){var data=null;if(typeof key==="undefined"){if(this.length){data=jQuery.data(this[0]);if(this[0].nodeType===1){var attr=this[0].attributes,name;for(var i=0,l=attr.length;i<l;i++){name=attr[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.substring(5));dataAttr(this[0],name,data[name]);}}}}
return data;}else if(typeof key==="object"){return this.each(function(){jQuery.data(this,key);});}
var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length){data=jQuery.data(this[0],key);data=dataAttr(this[0],key,data);}
return data===undefined&&parts[1]?this.data(parts[0]):data;}else{return this.each(function(){var $this=jQuery(this),args=[parts[0],value];$this.triggerHandler("setData"+parts[1]+"!",args);jQuery.data(this,key,value);$this.triggerHandler("changeData"+parts[1]+"!",args);});}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key);});}});function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:!jQuery.isNaN(data)?parseFloat(data):rbrace.test(data)?jQuery.parseJSON(data):data;}catch(e){}
jQuery.data(elem,key,data);}else{data=undefined;}}
return data;}
function isEmptyDataObject(obj){for(var name in obj){if(name!=="toJSON"){return false;}}
return true;}
function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery.data(elem,deferDataKey,undefined,true);if(defer&&(src==="queue"||!jQuery.data(elem,queueDataKey,undefined,true))&&(src==="mark"||!jQuery.data(elem,markDataKey,undefined,true))){setTimeout(function(){if(!jQuery.data(elem,queueDataKey,undefined,true)&&!jQuery.data(elem,markDataKey,undefined,true)){jQuery.removeData(elem,deferDataKey,true);defer.resolve();}},0);}}
jQuery.extend({_mark:function(elem,type){if(elem){type=(type||"fx")+"mark";jQuery.data(elem,type,(jQuery.data(elem,type,undefined,true)||0)+1,true);}},_unmark:function(force,elem,type){if(force!==true){type=elem;elem=force;force=false;}
if(elem){type=type||"fx";var key=type+"mark",count=force?0:((jQuery.data(elem,key,undefined,true)||1)-1);if(count){jQuery.data(elem,key,count,true);}else{jQuery.removeData(elem,key,true);handleQueueMarkDefer(elem,type,"mark");}}},queue:function(elem,type,data){if(elem){type=(type||"fx")+"queue";var q=jQuery.data(elem,type,undefined,true);if(data){if(!q||jQuery.isArray(data)){q=jQuery.data(elem,type,jQuery.makeArray(data),true);}else{q.push(data);}}
return q||[];}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),defer;if(fn==="inprogress"){fn=queue.shift();}
if(fn){if(type==="fx"){queue.unshift("inprogress");}
fn.call(elem,function(){jQuery.dequeue(elem,type);});}
if(!queue.length){jQuery.removeData(elem,type+"queue",true);handleQueueMarkDefer(elem,type,"queue");}}});jQuery.fn.extend({queue:function(type,data){if(typeof type!=="string"){data=type;type="fx";}
if(data===undefined){return jQuery.queue(this[0],type);}
return this.each(function(){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type);}});},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type);});},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type);},time);});},clearQueue:function(type){return this.queue(type||"fx",[]);},promise:function(type,object){if(typeof type!=="string"){object=type;type=undefined;}
type=type||"fx";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;function resolve(){if(!(--count)){defer.resolveWith(elements,[elements]);}}
while(i--){if((tmp=jQuery.data(elements[i],deferDataKey,undefined,true)||(jQuery.data(elements[i],queueDataKey,undefined,true)||jQuery.data(elements[i],markDataKey,undefined,true))&&jQuery.data(elements[i],deferDataKey,jQuery._Deferred(),true))){count++;tmp.done(resolve);}}
resolve();return defer.promise();}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,nodeHook,boolHook;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,name,value,true,jQuery.attr);},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name);});},prop:function(name,value){return jQuery.access(this,name,value,true,jQuery.prop);},removeProp:function(name){name=jQuery.propFix[name]||name;return this.each(function(){try{this[name]=undefined;delete this[name];}catch(e){}});},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className));});}
if(value&&typeof value==="string"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1){if(!elem.className&&classNames.length===1){elem.className=value;}else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++){if(!~setClass.indexOf(" "+classNames[c]+" ")){setClass+=classNames[c]+" ";}}
elem.className=jQuery.trim(setClass);}}}}
return this;},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className));});}
if((value&&typeof value==="string")||value===undefined){classNames=(value||"").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className){if(value){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ");}
elem.className=jQuery.trim(className);}else{elem.className="";}}}}
return this;},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal);});}
return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className);}}else if(type==="undefined"||type==="boolean"){if(this.className){jQuery._data(this,"__className__",this.className);}
this.className=this.className||value===false?"":jQuery._data(this,"__className__")||"";}});},hasClass:function(selector){var className=" "+selector+" ";for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true;}}
return false;},val:function(value){var hooks,ret,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.nodeName.toLowerCase()]||jQuery.valHooks[elem.type];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret;}
ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret;}
return undefined;}
var isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1){return;}
if(isFunction){val=value.call(this,i,self.val());}else{val=value;}
if(val==null){val="";}else if(typeof val==="number"){val+="";}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+"";});}
hooks=jQuery.valHooks[this.nodeName.toLowerCase()]||jQuery.valHooks[this.type];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val;}});}});jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text;}},select:{get:function(elem){var value,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null;}
for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value;}
values.push(value);}}
if(one&&!values.length&&options.length){return jQuery(options[index]).val();}
return values;},set:function(elem,value){var values=jQuery.makeArray(value);jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0;});if(!values.length){elem.selectedIndex=-1;}
return values;}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(elem,name,value,pass){var nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return undefined;}
if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value);}
if(!("getAttribute"in elem)){return jQuery.prop(elem,name,value);}
var ret,hooks,notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.attrFix[name]||name;hooks=jQuery.attrHooks[name];if(!hooks){if(rboolean.test(name)){hooks=boolHook;}else if(nodeHook){hooks=nodeHook;}}}
if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return undefined;}else if(hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{elem.setAttribute(name,""+value);return value;}}else if(hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null){return ret;}else{ret=elem.getAttribute(name);return ret===null?undefined:ret;}},removeAttr:function(elem,name){var propName;if(elem.nodeType===1){name=jQuery.attrFix[name]||name;jQuery.attr(elem,name,"");elem.removeAttribute(name);if(rboolean.test(name)&&(propName=jQuery.propFix[name]||name)in elem){elem[propName]=false;}}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed");}else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val;}
return value;}}},value:{get:function(elem,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.get(elem,name);}
return name in elem?elem.value:null;},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button")){return nodeHook.set(elem,value,name);}
elem.value=value;}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return undefined;}
var ret,hooks,notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name];}
if(value!==undefined){if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret;}else{return(elem[name]=value);}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret;}else{return elem[name];}}},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined;}}}});jQuery.attrHooks.tabIndex=jQuery.propHooks.tabIndex;boolHook={get:function(elem,name){var attrNode;return jQuery.prop(elem,name)===true||(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==false?name.toLowerCase():undefined;},set:function(elem,value,name){var propName;if(value===false){jQuery.removeAttr(elem,name);}else{propName=jQuery.propFix[name]||name;if(propName in elem){elem[propName]=true;}
elem.setAttribute(name,name.toLowerCase());}
return name;}};if(!jQuery.support.getSetAttribute){nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;ret=elem.getAttributeNode(name);return ret&&ret.nodeValue!==""?ret.nodeValue:undefined;},set:function(elem,value,name){var ret=elem.getAttributeNode(name);if(!ret){ret=document.createAttribute(name);elem.setAttributeNode(ret);}
return(ret.nodeValue=value+"");}};jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value===""){elem.setAttribute(name,"auto");return value;}}});});}
if(!jQuery.support.hrefNormalized){jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret;}});});}
if(!jQuery.support.style){jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined;},set:function(elem,value){return(elem.style.cssText=""+value);}};}
if(!jQuery.support.optSelected){jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex;}}
return null;}});}
if(!jQuery.support.checkOn){jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value;}};});}
jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value)){return(elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0);}}});});var rnamespaces=/\.(.*)$/,rformElems=/^(?:textarea|input|select)$/i,rperiod=/\./g,rspaces=/ /g,rescape=/[^\w\s.|`]/g,fcleanup=function(nm){return nm.replace(rescape,"\\$&");};jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType===3||elem.nodeType===8){return;}
if(handler===false){handler=returnFalse;}else if(!handler){return;}
var handleObjIn,handleObj;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;}
if(!handler.guid){handler.guid=jQuery.guid++;}
var elemData=jQuery._data(elem);if(!elemData){return;}
var events=elemData.events,eventHandle=elemData.handle;if(!events){elemData.events=events={};}
if(!eventHandle){elemData.handle=eventHandle=function(e){return typeof jQuery!=="undefined"&&(!e||jQuery.event.triggered!==e.type)?jQuery.event.handle.apply(eventHandle.elem,arguments):undefined;};}
eventHandle.elem=elem;types=types.split(" ");var type,i=0,namespaces;while((type=types[i++])){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data};if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();handleObj.namespace=namespaces.slice(0).sort().join(".");}else{namespaces=[];handleObj.namespace="";}
handleObj.type=type;if(!handleObj.guid){handleObj.guid=handler.guid;}
var handlers=events[type],special=jQuery.event.special[type]||{};if(!handlers){handlers=events[type]=[];if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false);}else if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle);}}}
if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid;}}
handlers.push(handleObj);jQuery.event.global[type]=true;}
elem=null;},global:{},remove:function(elem,types,handler,pos){if(elem.nodeType===3||elem.nodeType===8){return;}
if(handler===false){handler=returnFalse;}
var ret,type,fn,j,i=0,all,namespaces,namespace,special,eventType,handleObj,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem),events=elemData&&elemData.events;if(!elemData||!events){return;}
if(types&&types.type){handler=types.handler;types=types.type;}
if(!types||typeof types==="string"&&types.charAt(0)==="."){types=types||"";for(type in events){jQuery.event.remove(elem,type+types);}
return;}
types=types.split(" ");while((type=types[i++])){origType=type;handleObj=null;all=type.indexOf(".")<0;namespaces=[];if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+
jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)");}
eventType=events[type];if(!eventType){continue;}
if(!handler){for(j=0;j<eventType.length;j++){handleObj=eventType[j];if(all||namespace.test(handleObj.namespace)){jQuery.event.remove(elem,origType,handleObj.handler,j);eventType.splice(j--,1);}}
continue;}
special=jQuery.event.special[type]||{};for(j=pos||0;j<eventType.length;j++){handleObj=eventType[j];if(handler.guid===handleObj.guid){if(all||namespace.test(handleObj.namespace)){if(pos==null){eventType.splice(j--,1);}
if(special.remove){special.remove.call(elem,handleObj);}}
if(pos!=null){break;}}}
if(eventType.length===0||pos!=null&&eventType.length===1){if(!special.teardown||special.teardown.call(elem,namespaces)===false){jQuery.removeEvent(elem,type,elemData.handle);}
ret=null;delete events[type];}}
if(jQuery.isEmptyObject(events)){var handle=elemData.handle;if(handle){handle.elem=null;}
delete elemData.events;delete elemData.handle;if(jQuery.isEmptyObject(elemData)){jQuery.removeData(elem,undefined,true);}}},customEvent:{"getData":true,"setData":true,"changeData":true},trigger:function(event,data,elem,onlyHandlers){var type=event.type||event,namespaces=[],exclusive;if(type.indexOf("!")>=0){type=type.slice(0,-1);exclusive=true;}
if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort();}
if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type]){return;}
event=typeof event==="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type);event.type=type;event.exclusive=exclusive;event.namespace=namespaces.join(".");event.namespace_re=new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)");if(onlyHandlers||!elem){event.preventDefault();event.stopPropagation();}
if(!elem){jQuery.each(jQuery.cache,function(){var internalKey=jQuery.expando,internalCache=this[internalKey];if(internalCache&&internalCache.events&&internalCache.events[type]){jQuery.event.trigger(event,data,internalCache.handle.elem);}});return;}
if(elem.nodeType===3||elem.nodeType===8){return;}
event.result=undefined;event.target=elem;data=data!=null?jQuery.makeArray(data):[];data.unshift(event);var cur=elem,ontype=type.indexOf(":")<0?"on"+type:"";do{var handle=jQuery._data(cur,"handle");event.currentTarget=cur;if(handle){handle.apply(cur,data);}
if(ontype&&jQuery.acceptData(cur)&&cur[ontype]&&cur[ontype].apply(cur,data)===false){event.result=false;event.preventDefault();}
cur=cur.parentNode||cur.ownerDocument||cur===event.target.ownerDocument&&window;}while(cur&&!event.isPropagationStopped());if(!event.isDefaultPrevented()){var old,special=jQuery.event.special[type]||{};if((!special._default||special._default.call(elem.ownerDocument,event)===false)&&!(type==="click"&&jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)){try{if(ontype&&elem[type]){old=elem[ontype];if(old){elem[ontype]=null;}
jQuery.event.triggered=type;elem[type]();}}catch(ieError){}
if(old){elem[ontype]=old;}
jQuery.event.triggered=undefined;}}
return event.result;},handle:function(event){event=jQuery.event.fix(event||window.event);var handlers=((jQuery._data(this,"events")||{})[event.type]||[]).slice(0),run_all=!event.exclusive&&!event.namespace,args=Array.prototype.slice.call(arguments,0);args[0]=event;event.currentTarget=this;for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(run_all||event.namespace_re.test(handleObj.namespace)){event.handler=handleObj.handler;event.data=handleObj.data;event.handleObj=handleObj;var ret=handleObj.handler.apply(this,args);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation();}}
if(event.isImmediatePropagationStopped()){break;}}}
return event.result;},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[jQuery.expando]){return event;}
var originalEvent=event;event=jQuery.Event(originalEvent);for(var i=this.props.length,prop;i;){prop=this.props[--i];event[prop]=originalEvent[prop];}
if(!event.target){event.target=event.srcElement||document;}
if(event.target.nodeType===3){event.target=event.target.parentNode;}
if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement;}
if(event.pageX==null&&event.clientX!=null){var eventDocument=event.target.ownerDocument||document,doc=eventDocument.documentElement,body=eventDocument.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0);}
if(event.which==null&&(event.charCode!=null||event.keyCode!=null)){event.which=event.charCode!=null?event.charCode:event.keyCode;}
if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey;}
if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)));}
return event;},guid:1E8,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,liveConvert(handleObj.origType,handleObj.selector),jQuery.extend({},handleObj,{handler:liveHandler,guid:handleObj.handler.guid}));},remove:function(handleObj){jQuery.event.remove(this,liveConvert(handleObj.origType,handleObj.selector),handleObj);}},beforeunload:{setup:function(data,namespaces,eventHandle){if(jQuery.isWindow(this)){this.onbeforeunload=eventHandle;}},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null;}}}}};jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false);}}:function(elem,type,handle){if(elem.detachEvent){elem.detachEvent("on"+type,handle);}};jQuery.Event=function(src,props){if(!this.preventDefault){return new jQuery.Event(src,props);}
if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=(src.defaultPrevented||src.returnValue===false||src.getPreventDefault&&src.getPreventDefault())?returnTrue:returnFalse;}else{this.type=src;}
if(props){jQuery.extend(this,props);}
this.timeStamp=jQuery.now();this[jQuery.expando]=true;};function returnFalse(){return false;}
function returnTrue(){return true;}
jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return;}
if(e.stopPropagation){e.stopPropagation();}
e.cancelBubble=true;},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation();},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var withinElement=function(event){var related=event.relatedTarget,inside=false,eventType=event.type;event.type=event.data;if(related!==this){if(related){inside=jQuery.contains(this,related);}
if(!inside){jQuery.event.handle.apply(this,arguments);event.type=eventType;}}},delegate=function(event){event.type=event.data;jQuery.event.handle.apply(this,arguments);};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig);},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement);}};});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(data,namespaces){if(!jQuery.nodeName(this,"form")){jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.type:"";if((type==="submit"||type==="image")&&jQuery(elem).closest("form").length){trigger("submit",this,arguments);}});jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.type:"";if((type==="text"||type==="password")&&jQuery(elem).closest("form").length&&e.keyCode===13){trigger("submit",this,arguments);}});}else{return false;}},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit");}};}
if(!jQuery.support.changeBubbles){var changeFilters,getVal=function(elem){var type=jQuery.nodeName(elem,"input")?elem.type:"",val=elem.value;if(type==="radio"||type==="checkbox"){val=elem.checked;}else if(type==="select-multiple"){val=elem.selectedIndex>-1?jQuery.map(elem.options,function(elem){return elem.selected;}).join("-"):"";}else if(jQuery.nodeName(elem,"select")){val=elem.selectedIndex;}
return val;},testChange=function testChange(e){var elem=e.target,data,val;if(!rformElems.test(elem.nodeName)||elem.readOnly){return;}
data=jQuery._data(elem,"_change_data");val=getVal(elem);if(e.type!=="focusout"||elem.type!=="radio"){jQuery._data(elem,"_change_data",val);}
if(data===undefined||val===data){return;}
if(data!=null||val){e.type="change";e.liveFired=undefined;jQuery.event.trigger(e,arguments[1],elem);}};jQuery.event.special.change={filters:{focusout:testChange,beforedeactivate:testChange,click:function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";if(type==="radio"||type==="checkbox"||jQuery.nodeName(elem,"select")){testChange.call(this,e);}},keydown:function(e){var elem=e.target,type=jQuery.nodeName(elem,"input")?elem.type:"";if((e.keyCode===13&&!jQuery.nodeName(elem,"textarea"))||(e.keyCode===32&&(type==="checkbox"||type==="radio"))||type==="select-multiple"){testChange.call(this,e);}},beforeactivate:function(e){var elem=e.target;jQuery._data(elem,"_change_data",getVal(elem));}},setup:function(data,namespaces){if(this.type==="file"){return false;}
for(var type in changeFilters){jQuery.event.add(this,type+".specialChange",changeFilters[type]);}
return rformElems.test(this.nodeName);},teardown:function(namespaces){jQuery.event.remove(this,".specialChange");return rformElems.test(this.nodeName);}};changeFilters=jQuery.event.special.change.filters;changeFilters.focus=changeFilters.beforeactivate;}
function trigger(type,elem,args){var event=jQuery.extend({},args[0]);event.type=type;event.originalEvent={};event.liveFired=undefined;jQuery.event.handle.call(elem,event);if(event.isDefaultPrevented()){args[0].preventDefault();}}
if(!jQuery.support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0;jQuery.event.special[fix]={setup:function(){if(attaches++===0){document.addEventListener(orig,handler,true);}},teardown:function(){if(--attaches===0){document.removeEventListener(orig,handler,true);}}};function handler(donor){var e=jQuery.event.fix(donor);e.type=fix;e.originalEvent={};jQuery.event.trigger(e,null,e.target);if(e.isDefaultPrevented()){donor.preventDefault();}}});}
jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){var handler;if(typeof type==="object"){for(var key in type){this[name](key,data,type[key],fn);}
return this;}
if(arguments.length===2||data===false){fn=data;data=undefined;}
if(name==="one"){handler=function(event){jQuery(this).unbind(event,handler);return fn.apply(this,arguments);};handler.guid=fn.guid||jQuery.guid++;}else{handler=fn;}
if(type==="unload"&&name!=="one"){this.one(type,data,fn);}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.add(this[i],type,handler,data);}}
return this;};});jQuery.fn.extend({unbind:function(type,fn){if(typeof type==="object"&&!type.preventDefault){for(var key in type){this.unbind(key,type[key]);}}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.remove(this[i],type,fn);}}
return this;},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector);},undelegate:function(selector,types,fn){if(arguments.length===0){return this.unbind("live");}else{return this.die(types,null,fn,selector);}},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this);});},triggerHandler:function(type,data){if(this[0]){return jQuery.event.trigger(type,data,this[0],true);}},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;jQuery.data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false;};toggler.guid=guid;while(i<args.length){args[i++].guid=guid;}
return this.click(toggler);},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver);}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,i=0,match,namespaces,preType,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if(typeof types==="object"&&!types.preventDefault){for(var key in types){context[name](key,data,types[key],selector);}
return this;}
if(name==="die"&&!types&&origSelector&&origSelector.charAt(0)==="."){context.unbind(origSelector);return this;}
if(data===false||jQuery.isFunction(data)){fn=data||returnFalse;data=undefined;}
types=(types||"").split(" ");while((type=types[i++])!=null){match=rnamespaces.exec(type);namespaces="";if(match){namespaces=match[0];type=type.replace(rnamespaces,"");}
if(type==="hover"){types.push("mouseenter"+namespaces,"mouseleave"+namespaces);continue;}
preType=type;if(liveMap[type]){types.push(liveMap[type]+namespaces);type=type+namespaces;}else{type=(liveMap[type]||type)+namespaces;}
if(name==="live"){for(var j=0,l=context.length;j<l;j++){jQuery.event.add(context[j],"live."+liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType});}}else{context.unbind("live."+liveConvert(type,selector),fn);}}
return this;};});function liveHandler(event){var stop,maxLevel,related,match,handleObj,elem,j,i,l,data,close,namespace,ret,elems=[],selectors=[],events=jQuery._data(this,"events");if(event.liveFired===this||!events||!events.live||event.target.disabled||event.button&&event.type==="click"){return;}
if(event.namespace){namespace=new RegExp("(^|\\.)"+event.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)");}
event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++){handleObj=live[j];if(handleObj.origType.replace(rnamespaces,"")===event.type){selectors.push(handleObj.selector);}else{live.splice(j--,1);}}
match=jQuery(event.target).closest(selectors,event.currentTarget);for(i=0,l=match.length;i<l;i++){close=match[i];for(j=0;j<live.length;j++){handleObj=live[j];if(close.selector===handleObj.selector&&(!namespace||namespace.test(handleObj.namespace))&&!close.elem.disabled){elem=close.elem;related=null;if(handleObj.preType==="mouseenter"||handleObj.preType==="mouseleave"){event.type=handleObj.preType;related=jQuery(event.relatedTarget).closest(handleObj.selector)[0];if(related&&jQuery.contains(elem,related)){related=elem;}}
if(!related||related!==elem){elems.push({elem:elem,handleObj:handleObj,level:close.level});}}}}
for(i=0,l=elems.length;i<l;i++){match=elems[i];if(maxLevel&&match.level>maxLevel){break;}
event.currentTarget=match.elem;event.data=match.handleObj.data;event.handleObj=match.handleObj;ret=match.handleObj.origHandler.apply(match.elem,arguments);if(ret===false||event.isPropagationStopped()){maxLevel=match.level;if(ret===false){stop=false;}
if(event.isImmediatePropagationStopped()){break;}}}
return stop;}
function liveConvert(type,selector){return(type&&type!=="*"?type+".":"")+selector.replace(rperiod,"`").replace(rspaces,"&");}
jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){if(fn==null){fn=data;data=null;}
return arguments.length>0?this.bind(name,data,fn):this.trigger(name);};if(jQuery.attrFn){jQuery.attrFn[name]=true;}});(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true,rBackslash=/\\/g,rNonWord=/\W/;[0,0].sort(function(){baseHasDuplicate=false;return 0;});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[];}
if(!selector||typeof selector!=="string"){return results;}
var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break;}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context);}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift();}
set=posProcess(selector,set);}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0];}
if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set);}else{prune=false;}
while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur="";}else{pop=parts.pop();}
if(pop==null){pop=context;}
Expr.relative[cur](checkSet,pop,contextXML);}}else{checkSet=parts=[];}}
if(!checkSet){checkSet=set;}
if(!checkSet){Sizzle.error(cur||selector);}
if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet);}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i]);}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i]);}}}}else{makeArray(checkSet,results);}
if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results);}
return results;};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1);}}}}
return results;};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set);};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0;};Sizzle.find=function(expr,context,isXML){var set;if(!expr){return[];}
for(var i=0,l=Expr.order.length;i<l;i++){var match,type=Expr.order[i];if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break;}}}}
if(!set){set=typeof context.getElementsByTagName!=="undefined"?context.getElementsByTagName("*"):[];}
return{set:set,expr:expr};};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var found,item,filter=Expr.filter[type],left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue;}
if(curLoop===result){result=[];}
if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true;}else if(match===true){continue;}}
if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true;}else{curLoop[i]=false;}}else if(pass){result.push(item);anyFound=true;}}}}
if(found!==undefined){if(!inplace){curLoop=result;}
expr=expr.replace(Expr.match[type],"");if(!anyFound){return[];}
break;}}}
if(expr===old){if(anyFound==null){Sizzle.error(expr);}else{break;}}
old=expr;}
return curLoop;};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg;};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href");},type:function(elem){return elem.getAttribute("type");}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase();}
for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}
checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part;}}
if(isPartStrNotTag){Sizzle.filter(part,checkSet,true);}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false;}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part;}}
if(isPartStr){Sizzle.filter(part,checkSet,true);}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML);},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!rNonWord.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck;}
checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML);}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[];}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i]);}}
return ret.length===0?null:ret;}},TAG:function(match,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(match[1]);}}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,"")+" ";if(isXML){return match;}
for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem);}}else if(inplace){curLoop[i]=false;}}}
return false;},ID:function(match){return match[1].replace(rBackslash,"");},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase();},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0]);}
match[2]=match[2].replace(/^\+|\s*/g,'');var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0;}
else if(match[2]){Sizzle.error(match[0]);}
match[0]=done++;return match;},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name];}
match[4]=(match[4]||match[5]||"").replace(rBackslash,"");if(match[2]==="~="){match[4]=" "+match[4]+" ";}
return match;},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop);}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret);}
return false;}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true;}
return match;},POS:function(match){match.unshift(true);return match;}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden";},disabled:function(elem){return elem.disabled===true;},checked:function(elem){return elem.checked===true;},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex;}
return elem.selected===true;},parent:function(elem){return!!elem.firstChild;},empty:function(elem){return!elem.firstChild;},has:function(elem,i,match){return!!Sizzle(match[3],elem).length;},header:function(elem){return(/h\d/i).test(elem.nodeName);},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===type||attr===null);},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type;},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type;},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type;},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type;},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"submit"===elem.type;},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type;},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type;},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button";},input:function(elem){return(/input|select|textarea|button/i).test(elem.nodeName);},focus:function(elem){return elem===elem.ownerDocument.activeElement;}},setFilters:{first:function(elem,i){return i===0;},last:function(elem,i,match,array){return i===array.length-1;},even:function(elem,i){return i%2===0;},odd:function(elem,i){return i%2===1;},lt:function(elem,i,match){return i<match[3]-0;},gt:function(elem,i,match){return i>match[3]-0;},nth:function(elem,i,match){return match[3]-0===i;},eq:function(elem,i,match){return match[3]-0===i;}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array);}else if(name==="contains"){return(elem.textContent||elem.innerText||Sizzle.getText([elem])||"").indexOf(match[3])>=0;}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false;}}
return true;}else{Sizzle.error(name);}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false;}}
if(type==="first"){return true;}
node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false;}}
return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true;}
var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count;}}
parent.sizcache=doneName;}
var diff=elem.nodeIndex-last;if(first===0){return diff===0;}else{return(diff%first===0&&diff/first>=0);}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match;},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match;},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1;},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false;},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array);}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1);};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+(/(?![^\[]*\])(?![^\(]*\))/.source));Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));}
var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results;}
return array;};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType;}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array);}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i]);}}else{for(;array[i];i++){ret.push(array[i]);}}}
return ret;};}
var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}
if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1;}
return a.compareDocumentPosition(b)&4?-1:1;};}else{sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0;}else if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex;}
var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup){return siblingCheck(a,b);}else if(!aup){return-1;}else if(!bup){return 1;}
while(cur){ap.unshift(cur);cur=cur.parentNode;}
cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode;}
al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i]);}}
return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1);};siblingCheck=function(a,b,ret){if(a===b){return ret;}
var cur=a.nextSibling;while(cur){if(cur===b){return-1;}
cur=cur.nextSibling;}
return 1;};}
Sizzle.getText=function(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue;}else if(elem.nodeType!==8){ret+=Sizzle.getText(elem.childNodes);}}
return ret;};(function(){var form=document.createElement("div"),id="script"+(new Date()).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[];}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match;};}
root.removeChild(form);root=form=null;})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i]);}}
results=tmp;}
return results;};}
div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2);};}
div=null;})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return;}
Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1]){return makeArray(context.getElementsByTagName(query),extra);}else if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName){return makeArray(context.getElementsByClassName(match[2]),extra);}}
if(context.nodeType===9){if(query==="body"&&context.body){return makeArray([context.body],extra);}else if(match&&match[3]){var elem=context.getElementById(match[3]);if(elem&&elem.parentNode){if(elem.id===match[3]){return makeArray([elem],extra);}}else{return makeArray([],extra);}}
try{return makeArray(context.querySelectorAll(query),extra);}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old){context.setAttribute("id",nid);}else{nid=nid.replace(/'/g,"\\$&");}
if(relativeHierarchySelector&&hasParent){context=context.parentNode;}
try{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra);}}catch(pseudoError){}finally{if(!old){oldContext.removeAttribute("id");}}}}
return oldSizzle(query,context,extra,seed);};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop];}
div=null;})();}
(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle");}catch(pseudoError){pseudoWorks=true;}
Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11){return ret;}}}catch(e){}}
return Sizzle(expr,null,null,[node]).length>0;};}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return;}
div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return;}
Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1]);}};div=null;})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(elem.nodeName.toLowerCase()===cur){match=elem;break;}
elem=elem[dir];}
checkSet[i]=match;}}}
function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break;}
if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i;}
if(typeof cur!=="string"){if(elem===cur){match=true;break;}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break;}}
elem=elem[dir];}
checkSet[i]=match;}}}
if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true);};}else if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16);};}else{Sizzle.contains=function(){return false;};}
Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false;};var posProcess=function(selector,context){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"");}
selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet);}
return Sizzle.filter(later,tmpSet);};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.POS,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!=="string"){return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++){if(jQuery.contains(self[i],this)){return true;}}});}
var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(n=length;n<ret.length;n++){for(r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break;}}}}}
return ret;},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true;}}});},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector);},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector);},is:function(selector){return!!selector&&(typeof selector==="string"?jQuery.filter(selector,this).length>0:this.filter(selector).length>0);},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var match,selector,matches={},level=1;if(cur&&selectors.length){for(i=0,l=selectors.length;i<l;i++){selector=selectors[i];if(!matches[selector]){matches[selector]=POS.test(selector)?jQuery(selector,context||this.context):selector;}}
while(cur&&cur.ownerDocument&&cur!==context){for(selector in matches){match=matches[selector];if(match.jquery?match.index(cur)>-1:jQuery(cur).is(match)){ret.push({selector:selector,elem:cur,level:level});}}
cur=cur.parentNode;level++;}}
return ret;}
var pos=POS.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break;}else{cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11){break;}}}}
ret=ret.length>1?jQuery.unique(ret):ret;return this.pushStack(ret,"closest",selectors);},index:function(elem){if(!elem){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1;}
if(typeof elem==="string"){return jQuery.inArray(this[0],jQuery(elem));}
return jQuery.inArray(elem.jquery?elem[0]:elem,this);},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all));},andSelf:function(){return this.add(this.prevObject);}});function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11;}
jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null;},parents:function(elem){return jQuery.dir(elem,"parentNode");},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until);},next:function(elem){return jQuery.nth(elem,2,"nextSibling");},prev:function(elem){return jQuery.nth(elem,2,"previousSibling");},nextAll:function(elem){return jQuery.dir(elem,"nextSibling");},prevAll:function(elem){return jQuery.dir(elem,"previousSibling");},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until);},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until);},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem);},children:function(elem){return jQuery.sibling(elem.firstChild);},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes);}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until),args=slice.call(arguments);if(!runtil.test(name)){selector=until;}
if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret);}
ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse();}
return this.pushStack(ret,name,args.join(","));};});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")";}
return elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems);},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur);}
cur=cur[dir];}
return matched;},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break;}}
return cur;},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n);}}
return r;}});function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep;});}else if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep;});}else if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1;});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep);}else{qualifier=jQuery.filter(qualifier,filtered);}}
return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep;});}
var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<(?:script|object|embed|option|style)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"];}
jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text)){return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()));});}
if(typeof text!=="object"&&text!==undefined){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text));}
return jQuery.text(this);},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i));});}
if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0]);}
wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild;}
return elem;}).append(this);}
return this;},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i));});}
return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html);}else{self.append(html);}});},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html);});},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes);}}).end();},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem);}});},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild);}});},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this);});}else if(arguments.length){var set=jQuery(arguments[0]);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments);}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling);});}else if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery(arguments[0]).toArray());return set;}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem]);}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}}
return this;},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));}
while(elem.firstChild){elem.removeChild(elem.firstChild);}}
return this;},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents);});},html:function(value){if(value===undefined){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(rinlinejQuery,""):null;}else if(typeof value==="string"&&!rnocache.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1){jQuery.cleanData(this[i].getElementsByTagName("*"));this[i].innerHTML=value;}}}catch(e){this.empty().append(value);}}else if(jQuery.isFunction(value)){this.each(function(i){var self=jQuery(this);self.html(value.call(this,i,self.html()));});}else{this.empty().append(value);}
return this;},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old));});}
if(typeof value!=="string"){value=jQuery(value).detach();}
return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value);}else{jQuery(parent).append(value);}});}else{return this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this;}},detach:function(selector){return this.remove(selector,true);},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true);});}
if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback);});}
if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent};}else{results=jQuery.buildFragment(args,this,scripts);}
fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild;}else{first=fragment.firstChild;}
if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++){callback.call(table?root(this[i],first):this[i],results.cacheable||(l>1&&i<lastIndex)?jQuery.clone(fragment,true,true):fragment);}}
if(scripts.length){jQuery.each(scripts,evalScript);}}
return this;}});function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem;}
function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src)){return;}
var internalKey=jQuery.expando,oldData=jQuery.data(src),curData=jQuery.data(dest,oldData);if((oldData=oldData[internalKey])){var events=oldData.events;curData=curData[internalKey]=jQuery.extend({},oldData);if(events){delete curData.handle;curData.events={};for(var type in events){for(var i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type+(events[type][i].namespace?".":"")+events[type][i].namespace,events[type][i],events[type][i].data);}}}}}
function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1){return;}
if(dest.clearAttributes){dest.clearAttributes();}
if(dest.mergeAttributes){dest.mergeAttributes(src);}
nodeName=dest.nodeName.toLowerCase();if(nodeName==="object"){dest.outerHTML=src.outerHTML;}else if(nodeName==="input"&&(src.type==="checkbox"||src.type==="radio")){if(src.checked){dest.defaultChecked=dest.checked=src.checked;}
if(dest.value!==src.value){dest.value=src.value;}}else if(nodeName==="option"){dest.selected=src.defaultSelected;}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue;}
dest.removeAttribute(jQuery.expando);}
jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc;if(nodes&&nodes[0]){doc=nodes[0].ownerDocument||nodes[0];}
if(!doc.createDocumentFragment){doc=document;}
if(args.length===1&&typeof args[0]==="string"&&args[0].length<512&&doc===document&&args[0].charAt(0)==="<"&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))){cacheable=true;cacheresults=jQuery.fragments[args[0]];if(cacheresults&&cacheresults!==1){fragment=cacheresults;}}
if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts);}
if(cacheable){jQuery.fragments[args[0]]=cacheresults?fragment:1;}
return{fragment:fragment,cacheable:cacheable};};jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this;}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
return this.pushStack(ret,name,insert.selector);}};});function getAll(elem){if("getElementsByTagName"in elem){return elem.getElementsByTagName("*");}else if("querySelectorAll"in elem){return elem.querySelectorAll("*");}else{return[];}}
function fixDefaultChecked(elem){if(elem.type==="checkbox"||elem.type==="radio"){elem.defaultChecked=elem.checked;}}
function findInputs(elem){if(jQuery.nodeName(elem,"input")){fixDefaultChecked(elem);}else if("getElementsByTagName"in elem){jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked);}}
jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var clone=elem.cloneNode(true),srcElements,destElements,i;if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone);srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){if(destElements[i]){cloneFixAttributes(srcElements[i],destElements[i]);}}}
if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem);destElements=getAll(clone);for(i=0;srcElements[i];++i){cloneCopyEvent(srcElements[i],destElements[i]);}}}
srcElements=destElements=null;return clone;},clean:function(elems,context,fragment,scripts){var checkScriptType;context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document;}
var ret=[],j;for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+="";}
if(!elem){continue;}
if(typeof elem==="string"){if(!rhtml.test(elem)){elem=context.createTextNode(elem);}else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild;}
if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j]);}}}
if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild);}
elem=div.childNodes;}}
var len;if(!jQuery.support.appendChecked){if(elem[0]&&typeof(len=elem.length)==="number"){for(j=0;j<len;j++){findInputs(elem[j]);}}else{findInputs(elem);}}
if(elem.nodeType){ret.push(elem);}else{ret=jQuery.merge(ret,elem);}}
if(fragment){checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type);};for(i=0;ret[i];i++){if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||ret[i].type.toLowerCase()==="text/javascript")){scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i]);}else{if(ret[i].nodeType===1){var jsTags=jQuery.grep(ret[i].getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags));}
fragment.appendChild(ret[i]);}}}
return ret;},cleanData:function(elems){var data,id,cache=jQuery.cache,internalKey=jQuery.expando,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){continue;}
id=elem[jQuery.expando];if(id){data=cache[id]&&cache[id][internalKey];if(data&&data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type);}else{jQuery.removeEvent(elem,type,data.handle);}}
if(data.handle){data.handle.elem=null;}}
if(deleteExpando){delete elem[jQuery.expando];}else if(elem.removeAttribute){elem.removeAttribute(jQuery.expando);}
delete cache[id];}}}});function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"});}else{jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/"));}
if(elem.parentNode){elem.parentNode.removeChild(elem);}}
var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,rrelNum=/^([\-+])=([\-+.\de]+)/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){if(arguments.length===2&&value===undefined){return this;}
return jQuery.access(this,name,value,true,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name);});};jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity","opacity");return ret===""?"1":ret;}else{return elem.style.opacity;}}}},cssNumber:{"fillOpacity":true,"fontWeight":true,"lineHeight":true,"opacity":true,"orphans":true,"widows":true,"zIndex":true,"zoom":true},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return;}
var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(+(ret[1]+1)*+ret[2])+parseFloat(jQuery.css(elem,name));type="number";}
if(value==null||type==="number"&&isNaN(value)){return;}
if(type==="number"&&!jQuery.cssNumber[origName]){value+="px";}
if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value))!==undefined){try{style[name]=value;}catch(e){}}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret;}
return style[name];}},css:function(elem,name,extra){var ret,hooks;name=jQuery.camelCase(name);hooks=jQuery.cssHooks[name];name=jQuery.cssProps[name]||name;if(name==="cssFloat"){name="float";}
if(hooks&&"get"in hooks&&(ret=hooks.get(elem,true,extra))!==undefined){return ret;}else if(curCSS){return curCSS(elem,name);}},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name];}
callback.call(elem);for(name in options){elem.style[name]=old[name];}}});jQuery.curCSS=jQuery.css;jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){var val;if(computed){if(elem.offsetWidth!==0){return getWH(elem,name,extra);}else{jQuery.swap(elem,cssShow,function(){val=getWH(elem,name,extra);});}
return val;}},set:function(elem,value){if(rnumpx.test(value)){value=parseFloat(value);if(value>=0){return value+"px";}}else{return value;}}};});if(!jQuery.support.opacity){jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":computed?"1":"";},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNaN(value)?"":"alpha(opacity="+value*100+")",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter){return;}}
style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity;}};}
jQuery(function(){if(!jQuery.support.reliableMarginRight){jQuery.cssHooks.marginRight={get:function(elem,computed){var ret;jQuery.swap(elem,{"display":"inline-block"},function(){if(computed){ret=curCSS(elem,"margin-right","marginRight");}else{ret=elem.style.marginRight;}});return ret;}};}});if(document.defaultView&&document.defaultView.getComputedStyle){getComputedStyle=function(elem,name){var ret,defaultView,computedStyle;name=name.replace(rupper,"-$1").toLowerCase();if(!(defaultView=elem.ownerDocument.defaultView)){return undefined;}
if((computedStyle=defaultView.getComputedStyle(elem,null))){ret=computedStyle.getPropertyValue(name);if(ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem)){ret=jQuery.style(elem,name);}}
return ret;};}
if(document.documentElement.currentStyle){currentStyle=function(elem,name){var left,ret=elem.currentStyle&&elem.currentStyle[name],rsLeft=elem.runtimeStyle&&elem.runtimeStyle[name],style=elem.style;if(!rnumpx.test(ret)&&rnum.test(ret)){left=style.left;if(rsLeft){elem.runtimeStyle.left=elem.currentStyle.left;}
style.left=name==="fontSize"?"1em":(ret||0);ret=style.pixelLeft+"px";style.left=left;if(rsLeft){elem.runtimeStyle.left=rsLeft;}}
return ret===""?"auto":ret;};}
curCSS=getComputedStyle||currentStyle;function getWH(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,which=name==="width"?cssWidth:cssHeight;if(val>0){if(extra!=="border"){jQuery.each(which,function(){if(!extra){val-=parseFloat(jQuery.css(elem,"padding"+this))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+this))||0;}else{val-=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0;}});}
return val+"px";}
val=curCSS(elem,name,name);if(val<0||val==null){val=elem.style[name]||0;}
val=parseFloat(val)||0;if(extra){jQuery.each(which,function(){val+=parseFloat(jQuery.css(elem,"padding"+this))||0;if(extra!=="padding"){val+=parseFloat(jQuery.css(elem,"border"+this+"Width"))||0;}
if(extra==="margin"){val+=parseFloat(jQuery.css(elem,extra+this))||0;}});}
return val+"px";}
if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return(width===0&&height===0)||(!jQuery.support.reliableHiddenOffsets&&(elem.style.display||jQuery.css(elem,"display"))==="none");};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem);};}
var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href;}catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*";}
if(jQuery.isFunction(func)){var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;for(;i<length;i++){dataType=dataTypes[i];placeBefore=/^\+/.test(dataType);if(placeBefore){dataType=dataType.substr(1)||"*";}
list=structure[dataType]=structure[dataType]||[];list[placeBefore?"unshift":"push"](func);}}};}
function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0];inspected=inspected||{};inspected[dataType]=true;var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=(structure===prefilters),selection;for(;i<length&&(executeOnly||!selection);i++){selection=list[i](options,originalOptions,jqXHR);if(typeof selection==="string"){if(!executeOnly||inspected[selection]){selection=undefined;}else{options.dataTypes.unshift(selection);selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected);}}}
if((executeOnly||!selection)&&!inspected["*"]){selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected);}
return selection;}
function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:(deep||(deep={})))[key]=src[key];}}
if(deep){jQuery.extend(true,target,deep);}}
jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments);}else if(!this.length){return this;}
var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off);}
var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=undefined;}else if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST";}}
var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText;if(jqXHR.isResolved()){jqXHR.done(function(r){responseText=r;});self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText);}
if(callback){self.each(callback,[responseText,status,jqXHR]);}}});return this;},serialize:function(){return jQuery.param(this.serializeArray());},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this;}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type));}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")};}):{name:elem.name,value:val.replace(rCRLF,"\r\n")};}).get();}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f);};});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined;}
return jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type});};});jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script");},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json");},ajaxSetup:function(target,settings){if(settings){ajaxExtend(target,jQuery.ajaxSettings);}else{settings=target;target=jQuery.ajaxSettings;}
ajaxExtend(target,settings);return target;},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined;}
options=options||{};var
s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery._Deferred(),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value;}
return this;},getAllResponseHeaders:function(){return state===2?responseHeadersString:null;},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while((match=rheaders.exec(responseHeadersString))){responseHeaders[match[1].toLowerCase()]=match[2];}}
match=responseHeaders[key.toLowerCase()];}
return match===undefined?null:match;},overrideMimeType:function(type){if(!state){s.mimeType=type;}
return this;},abort:function(statusText){statusText=statusText||"abort";if(transport){transport.abort(statusText);}
done(0,statusText);return this;}};function done(status,nativeStatusText,responses,headers){if(state===2){return;}
state=2;if(timeoutTimer){clearTimeout(timeoutTimer);}
transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&status<300||status===304){if(s.ifModified){if((lastModified=jqXHR.getResponseHeader("Last-Modified"))){jQuery.lastModified[ifModifiedKey]=lastModified;}
if((etag=jqXHR.getResponseHeader("Etag"))){jQuery.etag[ifModifiedKey]=etag;}}
if(status===304){statusText="notmodified";isSuccess=true;}else{try{success=ajaxConvert(s,response);statusText="success";isSuccess=true;}catch(e){statusText="parsererror";error=e;}}}else{error=statusText;if(!statusText||status){statusText="error";if(status<0){status=0;}}}
jqXHR.status=status;jqXHR.statusText=""+(nativeStatusText||statusText);if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR]);}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error]);}
jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]);}
completeDeferred.resolveWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!(--jQuery.active)){jQuery.event.trigger("ajaxStop");}}}
deferred.promise(jqXHR);jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;jqXHR.complete=completeDeferred.done;jqXHR.statusCode=function(map){if(map){var tmp;if(state<2){for(tmp in map){statusCode[tmp]=[statusCode[tmp],map[tmp]];}}else{tmp=map[jqXHR.status];jqXHR.then(tmp,tmp);}}
return this;};s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax);if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!=ajaxLocParts[1]||parts[2]!=ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?80:443))!=(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443))));}
if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional);}
inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return false;}
fireGlobals=s.global;s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart");}
if(!s.hasContent){if(s.data){s.url+=(rquery.test(s.url)?"&":"?")+s.data;delete s.data;}
ifModifiedKey=s.url;if(s.cache===false){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"");}}
if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType);}
if(s.ifModified){ifModifiedKey=ifModifiedKey||s.url;if(jQuery.lastModified[ifModifiedKey]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]);}
if(jQuery.etag[ifModifiedKey]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey]);}}
jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i]);}
if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){jqXHR.abort();return false;}
for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i]);}
transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport");}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s]);}
if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout");},s.timeout);}
try{state=1;transport.send(requestHeaders,done);}catch(e){if(state<2){done(-1,e);}else{jQuery.error(e);}}}
return jqXHR;},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);};if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional;}
if(jQuery.isArray(a)||(a.jquery&&!jQuery.isPlainObject(a))){jQuery.each(a,function(){add(this.name,this.value);});}else{for(var prefix in a){buildParams(prefix,a[prefix],traditional,add);}}
return s.join("&").replace(r20,"+");}});function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v);}else{buildParams(prefix+"["+(typeof v==="object"||jQuery.isArray(v)?i:"")+"]",v,traditional,add);}});}else if(!traditional&&obj!=null&&typeof obj==="object"){for(var name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add);}}else{add(prefix,obj);}}
jQuery.extend({active:0,lastModified:{},etag:{}});function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields){if(type in responses){jqXHR[responseFields[type]]=responses[type];}}
while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("content-type");}}
if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break;}}}
if(dataTypes[0]in responses){finalDataType=dataTypes[0];}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break;}
if(!firstDataType){firstDataType=type;}}
finalDataType=finalDataType||firstDataType;}
if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType);}
return responses[finalDataType];}}
function ajaxConvert(s,response){if(s.dataFilter){response=s.dataFilter(response,s.dataType);}
var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;i<length;i++){if(i===1){for(key in s.converters){if(typeof key==="string"){converters[key.toLowerCase()]=s.converters[key];}}}
prev=current;current=dataTypes[i];if(current==="*"){current=prev;}else if(prev!=="*"&&prev!==current){conversion=prev+" "+current;conv=converters[conversion]||converters["* "+current];if(!conv){conv2=undefined;for(conv1 in converters){tmp=conv1.split(" ");if(tmp[0]===prev||tmp[0]==="*"){conv2=converters[tmp[1]+" "+current];if(conv2){conv1=converters[conv1];if(conv1===true){conv=conv2;}else if(conv2===true){conv=conv1;}
break;}}}}
if(!(conv||conv2)){jQuery.error("No conversion from "+conversion.replace(" "," to "));}
if(conv!==true){response=conv?conv(response):conv2(conv1(response));}}}
return response;}
var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+(jsc++);}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData=s.contentType==="application/x-www-form-urlencoded"&&(typeof s.data==="string");if(s.dataTypes[0]==="jsonp"||s.jsonp!==false&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";if(s.jsonp!==false){url=url.replace(jsre,replace);if(s.url===url){if(inspectData){data=data.replace(jsre,replace);}
if(s.data===data){url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback;}}}
s.url=url;s.data=data;window[jsonpCallback]=function(response){responseContainer=[response];};jqXHR.always(function(){window[jsonpCallback]=previous;if(responseContainer&&jQuery.isFunction(previous)){window[jsonpCallback](responseContainer[0]);}});s.converters["script json"]=function(){if(!responseContainer){jQuery.error(jsonpCallback+" was not called");}
return responseContainer[0];};s.dataTypes[0]="json";return"script";}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){jQuery.globalEval(text);return text;}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false;}
if(s.crossDomain){s.type="GET";s.global=false;}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script");script.async="async";if(s.scriptCharset){script.charset=s.scriptCharset;}
script.src=s.url;script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script);}
script=undefined;if(!isAbort){callback(200,"success");}}};head.insertBefore(script,head.firstChild);},abort:function(){if(script){script.onload(0,1);}}};}});var
xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks){xhrCallbacks[key](0,1);}}:false,xhrId=0,xhrCallbacks;function createStandardXHR(){try{return new window.XMLHttpRequest();}catch(e){}}
function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP");}catch(e){}}
jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR();}:createStandardXHR;(function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&("withCredentials"in xhr)});})(jQuery.ajaxSettings.xhr());if(jQuery.support.ajax){jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;if(s.username){xhr.open(s.type,s.url,s.async,s.username,s.password);}else{xhr.open(s.type,s.url,s.async);}
if(s.xhrFields){for(i in s.xhrFields){xhr[i]=s.xhrFields[i];}}
if(s.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(s.mimeType);}
if(!s.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest";}
try{for(i in headers){xhr.setRequestHeader(i,headers[i]);}}catch(_){}
xhr.send((s.hasContent&&s.data)||null);callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined;if(handle){xhr.onreadystatechange=jQuery.noop;if(xhrOnUnloadAbort){delete xhrCallbacks[handle];}}
if(isAbort){if(xhr.readyState!==4){xhr.abort();}}else{status=xhr.status;responseHeaders=xhr.getAllResponseHeaders();responses={};xml=xhr.responseXML;if(xml&&xml.documentElement){responses.xml=xml;}
responses.text=xhr.responseText;try{statusText=xhr.statusText;}catch(e){statusText="";}
if(!status&&s.isLocal&&!s.crossDomain){status=responses.text?200:404;}else if(status===1223){status=204;}}}}catch(firefoxAccessException){if(!isAbort){complete(-1,firefoxAccessException);}}
if(responses){complete(status,statusText,responses,responseHeaders);}};if(!s.async||xhr.readyState===4){callback();}else{handle=++xhrId;if(xhrOnUnloadAbort){if(!xhrCallbacks){xhrCallbacks={};jQuery(window).unload(xhrOnUnloadAbort);}
xhrCallbacks[handle]=callback;}
xhr.onreadystatechange=callback;}},abort:function(){if(callback){callback(0,1);}}};}});}
var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fxNow;jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0){return this.animate(genFx("show",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(!jQuery._data(elem,"olddisplay")&&display==="none"){display=elem.style.display="";}
if(display===""&&jQuery.css(elem,"display")==="none"){jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName));}}}
for(i=0;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(display===""||display==="none"){elem.style.display=jQuery._data(elem,"olddisplay")||"";}}}
return this;}},hide:function(speed,easing,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,easing,callback);}else{for(var i=0,j=this.length;i<j;i++){if(this[i].style){var display=jQuery.css(this[i],"display");if(display!=="none"&&!jQuery._data(this[i],"olddisplay")){jQuery._data(this[i],"olddisplay",display);}}}
for(i=0;i<j;i++){if(this[i].style){this[i].style.display="none";}}
return this;}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments);}else if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]();});}else{this.animate(genFx("toggle",3),fn,fn2,callback);}
return this;},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback);},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete,[false]);}
prop=jQuery.extend({},prop);return this[optall.queue===false?"each":"queue"](function(){if(optall.queue===false){jQuery._mark(this);}
var opt=jQuery.extend({},optall),isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,display,e,parts,start,end,unit;opt.animatedProperties={};for(p in prop){name=jQuery.camelCase(p);if(p!==name){prop[name]=prop[p];delete prop[p];}
val=prop[name];if(jQuery.isArray(val)){opt.animatedProperties[name]=val[1];val=prop[name]=val[0];}else{opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||'swing';}
if(val==="hide"&&hidden||val==="show"&&!hidden){return opt.complete.call(this);}
if(isElement&&(name==="height"||name==="width")){opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(jQuery.css(this,"display")==="inline"&&jQuery.css(this,"float")==="none"){if(!jQuery.support.inlineBlockNeedsLayout){this.style.display="inline-block";}else{display=defaultDisplay(this.nodeName);if(display==="inline"){this.style.display="inline-block";}else{this.style.display="inline";this.style.zoom=1;}}}}}
if(opt.overflow!=null){this.style.overflow="hidden";}
for(p in prop){e=new jQuery.fx(this,opt,p);val=prop[p];if(rfxtypes.test(val)){e[val==="toggle"?hidden?"show":"hide":val]();}else{parts=rfxnum.exec(val);start=e.cur();if(parts){end=parseFloat(parts[2]);unit=parts[3]||(jQuery.cssNumber[p]?"":"px");if(unit!=="px"){jQuery.style(this,p,(end||1)+unit);start=((end||1)/e.cur())*start;jQuery.style(this,p,start+unit);}
if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start;}
e.custom(start,end,unit);}else{e.custom(start,val,"");}}}
return true;});},stop:function(clearQueue,gotoEnd){if(clearQueue){this.queue([]);}
this.each(function(){var timers=jQuery.timers,i=timers.length;if(!gotoEnd){jQuery._unmark(true,this);}
while(i--){if(timers[i].elem===this){if(gotoEnd){timers[i](true);}
timers.splice(i,1);}}});if(!gotoEnd){this.dequeue();}
return this;}});function createFxNow(){setTimeout(clearFxNow,0);return(fxNow=jQuery.now());}
function clearFxNow(){fxNow=undefined;}
function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type;});return obj;}
jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback);};});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;opt.old=opt.complete;opt.complete=function(noUnmark){if(jQuery.isFunction(opt.old)){opt.old.call(this);}
if(opt.queue!==false){jQuery.dequeue(this);}else if(noUnmark!==false){jQuery._unmark(this);}};return opt;},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p;},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum;}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;options.orig=options.orig||{};}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this);}
(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop];}
var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||r==="auto"?0:r:parsed;},custom:function(from,to,unit){var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow();this.start=from;this.end=to;this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function t(gotoEnd){return self.step(gotoEnd);}
t.elem=this.elem;if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(fx.tick,fx.interval);}},show:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());jQuery(this.elem).show();},hide:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0);},step:function(gotoEnd){var t=fxNow||createFxNow(),done=true,elem=this.elem,options=this.options,i,n;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();options.animatedProperties[this.prop]=true;for(i in options.animatedProperties){if(options.animatedProperties[i]!==true){done=false;}}
if(done){if(options.overflow!=null&&!jQuery.support.shrinkWrapBlocks){jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index];});}
if(options.hide){jQuery(elem).hide();}
if(options.hide||options.show){for(var p in options.animatedProperties){jQuery.style(elem,p,options.orig[p]);}}
options.complete.call(elem);}
return false;}else{if(options.duration==Infinity){this.now=t;}else{n=t-this.startTime;this.state=n/options.duration;this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration);this.now=this.start+((this.end-this.start)*this.pos);}
this.update();}
return true;}};jQuery.extend(jQuery.fx,{tick:function(){for(var timers=jQuery.timers,i=0;i<timers.length;++i){if(!timers[i]()){timers.splice(i--,1);}}
if(!timers.length){jQuery.fx.stop();}},interval:13,stop:function(){clearInterval(timerId);timerId=null;},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now);},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=(fx.prop==="width"||fx.prop==="height"?Math.max(0,fx.now):fx.now)+fx.unit;}else{fx.elem[fx.prop]=fx.now;}}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem;}).length;};}
function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove();if(display==="none"||display===""){if(!iframe){iframe=document.createElement("iframe");iframe.frameBorder=iframe.width=iframe.height=0;}
body.appendChild(iframe);if(!iframeDoc||!iframe.createElement){iframeDoc=(iframe.contentWindow||iframe.contentDocument).document;iframeDoc.write((document.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");iframeDoc.close();}
elem=iframeDoc.createElement(nodeName);iframeDoc.body.appendChild(elem);display=jQuery.css(elem,"display");body.removeChild(iframe);}
elemdisplay[nodeName]=display;}
return elemdisplay[nodeName];}
var rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;if("getBoundingClientRect"in document.documentElement){jQuery.fn.offset=function(options){var elem=this[0],box;if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
if(!elem||!elem.ownerDocument){return null;}
if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}
try{box=elem.getBoundingClientRect();}catch(e){}
var doc=elem.ownerDocument,docElem=doc.documentElement;if(!box||!jQuery.contains(docElem,elem)){return box?{top:box.top,left:box.left}:{top:0,left:0};}
var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left};};}else{jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i);});}
if(!elem||!elem.ownerDocument){return null;}
if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem);}
jQuery.offset.initialize();var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){break;}
computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&rtable.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevOffsetParent=offsetParent;offsetParent=elem.offsetParent;}
if(jQuery.offset.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0;}
prevComputedStyle=computedStyle;}
if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft;}
if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft);}
return{top:top,left:left};};}
jQuery.offset={initialize:function(){var body=document.body,container=document.createElement("div"),innerDiv,checkDiv,table,td,bodyMarginTop=parseFloat(jQuery.css(body,"marginTop"))||0,html="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";jQuery.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});container.innerHTML=html;body.insertBefore(container,body.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position="fixed";checkDiv.style.top="20px";this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position=checkDiv.style.top="";innerDiv.style.overflow="hidden";innerDiv.style.position="relative";this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==bodyMarginTop);body.removeChild(container);jQuery.offset.initialize=jQuery.noop;},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;jQuery.offset.initialize();if(jQuery.offset.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.css(body,"marginTop"))||0;left+=parseFloat(jQuery.css(body,"marginLeft"))||0;}
return{top:top,left:left};},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");if(position==="static"){elem.style.position="relative";}
var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left;}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0;}
if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset);}
if(options.top!=null){props.top=(options.top-curOffset.top)+curTop;}
if(options.left!=null){props.left=(options.left-curOffset.left)+curLeft;}
if("using"in options){options.using.call(elem,props);}else{curElem.css(props);}}};jQuery.fn.extend({position:function(){if(!this[0]){return null;}
var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0;offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0;parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left};},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent;}
return offsetParent;});}});jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem,win;if(val===undefined){elem=this[0];if(!elem){return null;}
win=getWindow(elem);return win?("pageXOffset"in win)?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];}
return this.each(function(){win=getWindow(this);if(win){win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop());}else{this[method]=val;}});};});function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false;}
jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){var elem=this[0];return elem&&elem.style?parseFloat(jQuery.css(elem,type,"padding")):null;};jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem&&elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):null;};jQuery.fn[type]=function(size){var elem=this[0];if(!elem){return size==null?null:this;}
if(jQuery.isFunction(size)){return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()));});}
if(jQuery.isWindow(elem)){var docElemProp=elem.document.documentElement["client"+name],body=elem.document.body;return elem.document.compatMode==="CSS1Compat"&&docElemProp||body&&body["client"+name]||docElemProp;}else if(elem.nodeType===9){return Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]);}else if(size===undefined){var orig=jQuery.css(elem,type),ret=parseFloat(orig);return jQuery.isNaN(ret)?orig:ret;}else{return this.css(type,typeof size==="string"?size:size+"px");}};});window.jQuery=window.$=jQuery;})(window);(function(jQuery,undefined){var oldManip=jQuery.fn.domManip,tmplItmAtt="_tmplitem",htmlExpr=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,newTmplItems={},wrappedItems={},appendToTmplItems,topTmplItem={key:0,data:{}},itemKey=0,cloneIndex=0,stack=[];function newTmplItem(options,parentItem,fn,data){var newItem={data:data||(data===0||data===false)?data:(parentItem?parentItem.data:{}),_wrap:parentItem?parentItem._wrap:null,tmpl:null,parent:parentItem||null,nodes:[],calls:tiCalls,nest:tiNest,wrap:tiWrap,html:tiHtml,update:tiUpdate};if(options){jQuery.extend(newItem,options,{nodes:[],parent:parentItem});}
if(fn){newItem.tmpl=fn;newItem._ctnt=newItem._ctnt||newItem.tmpl(jQuery,newItem);newItem.key=++itemKey;(stack.length?wrappedItems:newTmplItems)[itemKey]=newItem;}
return newItem;}
jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),elems,i,l,tmplItems,parent=this.length===1&&this[0].parentNode;appendToTmplItems=newTmplItems||{};if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);ret=this;}else{for(i=0,l=insert.length;i<l;i++){cloneIndex=i;elems=(i>0?this.clone(true):this).get();jQuery(insert[i])[original](elems);ret=ret.concat(elems);}
cloneIndex=0;ret=this.pushStack(ret,name,insert.selector);}
tmplItems=appendToTmplItems;appendToTmplItems=null;jQuery.tmpl.complete(tmplItems);return ret;};});jQuery.fn.extend({tmpl:function(data,options,parentItem){return jQuery.tmpl(this[0],data,options,parentItem);},tmplItem:function(){return jQuery.tmplItem(this[0]);},template:function(name){return jQuery.template(name,this[0]);},domManip:function(args,table,callback,options){if(args[0]&&jQuery.isArray(args[0])){var dmArgs=jQuery.makeArray(arguments),elems=args[0],elemsLength=elems.length,i=0,tmplItem;while(i<elemsLength&&!(tmplItem=jQuery.data(elems[i++],"tmplItem"))){}
if(tmplItem&&cloneIndex){dmArgs[2]=function(fragClone){jQuery.tmpl.afterManip(this,fragClone,callback);};}
oldManip.apply(this,dmArgs);}else{oldManip.apply(this,arguments);}
cloneIndex=0;if(!appendToTmplItems){jQuery.tmpl.complete(newTmplItems);}
return this;}});jQuery.extend({tmpl:function(tmpl,data,options,parentItem){var ret,topLevel=!parentItem;if(topLevel){parentItem=topTmplItem;tmpl=jQuery.template[tmpl]||jQuery.template(null,tmpl);wrappedItems={};}else if(!tmpl){tmpl=parentItem.tmpl;newTmplItems[parentItem.key]=parentItem;parentItem.nodes=[];if(parentItem.wrapped){updateWrapped(parentItem,parentItem.wrapped);}
return jQuery(build(parentItem,null,parentItem.tmpl(jQuery,parentItem)));}
if(!tmpl){return[];}
if(typeof data==="function"){data=data.call(parentItem||{});}
if(options&&options.wrapped){updateWrapped(options,options.wrapped);}
ret=jQuery.isArray(data)?jQuery.map(data,function(dataItem){return dataItem?newTmplItem(options,parentItem,tmpl,dataItem):null;}):[newTmplItem(options,parentItem,tmpl,data)];return topLevel?jQuery(build(parentItem,null,ret)):ret;},tmplItem:function(elem){var tmplItem;if(elem instanceof jQuery){elem=elem[0];}
while(elem&&elem.nodeType===1&&!(tmplItem=jQuery.data(elem,"tmplItem"))&&(elem=elem.parentNode)){}
return tmplItem||topTmplItem;},template:function(name,tmpl){if(tmpl){if(typeof tmpl==="string"){tmpl=buildTmplFn(tmpl);}else if(tmpl instanceof jQuery){tmpl=tmpl[0]||{};}
if(tmpl.nodeType){tmpl=jQuery.data(tmpl,"tmpl")||jQuery.data(tmpl,"tmpl",buildTmplFn(tmpl.innerHTML));}
return typeof name==="string"?(jQuery.template[name]=tmpl):tmpl;}
return name?(typeof name!=="string"?jQuery.template(null,name):(jQuery.template[name]||jQuery.template(null,htmlExpr.test(name)?name:jQuery(name)))):null;},encode:function(text){return(""+text).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;");}});jQuery.extend(jQuery.tmpl,{tag:{"tmpl":{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},"wrap":{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},"each":{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},"html":{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(items){newTmplItems={};},afterManip:function afterManip(elem,fragClone,callback){var content=fragClone.nodeType===11?jQuery.makeArray(fragClone.childNodes):fragClone.nodeType===1?[fragClone]:[];callback.call(elem,fragClone);storeTmplItems(content);cloneIndex++;}});function build(tmplItem,nested,content){var frag,ret=content?jQuery.map(content,function(item){return(typeof item==="string")?(tmplItem.key?item.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+tmplItmAtt+"=\""+tmplItem.key+"\" $2"):item):build(item,tmplItem,item._ctnt);}):tmplItem;if(nested){return ret;}
ret=ret.join("");ret.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(all,before,middle,after){frag=jQuery(middle).get();storeTmplItems(frag);if(before){frag=unencode(before).concat(frag);}
if(after){frag=frag.concat(unencode(after));}});return frag?frag:unencode(ret);}
function unencode(text){var el=document.createElement("div");el.innerHTML=text;return jQuery.makeArray(el.childNodes);}
function buildTmplFn(markup){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;"+"with($data){__.push('"+
jQuery.trim(markup).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(all,slash,type,fnargs,target,parens,args){var tag=jQuery.tmpl.tag[type],def,expr,exprAutoFnDetect;if(!tag){throw"Unknown template tag: "+type;}
def=tag._default||[];if(parens&&!/\w$/.test(target)){target+=parens;parens="";}
if(target){target=unescape(target);args=args?(","+unescape(args)+")"):(parens?")":"");expr=parens?(target.indexOf(".")>-1?target+unescape(parens):("("+target+").call($item"+args)):target;exprAutoFnDetect=parens?expr:"(typeof("+target+")==='function'?("+target+").call($item):("+target+"))";}else{exprAutoFnDetect=expr=def.$1||"null";}
fnargs=unescape(fnargs);return"');"+
tag[slash?"close":"open"].split("$notnull_1").join(target?"typeof("+target+")!=='undefined' && ("+target+")!=null":"true").split("$1a").join(exprAutoFnDetect).split("$1").join(expr).split("$2").join(fnargs||def.$2||"")+"__.push('";})+"');}return __;");}
function updateWrapped(options,wrapped){options._wrap=build(options,true,jQuery.isArray(wrapped)?wrapped:[htmlExpr.test(wrapped)?wrapped:jQuery(wrapped).html()]).join("");}
function unescape(args){return args?args.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null;}
function outerHtml(elem){var div=document.createElement("div");div.appendChild(elem.cloneNode(true));return div.innerHTML;}
function storeTmplItems(content){var keySuffix="_"+cloneIndex,elem,elems,newClonedItems={},i,l,m;for(i=0,l=content.length;i<l;i++){if((elem=content[i]).nodeType!==1){continue;}
elems=elem.getElementsByTagName("*");for(m=elems.length-1;m>=0;m--){processItemKey(elems[m]);}
processItemKey(elem);}
function processItemKey(el){var pntKey,pntNode=el,pntItem,tmplItem,key;if((key=el.getAttribute(tmplItmAtt))){while(pntNode.parentNode&&(pntNode=pntNode.parentNode).nodeType===1&&!(pntKey=pntNode.getAttribute(tmplItmAtt))){}
if(pntKey!==key){pntNode=pntNode.parentNode?(pntNode.nodeType===11?0:(pntNode.getAttribute(tmplItmAtt)||0)):0;if(!(tmplItem=newTmplItems[key])){tmplItem=wrappedItems[key];tmplItem=newTmplItem(tmplItem,newTmplItems[pntNode]||wrappedItems[pntNode]);tmplItem.key=++itemKey;newTmplItems[itemKey]=tmplItem;}
if(cloneIndex){cloneTmplItem(key);}}
el.removeAttribute(tmplItmAtt);}else if(cloneIndex&&(tmplItem=jQuery.data(el,"tmplItem"))){cloneTmplItem(tmplItem.key);newTmplItems[tmplItem.key]=tmplItem;pntNode=jQuery.data(el.parentNode,"tmplItem");pntNode=pntNode?pntNode.key:0;}
if(tmplItem){pntItem=tmplItem;while(pntItem&&pntItem.key!=pntNode){pntItem.nodes.push(el);pntItem=pntItem.parent;}
delete tmplItem._ctnt;delete tmplItem._wrap;jQuery.data(el,"tmplItem",tmplItem);}
function cloneTmplItem(key){key=key+keySuffix;tmplItem=newClonedItems[key]=(newClonedItems[key]||newTmplItem(tmplItem,newTmplItems[tmplItem.parent.key+keySuffix]||tmplItem.parent));}}}
function tiCalls(content,tmpl,data,options){if(!content){return stack.pop();}
stack.push({_:content,tmpl:tmpl,item:this,data:data,options:options});}
function tiNest(tmpl,data,options){return jQuery.tmpl(jQuery.template(tmpl),data,options,this);}
function tiWrap(call,wrapped){var options=call.options||{};options.wrapped=wrapped;return jQuery.tmpl(jQuery.template(call.tmpl),call.data,options,call.item);}
function tiHtml(filter,textOnly){var wrapped=this._wrap;return jQuery.map(jQuery(jQuery.isArray(wrapped)?wrapped.join(""):wrapped).filter(filter||"*"),function(e){return textOnly?e.innerText||e.textContent:e.outerHTML||outerHtml(e);});}
function tiUpdate(){var coll=this.nodes;jQuery.tmpl(null,null,null,this).insertBefore(coll[0]);jQuery(coll).remove();}})(jQuery);Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}};Date.getMonthNumberFromName=function(name){var n=Date.CultureInfo.monthNames,m=Date.CultureInfo.abbreviatedMonthNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}
return-1;};Date.getDayNumberFromName=function(name){var n=Date.CultureInfo.dayNames,m=Date.CultureInfo.abbreviatedDayNames,o=Date.CultureInfo.shortestDayNames,s=name.toLowerCase();for(var i=0;i<n.length;i++){if(n[i].toLowerCase()==s||m[i].toLowerCase()==s){return i;}}
return-1;};Date.isLeapYear=function(year){return(((year%4===0)&&(year%100!==0))||(year%400===0));};Date.getDaysInMonth=function(year,month){return[31,(Date.isLeapYear(year)?29:28),31,30,31,30,31,31,30,31,30,31][month];};Date.getTimezoneOffset=function(s,dst){return(dst||false)?Date.CultureInfo.abbreviatedTimeZoneDST[s.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[s.toUpperCase()];};Date.getTimezoneAbbreviation=function(offset,dst){var n=(dst||false)?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard,p;for(p in n){if(n[p]===offset){return p;}}
return null;};Date.prototype.clone=function(){return new Date(this.getTime());};Date.prototype.compareTo=function(date){if(isNaN(this)){throw new Error(this);}
if(date instanceof Date&&!isNaN(date)){return(this>date)?1:(this<date)?-1:0;}else{throw new TypeError(date);}};Date.prototype.equals=function(date){return(this.compareTo(date)===0);};Date.prototype.between=function(start,end){var t=this.getTime();return t>=start.getTime()&&t<=end.getTime();};Date.prototype.addMilliseconds=function(value){this.setMilliseconds(this.getMilliseconds()+value);return this;};Date.prototype.addSeconds=function(value){return this.addMilliseconds(value*1000);};Date.prototype.addMinutes=function(value){return this.addMilliseconds(value*60000);};Date.prototype.addHours=function(value){return this.addMilliseconds(value*3600000);};Date.prototype.addDays=function(value){return this.addMilliseconds(value*86400000);};Date.prototype.addWeeks=function(value){return this.addMilliseconds(value*604800000);};Date.prototype.addMonths=function(value){var n=this.getDate();this.setDate(1);this.setMonth(this.getMonth()+value);this.setDate(Math.min(n,this.getDaysInMonth()));return this;};Date.prototype.addYears=function(value){return this.addMonths(value*12);};Date.prototype.add=function(config){if(typeof config=="number"){this._orient=config;return this;}
var x=config;if(x.millisecond||x.milliseconds){this.addMilliseconds(x.millisecond||x.milliseconds);}
if(x.second||x.seconds){this.addSeconds(x.second||x.seconds);}
if(x.minute||x.minutes){this.addMinutes(x.minute||x.minutes);}
if(x.hour||x.hours){this.addHours(x.hour||x.hours);}
if(x.month||x.months){this.addMonths(x.month||x.months);}
if(x.year||x.years){this.addYears(x.year||x.years);}
if(x.day||x.days){this.addDays(x.day||x.days);}
return this;};Date._validate=function(value,min,max,name){if(typeof value!="number"){throw new TypeError(value+" is not a Number.");}else if(value<min||value>max){throw new RangeError(value+" is not a valid value for "+name+".");}
return true;};Date.validateMillisecond=function(n){return Date._validate(n,0,999,"milliseconds");};Date.validateSecond=function(n){return Date._validate(n,0,59,"seconds");};Date.validateMinute=function(n){return Date._validate(n,0,59,"minutes");};Date.validateHour=function(n){return Date._validate(n,0,23,"hours");};Date.validateDay=function(n,year,month){return Date._validate(n,1,Date.getDaysInMonth(year,month),"days");};Date.validateMonth=function(n){return Date._validate(n,0,11,"months");};Date.validateYear=function(n){return Date._validate(n,1,9999,"seconds");};Date.prototype.set=function(config){var x=config;if(!x.millisecond&&x.millisecond!==0){x.millisecond=-1;}
if(!x.second&&x.second!==0){x.second=-1;}
if(!x.minute&&x.minute!==0){x.minute=-1;}
if(!x.hour&&x.hour!==0){x.hour=-1;}
if(!x.day&&x.day!==0){x.day=-1;}
if(!x.month&&x.month!==0){x.month=-1;}
if(!x.year&&x.year!==0){x.year=-1;}
if(x.millisecond!=-1&&Date.validateMillisecond(x.millisecond)){this.addMilliseconds(x.millisecond-this.getMilliseconds());}
if(x.second!=-1&&Date.validateSecond(x.second)){this.addSeconds(x.second-this.getSeconds());}
if(x.minute!=-1&&Date.validateMinute(x.minute)){this.addMinutes(x.minute-this.getMinutes());}
if(x.hour!=-1&&Date.validateHour(x.hour)){this.addHours(x.hour-this.getHours());}
if(x.month!==-1&&Date.validateMonth(x.month)){this.addMonths(x.month-this.getMonth());}
if(x.year!=-1&&Date.validateYear(x.year)){this.addYears(x.year-this.getFullYear());}
if(x.day!=-1&&Date.validateDay(x.day,this.getFullYear(),this.getMonth())){this.addDays(x.day-this.getDate());}
if(x.timezone){this.setTimezone(x.timezone);}
if(x.timezoneOffset){this.setTimezoneOffset(x.timezoneOffset);}
return this;};Date.prototype.clearTime=function(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this;};Date.prototype.isLeapYear=function(){var y=this.getFullYear();return(((y%4===0)&&(y%100!==0))||(y%400===0));};Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun());};Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth());};Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1});};Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()});};Date.prototype.moveToDayOfWeek=function(day,orient){var diff=(day-this.getDay()+7*(orient||+1))%7;return this.addDays((diff===0)?diff+=7*(orient||+1):diff);};Date.prototype.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||+1))%12;return this.addMonths((diff===0)?diff+=12*(orient||+1):diff);};Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/86400000);};Date.prototype.getWeekOfYear=function(firstDayOfWeek){var y=this.getFullYear(),m=this.getMonth(),d=this.getDate();var dow=firstDayOfWeek||Date.CultureInfo.firstDayOfWeek;var offset=7+1-new Date(y,0,1).getDay();if(offset==8){offset=1;}
var daynum=((Date.UTC(y,m,d,0,0,0)-Date.UTC(y,0,1,0,0,0))/86400000)+1;var w=Math.floor((daynum-offset+7)/7);if(w===dow){y--;var prevOffset=7+1-new Date(y,0,1).getDay();if(prevOffset==2||prevOffset==8){w=53;}else{w=52;}}
return w;};Date.prototype.isDST=function(){return this.toString().match(/(E|C|M|P)(S|D)T/)[2]=="D";};Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST());};Date.prototype.setTimezoneOffset=function(s){var here=this.getTimezoneOffset(),there=Number(s)*-6/10;this.addMinutes(there-here);return this;};Date.prototype.setTimezone=function(s){return this.setTimezoneOffset(Date.getTimezoneOffset(s));};Date.prototype.getUTCOffset=function(){var n=this.getTimezoneOffset()*-10/6,r;if(n<0){r=(n-10000).toString();return r[0]+r.substr(2);}else{r=(n+10000).toString();return"+"+r.substr(1);}};Date.prototype.getDayName=function(abbrev){return abbrev?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()];};Date.prototype.getMonthName=function(abbrev){return abbrev?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()];};Date.prototype._toString=Date.prototype.toString;Date.prototype.toString=function(format){var self=this;var p=function p(s){return(s.toString().length==1)?"0"+s:s;};return format?format.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(format){switch(format){case"hh":return p(self.getHours()<13?self.getHours():(self.getHours()-12));case"h":return self.getHours()<13?self.getHours():(self.getHours()-12);case"HH":return p(self.getHours());case"H":return self.getHours();case"mm":return p(self.getMinutes());case"m":return self.getMinutes();case"ss":return p(self.getSeconds());case"s":return self.getSeconds();case"yyyy":return self.getFullYear();case"yy":return self.getFullYear().toString().substring(2,4);case"dddd":return self.getDayName();case"ddd":return self.getDayName(true);case"dd":return p(self.getDate());case"d":return self.getDate().toString();case"MMMM":return self.getMonthName();case"MMM":return self.getMonthName(true);case"MM":return p((self.getMonth()+1));case"M":return self.getMonth()+1;case"t":return self.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return self.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return"";}}):this._toString();};Date.now=function(){return new Date();};Date.today=function(){return Date.now().clearTime();};Date.prototype._orient=+1;Date.prototype.next=function(){this._orient=+1;return this;};Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){this._orient=-1;return this;};Date.prototype._is=false;Date.prototype.is=function(){this._is=true;return this;};Number.prototype._dateElement="day";Number.prototype.fromNow=function(){var c={};c[this._dateElement]=this;return Date.now().add(c);};Number.prototype.ago=function(){var c={};c[this._dateElement]=this*-1;return Date.now().add(c);};(function(){var $D=Date.prototype,$N=Number.prototype;var dx=("sunday monday tuesday wednesday thursday friday saturday").split(/\s/),mx=("january february march april may june july august september october november december").split(/\s/),px=("Millisecond Second Minute Hour Day Week Month Year").split(/\s/),de;var df=function(n){return function(){if(this._is){this._is=false;return this.getDay()==n;}
return this.moveToDayOfWeek(n,this._orient);};};for(var i=0;i<dx.length;i++){$D[dx[i]]=$D[dx[i].substring(0,3)]=df(i);}
var mf=function(n){return function(){if(this._is){this._is=false;return this.getMonth()===n;}
return this.moveToMonth(n,this._orient);};};for(var j=0;j<mx.length;j++){$D[mx[j]]=$D[mx[j].substring(0,3)]=mf(j);}
var ef=function(j){return function(){if(j.substring(j.length-1)!="s"){j+="s";}
return this["add"+j](this._orient);};};var nf=function(n){return function(){this._dateElement=n;return this;};};for(var k=0;k<px.length;k++){de=px[k].toLowerCase();$D[de]=$D[de+"s"]=ef(px[k]);$N[de]=$N[de+"s"]=nf(de);}}());Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ");};Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern);};Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern);};Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern);};Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern);};Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th";}};(function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'";}};var $P=Date.Parsing;var _=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx){return([mx[0],s.substring(mx[0].length)]);}else{throw new $P.Exception(s);}};},token:function(s){return function(s){return _.rtoken(new RegExp("^\s*"+s+"\s*"))(s);};},stoken:function(s){return _.rtoken(new RegExp("^"+s));},until:function(p){return function(s){var qx=[],rx=null;while(s.length){try{rx=p.call(this,s);}catch(e){qx.push(rx[0]);s=rx[1];continue;}
break;}
return[qx,s];};},many:function(p){return function(s){var rx=[],r=null;while(s.length){try{r=p.call(this,s);}catch(e){return[rx,s];}
rx.push(r[0]);s=r[1];}
return[rx,s];};},optional:function(p){return function(s){var r=null;try{r=p.call(this,s);}catch(e){return[null,s];}
return[r[0],r[1]];};},not:function(p){return function(s){try{p.call(this,s);}catch(e){return[null,s];}
throw new $P.Exception(s);};},ignore:function(p){return p?function(s){var r=null;r=p.call(this,s);return[null,r[1]];}:null;},product:function(){var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[];for(var i=0;i<px.length;i++){rx.push(_.each(px[i],qx));}
return rx;},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=(cache[s]||rule.call(this,s));}catch(e){r=cache[s]=e;}
if(r instanceof $P.Exception){throw r;}else{return r;}};},any:function(){var px=arguments;return function(s){var r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){r=null;}
if(r){return r;}}
throw new $P.Exception(s);};},each:function(){var px=arguments;return function(s){var rx=[],r=null;for(var i=0;i<px.length;i++){if(px[i]==null){continue;}
try{r=(px[i].call(this,s));}catch(e){throw new $P.Exception(s);}
rx.push(r[0]);s=r[1];}
return[rx,s];};},all:function(){var px=arguments,_=_;return _.each(_.optional(px));},sequence:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;if(px.length==1){return px[0];}
return function(s){var r=null,q=null;var rx=[];for(var i=0;i<px.length;i++){try{r=px[i].call(this,s);}catch(e){break;}
rx.push(r[0]);try{q=d.call(this,r[1]);}catch(ex){q=null;break;}
s=q[1];}
if(!r){throw new $P.Exception(s);}
if(q){throw new $P.Exception(q[1]);}
if(c){try{r=c.call(this,r[1]);}catch(ey){throw new $P.Exception(r[1]);}}
return[rx,(r?r[1]:s)];};},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]];};},list:function(p,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return(p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c)));},set:function(px,d,c){d=d||_.rtoken(/^\s*/);c=c||null;return function(s){var r=null,p=null,q=null,rx=null,best=[[],s],last=false;for(var i=0;i<px.length;i++){q=null;p=null;r=null;last=(px.length==1);try{r=px[i].call(this,s);}catch(e){continue;}
rx=[[r[0]],r[1]];if(r[1].length>0&&!last){try{q=d.call(this,r[1]);}catch(ex){last=true;}}else{last=true;}
if(!last&&q[1].length===0){last=true;}
if(!last){var qx=[];for(var j=0;j<px.length;j++){if(i!=j){qx.push(px[j]);}}
p=_.set(qx,d).call(this,q[1]);if(p[0].length>0){rx[0]=rx[0].concat(p[0]);rx[1]=p[1];}}
if(rx[1].length<best[1].length){best=rx;}
if(best[1].length===0){break;}}
if(best[0].length===0){return best;}
if(c){try{q=c.call(this,best[1]);}catch(ey){throw new $P.Exception(best[1]);}
best[1]=q[1];}
return best;};},forward:function(gr,fname){return function(s){return gr[fname].call(this,s);};},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]];};},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]];};},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min){throw new $P.Exception(s);}
return rx;};}};var _generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1){args=Array.prototype.slice.call(arguments);}else if(arguments[0]instanceof Array){args=arguments[0];}
if(args){for(var i=0,px=args.shift();i<px.length;i++){args.unshift(px[i]);rx.push(op.apply(null,args));args.shift();return rx;}}else{return op.apply(null,arguments);}};};var gx="optional not ignore cache".split(/\s/);for(var i=0;i<gx.length;i++){_[gx[i]]=_generator(_[gx[i]]);}
var _vector=function(op){return function(){if(arguments[0]instanceof Array){return op.apply(null,arguments[0]);}else{return op.apply(null,arguments);}};};var vx="each any all".split(/\s/);for(var j=0;j<vx.length;j++){_[vx[j]]=_vector(_[vx[j]]);}}());(function(){var flattenAndCompact=function(ax){var rx=[];for(var i=0;i<ax.length;i++){if(ax[i]instanceof Array){rx=rx.concat(flattenAndCompact(ax[i]));}else{if(ax[i]){rx.push(ax[i]);}}}
return rx;};Date.Grammar={};Date.Translator={hour:function(s){return function(){this.hour=Number(s);};},minute:function(s){return function(){this.minute=Number(s);};},second:function(s){return function(){this.second=Number(s);};},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase();};},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");if(n.length){this.timezoneOffset=Number(n);}else{this.timezone=s.toLowerCase();}};},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0]);};},month:function(s){return function(){this.month=((s.length==3)?Date.getMonthNumberFromName(s):(Number(s)-1));};},year:function(s){return function(){var n=Number(s);this.year=((s.length>2)?n:(n+(((n+2000)<Date.CultureInfo.twoDigitYearMax)?2000:1900)));};},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0;this.now=true;break;}};},finishExact:function(x){x=(x instanceof Array)?x:[x];var now=new Date();this.year=now.getFullYear();this.month=now.getMonth();this.day=now.getDay();this.hour=0;this.minute=0;this.second=0;for(var i=0;i<x.length;i++){if(x[i]){x[i].call(this);}}
this.hour=(this.meridian=="p"&&this.hour<13)?this.hour+12:this.hour;if(this.day>Date.getDaysInMonth(this.year,this.month)){throw new RangeError(this.day+" is not a valid value for days.");}
var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);if(this.timezone){r.set({timezone:this.timezone});}else if(this.timezoneOffset){r.set({timezoneOffset:this.timezoneOffset});}
return r;},finish:function(x){x=(x instanceof Array)?flattenAndCompact(x):[x];if(x.length===0){return null;}
for(var i=0;i<x.length;i++){if(typeof x[i]=="function"){x[i].call(this);}}
if(this.now){return new Date();}
var today=new Date();var method=null;var expression=!!(this.days!=null||this.orient||this.operator);if(expression){var gap,mod,orient;orient=((this.orient=="past"||this.operator=="subtract")?-1:1);if(this.weekday){this.unit="day";gap=(Date.getDayNumberFromName(this.weekday)-today.getDay());mod=7;this.days=gap?((gap+(orient*mod))%mod):(orient*mod);}
if(this.month){this.unit="month";gap=(this.month-today.getMonth());mod=12;this.months=gap?((gap+(orient*mod))%mod):(orient*mod);this.month=null;}
if(!this.unit){this.unit="day";}
if(this[this.unit+"s"]==null||this.operator!=null){if(!this.value){this.value=1;}
if(this.unit=="week"){this.unit="day";this.value=this.value*7;}
this[this.unit+"s"]=this.value*orient;}
return today.add(this);}else{if(this.meridian&&this.hour){this.hour=(this.hour<13&&this.meridian=="p")?this.hour+12:this.hour;}
if(this.weekday&&!this.day){this.day=(today.addDays((Date.getDayNumberFromName(this.weekday)-today.getDay()))).getDate();}
if(this.month&&!this.day){this.day=1;}
return today.set(this);}}};var _=Date.Parsing.Operators,g=Date.Grammar,t=Date.Translator,_fn;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter=_.stoken(":");g.whiteSpace=_.rtoken(/^\s*/);g.generalDelimiter=_.rtoken(/^(([\s\,]|at|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){var c=Date.CultureInfo.regexPatterns;var kx=keys.split(/\s+/),px=[];for(var i=0;i<kx.length;i++){px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));}
fn=_C[keys]=_.any.apply(null,px);}
return fn;};g.ctoken2=function(key){return _.rtoken(Date.CultureInfo.regexPatterns[key]);};g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour));g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour));g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour));g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour));g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute));g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute));g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second));g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second));g.hms=_.cache(_.sequence([g.H,g.mm,g.ss],g.timePartDelimiter));g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian));g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian));g.z=_.cache(_.process(_.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),t.timezone));g.zz=_.cache(_.process(_.rtoken(/^(\+|\-)\s*\d\d\d\d/),t.timezone));g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone));g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz]));g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix);g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day));g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s;};}));g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month));g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month));g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month));g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year));g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year));g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year));g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year));_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")));};g.day=_fn(g.d,g.dd);g.month=_fn(g.M,g.MMM);g.year=_fn(g.yyyy,g.yy);g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s;};});g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s;};});g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday);g.unit=_.process(g.ctoken("minute hour day week month year"),function(s){return function(){this.unit=s;};});g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"");};});g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]);_fn=function(){return _.set(arguments,g.datePartDelimiter);};g.mdy=_fn(g.ddd,g.month,g.day,g.year);g.ymd=_fn(g.ddd,g.year,g.month,g.day);g.dmy=_fn(g.ddd,g.day,g.month,g.year);g.date=function(s){return((g[Date.CultureInfo.dateElementOrder]||g.mdy).call(this,s));};g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt]){return g[fmt];}else{throw Date.Parsing.Exception(fmt);}}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s));}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact);});var _F={};var _get=function(f){return _F[f]=(_F[f]||g.format(f)[0]);};g.formats=function(fx){if(fx instanceof Array){var rx=[];for(var i=0;i<fx.length;i++){rx.push(_get(fx[i]));}
return _.any.apply(null,rx);}else{return _get(fx);}};g._formats=g.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]);g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish);g.start=function(s){try{var r=g._formats.call({},s);if(r[1].length===0){return r;}}catch(e){}
return g._start.call({},s);};}());Date._parse=Date.parse;Date.parse=function(s){var r=null;if(!s){return null;}
try{r=Date.Grammar.start.call({},s);}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};Date.getParseFunction=function(fx){var fn=Date.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s);}catch(e){return null;}
return((r[1].length===0)?r[0]:null);};};Date.parseExact=function(s,fx){return Date.getParseFunction(fx)(s);};(function(){var $D=Date,$P=$D.prototype,$C=$D.CultureInfo,$f=[],p=function(s,l){if(!l){l=2;}
return("000"+s).slice(l*-1);};$D.normalizeFormat=function(format){$f=[];var t=new Date().$format(format);return $f.join("");};$D.strftime=function(format,time){return new Date(time*1000).$format(format);};$D.strtotime=function(time){var d=$D.parse(time);d.addMinutes(d.getTimezoneOffset()*-1);return Math.round($D.UTC(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds())/1000);};$P.$format=function(format){var x=this,y,t=function(v){$f.push(v);return x.toString(v);};return format?format.replace(/(%|\\)?.|%%/g,function(m){if(m.charAt(0)==="\\"||m.substring(0,2)==="%%"){return m.replace("\\","").replace("%%","%");}
switch(m){case"d":case"%d":return t("dd");case"D":case"%a":return t("ddd");case"j":case"%e":return t("d");case"l":case"%A":return t("dddd");case"N":case"%u":return x.getDay()+1;case"S":return t("S");case"w":case"%w":return x.getDay();case"z":return x.getOrdinalNumber();case"%j":return p(x.getOrdinalNumber(),3);case"%U":var d1=x.clone().set({month:0,day:1}).addDays(-1).moveToDayOfWeek(0),d2=x.clone().addDays(1).moveToDayOfWeek(0,-1);return(d2<d1)?"00":p((d2.getOrdinalNumber()-d1.getOrdinalNumber())/7+1);case"W":case"%V":return x.getISOWeek();case"%W":return p(x.getWeek());case"F":case"%B":return t("MMMM");case"m":case"%m":return t("MM");case"M":case"%b":case"%h":return t("MMM");case"n":return t("M");case"t":return $D.getDaysInMonth(x.getFullYear(),x.getMonth());case"L":return($D.isLeapYear(x.getFullYear()))?1:0;case"o":case"%G":return x.setWeek(x.getISOWeek()).toString("yyyy");case"%g":return x.$format("%G").slice(-2);case"Y":case"%Y":return t("yyyy");case"y":case"%y":return t("yy");case"a":case"%p":return t("tt").toLowerCase();case"A":return t("tt").toUpperCase();case"g":case"%I":return t("h");case"G":return t("H");case"h":return t("hh");case"H":case"%H":return t("HH");case"i":case"%M":return t("mm");case"s":case"%S":return t("ss");case"u":return p(x.getMilliseconds(),3);case"I":return(x.isDaylightSavingTime())?1:0;case"O":return x.getUTCOffset();case"P":y=x.getUTCOffset();return y.substring(0,y.length-2)+":"+y.substring(y.length-2);case"e":case"T":case"%z":case"%Z":return x.getTimezone();case"Z":return x.getTimezoneOffset()*-60;case"B":var now=new Date();return Math.floor(((now.getHours()*3600)+(now.getMinutes()*60)+now.getSeconds()+(now.getTimezoneOffset()+60)*60)/86.4);case"c":return x.toISOString().replace(/\"/g,"");case"U":return $D.strtotime("now");case"%c":return t("d")+" "+t("t");case"%C":return Math.floor(x.getFullYear()/100+1);case"%D":return t("MM/dd/yy");case"%n":return"\\n";case"%t":return"\\t";case"%r":return t("hh:mm tt");case"%R":return t("H:mm");case"%T":return t("H:mm:ss");case"%x":return t("d");case"%X":return t("t");default:$f.push(m);﻿ ﻿ ﻿ return m;}}):this._toString();};if(!$P.format){$P.format=$P.$format;}}());(function($,undefined){$.ui=$.ui||{};if($.ui.version){return;}
$.extend($.ui,{version:"1.8.16",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});$.fn.extend({propAttr:$.fn.prop||$.fn.attr,_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem);}},delay);}):this._focus.apply(this,arguments);},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css('position')))||(/absolute/).test(this.css('position'))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.curCSS(this,'position',1))&&(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));}).eq(0);}
return(/fixed/).test(this.css('position'))||!scrollParent.length?$(document):scrollParent;},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex);}
if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value;}}
elem=elem.parent();}}
return 0;},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault();});},enableSelection:function(){return this.unbind(".ui-disableSelection");}});$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.curCSS(elem,"padding"+this,true))||0;if(border){size-=parseFloat($.curCSS(elem,"border"+this+"Width",true))||0;}
if(margin){size-=parseFloat($.curCSS(elem,"margin"+this,true))||0;}});return size;}
$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this);}
return this.each(function(){$(this).css(type,reduce(this,size)+"px");});};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size);}
return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px");});};});function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();if("area"===nodeName){var map=element.parentNode,mapName=map.name,img;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false;}
img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img);}
return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"==nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element);}
function visible(element){return!$(element).parents().andSelf().filter(function(){return $.curCSS(this,"visibility")==="hidden"||$.expr.filters.hidden(this);}).length;}
$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3]);},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")));},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN);}});$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});$.support.minHeight=div.offsetHeight===100;$.support.selectstart="onselectstart"in div;body.removeChild(div).style.display="none";});$.extend($.ui,{plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]]);}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode){return;}
for(var i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args);}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b);},hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false;}
var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true;}
el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has;},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size));},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width);}});})(jQuery);(function($,undefined){if($.cleanData){var _cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){try{$(elem).triggerHandler("remove");}catch(e){}}
_cleanData(elems);};}else{var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData){if(!selector||$.filter(selector,[this]).length){$("*",this).add([this]).each(function(){try{$(this).triggerHandler("remove");}catch(e){}});}}
return _remove.call($(this),selector,keepData);});};}
$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName]=function(elem){return!!$.data(elem,name);};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length){this._createWidget(options,element);}};var basePrototype=new base();basePrototype.options=$.extend(true,{},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name]);};$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.charAt(0)==="_"){return returnValue;}
if(isMethodCall){this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,name);if(instance){instance.option(options||{})._init();}else{$.data(this,name,new object(options,this));}});}
return returnValue;};};$.Widget=function(options,element){if(arguments.length){this._createWidget(options,element);}};$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(options,element){$.data(element,this.widgetName,this);this.element=$(element);this.options=$.extend(true,{},this.options,this._getCreateOptions(),options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy();});this._create();this._trigger("create");this._init();},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName];},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled");},widget:function(){return this.element;},option:function(key,value){var options=key;if(arguments.length===0){return $.extend({},this.options);}
if(typeof key==="string"){if(value===undefined){return this.options[key];}
options={};options[key]=value;}
this._setOptions(options);return this;},_setOptions:function(options){var self=this;$.each(options,function(key,value){self._setOption(key,value);});return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget()
[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",value);}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop];}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};})(jQuery);(function($,undefined){var mouseHandled=false;$(document).mouseup(function(e){mouseHandled=false;});$.widget("ui.mouse",{options:{cancel:':input,option',distance:1,delay:0},_mouseInit:function(){var self=this;this.element.bind('mousedown.'+this.widgetName,function(event){return self._mouseDown(event);}).bind('click.'+this.widgetName,function(event){if(true===$.data(event.target,self.widgetName+'.preventClickEvent')){$.removeData(event.target,self.widgetName+'.preventClickEvent');event.stopImmediatePropagation();return false;}});this.started=false;},_mouseDestroy:function(){this.element.unbind('.'+this.widgetName);},_mouseDown:function(event){if(mouseHandled){return};(this._mouseStarted&&this._mouseUp(event));this._mouseDownEvent=event;var self=this,btnIsLeft=(event.which==1),elIsCancel=(typeof this.options.cancel=="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:false);if(!btnIsLeft||elIsCancel||!this._mouseCapture(event)){return true;}
this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){self.mouseDelayMet=true;},this.options.delay);}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(event)!==false);if(!this._mouseStarted){event.preventDefault();return true;}}
if(true===$.data(event.target,this.widgetName+'.preventClickEvent')){$.removeData(event.target,this.widgetName+'.preventClickEvent');}
this._mouseMoveDelegate=function(event){return self._mouseMove(event);};this._mouseUpDelegate=function(event){return self._mouseUp(event);};$(document).bind('mousemove.'+this.widgetName,this._mouseMoveDelegate).bind('mouseup.'+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true;},_mouseMove:function(event){if($.browser.msie&&!(document.documentMode>=9)&&!event.button){return this._mouseUp(event);}
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault();}
if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,event)!==false);(this._mouseStarted?this._mouseDrag(event):this._mouseUp(event));}
return!this._mouseStarted;},_mouseUp:function(event){$(document).unbind('mousemove.'+this.widgetName,this._mouseMoveDelegate).unbind('mouseup.'+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(event.target==this._mouseDownEvent.target){$.data(event.target,this.widgetName+'.preventClickEvent',true);}
this._mouseStop(event);}
return false;},_mouseDistanceMet:function(event){return(Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance);},_mouseDelayMet:function(event){return this.mouseDelayMet;},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return true;}});})(jQuery);(function($,undefined){$.ui=$.ui||{};var horizontalPositions=/left|center|right/,verticalPositions=/top|center|bottom/,center="center",_position=$.fn.position,_offset=$.fn.offset;$.fn.position=function(options){if(!options||!options.of){return _position.apply(this,arguments);}
options=$.extend({},options);var target=$(options.of),targetElem=target[0],collision=(options.collision||"flip").split(" "),offset=options.offset?options.offset.split(" "):[0,0],targetWidth,targetHeight,basePosition;if(targetElem.nodeType===9){targetWidth=target.width();targetHeight=target.height();basePosition={top:0,left:0};}else if(targetElem.setTimeout){targetWidth=target.width();targetHeight=target.height();basePosition={top:target.scrollTop(),left:target.scrollLeft()};}else if(targetElem.preventDefault){options.at="left top";targetWidth=targetHeight=0;basePosition={top:options.of.pageY,left:options.of.pageX};}else{targetWidth=target.outerWidth();targetHeight=target.outerHeight();basePosition=target.offset();}
$.each(["my","at"],function(){var pos=(options[this]||"").split(" ");if(pos.length===1){pos=horizontalPositions.test(pos[0])?pos.concat([center]):verticalPositions.test(pos[0])?[center].concat(pos):[center,center];}
pos[0]=horizontalPositions.test(pos[0])?pos[0]:center;pos[1]=verticalPositions.test(pos[1])?pos[1]:center;options[this]=pos;});if(collision.length===1){collision[1]=collision[0];}
offset[0]=parseInt(offset[0],10)||0;if(offset.length===1){offset[1]=offset[0];}
offset[1]=parseInt(offset[1],10)||0;if(options.at[0]==="right"){basePosition.left+=targetWidth;}else if(options.at[0]===center){basePosition.left+=targetWidth/2;}
if(options.at[1]==="bottom"){basePosition.top+=targetHeight;}else if(options.at[1]===center){basePosition.top+=targetHeight/2;}
basePosition.left+=offset[0];basePosition.top+=offset[1];return this.each(function(){var elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseInt($.curCSS(this,"marginLeft",true))||0,marginTop=parseInt($.curCSS(this,"marginTop",true))||0,collisionWidth=elemWidth+marginLeft+
(parseInt($.curCSS(this,"marginRight",true))||0),collisionHeight=elemHeight+marginTop+
(parseInt($.curCSS(this,"marginBottom",true))||0),position=$.extend({},basePosition),collisionPosition;if(options.my[0]==="right"){position.left-=elemWidth;}else if(options.my[0]===center){position.left-=elemWidth/2;}
if(options.my[1]==="bottom"){position.top-=elemHeight;}else if(options.my[1]===center){position.top-=elemHeight/2;}
position.left=Math.round(position.left);position.top=Math.round(position.top);collisionPosition={left:position.left-marginLeft,top:position.top-marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]]){$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:offset,my:options.my,at:options.at});}});if($.fn.bgiframe){elem.bgiframe();}
elem.offset($.extend(position,{using:options.using}));});};$.ui.position={fit:{left:function(position,data){var win=$(window),over=data.collisionPosition.left+data.collisionWidth-win.width()-win.scrollLeft();position.left=over>0?position.left-over:Math.max(position.left-data.collisionPosition.left,position.left);},top:function(position,data){var win=$(window),over=data.collisionPosition.top+data.collisionHeight-win.height()-win.scrollTop();position.top=over>0?position.top-over:Math.max(position.top-data.collisionPosition.top,position.top);}},flip:{left:function(position,data){if(data.at[0]===center){return;}
var win=$(window),over=data.collisionPosition.left+data.collisionWidth-win.width()-win.scrollLeft(),myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:-data.targetWidth,offset=-2*data.offset[0];position.left+=data.collisionPosition.left<0?myOffset+atOffset+offset:over>0?myOffset+atOffset+offset:0;},top:function(position,data){if(data.at[1]===center){return;}
var win=$(window),over=data.collisionPosition.top+data.collisionHeight-win.height()-win.scrollTop(),myOffset=data.my[1]==="top"?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:-data.targetHeight,offset=-2*data.offset[1];position.top+=data.collisionPosition.top<0?myOffset+atOffset+offset:over>0?myOffset+atOffset+offset:0;}}};if(!$.offset.setOffset){$.offset.setOffset=function(elem,options){if(/static/.test($.curCSS(elem,"position"))){elem.style.position="relative";}
var curElem=$(elem),curOffset=curElem.offset(),curTop=parseInt($.curCSS(elem,"top",true),10)||0,curLeft=parseInt($.curCSS(elem,"left",true),10)||0,props={top:(options.top-curOffset.top)+curTop,left:(options.left-curOffset.left)+curLeft};if('using'in options){options.using.call(elem,props);}else{curElem.css(props);}};$.fn.offset=function(options){var elem=this[0];if(!elem||!elem.ownerDocument){return null;}
if(options){return this.each(function(){$.offset.setOffset(this,options);});}
return _offset.call(this);};}}(jQuery));(function($,undefined){$.widget("ui.draggable",$.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=='original'&&!(/^(?:r|a|f)/).test(this.element.css("position")))
this.element[0].style.position='relative';(this.options.addClasses&&this.element.addClass("ui-draggable"));(this.options.disabled&&this.element.addClass("ui-draggable-disabled"));this._mouseInit();},destroy:function(){if(!this.element.data('draggable'))return;this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable"
+" ui-draggable-dragging"
+" ui-draggable-disabled");this._mouseDestroy();return this;},_mouseCapture:function(event){var o=this.options;if(this.helper||o.disabled||$(event.target).is('.ui-resizable-handle'))
return false;this.handle=this._getHandle(event);if(!this.handle)
return false;if(o.iframeFix){$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css($(this).offset()).appendTo("body");});}
return true;},_mouseStart:function(event){var o=this.options;this.helper=this._createHelper(event);this._cacheHelperProportions();if($.ui.ddmanager)
$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));if(o.containment)
this._setContainment();if(this._trigger("start",event)===false){this._clear();return false;}
this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(this,event);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(event,true);if($.ui.ddmanager)$.ui.ddmanager.dragStart(this,event);return true;},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger('drag',event,ui)===false){this._mouseUp({});return false;}
this.position=ui.position;}
if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+'px';if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+'px';if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);return false;},_mouseStop:function(event){var dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)
dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false;}
if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")
return false;if((this.options.revert=="invalid"&&!dropped)||(this.options.revert=="valid"&&dropped)||this.options.revert===true||($.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))){var self=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(self._trigger("stop",event)!==false){self._clear();}});}else{if(this._trigger("stop",event)!==false){this._clear();}}
return false;},_mouseUp:function(event){if(this.options.iframeFix===true){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this);});}
if($.ui.ddmanager)$.ui.ddmanager.dragStop(this,event);return $.ui.mouse.prototype._mouseUp.call(this,event);},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({});}else{this._clear();}
return this;},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==event.target)handle=true;});return handle;},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):(o.helper=='clone'?this.element.clone().removeAttr('id'):this.element);if(!helper.parents('body').length)
helper.appendTo((o.appendTo=='parent'?this.element[0].parentNode:o.appendTo));if(helper[0]!=this.element[0]&&!(/(fixed|absolute)/).test(helper.css("position")))
helper.css("position","absolute");return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=='string'){obj=obj.split(' ');}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if('left'in obj){this.offset.click.left=obj.left+this.margins.left;}
if('right'in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if('top'in obj){this.offset.click.top=obj.top+this.margins.top;}
if('bottom'in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=='absolute'&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=='html'&&$.browser.msie))
po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=='parent')o.containment=this.helper[0].parentNode;if(o.containment=='document'||o.containment=='window')this.containment=[o.containment=='document'?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment=='document'?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment=='document'?0:$(window).scrollLeft())+$(o.containment=='document'?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment=='document'?0:$(window).scrollTop())+($(o.containment=='document'?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!(/^(document|window|parent)$/).test(o.containment)&&o.containment.constructor!=Array){var c=$(o.containment);var ce=c[0];if(!ce)return;var co=c.offset();var over=($(ce).css("overflow")!='hidden');this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=c;}else if(o.containment.constructor==Array){this.containment=o.containment;}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top
+this.offset.relative.top*mod
+this.offset.parent.top*mod
-($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left
+this.offset.relative.left*mod
+this.offset.parent.left*mod
-($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top];}
else{containment=this.containment;}
if(event.pageX-this.offset.click.left<containment[0])pageX=containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<containment[1])pageY=containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>containment[2])pageX=containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>containment[3])pageY=containment[3]+this.offset.click.top;}
if(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?(!(top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3])?top:(!(top-this.offset.click.top<containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?(!(left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2])?left:(!(left-this.offset.click.left<containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY
-this.offset.click.top
-this.offset.relative.top
-this.offset.parent.top
+($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX
-this.offset.click.left
-this.offset.relative.left
-this.offset.parent.left
+($.browser.safari&&$.browser.version<526&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false;},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type=="drag")this.positionAbs=this._convertPositionTo("absolute");return $.Widget.prototype._trigger.call(this,type,event,ui);},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs};}});$.extend($.ui.draggable,{version:"1.8.16"});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,'sortable');if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable);}});},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;if(inst.options.helper=='original')
this.instance.currentItem.css({top:'auto',left:'auto'});}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable);}});},drag:function(event,ui){var inst=$(this).data("draggable"),self=this;var checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left;var itemHeight=o.height,itemWidth=o.width;var itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth);};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(self).clone().removeAttr('id').appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0];};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst;}
if(this.instance.currentItem)this.instance._mouseDrag(event);}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger('out',event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger("fromSortable",event);inst.dropped=false;}};});}});$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$('body'),o=$(this).data('draggable').options;if(t.css("cursor"))o._cursor=t.css("cursor");t.css("cursor",o.cursor);},stop:function(event,ui){var o=$(this).data('draggable').options;if(o._cursor)$('body').css("cursor",o._cursor);}});$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data('draggable').options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css('opacity',o.opacity);},stop:function(event,ui){var o=$(this).data('draggable').options;if(o._opacity)$(ui.helper).css('opacity',o._opacity);}});$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!='HTML')i.overflowOffset=i.scrollParent.offset();},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=false;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!='HTML'){if(!o.axis||o.axis!='x'){if((i.overflowOffset.top+i.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity)
i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)
i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;}
if(!o.axis||o.axis!='y'){if((i.overflowOffset.left+i.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity)
i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)
i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed;}}else{if(!o.axis||o.axis!='x'){if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);}
if(!o.axis||o.axis!='y'){if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(i,event);}});$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!=String?(o.snap.items||':data(draggable)'):o.snap).each(function(){var $t=$(this);var $o=$t.offset();if(this!=i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left});});},drag:function(event,ui){var inst=$(this).data("draggable"),o=inst.options;var d=o.snapTolerance;var x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!((l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d)||(l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d)||(l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d)||(l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d))){if(inst.snapElements[i].snapping)(inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));inst.snapElements[i].snapping=false;continue;}
if(o.snapMode!='inner'){var ts=Math.abs(t-y2)<=d;var bs=Math.abs(b-y1)<=d;var ls=Math.abs(l-x2)<=d;var rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left;}
var first=(ts||bs||ls||rs);if(o.snapMode!='outer'){var ts=Math.abs(t-y1)<=d;var bs=Math.abs(b-y2)<=d;var ls=Math.abs(l-x1)<=d;var rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left;}
if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))
(inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})));inst.snapElements[i].snapping=(ts||bs||ls||rs||first);};}});$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options;var group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0);});if(!group.length){return;}
var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i;});this[0].style.zIndex=min+group.length;}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css('zIndex',o.zIndex);},stop:function(event,ui){var o=$(this).data("draggable").options;if(o._zIndex)$(ui.helper).css('zIndex',o._zIndex);}});})(jQuery);(function($,undefined){$.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:'*',activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:'default',tolerance:'intersect'},_create:function(){var o=this.options,accept=o.accept;this.isover=0;this.isout=1;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept);};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);(o.addClasses&&this.element.addClass("ui-droppable"));},destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];for(var i=0;i<drop.length;i++)
if(drop[i]==this)
drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this;},_setOption:function(key,value){if(key=='accept'){this.accept=$.isFunction(value)?value:function(d){return d.is(value);};}
$.Widget.prototype._setOption.apply(this,arguments);},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);(draggable&&this._trigger('activate',event,this.ui(draggable)));},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);(draggable&&this._trigger('deactivate',event,this.ui(draggable)));},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger('over',event,this.ui(draggable));}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger('out',event,this.ui(draggable));}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return false;var childrenIntersection=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,'droppable');if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],(draggable.currentItem||draggable.element))&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false;}});if(childrenIntersection)return false;if(this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger('drop',event,this.ui(draggable));return this.element;}
return false;},ui:function(c){return{draggable:(c.currentItem||c.element),helper:c.helper,position:c.position,offset:c.positionAbs};}});$.extend($.ui.droppable,{version:"1.8.16"});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height;var l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case'fit':return(l<=x1&&x2<=r&&t<=y1&&y2<=b);break;case'intersect':return(l<x1+(draggable.helperProportions.width/2)&&x2-(draggable.helperProportions.width/2)<r&&t<y1+(draggable.helperProportions.height/2)&&y2-(draggable.helperProportions.height/2)<b);break;case'pointer':var draggableLeft=((draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left),draggableTop=((draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top),isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;break;case'touch':return((y1>=t&&y1<=b)||(y2>=t&&y2<=b)||(y1<t&&y2>b))&&((x1>=l&&x1<=r)||(x2>=l&&x2<=r)||(x1<l&&x2>r));break;default:return false;break;}};$.ui.ddmanager={current:null,droppables:{'default':[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[];var type=event?event.type:null;var list=(t.currentItem||t.element).find(":data(droppable)").andSelf();droppablesLoop:for(var i=0;i<m.length;i++){if(m[i].options.disabled||(t&&!m[i].accept.call(m[i].element[0],(t.currentItem||t.element))))continue;for(var j=0;j<list.length;j++){if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop;}};m[i].visible=m[i].element.css("display")!="none";if(!m[i].visible)continue;if(type=="mousedown")m[i]._activate.call(m[i],event);m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight};}},drop:function(draggable,event){var dropped=false;$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options)return;if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance))
dropped=dropped||this._drop.call(this,event);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(draggable.currentItem||draggable.element))){this.isout=1;this.isover=0;this._deactivate.call(this,event);}});return dropped;},dragStart:function(draggable,event){draggable.element.parents(":not(body,html)").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);});},drag:function(draggable,event){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var intersects=$.ui.intersect(draggable,this,this.options.tolerance);var c=!intersects&&this.isover==1?'isout':(intersects&&this.isover==0?'isover':null);if(!c)return;var parentInstance;if(this.options.greedy){var parent=this.element.parents(':data(droppable):eq(0)');if(parent.length){parentInstance=$.data(parent[0],'droppable');parentInstance.greedyChild=(c=='isover'?1:0);}}
if(parentInstance&&c=='isover'){parentInstance['isover']=0;parentInstance['isout']=1;parentInstance._out.call(parentInstance,event);}
this[c]=1;this[c=='isout'?'isover':'isout']=0;this[c=="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c=='isout'){parentInstance['isout']=0;parentInstance['isover']=1;parentInstance._over.call(parentInstance,event);}});},dragStop:function(draggable,event){draggable.element.parents(":not(body,html)").unbind("scroll.droppable");if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);}};})(jQuery);(function($,undefined){$.widget("ui.resizable",$.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var self=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!(o.aspectRatio),aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||'ui-resizable-helper':null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){if(/relative/.test(this.element.css('position'))&&$.browser.opera)
this.element.css({position:'relative',top:'auto',left:'auto'});this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css('position'),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css('top'),left:this.element.css('left')}));this.element=this.element.parent().data("resizable",this.element.data('resizable'));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css('resize');this.originalElement.css('resize','none');this._proportionallyResizeElements.push(this.originalElement.css({position:'static',zoom:1,display:'block'}));this.originalElement.css({margin:this.originalElement.css('margin')});this._proportionallyResize();}
this.handles=o.handles||(!$('.ui-resizable-handle',this.element).length?"e,s,se":{n:'.ui-resizable-n',e:'.ui-resizable-e',s:'.ui-resizable-s',w:'.ui-resizable-w',se:'.ui-resizable-se',sw:'.ui-resizable-sw',ne:'.ui-resizable-ne',nw:'.ui-resizable-nw'});if(this.handles.constructor==String){if(this.handles=='all')this.handles='n,e,s,w,se,sw,ne,nw';var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname='ui-resizable-'+handle;var axis=$('<div class="ui-resizable-handle '+hname+'"></div>');if(/sw|se|ne|nw/.test(handle))axis.css({zIndex:++o.zIndex});if('se'==handle){axis.addClass('ui-icon ui-icon-gripsmall-diagonal-se');};this.handles[handle]='.ui-resizable-'+handle;this.element.append(axis);}}
this._renderAxis=function(target){target=target||this.element;for(var i in this.handles){if(this.handles[i].constructor==String)
this.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=['padding',/ne|nw|n/.test(i)?'Top':/se|sw|s/.test(i)?'Bottom':/^e$/.test(i)?'Right':'Left'].join("");target.css(padPos,padWrapper);this._proportionallyResize();}
if(!$(this.handles[i]).length)
continue;}};this._renderAxis(this.element);this._handles=$('.ui-resizable-handle',this.element).disableSelection();this._handles.mouseover(function(){if(!self.resizing){if(this.className)
var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);self.axis=axis&&axis[1]?axis[1]:'se';}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").hover(function(){if(o.disabled)return;$(this).removeClass("ui-resizable-autohide");self._handles.show();},function(){if(o.disabled)return;if(!self.resizing){$(this).addClass("ui-resizable-autohide");self._handles.hide();}});}
this._mouseInit();},destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find('.ui-resizable-handle').remove();};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css('position'),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css('top'),left:wrapper.css('left')})).remove();}
this.originalElement.css('resize',this.originalResizeStyle);_destroy(this.originalElement);return this;},_mouseCapture:function(event){var handle=false;for(var i in this.handles){if($(this.handles[i])[0]==event.target){handle=true;}}
return!this.options.disabled&&handle;},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()};if(el.is('.ui-draggable')||(/absolute/).test(el.css('position'))){el.css({position:'absolute',top:iniPos.top,left:iniPos.left});}
if($.browser.opera&&(/relative/).test(el.css('position')))
el.css({position:'relative',top:'auto',left:'auto'});this._renderProxy();var curleft=num(this.helper.css('left')),curtop=num(this.helper.css('top'));if(o.containment){curleft+=$(o.containment).scrollLeft()||0;curtop+=$(o.containment).scrollTop()||0;}
this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition={left:event.pageX,top:event.pageY};this.aspectRatio=(typeof o.aspectRatio=='number')?o.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var cursor=$('.ui-resizable-'+this.axis).css('cursor');$('body').css('cursor',cursor=='auto'?this.axis+'-resize':cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true;},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},self=this,smp=this.originalMousePosition,a=this.axis;var dx=(event.pageX-smp.left)||0,dy=(event.pageY-smp.top)||0;var trigger=this._change[a];if(!trigger)return false;var data=trigger.apply(this,[event,dx,dy]),ie6=$.browser.msie&&$.browser.version<7,csdif=this.sizeDiff;this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey)
data=this._updateRatio(data,event);data=this._respectSize(data,event);this._propagate("resize",event);el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length)
this._proportionallyResize();this._updateCache(data);this._trigger('resize',event,this.ui());return false;},_mouseStop:function(event){this.resizing=false;var o=this.options,self=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],'left')?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var s={width:(self.helper.width()-soffsetw),height:(self.helper.height()-soffseth)},left=(parseInt(self.element.css('left'),10)+(self.position.left-self.originalPosition.left))||null,top=(parseInt(self.element.css('top'),10)+(self.position.top-self.originalPosition.top))||null;if(!o.animate)
this.element.css($.extend(s,{top:top,left:left}));self.helper.height(self.size.height);self.helper.width(self.size.width);if(this._helper&&!o.animate)this._proportionallyResize();}
$('body').css('cursor','auto');this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper)this.helper.remove();return false;},_updateVirtualBoundaries:function(forceAspectRatio){var o=this.options,pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth)b.minWidth=pMinWidth;if(pMinHeight>b.minHeight)b.minHeight=pMinHeight;if(pMaxWidth<b.maxWidth)b.maxWidth=pMaxWidth;if(pMaxHeight<b.maxHeight)b.maxHeight=pMaxHeight;}
this._vBoundaries=b;},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset();if(isNumber(data.left))this.position.left=data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width;},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height))data.width=(data.height*this.aspectRatio);else if(isNumber(data.width))data.height=(data.width/this.aspectRatio);if(a=='sw'){data.left=cpos.left+(csize.width-data.width);data.top=null;}
if(a=='nw'){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width);}
return data;},_respectSize:function(data,event){var el=this.helper,o=this._vBoundaries,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&(o.maxWidth<data.width),ismaxh=isNumber(data.height)&&o.maxHeight&&(o.maxHeight<data.height),isminw=isNumber(data.width)&&o.minWidth&&(o.minWidth>data.width),isminh=isNumber(data.height)&&o.minHeight&&(o.minHeight>data.height);if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height;var cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;var isNotwh=!data.width&&!data.height;if(isNotwh&&!data.left&&data.top)data.top=null;else if(isNotwh&&!data.top&&data.left)data.left=null;return data;},_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length)return;var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css('borderTopWidth'),prel.css('borderRightWidth'),prel.css('borderBottomWidth'),prel.css('borderLeftWidth')],p=[prel.css('paddingTop'),prel.css('paddingRight'),prel.css('paddingBottom'),prel.css('paddingLeft')];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding;});}
if($.browser.msie&&!(!($(element).is(':hidden')||$(element).parents(':hidden').length)))
continue;prel.css({height:(element.height()-this.borderDif[0]-this.borderDif[2])||0,width:(element.width()-this.borderDif[1]-this.borderDif[3])||0});};},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');var ie6=$.browser.msie&&$.browser.version<7,ie6offset=(ie6?1:0),pxyoffset=(ie6?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:'absolute',left:this.elementOffset.left-ie6offset+'px',top:this.elementOffset.top-ie6offset+'px',zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection();}else{this.helper=this.element;}},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx};},w:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx};},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy};},s:function(event,dx,dy){return{height:this.originalSize.height+dy};},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]));},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]));}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);(n!="resize"&&this._trigger(n,event,this.ui()));},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition};}});$.extend($.ui.resizable,{version:"1.8.16"});$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options;var _store=function(exp){$(exp).each(function(){var el=$(this);el.data("resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css('left'),10),top:parseInt(el.css('top'),10),position:el.css('position')});});};if(typeof(o.alsoResize)=='object'&&!o.alsoResize.parentNode){if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize);}
else{$.each(o.alsoResize,function(exp){_store(exp);});}}else{_store(o.alsoResize);}},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,os=self.originalSize,op=self.originalPosition;var delta={height:(self.size.height-os.height)||0,width:(self.size.width-os.width)||0,top:(self.position.top-op.top)||0,left:(self.position.left-op.left)||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?['width','height']:['width','height','top','left'];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)
style[prop]=sum||null;});if($.browser.opera&&/relative/.test(el.css('position'))){self._revertToRelativePosition=true;el.css({position:'absolute',top:'auto',left:'auto'});}
el.css(style);});};if(typeof(o.alsoResize)=='object'&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c);});}else{_alsoResize(o.alsoResize);}},stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;var _reset=function(exp){$(exp).each(function(){var el=$(this);el.css({position:el.data("resizable-alsoresize").position});});};if(self._revertToRelativePosition){self._revertToRelativePosition=false;if(typeof(o.alsoResize)=='object'&&!o.alsoResize.nodeType){$.each(o.alsoResize,function(exp){_reset(exp);});}else{_reset(o.alsoResize);}}
$(this).removeData("resizable-alsoresize");}});$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;var pr=self._proportionallyResizeElements,ista=pr.length&&(/textarea/i).test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],'left')?0:self.sizeDiff.height,soffsetw=ista?0:self.sizeDiff.width;var style={width:(self.size.width-soffsetw),height:(self.size.height-soffseth)},left=(parseInt(self.element.css('left'),10)+(self.position.left-self.originalPosition.left))||null,top=(parseInt(self.element.css('top'),10)+(self.position.top-self.originalPosition.top))||null;self.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(self.element.css('width'),10),height:parseInt(self.element.css('height'),10),top:parseInt(self.element.css('top'),10),left:parseInt(self.element.css('left'),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});self._updateCache(data);self._propagate("resize",event);}});}});$.ui.plugin.add("resizable","containment",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options,el=self.element;var oc=o.containment,ce=(oc instanceof $)?oc.get(0):(/parent/.test(oc))?el.parent().get(0):oc;if(!ce)return;self.containerElement=$(ce);if(/document/.test(oc)||oc==document){self.containerOffset={left:0,top:0};self.containerPosition={left:0,top:0};self.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};}
else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name));});self.containerOffset=element.offset();self.containerPosition=element.position();self.containerSize={height:(element.innerHeight()-p[3]),width:(element.innerWidth()-p[1])};var co=self.containerOffset,ch=self.containerSize.height,cw=self.containerSize.width,width=($.ui.hasScroll(ce,"left")?ce.scrollWidth:cw),height=($.ui.hasScroll(ce)?ce.scrollHeight:ch);self.parentData={element:ce,left:co.left,top:co.top,width:width,height:height};}},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,ps=self.containerSize,co=self.containerOffset,cs=self.size,cp=self.position,pRatio=self._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=self.containerElement;if(ce[0]!=document&&(/static/).test(ce.css('position')))cop=co;if(cp.left<(self._helper?co.left:0)){self.size.width=self.size.width+(self._helper?(self.position.left-co.left):(self.position.left-cop.left));if(pRatio)self.size.height=self.size.width/o.aspectRatio;self.position.left=o.helper?co.left:0;}
if(cp.top<(self._helper?co.top:0)){self.size.height=self.size.height+(self._helper?(self.position.top-co.top):self.position.top);if(pRatio)self.size.width=self.size.height*o.aspectRatio;self.position.top=self._helper?co.top:0;}
self.offset.left=self.parentData.left+self.position.left;self.offset.top=self.parentData.top+self.position.top;var woset=Math.abs((self._helper?self.offset.left-cop.left:(self.offset.left-cop.left))+self.sizeDiff.width),hoset=Math.abs((self._helper?self.offset.top-cop.top:(self.offset.top-co.top))+self.sizeDiff.height);var isParent=self.containerElement.get(0)==self.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(self.containerElement.css('position'));if(isParent&&isOffsetRelative)woset-=self.parentData.left;if(woset+self.size.width>=self.parentData.width){self.size.width=self.parentData.width-woset;if(pRatio)self.size.height=self.size.width/self.aspectRatio;}
if(hoset+self.size.height>=self.parentData.height){self.size.height=self.parentData.height-hoset;if(pRatio)self.size.width=self.size.height*self.aspectRatio;}},stop:function(event,ui){var self=$(this).data("resizable"),o=self.options,cp=self.position,co=self.containerOffset,cop=self.containerPosition,ce=self.containerElement;var helper=$(self.helper),ho=helper.offset(),w=helper.outerWidth()-self.sizeDiff.width,h=helper.outerHeight()-self.sizeDiff.height;if(self._helper&&!o.animate&&(/relative/).test(ce.css('position')))
$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(self._helper&&!o.animate&&(/static/).test(ce.css('position')))
$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});}});$.ui.plugin.add("resizable","ghost",{start:function(event,ui){var self=$(this).data("resizable"),o=self.options,cs=self.size;self.ghost=self.originalElement.clone();self.ghost.css({opacity:.25,display:'block',position:'relative',height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass('ui-resizable-ghost').addClass(typeof o.ghost=='string'?o.ghost:'');self.ghost.appendTo(self.helper);},resize:function(event,ui){var self=$(this).data("resizable"),o=self.options;if(self.ghost)self.ghost.css({position:'relative',height:self.size.height,width:self.size.width});},stop:function(event,ui){var self=$(this).data("resizable"),o=self.options;if(self.ghost&&self.helper)self.helper.get(0).removeChild(self.ghost.get(0));}});$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var self=$(this).data("resizable"),o=self.options,cs=self.size,os=self.originalSize,op=self.originalPosition,a=self.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);if(/^(se|s|e)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;}
else if(/^(ne)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;}
else if(/^(sw)$/.test(a)){self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.left=op.left-ox;}
else{self.size.width=os.width+ox;self.size.height=os.height+oy;self.position.top=op.top-oy;self.position.left=op.left-ox;}}});var num=function(v){return parseInt(v,10)||0;};var isNumber=function(value){return!isNaN(parseInt(value,10));};})(jQuery);(function($,undefined){$.widget("ui.selectable",$.ui.mouse,{options:{appendTo:'body',autoRefresh:true,distance:0,filter:'*',tolerance:'touch'},_create:function(){var self=this;this.element.addClass("ui-selectable");this.dragged=false;var selectees;this.refresh=function(){selectees=$(self.options.filter,self.element[0]);selectees.each(function(){var $this=$(this);var pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass('ui-selected'),selecting:$this.hasClass('ui-selecting'),unselecting:$this.hasClass('ui-unselecting')});});};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>");},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this;},_mouseStart:function(event){var self=this;this.opos=[event.pageX,event.pageY];if(this.options.disabled)
return;var options=this.options;this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.clientX,"top":event.clientY,"width":0,"height":0});if(options.autoRefresh){this.refresh();}
this.selectees.filter('.ui-selected').each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey){selectee.$element.removeClass('ui-selected');selectee.selected=false;selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;self._trigger("unselecting",event,{unselecting:selectee.element});}});$(event.target).parents().andSelf().each(function(){var selectee=$.data(this,"selectable-item");if(selectee){var doSelect=!event.metaKey||!selectee.$element.hasClass('ui-selected');selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect){self._trigger("selecting",event,{selecting:selectee.element});}else{self._trigger("unselecting",event,{unselecting:selectee.element});}
return false;}});},_mouseDrag:function(event){var self=this;this.dragged=true;if(this.options.disabled)
return;var options=this.options;var x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1;x1=tmp;}
if(y1>y2){var tmp=y2;y2=y1;y1=tmp;}
this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item");if(!selectee||selectee.element==self.element[0])
return;var hit=false;if(options.tolerance=='touch'){hit=(!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1));}else if(options.tolerance=='fit'){hit=(selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2);}
if(hit){if(selectee.selected){selectee.$element.removeClass('ui-selected');selectee.selected=false;}
if(selectee.unselecting){selectee.$element.removeClass('ui-unselecting');selectee.unselecting=false;}
if(!selectee.selecting){selectee.$element.addClass('ui-selecting');selectee.selecting=true;self._trigger("selecting",event,{selecting:selectee.element});}}else{if(selectee.selecting){if(event.metaKey&&selectee.startselected){selectee.$element.removeClass('ui-selecting');selectee.selecting=false;selectee.$element.addClass('ui-selected');selectee.selected=true;}else{selectee.$element.removeClass('ui-selecting');selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;}
self._trigger("unselecting",event,{unselecting:selectee.element});}}
if(selectee.selected){if(!event.metaKey&&!selectee.startselected){selectee.$element.removeClass('ui-selected');selectee.selected=false;selectee.$element.addClass('ui-unselecting');selectee.unselecting=true;self._trigger("unselecting",event,{unselecting:selectee.element});}}}});return false;},_mouseStop:function(event){var self=this;this.dragged=false;var options=this.options;$('.ui-unselecting',this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass('ui-unselecting');selectee.unselecting=false;selectee.startselected=false;self._trigger("unselected",event,{unselected:selectee.element});});$('.ui-selecting',this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass('ui-selecting').addClass('ui-selected');selectee.selecting=false;selectee.selected=true;selectee.startselected=true;self._trigger("selected",event,{selected:selectee.element});});this._trigger("stop",event);this.helper.remove();return false;}});$.extend($.ui.selectable,{version:"1.8.16"});})(jQuery);(function($,undefined){$.widget("ui.sortable",$.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:'auto',cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:'> *',opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?o.axis==='x'||(/left|right/).test(this.items[0].item.css('float'))||(/inline|table-cell/).test(this.items[0].item.css('display')):false;this.offset=this.element.offset();this._mouseInit();},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)
this.items[i].item.removeData("sortable-item");return this;},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget()
[value?"addClass":"removeClass"]("ui-sortable-disabled");}else{$.Widget.prototype._setOption.apply(this,arguments);}},_mouseCapture:function(event,overrideHandle){if(this.reverting){return false;}
if(this.options.disabled||this.options.type=='static')return false;this._refreshItems(event);var currentItem=null,self=this,nodes=$(event.target).parents().each(function(){if($.data(this,'sortable-item')==self){currentItem=$(this);return false;}});if($.data(event.target,'sortable-item')==self)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){var validHandle=false;$(this.options.handle,currentItem).find("*").andSelf().each(function(){if(this==event.target)validHandle=true;});if(!validHandle)return false;}
this.currentItem=currentItem;this._removeCurrentsFromItems();return true;},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options,self=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;(o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt));this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};if(this.helper[0]!=this.currentItem[0]){this.currentItem.hide();}
this._createPlaceholder();if(o.containment)
this._setContainment();if(o.cursor){if($('body').css("cursor"))this._storedCursor=$('body').css("cursor");$('body').css("cursor",o.cursor);}
if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity);}
if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex);}
if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!='HTML')
this.overflowOffset=this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)
this._cacheHelperProportions();if(!noActivation){for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("activate",event,self._uiHash(this));}}
if($.ui.ddmanager)
$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(this,event);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(event);return true;},_mouseDrag:function(event){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs;}
if(this.options.scroll){var o=this.options,scrolled=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!='HTML'){if((this.overflowOffset.top+this.scrollParent[0].offsetHeight)-event.pageY<o.scrollSensitivity)
this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)
this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if((this.overflowOffset.left+this.scrollParent[0].offsetWidth)-event.pageX<o.scrollSensitivity)
this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)
this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed;}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)
scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)
scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed);}
if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)
$.ui.ddmanager.prepareOffsets(this,event);}
this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+'px';if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+'px';for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?"next":"prev"]()[0]!=itemElement&&!$.ui.contains(this.placeholder[0],itemElement)&&(this.options.type=='semi-dynamic'?!$.ui.contains(this.element[0],itemElement):true)){this.direction=intersection==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(item)){this._rearrange(event,item);}else{break;}
this._trigger("change",event,this._uiHash());break;}}
this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger('sort',event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false;},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)
$.ui.ddmanager.drop(this,event);if(this.options.revert){var self=this;var cur=self.placeholder.offset();self.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-self.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-self.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){self._clear(event);});}else{this._clear(event,noPropagation);}
return false;},cancel:function(){var self=this;if(this.dragging){this._mouseUp({target:null});if(this.options.helper=="original")
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else
this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,self._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,self._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});if(this.domPosition.prev){$(this.domPosition.prev).after(this.currentItem);}else{$(this.domPosition.parent).prepend(this.currentItem);}}
return this;},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||'id')||'').match(o.expression||(/(.+)[-=_](.+)/));if(res)str.push((o.key||res[1]+'[]')+'='+(o.key&&o.expression?res[1]:res[2]));});if(!str.length&&o.key){str.push(o.key+'=');}
return str.join('&');},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected);var ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||'id')||'');});return ret;},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height;var l=item.left,r=l+item.width,t=item.top,b=t+item.height;var dyClick=this.offset.click.top,dxClick=this.offset.click.left;var isOverElement=(y1+dyClick)>t&&(y1+dyClick)<b&&(x1+dxClick)>l&&(x1+dxClick)<r;if(this.options.tolerance=="pointer"||this.options.forcePointerForContainers||(this.options.tolerance!="pointer"&&this.helperProportions[this.floating?'width':'height']>item[this.floating?'width':'height'])){return isOverElement;}else{return(l<x1+(this.helperProportions.width/2)&&x2-(this.helperProportions.width/2)<r&&t<y1+(this.helperProportions.height/2)&&y2-(this.helperProportions.height/2)<b);}},_intersectsWithPointer:function(item){var isOverElementHeight=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)
return false;return this.floating?(((horizontalDirection&&horizontalDirection=="right")||verticalDirection=="down")?2:1):(verticalDirection&&(verticalDirection=="down"?2:1));},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+(item.height/2),item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+(item.width/2),item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection){return((horizontalDirection=="right"&&isOverRightHalf)||(horizontalDirection=="left"&&!isOverRightHalf));}else{return verticalDirection&&((verticalDirection=="down"&&isOverBottomHalf)||(verticalDirection=="up"&&!isOverBottomHalf));}},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?"down":"up");},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?"right":"left");},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this;},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith;},_getItemsAsjQuery:function(connected){var self=this;var items=[];var queries=[];var connectWith=this._connectWith();if(connectWith&&connected){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],'sortable');if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not('.ui-sortable-placeholder'),inst]);}};};}
queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not('.ui-sortable-placeholder'),this]);for(var i=queries.length-1;i>=0;i--){queries[i][0].each(function(){items.push(this);});};return $(items);},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data(sortable-item)");for(var i=0;i<this.items.length;i++){for(var j=0;j<list.length;j++){if(list[j]==this.items[i].item[0])
this.items.splice(i,1);};};},_refreshItems:function(event){this.items=[];this.containers=[this];var items=this.items;var self=this;var queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]];var connectWith=this._connectWith();if(connectWith){for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],'sortable');if(inst&&inst!=this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst);}};};}
for(var i=queries.length-1;i>=0;i--){var targetData=queries[i][1];var _queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data('sortable-item',targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0});};};},refreshPositions:function(fast){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset();}
for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(item.instance!=this.currentContainer&&this.currentContainer&&item.item[0]!=this.currentItem[0])
continue;var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight();}
var p=t.offset();item.left=p.left;item.top=p.top;};if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this);}else{for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=this.containers[i].element.outerHeight();};}
return this;},_createPlaceholder:function(that){var self=that||this,o=self.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(self.currentItem[0].nodeName)).addClass(className||self.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!className)
el.style.visibility="hidden";return el;},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;if(!p.height()){p.height(self.currentItem.innerHeight()-parseInt(self.currentItem.css('paddingTop')||0,10)-parseInt(self.currentItem.css('paddingBottom')||0,10));};if(!p.width()){p.width(self.currentItem.innerWidth()-parseInt(self.currentItem.css('paddingLeft')||0,10)-parseInt(self.currentItem.css('paddingRight')||0,10));};}};}
self.placeholder=$(o.placeholder.element.call(self.element,self.currentItem));self.currentItem.after(self.placeholder);o.placeholder.update(self,self.placeholder);},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.currentItem[0],this.containers[i].element[0]))
continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.ui.contains(this.containers[i].element[0],innermostContainer.element[0]))
continue;innermostContainer=this.containers[i];innermostIndex=i;}else{if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0;}}}
if(!innermostContainer)return;if(this.containers.length===1){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}else if(this.currentContainer!=this.containers[innermostIndex]){var dist=10000;var itemWithLeastDistance=null;var base=this.positionAbs[this.containers[innermostIndex].floating?'left':'top'];for(var j=this.items.length-1;j>=0;j--){if(!$.ui.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;var cur=this.items[j][this.containers[innermostIndex].floating?'left':'top'];if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=this.items[j];}}
if(!itemWithLeastDistance&&!this.options.dropOnEmpty)
return;this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1;}},_createHelper:function(event){var o=this.options;var helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):(o.helper=='clone'?this.currentItem.clone():this.currentItem);if(!helper.parents('body').length)
$(o.appendTo!='parent'?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]==this.currentItem[0])
this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(helper[0].style.width==''||o.forceHelperSize)helper.width(this.currentItem.width());if(helper[0].style.height==''||o.forceHelperSize)helper.height(this.currentItem.height());return helper;},_adjustOffsetFromHelper:function(obj){if(typeof obj=='string'){obj=obj.split(' ');}
if($.isArray(obj)){obj={left:+obj[0],top:+obj[1]||0};}
if('left'in obj){this.offset.click.left=obj.left+this.margins.left;}
if('right'in obj){this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;}
if('top'in obj){this.offset.click.top=obj.top+this.margins.top;}
if('bottom'in obj){this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top;}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition=='absolute'&&this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop();}
if((this.offsetParent[0]==document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=='html'&&$.browser.msie))
po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)};},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()};}else{return{top:0,left:0};}},_cacheMargins:function(){this.margins={left:(parseInt(this.currentItem.css("marginLeft"),10)||0),top:(parseInt(this.currentItem.css("marginTop"),10)||0)};},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()};},_setContainment:function(){var o=this.options;if(o.containment=='parent')o.containment=this.helper[0].parentNode;if(o.containment=='document'||o.containment=='window')this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=='document'?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=='document'?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!(/^(document|window|parent)$/).test(o.containment)){var ce=$(o.containment)[0];var co=$(o.containment).offset();var over=($(ce).css("overflow")!='hidden');this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top];}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d=="absolute"?1:-1;var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);return{top:(pos.top
+this.offset.relative.top*mod
+this.offset.parent.top*mod
-($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop()))*mod)),left:(pos.left
+this.offset.relative.left*mod
+this.offset.parent.left*mod
-($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod))};},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition=='absolute'&&!(this.scrollParent[0]!=document&&$.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=(/(html|body)/i).test(scroll[0].tagName);if(this.cssPosition=='relative'&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset();}
var pageX=event.pageX;var pageY=event.pageY;if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top;}
if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?(!(top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3])?top:(!(top-this.offset.click.top<this.containment[1])?top-o.grid[1]:top+o.grid[1])):top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?(!(left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2])?left:(!(left-this.offset.click.left<this.containment[0])?left-o.grid[0]:left+o.grid[0])):left;}}
return{top:(pageY
-this.offset.click.top
-this.offset.relative.top
-this.offset.parent.top
+($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollTop():(scrollIsRootNode?0:scroll.scrollTop())))),left:(pageX
-this.offset.click.left
-this.offset.relative.left
-this.offset.parent.left
+($.browser.safari&&this.cssPosition=='fixed'?0:(this.cssPosition=='fixed'?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())))};},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],(this.direction=='down'?i.item[0]:i.item[0].nextSibling));this.counter=this.counter?++this.counter:1;var self=this,counter=this.counter;window.setTimeout(function(){if(counter==self.counter)self.refreshPositions(!hardRefresh);},0);},_clear:function(event,noPropagation){this.reverting=false;var delayedTriggers=[],self=this;if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS){if(this._storedCSS[i]=='auto'||this._storedCSS[i]=='static')this._storedCSS[i]='';}
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");}else{this.currentItem.show();}
if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside));});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash());});if(!$.ui.contains(this.element[0],this.currentItem[0])){if(!noPropagation)delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash());});for(var i=this.containers.length-1;i>=0;i--){if($.ui.contains(this.containers[i].element[0],this.currentItem[0])&&!noPropagation){delayedTriggers.push((function(c){return function(event){c._trigger("receive",event,this._uiHash(this));};}).call(this,this.containers[i]));delayedTriggers.push((function(c){return function(event){c._trigger("update",event,this._uiHash(this));};}).call(this,this.containers[i]));}};};for(var i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push((function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this));};}).call(this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push((function(c){return function(event){c._trigger("out",event,this._uiHash(this));};}).call(this,this.containers[i]));this.containers[i].containerCache.over=0;}}
if(this._storedCursor)$('body').css("cursor",this._storedCursor);if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex=='auto'?'':this._storedZIndex);this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);};this._trigger("stop",event,this._uiHash());}
return false;}
if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!=this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++){delayedTriggers[i].call(this,event);};this._trigger("stop",event,this._uiHash());}
this.fromOutside=false;return true;},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false){this.cancel();}},_uiHash:function(inst){var self=inst||this;return{helper:self.helper,placeholder:self.placeholder||$([]),position:self.position,originalPosition:self.originalPosition,offset:self.positionAbs,item:self.currentItem,sender:inst?inst.element:null};}});$.extend($.ui.sortable,{version:"1.8.16"});})(jQuery);(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var self=this,doc=this.element[0].ownerDocument,suppressKeyPress;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(event){if(self.options.disabled||self.element.propAttr("readOnly")){return;}
suppressKeyPress=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:self._move("previousPage",event);break;case keyCode.PAGE_DOWN:self._move("nextPage",event);break;case keyCode.UP:self._move("previous",event);event.preventDefault();break;case keyCode.DOWN:self._move("next",event);event.preventDefault();break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(self.menu.active){suppressKeyPress=true;event.preventDefault();}
case keyCode.TAB:if(!self.menu.active){return;}
self.menu.select(event);break;case keyCode.ESCAPE:self.element.val(self.term);self.close(event);break;default:clearTimeout(self.searching);self.searching=setTimeout(function(){if(self.term!=self.element.val()){self.selectedItem=null;self.search(null,event);}},self.options.delay);break;}}).bind("keypress.autocomplete",function(event){if(suppressKeyPress){suppressKeyPress=false;event.preventDefault();}}).bind("focus.autocomplete",function(){if(self.options.disabled){return;}
self.selectedItem=null;self.previous=self.element.val();}).bind("blur.autocomplete",function(event){if(self.options.disabled){return;}
clearTimeout(self.searching);self.closing=setTimeout(function(){self.close(event);self._change(event);},150);});this._initSource();this.response=function(){return self._response.apply(self,arguments);};this.menu=$("<ul></ul>").addClass("ui-autocomplete").appendTo($(this.options.appendTo||"body",doc)[0]).mousedown(function(event){var menuElement=self.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length){setTimeout(function(){$(document).one('mousedown',function(event){if(event.target!==self.element[0]&&event.target!==menuElement&&!$.ui.contains(menuElement,event.target)){self.close();}});},1);}
setTimeout(function(){clearTimeout(self.closing);},13);}).menu({focus:function(event,ui){var item=ui.item.data("item.autocomplete");if(false!==self._trigger("focus",event,{item:item})){if(/^key/.test(event.originalEvent.type)){self.element.val(item.value);}}},selected:function(event,ui){var item=ui.item.data("item.autocomplete"),previous=self.previous;if(self.element[0]!==doc.activeElement){self.element.focus();self.previous=previous;setTimeout(function(){self.previous=previous;self.selectedItem=item;},1);}
if(false!==self._trigger("select",event,{item:item})){self.element.val(item.value);}
self.term=self.element.val();self.close(event);self.selectedItem=item;},blur:function(event,ui){if(self.menu.element.is(":visible")&&(self.element.val()!==self.term)){self.element.val(self.term);}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if($.fn.bgiframe){this.menu.element.bgiframe();}},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();$.Widget.prototype.destroy.call(this);},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key==="source"){this._initSource();}
if(key==="appendTo"){this.menu.element.appendTo($(value||"body",this.element[0].ownerDocument)[0])}
if(key==="disabled"&&value&&this.xhr){this.xhr.abort();}},_initSource:function(){var self=this,array,url;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term));};}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(self.xhr){self.xhr.abort();}
self.xhr=$.ajax({url:url,data:request,dataType:"json",autocompleteRequest:++requestIndex,success:function(data,status){if(this.autocompleteRequest===requestIndex){response(data);}},error:function(){if(this.autocompleteRequest===requestIndex){response([]);}}});};}else{this.source=this.options.source;}},search:function(value,event){value=value!=null?value:this.element.val();this.term=this.element.val();if(value.length<this.options.minLength){return this.close(event);}
clearTimeout(this.closing);if(this._trigger("search",event)===false){return;}
return this._search(value);},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:value},this.response);},_response:function(content){if(!this.options.disabled&&content&&content.length){content=this._normalize(content);this._suggest(content);this._trigger("open");}else{this.close();}
this.pending--;if(!this.pending){this.element.removeClass("ui-autocomplete-loading");}},close:function(event){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",event);}},_change:function(event){if(this.previous!==this.element.val()){this._trigger("change",event,{item:this.selectedItem});}},_normalize:function(items){if(items.length&&items[0].label&&items[0].value){return items;}
return $.map(items,function(item){if(typeof item==="string"){return{label:item,value:item};}
return $.extend({label:item.label||item.value,value:item.value||item.label},item);});},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items);this.menu.deactivate();this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next(new $.Event("mouseover"));}},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth(),this.element.outerWidth()));},_renderMenu:function(ul,items){var self=this;$.each(items,function(index,item){self._renderItem(ul,item);});},_renderItem:function(ul,item){return $("<li></li>").data("item.autocomplete",item).append($("<a></a>").text(item.label)).appendTo(ul);},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return;}
if(this.menu.first()&&/^previous/.test(direction)||this.menu.last()&&/^next/.test(direction)){this.element.val(this.term);this.menu.deactivate();return;}
this.menu[direction](event);},widget:function(){return this.menu.element;}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value);});}});}(jQuery));(function($){$.widget("ui.menu",{_create:function(){var self=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(event){if(!$(event.target).closest(".ui-menu-item a").length){return;}
event.preventDefault();self.select(event);});this.refresh();},refresh:function(){var self=this;var items=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");items.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(event){self.activate(event,$(this).parent());}).mouseleave(function(){self.deactivate();});},activate:function(event,item){this.deactivate();if(this.hasScroll()){var offset=item.offset().top-this.element.offset().top,scroll=this.element.scrollTop(),elementHeight=this.element.height();if(offset<0){this.element.scrollTop(scroll+offset);}else if(offset>=elementHeight){this.element.scrollTop(scroll+offset-elementHeight+item.height());}}
this.active=item.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",event,{item:item});},deactivate:function(){if(!this.active){return;}
this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null;},next:function(event){this.move("next",".ui-menu-item:first",event);},previous:function(event){this.move("prev",".ui-menu-item:last",event);},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length;},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length;},move:function(direction,edge,event){if(!this.active){this.activate(event,this.element.children(edge));return;}
var next=this.active[direction+"All"](".ui-menu-item").eq(0);if(next.length){this.activate(event,next);}else{this.activate(event,this.element.children(edge));}},nextPage:function(event){if(this.hasScroll()){if(!this.active||this.last()){this.activate(event,this.element.children(".ui-menu-item:first"));return;}
var base=this.active.offset().top,height=this.element.height(),result=this.element.children(".ui-menu-item").filter(function(){var close=$(this).offset().top-base-height+$(this).height();return close<10&&close>-10;});if(!result.length){result=this.element.children(".ui-menu-item:last");}
this.activate(event,result);}else{this.activate(event,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"));}},previousPage:function(event){if(this.hasScroll()){if(!this.active||this.first()){this.activate(event,this.element.children(".ui-menu-item:last"));return;}
var base=this.active.offset().top,height=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var close=$(this).offset().top-base+height-$(this).height();return close<10&&close>-10;});if(!result.length){result=this.element.children(".ui-menu-item:first");}
this.activate(event,result);}else{this.activate(event,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"));}},hasScroll:function(){return this.element.height()<this.element[$.fn.prop?"prop":"attr"]("scrollHeight");},select:function(event){this._trigger("selected",event,{item:this.active});}});}(jQuery));(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh");},1);},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);if(name){if(form){radios=$(form).find("[name='"+name+"']");}else{radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form;});}}
return radios;};$.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",formResetHandler);if(typeof this.options.disabled!=="boolean"){this.options.disabled=this.element.propAttr("disabled");}
this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var self=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",hoverClass="ui-state-hover"+(!toggleButton?" ui-state-active":""),focusClass="ui-state-focus";if(options.label===null){options.label=this.buttonElement.html();}
if(this.element.is(":disabled")){options.disabled=true;}
this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter.button",function(){if(options.disabled){return;}
$(this).addClass("ui-state-hover");if(this===lastActive){$(this).addClass("ui-state-active");}}).bind("mouseleave.button",function(){if(options.disabled){return;}
$(this).removeClass(hoverClass);}).bind("click.button",function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation();}});this.element.bind("focus.button",function(){self.buttonElement.addClass(focusClass);}).bind("blur.button",function(){self.buttonElement.removeClass(focusClass);});if(toggleButton){this.element.bind("change.button",function(){if(clickDragged){return;}
self.refresh();});this.buttonElement.bind("mousedown.button",function(event){if(options.disabled){return;}
clickDragged=false;startXPos=event.pageX;startYPos=event.pageY;}).bind("mouseup.button",function(event){if(options.disabled){return;}
if(startXPos!==event.pageX||startYPos!==event.pageY){clickDragged=true;}});}
if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(options.disabled||clickDragged){return false;}
$(this).toggleClass("ui-state-active");self.buttonElement.attr("aria-pressed",self.element[0].checked);});}else if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(options.disabled||clickDragged){return false;}
$(this).addClass("ui-state-active");self.buttonElement.attr("aria-pressed","true");var radio=self.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed","false");});}else{this.buttonElement.bind("mousedown.button",function(){if(options.disabled){return false;}
$(this).addClass("ui-state-active");lastActive=this;$(document).one("mouseup",function(){lastActive=null;});}).bind("mouseup.button",function(){if(options.disabled){return false;}
$(this).removeClass("ui-state-active");}).bind("keydown.button",function(event){if(options.disabled){return false;}
if(event.keyCode==$.ui.keyCode.SPACE||event.keyCode==$.ui.keyCode.ENTER){$(this).addClass("ui-state-active");}}).bind("keyup.button",function(){$(this).removeClass("ui-state-active");});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE){$(this).click();}});}}
this._setOption("disabled",options.disabled);this._resetButton();},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox";}else if(this.element.is(":radio")){this.type="radio";}else if(this.element.is("input")){this.type="input";}else{this.type="button";}
if(this.type==="checkbox"||this.type==="radio"){var ancestor=this.element.parents().filter(":last"),labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length){this.buttonElement=ancestor.find(labelSelector);}}
this.element.addClass("ui-helper-hidden-accessible");var checked=this.element.is(":checked");if(checked){this.buttonElement.addClass("ui-state-active");}
this.buttonElement.attr("aria-pressed",checked);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title");}
$.Widget.prototype.destroy.call(this);},_setOption:function(key,value){$.Widget.prototype._setOption.apply(this,arguments);if(key==="disabled"){if(value){this.element.propAttr("disabled",true);}else{this.element.propAttr("disabled",false);}
return;}
this._resetButton();},refresh:function(){var isDisabled=this.element.is(":disabled");if(isDisabled!==this.options.disabled){this._setOption("disabled",isDisabled);}
if(this.type==="radio"){radioGroup(this.element[0]).each(function(){if($(this).is(":checked")){$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true");}else{$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false");}});}else if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false");}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);}
return;}
var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text){buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":(icons.primary?"-primary":"-secondary")));}
if(icons.primary){buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");}
if(icons.secondary){buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>");}
if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){buttonElement.attr("title",buttonText);}}}else{buttonClasses.push("ui-button-text-only");}
buttonElement.addClass(buttonClasses.join(" "));}});$.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(key,value){if(key==="disabled"){this.buttons.button("option",key,value);}
$.Widget.prototype._setOption.apply(this,arguments);},refresh:function(){var ltr=this.element.css("direction")==="ltr";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(ltr?"ui-corner-left":"ui-corner-right").end().filter(":last").addClass(ltr?"ui-corner-right":"ui-corner-left").end().end();},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");$.Widget.prototype.destroy.call(this);}});}(jQuery));(function($,undefined){var uiDialogClasses='ui-dialog '+'ui-widget '+'ui-widget-content '+'ui-corner-all ',sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true},attrFn=$.attrFn||{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true,click:true};$.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:'close',dialogClass:'',draggable:true,hide:null,height:'auto',maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:'center',at:'center',collision:'fit',using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0){$(this).css('top',pos.top-topOffset);}}},resizable:true,show:null,stack:true,title:'',width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr('title');if(typeof this.originalTitle!=="string"){this.originalTitle="";}
this.options.title=this.options.title||this.originalTitle;var self=this,options=self.options,title=options.title||'&#160;',titleId=$.ui.dialog.getTitleId(self.element),uiDialog=(self.uiDialog=$('<div></div>')).appendTo(document.body).hide().addClass(uiDialogClasses+options.dialogClass).css({zIndex:options.zIndex}).attr('tabIndex',-1).css('outline',0).keydown(function(event){if(options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){self.close(event);event.preventDefault();}}).attr({role:'dialog','aria-labelledby':titleId}).mousedown(function(event){self.moveToTop(false,event);}),uiDialogContent=self.element.show().removeAttr('title').addClass('ui-dialog-content '+'ui-widget-content').appendTo(uiDialog),uiDialogTitlebar=(self.uiDialogTitlebar=$('<div></div>')).addClass('ui-dialog-titlebar '+'ui-widget-header '+'ui-corner-all '+'ui-helper-clearfix').prependTo(uiDialog),uiDialogTitlebarClose=$('<a href="#"></a>').addClass('ui-dialog-titlebar-close '+'ui-corner-all').attr('role','button').hover(function(){uiDialogTitlebarClose.addClass('ui-state-hover');},function(){uiDialogTitlebarClose.removeClass('ui-state-hover');}).focus(function(){uiDialogTitlebarClose.addClass('ui-state-focus');}).blur(function(){uiDialogTitlebarClose.removeClass('ui-state-focus');}).click(function(event){self.close(event);return false;}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(self.uiDialogTitlebarCloseText=$('<span></span>')).addClass('ui-icon '+'ui-icon-closethick').text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$('<span></span>').addClass('ui-dialog-title').attr('id',titleId).html(title).prependTo(uiDialogTitlebar);if($.isFunction(options.beforeclose)&&!$.isFunction(options.beforeClose)){options.beforeClose=options.beforeclose;}
uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection();if(options.draggable&&$.fn.draggable){self._makeDraggable();}
if(options.resizable&&$.fn.resizable){self._makeResizable();}
self._createButtons(options.buttons);self._isOpen=false;if($.fn.bgiframe){uiDialog.bgiframe();}},_init:function(){if(this.options.autoOpen){this.open();}},destroy:function(){var self=this;if(self.overlay){self.overlay.destroy();}
self.uiDialog.hide();self.element.unbind('.dialog').removeData('dialog').removeClass('ui-dialog-content ui-widget-content').hide().appendTo('body');self.uiDialog.remove();if(self.originalTitle){self.element.attr('title',self.originalTitle);}
return self;},widget:function(){return this.uiDialog;},close:function(event){var self=this,maxZ,thisZ;if(false===self._trigger('beforeClose',event)){return;}
if(self.overlay){self.overlay.destroy();}
self.uiDialog.unbind('keypress.ui-dialog');self._isOpen=false;if(self.options.hide){self.uiDialog.hide(self.options.hide,function(){self._trigger('close',event);});}else{self.uiDialog.hide();self._trigger('close',event);}
$.ui.dialog.overlay.resize();if(self.options.modal){maxZ=0;$('.ui-dialog').each(function(){if(this!==self.uiDialog[0]){thisZ=$(this).css('z-index');if(!isNaN(thisZ)){maxZ=Math.max(maxZ,thisZ);}}});$.ui.dialog.maxZ=maxZ;}
return self;},isOpen:function(){return this._isOpen;},moveToTop:function(force,event){var self=this,options=self.options,saveScroll;if((options.modal&&!force)||(!options.stack&&!options.modal)){return self._trigger('focus',event);}
if(options.zIndex>$.ui.dialog.maxZ){$.ui.dialog.maxZ=options.zIndex;}
if(self.overlay){$.ui.dialog.maxZ+=1;self.overlay.$el.css('z-index',$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ);}
saveScroll={scrollTop:self.element.scrollTop(),scrollLeft:self.element.scrollLeft()};$.ui.dialog.maxZ+=1;self.uiDialog.css('z-index',$.ui.dialog.maxZ);self.element.attr(saveScroll);self._trigger('focus',event);return self;},open:function(){if(this._isOpen){return;}
var self=this,options=self.options,uiDialog=self.uiDialog;self.overlay=options.modal?new $.ui.dialog.overlay(self):null;self._size();self._position(options.position);uiDialog.show(options.show);self.moveToTop(true);if(options.modal){uiDialog.bind('keypress.ui-dialog',function(event){if(event.keyCode!==$.ui.keyCode.TAB){return;}
var tabbables=$(':tabbable',this),first=tabbables.filter(':first'),last=tabbables.filter(':last');if(event.target===last[0]&&!event.shiftKey){first.focus(1);return false;}else if(event.target===first[0]&&event.shiftKey){last.focus(1);return false;}});}
$(self.element.find(':tabbable').get().concat(uiDialog.find('.ui-dialog-buttonpane :tabbable').get().concat(uiDialog.get()))).eq(0).focus();self._isOpen=true;self._trigger('open');return self;},_createButtons:function(buttons){var self=this,hasButtons=false,uiDialogButtonPane=$('<div></div>').addClass('ui-dialog-buttonpane '+'ui-widget-content '+'ui-helper-clearfix'),uiButtonSet=$("<div></div>").addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane);self.uiDialog.find('.ui-dialog-buttonpane').remove();if(typeof buttons==='object'&&buttons!==null){$.each(buttons,function(){return!(hasButtons=true);});}
if(hasButtons){$.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$('<button type="button"></button>').click(function(){props.click.apply(self.element[0],arguments);}).appendTo(uiButtonSet);$.each(props,function(key,value){if(key==="click"){return;}
if(key in attrFn){button[key](value);}else{button.attr(key,value);}});if($.fn.button){button.button();}});uiDialogButtonPane.appendTo(self.uiDialog);}},_makeDraggable:function(){var self=this,options=self.options,doc=$(document),heightBeforeDrag;function filteredUi(ui){return{position:ui.position,offset:ui.offset};}
self.uiDialog.draggable({cancel:'.ui-dialog-content, .ui-dialog-titlebar-close',handle:'.ui-dialog-titlebar',containment:'document',start:function(event,ui){heightBeforeDrag=options.height==="auto"?"auto":$(this).height();$(this).height($(this).height()).addClass("ui-dialog-dragging");self._trigger('dragStart',event,filteredUi(ui));},drag:function(event,ui){self._trigger('drag',event,filteredUi(ui));},stop:function(event,ui){options.position=[ui.position.left-doc.scrollLeft(),ui.position.top-doc.scrollTop()];$(this).removeClass("ui-dialog-dragging").height(heightBeforeDrag);self._trigger('dragStop',event,filteredUi(ui));$.ui.dialog.overlay.resize();}});},_makeResizable:function(handles){handles=(handles===undefined?this.options.resizable:handles);var self=this,options=self.options,position=self.uiDialog.css('position'),resizeHandles=(typeof handles==='string'?handles:'n,e,s,w,se,sw,ne,nw');function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size};}
self.uiDialog.resizable({cancel:'.ui-dialog-content',containment:'document',alsoResize:self.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:self._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");self._trigger('resizeStart',event,filteredUi(ui));},resize:function(event,ui){self._trigger('resize',event,filteredUi(ui));},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing");options.height=$(this).height();options.width=$(this).width();self._trigger('resizeStop',event,filteredUi(ui));$.ui.dialog.overlay.resize();}}).css('position',position).find('.ui-resizable-se').addClass('ui-icon ui-icon-grip-diagonal-se');},_minHeight:function(){var options=this.options;if(options.height==='auto'){return options.minHeight;}else{return Math.min(options.minHeight,options.height);}},_position:function(position){var myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==='string'||(typeof position==='object'&&'0'in position)){myAt=position.split?position.split(' '):[position[0],position[1]];if(myAt.length===1){myAt[1]=myAt[0];}
$.each(['left','top'],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition;}});position={my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" ")};}
position=$.extend({},$.ui.dialog.prototype.options.position,position);}else{position=$.ui.dialog.prototype.options.position;}
isVisible=this.uiDialog.is(':visible');if(!isVisible){this.uiDialog.show();}
this.uiDialog.css({top:0,left:0}).position($.extend({of:window},position));if(!isVisible){this.uiDialog.hide();}},_setOptions:function(options){var self=this,resizableOptions={},resize=false;$.each(options,function(key,value){self._setOption(key,value);if(key in sizeRelatedOptions){resize=true;}
if(key in resizableRelatedOptions){resizableOptions[key]=value;}});if(resize){this._size();}
if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",resizableOptions);}},_setOption:function(key,value){var self=this,uiDialog=self.uiDialog;switch(key){case"beforeclose":key="beforeClose";break;case"buttons":self._createButtons(value);break;case"closeText":self.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(self.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":if(value){uiDialog.addClass('ui-dialog-disabled');}else{uiDialog.removeClass('ui-dialog-disabled');}
break;case"draggable":var isDraggable=uiDialog.is(":data(draggable)");if(isDraggable&&!value){uiDialog.draggable("destroy");}
if(!isDraggable&&value){self._makeDraggable();}
break;case"position":self._position(value);break;case"resizable":var isResizable=uiDialog.is(":data(resizable)");if(isResizable&&!value){uiDialog.resizable('destroy');}
if(isResizable&&typeof value==='string'){uiDialog.resizable('option','handles',value);}
if(!isResizable&&value!==false){self._makeResizable(value);}
break;case"title":$(".ui-dialog-title",self.uiDialogTitlebar).html(""+(value||'&#160;'));break;}
$.Widget.prototype._setOption.apply(self,arguments);},_size:function(){var options=this.options,nonContentHeight,minContentHeight,isVisible=this.uiDialog.is(":visible");this.element.show().css({width:'auto',minHeight:0,height:0});if(options.minWidth>options.width){options.width=options.minWidth;}
nonContentHeight=this.uiDialog.css({height:'auto',width:options.width}).height();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);if(options.height==="auto"){if($.support.minHeight){this.element.css({minHeight:minContentHeight,height:"auto"});}else{this.uiDialog.show();var autoHeight=this.element.css("height","auto").height();if(!isVisible){this.uiDialog.hide();}
this.element.height(Math.max(autoHeight,minContentHeight));}}else{this.element.height(Math.max(options.height-nonContentHeight,0));}
if(this.uiDialog.is(':data(resizable)')){this.uiDialog.resizable('option','minHeight',this._minHeight());}}});$.extend($.ui.dialog,{version:"1.8.16",uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr('id');if(!id){this.uuid+=1;id=this.uuid;}
return'ui-dialog-title-'+id;},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog);}});$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map('focus,mousedown,mouseup,keydown,keypress,click'.split(','),function(event){return event+'.dialog-overlay';}).join(' '),create:function(dialog){if(this.instances.length===0){setTimeout(function(){if($.ui.dialog.overlay.instances.length){$(document).bind($.ui.dialog.overlay.events,function(event){if($(event.target).zIndex()<$.ui.dialog.overlay.maxZ){return false;}});}},1);$(document).bind('keydown.dialog-overlay',function(event){if(dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){dialog.close(event);event.preventDefault();}});$(window).bind('resize.dialog-overlay',$.ui.dialog.overlay.resize);}
var $el=(this.oldInstances.pop()||$('<div></div>').addClass('ui-widget-overlay')).appendTo(document.body).css({width:this.width(),height:this.height()});if($.fn.bgiframe){$el.bgiframe();}
this.instances.push($el);return $el;},destroy:function($el){var indexOf=$.inArray($el,this.instances);if(indexOf!=-1){this.oldInstances.push(this.instances.splice(indexOf,1)[0]);}
if(this.instances.length===0){$([document,window]).unbind('.dialog-overlay');}
$el.remove();var maxZ=0;$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css('z-index'));});this.maxZ=maxZ;},height:function(){var scrollHeight,offsetHeight;if($.browser.msie&&$.browser.version<7){scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(scrollHeight<offsetHeight){return $(window).height()+'px';}else{return scrollHeight+'px';}}else{return $(document).height()+'px';}},width:function(){var scrollWidth,offsetWidth;if($.browser.msie){scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(scrollWidth<offsetWidth){return $(window).width()+'px';}else{return scrollWidth+'px';}}else{return $(document).width()+'px';}},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this);});$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()});}});$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el);}});}(jQuery));;jQuery.effects||(function($,undefined){$.effects={};$.each(['backgroundColor','borderBottomColor','borderLeftColor','borderRightColor','borderTopColor','borderColor','color','outlineColor'],function(i,attr){$.fx.step[attr]=function(fx){if(!fx.colorInit){fx.start=getColor(fx.elem,attr);fx.end=getRGB(fx.end);fx.colorInit=true;}
fx.elem.style[attr]='rgb('+
Math.max(Math.min(parseInt((fx.pos*(fx.end[0]-fx.start[0]))+fx.start[0],10),255),0)+','+
Math.max(Math.min(parseInt((fx.pos*(fx.end[1]-fx.start[1]))+fx.start[1],10),255),0)+','+
Math.max(Math.min(parseInt((fx.pos*(fx.end[2]-fx.start[2]))+fx.start[2],10),255),0)+')';};});function getRGB(color){var result;if(color&&color.constructor==Array&&color.length==3)
return color;if(result=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(color))
return[parseInt(result[1],10),parseInt(result[2],10),parseInt(result[3],10)];if(result=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(color))
return[parseFloat(result[1])*2.55,parseFloat(result[2])*2.55,parseFloat(result[3])*2.55];if(result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(color))
return[parseInt(result[1],16),parseInt(result[2],16),parseInt(result[3],16)];if(result=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(color))
return[parseInt(result[1]+result[1],16),parseInt(result[2]+result[2],16),parseInt(result[3]+result[3],16)];if(result=/rgba\(0, 0, 0, 0\)/.exec(color))
return colors['transparent'];return colors[$.trim(color).toLowerCase()];}
function getColor(elem,attr){var color;do{color=$.curCSS(elem,attr);if(color!=''&&color!='transparent'||$.nodeName(elem,"body"))
break;attr="backgroundColor";}while(elem=elem.parentNode);return getRGB(color);};var colors={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var classAnimationActions=['add','remove','toggle'],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function getElementStyles(){var style=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase;if(style&&style.length&&style[0]&&style[style[0]]){var len=style.length;while(len--){key=style[len];if(typeof style[key]=='string'){camelCase=key.replace(/\-(\w)/g,function(all,letter){return letter.toUpperCase();});newStyle[camelCase]=style[key];}}}else{for(key in style){if(typeof style[key]==='string'){newStyle[key]=style[key];}}}
return newStyle;}
function filterStyles(styles){var name,value;for(name in styles){value=styles[name];if(value==null||$.isFunction(value)||name in shorthandStyles||(/scrollbar/).test(name)||(!(/color/i).test(name)&&isNaN(parseFloat(value)))){delete styles[name];}}
return styles;}
function styleDifference(oldStyle,newStyle){var diff={_:0},name;for(name in newStyle){if(oldStyle[name]!=newStyle[name]){diff[name]=newStyle[name];}}
return diff;}
$.effects.animateClass=function(value,duration,easing,callback){if($.isFunction(easing)){callback=easing;easing=null;}
return this.queue(function(){var that=$(this),originalStyleAttr=that.attr('style')||' ',originalStyle=filterStyles(getElementStyles.call(this)),newStyle,className=that.attr('class');$.each(classAnimationActions,function(i,action){if(value[action]){that[action+'Class'](value[action]);}});newStyle=filterStyles(getElementStyles.call(this));that.attr('class',className);that.animate(styleDifference(originalStyle,newStyle),{queue:false,duration:duration,easing:easing,complete:function(){$.each(classAnimationActions,function(i,action){if(value[action]){that[action+'Class'](value[action]);}});if(typeof that.attr('style')=='object'){that.attr('style').cssText='';that.attr('style').cssText=originalStyleAttr;}else{that.attr('style',originalStyleAttr);}
if(callback){callback.apply(this,arguments);}
$.dequeue(this);}});});};$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames);},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames);},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){if(typeof force=="boolean"||force===undefined){if(!speed){return this._toggleClass(classNames,force);}else{return $.effects.animateClass.apply(this,[(force?{add:classNames}:{remove:classNames}),speed,easing,callback]);}}else{return $.effects.animateClass.apply(this,[{toggle:classNames},force,speed,easing]);}},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback]);}});$.extend($.effects,{version:"1.8.16",save:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.data("ec.storage."+set[i],element[0].style[set[i]]);}},restore:function(element,set){for(var i=0;i<set.length;i++){if(set[i]!==null)element.css(set[i],element.data("ec.storage."+set[i]));}},setMode:function(el,mode){if(mode=='toggle')mode=el.is(':hidden')?'show':'hide';return mode;},getBaseline:function(origin,original){var y,x;switch(origin[0]){case'top':y=0;break;case'middle':y=0.5;break;case'bottom':y=1;break;default:y=origin[0]/original.height;};switch(origin[1]){case'left':x=0;break;case'center':x=0.5;break;case'right':x=1;break;default:x=origin[1]/original.width;};return{x:x,y:y};},createWrapper:function(element){if(element.parent().is('.ui-effects-wrapper')){return element.parent();}
var props={width:element.outerWidth(true),height:element.outerHeight(true),'float':element.css('float')},wrapper=$('<div></div>').addClass('ui-effects-wrapper').css({fontSize:'100%',background:'transparent',border:'none',margin:0,padding:0}),active=document.activeElement;element.wrap(wrapper);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
wrapper=element.parent();if(element.css('position')=='static'){wrapper.css({position:'relative'});element.css({position:'relative'});}else{$.extend(props,{position:element.css('position'),zIndex:element.css('z-index')});$.each(['top','left','bottom','right'],function(i,pos){props[pos]=element.css(pos);if(isNaN(parseInt(props[pos],10))){props[pos]='auto';}});element.css({position:'relative',top:0,left:0,right:'auto',bottom:'auto'});}
return wrapper.css(props).show();},removeWrapper:function(element){var parent,active=document.activeElement;if(element.parent().is('.ui-effects-wrapper')){parent=element.parent().replaceWith(element);if(element[0]===active||$.contains(element[0],active)){$(active).focus();}
return parent;}
return element;},setTransition:function(element,list,factor,value){value=value||{};$.each(list,function(i,x){unit=element.cssUnit(x);if(unit[0]>0)value[x]=unit[0]*factor+unit[1];});return value;}});function _normalizeArguments(effect,options,speed,callback){if(typeof effect=='object'){callback=options;speed=null;options=effect;effect=options.effect;}
if($.isFunction(options)){callback=options;speed=null;options={};}
if(typeof options=='number'||$.fx.speeds[options]){callback=speed;speed=options;options={};}
if($.isFunction(speed)){callback=speed;speed=null;}
options=options||{};speed=speed||options.duration;speed=$.fx.off?0:typeof speed=='number'?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default;callback=callback||options.complete;return[effect,options,speed,callback];}
function standardSpeed(speed){if(!speed||typeof speed==="number"||$.fx.speeds[speed]){return true;}
if(typeof speed==="string"&&!$.effects[speed]){return true;}
return false;}
$.fn.extend({effect:function(effect,options,speed,callback){var args=_normalizeArguments.apply(this,arguments),args2={options:args[1],duration:args[2],callback:args[3]},mode=args2.options.mode,effectMethod=$.effects[effect];if($.fx.off||!effectMethod){if(mode){return this[mode](args2.duration,args2.callback);}else{return this.each(function(){if(args2.callback){args2.callback.call(this);}});}}
return effectMethod.call(this,args2);},_show:$.fn.show,show:function(speed){if(standardSpeed(speed)){return this._show.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='show';return this.effect.apply(this,args);}},_hide:$.fn.hide,hide:function(speed){if(standardSpeed(speed)){return this._hide.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='hide';return this.effect.apply(this,args);}},__toggle:$.fn.toggle,toggle:function(speed){if(standardSpeed(speed)||typeof speed==="boolean"||$.isFunction(speed)){return this.__toggle.apply(this,arguments);}else{var args=_normalizeArguments.apply(this,arguments);args[1].mode='toggle';return this.effect.apply(this,args);}},cssUnit:function(key){var style=this.css(key),val=[];$.each(['em','px','%','pt'],function(i,unit){if(style.indexOf(unit)>0)
val=[parseFloat(style),unit];});return val;}});$.easing.jswing=$.easing.swing;$.extend($.easing,{def:'easeOutQuad',swing:function(x,t,b,c,d){return $.easing[$.easing.def](x,t,b,c,d);},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b;},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*((--t)*(t-2)-1)+b;},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b;},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b;},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b;},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b;},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b;},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b;},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b;},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b;},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b;},easeInSine:function(x,t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b;},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b;},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b;},easeInExpo:function(x,t,b,c,d){return(t==0)?b:c*Math.pow(2,10*(t/d-1))+b;},easeOutExpo:function(x,t,b,c,d){return(t==d)?b+c:c*(-Math.pow(2,-10*t/d)+1)+b;},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b;},easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b;},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b;},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b;},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*.3;if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*(2*Math.PI)/p)+c+b;},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*(.3*1.5);if(a<Math.abs(c)){a=c;var s=p/4;}
else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-.5*(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p))+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*(2*Math.PI)/p)*.5+c+b;},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b;},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b;},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*(t*t*(((s*=(1.525))+1)*t-s))+b;return c/2*((t-=2)*t*(((s*=(1.525))+1)*t+s)+2)+b;},easeInBounce:function(x,t,b,c,d){return c-$.easing.easeOutBounce(x,d-t,0,c,d)+b;},easeOutBounce:function(x,t,b,c,d){if((t/=d)<(1/2.75)){return c*(7.5625*t*t)+b;}else if(t<(2/2.75)){return c*(7.5625*(t-=(1.5/2.75))*t+.75)+b;}else if(t<(2.5/2.75)){return c*(7.5625*(t-=(2.25/2.75))*t+.9375)+b;}else{return c*(7.5625*(t-=(2.625/2.75))*t+.984375)+b;}},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return $.easing.easeInBounce(x,t*2,0,c,d)*.5+b;return $.easing.easeOutBounce(x,t*2-d,0,c,d)*.5+c*.5+b;}});})(jQuery);(function($,undefined){$.effects.fade=function(o){return this.queue(function(){var elem=$(this),mode=$.effects.setMode(elem,o.options.mode||'hide');elem.animate({opacity:mode},{queue:false,duration:o.duration,easing:o.options.easing,complete:function(){(o.callback&&o.callback.apply(this,arguments));elem.dequeue();}});});};})(jQuery);(function($,undefined){$.effects.shake=function(o){return this.queue(function(){var el=$(this),props=['position','top','bottom','left','right'];var mode=$.effects.setMode(el,o.options.mode||'effect');var direction=o.options.direction||'left';var distance=o.options.distance||20;var times=o.options.times||3;var speed=o.duration||o.options.duration||140;$.effects.save(el,props);el.show();$.effects.createWrapper(el);var ref=(direction=='up'||direction=='down')?'top':'left';var motion=(direction=='up'||direction=='left')?'pos':'neg';var animation={},animation1={},animation2={};animation[ref]=(motion=='pos'?'-=':'+=')+distance;animation1[ref]=(motion=='pos'?'+=':'-=')+distance*2;animation2[ref]=(motion=='pos'?'-=':'+=')+distance*2;el.animate(animation,speed,o.options.easing);for(var i=1;i<times;i++){el.animate(animation1,speed,o.options.easing).animate(animation2,speed,o.options.easing);};el.animate(animation1,speed,o.options.easing).animate(animation,speed/2,o.options.easing,function(){$.effects.restore(el,props);$.effects.removeWrapper(el);if(o.callback)o.callback.apply(this,arguments);});el.queue('fx',function(){el.dequeue();});el.dequeue();});};})(jQuery);jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options.expires=-1;}
var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}
expires='; expires='+date.toUTCString();}
var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}
return cookieValue;}};(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var slice=ArrayProto.slice,unshift=ArrayProto.unshift,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var
nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){return new wrapper(obj);};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=_;}
exports._=_;}else if(typeof define==='function'&&define.amd){define('underscore',function(){return _;});}else{root['_']=_;}
_.VERSION='1.2.0';var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return;}}else{for(var key in obj){if(hasOwnProperty.call(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return;}}}};_.map=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list);});return results;};_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=memo!==void 0;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator);}
each(obj,function(value,index,list){if(!initial){memo=value;initial=true;}else{memo=iterator.call(context,memo,value,index,list);}});if(!initial)throw new TypeError("Reduce of empty array with no initial value");return memo;};_.reduceRight=_.foldr=function(obj,iterator,memo,context){if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return memo!==void 0?obj.reduceRight(iterator,memo):obj.reduceRight(iterator);}
var reversed=(_.isArray(obj)?obj.slice():_.toArray(obj)).reverse();return _.reduce(reversed,iterator,memo,context);};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true;}});return result;};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.reject=function(obj,iterator,context){var results=[];if(obj==null)return results;each(obj,function(value,index,list){if(!iterator.call(context,value,index,list))results[results.length]=value;});return results;};_.every=_.all=function(obj,iterator,context){var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker;});return result;};var any=_.some=_.any=function(obj,iterator,context){iterator=iterator||_.identity;var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result|=iterator.call(context,value,index,list))return breaker;});return!!result;};_.include=_.contains=function(obj,target){var found=false;if(obj==null)return found;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;any(obj,function(value){if(found=value===target)return true;});return found;};_.invoke=function(obj,method){var args=slice.call(arguments,2);return _.map(obj,function(value){return(method.call?method||value:value[method]).apply(value,args);});};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key];});};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>=result.computed&&(result={value:value,computed:computed});});return result.value;};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj))return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed});});return result.value;};_.shuffle=function(obj){var shuffled=[],rand;each(obj,function(value,index,list){if(index==0){shuffled[0]=value;}else{rand=Math.floor(Math.random()*(index+1));shuffled[index]=shuffled[rand];shuffled[rand]=value;}});return shuffled;};_.sortBy=function(obj,iterator,context){return _.pluck(_.map(obj,function(value,index,list){return{value:value,criteria:iterator.call(context,value,index,list)};}).sort(function(left,right){var a=left.criteria,b=right.criteria;return a<b?-1:a>b?1:0;}),'value');};_.groupBy=function(obj,val){var result={};var iterator=_.isFunction(val)?val:function(obj){return obj[val];};each(obj,function(value,index){var key=iterator(value,index);(result[key]||(result[key]=[])).push(value);});return result;};_.sortedIndex=function(array,obj,iterator){iterator||(iterator=_.identity);var low=0,high=array.length;while(low<high){var mid=(low+high)>>1;iterator(array[mid])<iterator(obj)?low=mid+1:high=mid;}
return low;};_.toArray=function(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();if(_.isArray(iterable))return slice.call(iterable);if(_.isArguments(iterable))return slice.call(iterable);return _.values(iterable);};_.size=function(obj){return _.toArray(obj).length;};_.first=_.head=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,0,n):array[0];};_.initial=function(array,n,guard){return slice.call(array,0,array.length-((n==null)||guard?1:n));};_.last=function(array,n,guard){return(n!=null)&&!guard?slice.call(array,array.length-n):array[array.length-1];};_.rest=_.tail=function(array,index,guard){return slice.call(array,(index==null)||guard?1:index);};_.compact=function(array){return _.filter(array,function(value){return!!value;});};_.flatten=function(array,shallow){return _.reduce(array,function(memo,value){if(_.isArray(value))return memo.concat(shallow?value:_.flatten(value));memo[memo.length]=value;return memo;},[]);};_.without=function(array){return _.difference(array,slice.call(arguments,1));};_.uniq=_.unique=function(array,isSorted,iterator){var initial=iterator?_.map(array,iterator):array;var result=[];_.reduce(initial,function(memo,el,i){if(0==i||(isSorted===true?_.last(memo)!=el:!_.include(memo,el))){memo[memo.length]=el;result[result.length]=array[i];}
return memo;},[]);return result;};_.union=function(){return _.uniq(_.flatten(arguments,true));};_.intersection=_.intersect=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0;});});};_.difference=function(array,other){return _.filter(array,function(value){return!_.include(other,value);});};_.zip=function(){var args=slice.call(arguments);var length=_.max(_.pluck(args,'length'));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(args,""+i);return results;};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i,l;if(isSorted){i=_.sortedIndex(array,item);return array[i]===item?i:-1;}
if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item);for(i=0,l=array.length;i<l;i++)if(array[i]===item)return i;return-1;};_.lastIndexOf=function(array,item){if(array==null)return-1;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf)return array.lastIndexOf(item);var i=array.length;while(i--)if(array[i]===item)return i;return-1;};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0;}
step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step;}
return range;};var ctor=function(){};_.bind=function bind(func,context){var bound,args;if(func.bind===nativeBind&&nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self;};};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length==0)funcs=_.functions(obj);each(funcs,function(f){obj[f]=_.bind(obj[f],obj);});return obj;};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return hasOwnProperty.call(memo,key)?memo[key]:(memo[key]=func.apply(this,arguments));};};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(func,args);},wait);};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)));};var limit=function(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args);};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait);};};_.throttle=function(func,wait){return limit(func,wait,false);};_.debounce=function(func,wait){return limit(func,wait,true);};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;return memo=func.apply(this,arguments);};};_.wrap=function(func,wrapper){return function(){var args=[func].concat(slice.call(arguments));return wrapper.apply(this,args);};};_.compose=function(){var funcs=slice.call(arguments);return function(){var args=slice.call(arguments);for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)];}
return args[0];};};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments);}};};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError('Invalid object');var keys=[];for(var key in obj)if(hasOwnProperty.call(obj,key))keys[keys.length]=key;return keys;};_.values=function(obj){return _.map(obj,_.identity);};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key);}
return names.sort();};_.extend=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(source[prop]!==void 0)obj[prop]=source[prop];}});return obj;};_.defaults=function(obj){each(slice.call(arguments,1),function(source){for(var prop in source){if(obj[prop]==null)obj[prop]=source[prop];}});return obj;};_.clone=function(obj){return _.isArray(obj)?obj.slice():_.extend({},obj);};_.tap=function(obj,interceptor){interceptor(obj);return obj;};function eq(a,b,stack){if(a===b)return a!==0||1/a==1/b;if((a==null)||(b==null))return a===b;if(a._chain)a=a._wrapped;if(b._chain)b=b._wrapped;if(_.isFunction(a.isEqual))return a.isEqual(b);if(_.isFunction(b.isEqual))return b.isEqual(a);var typeA=typeof a;if(typeA!=typeof b)return false;if(!a!=!b)return false;if(_.isNaN(a))return _.isNaN(b);var isStringA=_.isString(a),isStringB=_.isString(b);if(isStringA||isStringB)return isStringA&&isStringB&&String(a)==String(b);var isNumberA=_.isNumber(a),isNumberB=_.isNumber(b);if(isNumberA||isNumberB)return isNumberA&&isNumberB&&+a==+b;var isBooleanA=_.isBoolean(a),isBooleanB=_.isBoolean(b);if(isBooleanA||isBooleanB)return isBooleanA&&isBooleanB&&+a==+b;var isDateA=_.isDate(a),isDateB=_.isDate(b);if(isDateA||isDateB)return isDateA&&isDateB&&a.getTime()==b.getTime();var isRegExpA=_.isRegExp(a),isRegExpB=_.isRegExp(b);if(isRegExpA||isRegExpB){return isRegExpA&&isRegExpB&&a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase;}
if(typeA!='object')return false;if(a.length!==b.length)return false;if(a.constructor!==b.constructor)return false;var length=stack.length;while(length--){if(stack[length]==a)return true;}
stack.push(a);var size=0,result=true;for(var key in a){if(hasOwnProperty.call(a,key)){size++;if(!(result=hasOwnProperty.call(b,key)&&eq(a[key],b[key],stack)))break;}}
if(result){for(key in b){if(hasOwnProperty.call(b,key)&&!size--)break;}
result=!size;}
stack.pop();return result;}
_.isEqual=function(a,b){return eq(a,b,[]);};_.isEmpty=function(obj){if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(hasOwnProperty.call(obj,key))return false;return true;};_.isElement=function(obj){return!!(obj&&obj.nodeType==1);};_.isArray=nativeIsArray||function(obj){return toString.call(obj)==='[object Array]';};_.isObject=function(obj){return obj===Object(obj);};_.isArguments=function(obj){return!!(obj&&hasOwnProperty.call(obj,'callee'));};_.isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply);};_.isString=function(obj){return!!(obj===''||(obj&&obj.charCodeAt&&obj.substr));};_.isNumber=function(obj){return!!(obj===0||(obj&&obj.toExponential&&obj.toFixed));};_.isNaN=function(obj){return obj!==obj;};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=='[object Boolean]';};_.isDate=function(obj){return!!(obj&&obj.getTimezoneOffset&&obj.setUTCFullYear);};_.isRegExp=function(obj){return!!(obj&&obj.test&&obj.exec&&(obj.ignoreCase||obj.ignoreCase===false));};_.isNull=function(obj){return obj===null;};_.isUndefined=function(obj){return obj===void 0;};_.noConflict=function(){root._=previousUnderscore;return this;};_.identity=function(value){return value;};_.times=function(n,iterator,context){for(var i=0;i<n;i++)iterator.call(context,i);};_.escape=function(string){return(''+string).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;').replace(/\//g,'&#x2F;');};_.mixin=function(obj){each(_.functions(obj),function(name){addToWrapper(name,_[name]=obj[name]);});};var idCounter=0;_.uniqueId=function(prefix){var id=idCounter++;return prefix?prefix+id:id;};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};_.template=function(str,data){var c=_.templateSettings;var tmpl='var __p=[],print=function(){__p.push.apply(__p,arguments);};'+'with(obj||{}){__p.push(\''+
str.replace(/\\/g,'\\\\').replace(/'/g,"\\'").replace(c.escape,function(match,code){return"',_.escape("+code.replace(/\\'/g,"'")+"),'";}).replace(c.interpolate,function(match,code){return"',"+code.replace(/\\'/g,"'")+",'";}).replace(c.evaluate||null,function(match,code){return"');"+code.replace(/\\'/g,"'").replace(/[\r\n\t]/g,' ')+"__p.push('";}).replace(/\r/g,'\\r').replace(/\n/g,'\\n').replace(/\t/g,'\\t')
+"');}return __p.join('');";var func=new Function('obj',tmpl);return data?func(data):func;};var wrapper=function(obj){this._wrapped=obj;};_.prototype=wrapper.prototype;var result=function(obj,chain){return chain?_(obj).chain():obj;};var addToWrapper=function(name,func){wrapper.prototype[name]=function(){var args=slice.call(arguments);unshift.call(args,this._wrapped);return result(func.apply(_,args),this._chain);};};_.mixin(_);each(['pop','push','reverse','shift','sort','splice','unshift'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){method.apply(this._wrapped,arguments);return result(this._wrapped,this._chain);};});each(['concat','join','slice'],function(name){var method=ArrayProto[name];wrapper.prototype[name]=function(){return result(method.apply(this._wrapped,arguments),this._chain);};});wrapper.prototype.chain=function(){this._chain=true;return this;};wrapper.prototype.value=function(){return this._wrapped;};})();if(!this.JSON){this.JSON={};}
(function(){function f(n){return n<10?'0'+n:n;}
if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+
f(this.getUTCMonth()+1)+'-'+
f(this.getUTCDate())+'T'+
f(this.getUTCHours())+':'+
f(this.getUTCMinutes())+':'+
f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}
var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}
function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}
if(typeof rep==='function'){value=rep.call(holder,key,value);}
switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}
gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}
v=partial.length===0?'[]':gap?'[\n'+gap+
partial.join(',\n'+gap)+'\n'+
mind+']':'['+partial.join(',')+']';gap=mind;return v;}
if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}
v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+
mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}
if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}
rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}
return str('',{'':value});};}
if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}
return reviver.call(holder,key,value);}
cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+
('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}
if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}
throw new SyntaxError('JSON.parse');};}}());(function(){var root=this;var previousBackbone=root.Backbone;var Backbone;if(typeof exports!=='undefined'){Backbone=exports;}else{Backbone=root.Backbone={};}
Backbone.VERSION='0.5.3';var _=root._;if(!_&&(typeof require!=='undefined'))_=require('underscore')._;var $=root.jQuery||root.Zepto||root.ender;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this;};Backbone.emulateHTTP=false;Backbone.emulateJSON=false;Backbone.Events={bind:function(ev,callback,context){var calls=this._callbacks||(this._callbacks={});var list=calls[ev]||(calls[ev]=[]);list.push([callback,context]);return this;},unbind:function(ev,callback){var calls;if(!ev){this._callbacks={};}else if(calls=this._callbacks){if(!callback){calls[ev]=[];}else{var list=calls[ev];if(!list)return this;for(var i=0,l=list.length;i<l;i++){if(list[i]&&callback===list[i][0]){list[i]=null;break;}}}}
return this;},trigger:function(eventName){var list,calls,ev,callback,args;var both=2;if(!(calls=this._callbacks))return this;while(both--){ev=both?eventName:'all';if(list=calls[ev]){for(var i=0,l=list.length;i<l;i++){if(!(callback=list[i])){list.splice(i,1);i--;l--;}else{args=both?Array.prototype.slice.call(arguments,1):arguments;callback[0].apply(callback[1]||this,args);}}}}
return this;}};Backbone.Model=function(attributes,options){var defaults;attributes||(attributes={});if(defaults=this.defaults){if(_.isFunction(defaults))defaults=defaults.call(this);attributes=_.extend({},defaults,attributes);}
this.attributes={};this._escapedAttributes={};this.cid=_.uniqueId('c');this.set(attributes,{silent:true});this._changed=false;this._previousAttributes=_.clone(this.attributes);if(options&&options.collection)this.collection=options.collection;this.initialize(attributes,options);};_.extend(Backbone.Model.prototype,Backbone.Events,{_previousAttributes:null,_changed:false,idAttribute:'id',initialize:function(){},toJSON:function(){return _.clone(this.attributes);},get:function(attr){return this.attributes[attr];},escape:function(attr){var html;if(html=this._escapedAttributes[attr])return html;var val=this.attributes[attr];return this._escapedAttributes[attr]=escapeHTML(val==null?'':''+val);},has:function(attr){return this.attributes[attr]!=null;},set:function(attrs,options){options||(options={});if(!attrs)return this;if(attrs.attributes)attrs=attrs.attributes;var now=this.attributes,escaped=this._escapedAttributes;if(!options.silent&&this.validate&&!this._performValidation(attrs,options))return false;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];var alreadyChanging=this._changing;this._changing=true;for(var attr in attrs){var val=attrs[attr];if(!_.isEqual(now[attr],val)){now[attr]=val;delete escaped[attr];this._changed=true;if(!options.silent)this.trigger('change:'+attr,this,val,options);}}
if(!alreadyChanging&&!options.silent&&this._changed)this.change(options);this._changing=false;return this;},unset:function(attr,options){if(!(attr in this.attributes))return this;options||(options={});var value=this.attributes[attr];var validObj={};validObj[attr]=void 0;if(!options.silent&&this.validate&&!this._performValidation(validObj,options))return false;delete this.attributes[attr];delete this._escapedAttributes[attr];if(attr==this.idAttribute)delete this.id;this._changed=true;if(!options.silent){this.trigger('change:'+attr,this,void 0,options);this.change(options);}
return this;},clear:function(options){options||(options={});var attr;var old=this.attributes;var validObj={};for(attr in old)validObj[attr]=void 0;if(!options.silent&&this.validate&&!this._performValidation(validObj,options))return false;this.attributes={};this._escapedAttributes={};this._changed=true;if(!options.silent){for(attr in old){this.trigger('change:'+attr,this,void 0,options);}
this.change(options);}
return this;},fetch:function(options){options||(options={});var model=this;var success=options.success;options.success=function(resp,status,xhr){if(!model.set(model.parse(resp,xhr),options))return false;if(success)success(model,resp);};options.error=wrapError(options.error,model,options);return(this.sync||Backbone.sync).call(this,'read',this,options);},save:function(attrs,options){options||(options={});if(attrs&&!this.set(attrs,options))return false;var model=this;var success=options.success;options.success=function(resp,status,xhr){if(!model.set(model.parse(resp,xhr),options))return false;if(success)success(model,resp,xhr);};options.error=wrapError(options.error,model,options);var method=this.isNew()?'create':'update';return(this.sync||Backbone.sync).call(this,method,this,options);},destroy:function(options){options||(options={});if(this.isNew())return this.trigger('destroy',this,this.collection,options);var model=this;var success=options.success;options.success=function(resp){model.trigger('destroy',model,model.collection,options);if(success)success(model,resp);};options.error=wrapError(options.error,model,options);return(this.sync||Backbone.sync).call(this,'delete',this,options);},url:function(){var base=getUrl(this.collection)||this.urlRoot||urlError();if(this.isNew())return base;return base+(base.charAt(base.length-1)=='/'?'':'/')+encodeURIComponent(this.id);},parse:function(resp,xhr){return resp;},clone:function(){return new this.constructor(this);},isNew:function(){return this.id==null;},change:function(options){this.trigger('change',this,options);this._previousAttributes=_.clone(this.attributes);this._changed=false;},hasChanged:function(attr){if(attr)return this._previousAttributes[attr]!=this.attributes[attr];return this._changed;},changedAttributes:function(now){now||(now=this.attributes);var old=this._previousAttributes;var changed=false;for(var attr in now){if(!_.isEqual(old[attr],now[attr])){changed=changed||{};changed[attr]=now[attr];}}
return changed;},previous:function(attr){if(!attr||!this._previousAttributes)return null;return this._previousAttributes[attr];},previousAttributes:function(){return _.clone(this._previousAttributes);},_performValidation:function(attrs,options){var error=this.validate(attrs);if(error){if(options.error){options.error(this,error,options);}else{this.trigger('error',this,error,options);}
return false;}
return true;}});Backbone.Collection=function(models,options){options||(options={});if(options.comparator)this.comparator=options.comparator;_.bindAll(this,'_onModelEvent','_removeReference');this._reset();if(models)this.reset(models,{silent:true});this.initialize.apply(this,arguments);};_.extend(Backbone.Collection.prototype,Backbone.Events,{model:Backbone.Model,initialize:function(){},toJSON:function(){return this.map(function(model){return model.toJSON();});},add:function(models,options){if(_.isArray(models)){for(var i=0,l=models.length;i<l;i++){this._add(models[i],options);}}else{this._add(models,options);}
return this;},remove:function(models,options){if(_.isArray(models)){for(var i=0,l=models.length;i<l;i++){this._remove(models[i],options);}}else{this._remove(models,options);}
return this;},get:function(id){if(id==null)return null;return this._byId[id.id!=null?id.id:id];},getByCid:function(cid){return cid&&this._byCid[cid.cid||cid];},at:function(index){return this.models[index];},sort:function(options){options||(options={});if(!this.comparator)throw new Error('Cannot sort a set without a comparator');this.models=this.sortBy(this.comparator);if(!options.silent)this.trigger('reset',this,options);return this;},pluck:function(attr){return _.map(this.models,function(model){return model.get(attr);});},reset:function(models,options){models||(models=[]);options||(options={});this.each(this._removeReference);this._reset();this.add(models,{silent:true});if(!options.silent)this.trigger('reset',this,options);return this;},fetch:function(options){options||(options={});var collection=this;var success=options.success;options.success=function(resp,status,xhr){collection[options.add?'add':'reset'](collection.parse(resp,xhr),options);if(success)success(collection,resp);};options.error=wrapError(options.error,collection,options);return(this.sync||Backbone.sync).call(this,'read',this,options);},create:function(model,options){var coll=this;options||(options={});model=this._prepareModel(model,options);if(!model)return false;var success=options.success;options.success=function(nextModel,resp,xhr){coll.add(nextModel,options);if(success)success(nextModel,resp,xhr);};model.save(null,options);return model;},parse:function(resp,xhr){return resp;},chain:function(){return _(this.models).chain();},_reset:function(options){this.length=0;this.models=[];this._byId={};this._byCid={};},_prepareModel:function(model,options){if(!(model instanceof Backbone.Model)){var attrs=model;model=new this.model(attrs,{collection:this});if(model.validate&&!model._performValidation(attrs,options))model=false;}else if(!model.collection){model.collection=this;}
return model;},_add:function(model,options){options||(options={});model=this._prepareModel(model,options);if(!model)return false;var already=this.getByCid(model);if(already)throw new Error(["Can't add the same model to a set twice",already.id]);this._byId[model.id]=model;this._byCid[model.cid]=model;var index=options.at!=null?options.at:this.comparator?this.sortedIndex(model,this.comparator):this.length;this.models.splice(index,0,model);model.bind('all',this._onModelEvent);this.length++;if(!options.silent)model.trigger('add',model,this,options);return model;},_remove:function(model,options){options||(options={});model=this.getByCid(model)||this.get(model);if(!model)return null;delete this._byId[model.id];delete this._byCid[model.cid];this.models.splice(this.indexOf(model),1);this.length--;if(!options.silent)model.trigger('remove',model,this,options);this._removeReference(model);return model;},_removeReference:function(model){if(this==model.collection){delete model.collection;}
model.unbind('all',this._onModelEvent);},_onModelEvent:function(ev,model,collection,options){if((ev=='add'||ev=='remove')&&collection!=this)return;if(ev=='destroy'){this._remove(model,options);}
if(model&&ev==='change:'+model.idAttribute){delete this._byId[model.previous(model.idAttribute)];this._byId[model.id]=model;}
this.trigger.apply(this,arguments);}});var methods=['forEach','each','map','reduce','reduceRight','find','detect','filter','select','reject','every','all','some','any','include','contains','invoke','max','min','sortBy','sortedIndex','toArray','size','first','rest','last','without','indexOf','lastIndexOf','isEmpty','groupBy'];_.each(methods,function(method){Backbone.Collection.prototype[method]=function(){return _[method].apply(_,[this.models].concat(_.toArray(arguments)));};});Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments);};var namedParam=/:([\w\d]+)/g;var splatParam=/\*([\w\d]+)/g;var escapeRegExp=/[-[\]{}()+?.,\\^$|#\s]/g;_.extend(Backbone.Router.prototype,Backbone.Events,{initialize:function(){},route:function(route,name,callback){Backbone.history||(Backbone.history=new Backbone.History);if(!_.isRegExp(route))route=this._routeToRegExp(route);Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback.apply(this,args);this.trigger.apply(this,['route:'+name].concat(args));},this));},navigate:function(fragment,triggerRoute){Backbone.history.navigate(fragment,triggerRoute);},_bindRoutes:function(){if(!this.routes)return;var routes=[];for(var route in this.routes){routes.unshift([route,this.routes[route]]);}
for(var i=0,l=routes.length;i<l;i++){this.route(routes[i][0],routes[i][1],this[routes[i][1]]);}},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(namedParam,"([^\/]*)").replace(splatParam,"(.*?)");return new RegExp('^'+route+'$');},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1);}});Backbone.History=function(){this.handlers=[];_.bindAll(this,'checkUrl');};var hashStrip=/^#*/;var isExplorer=/msie [\w.]+/;var historyStarted=false;_.extend(Backbone.History.prototype,{interval:50,getFragment:function(fragment,forcePushState){if(fragment==null){if(this._hasPushState||forcePushState){fragment=window.location.pathname;var search=window.location.search;if(search)fragment+=search;}else{fragment=window.location.hash;}}
fragment=decodeURIComponent(fragment.replace(hashStrip,''));if(!fragment.indexOf(this.options.root))fragment=fragment.substr(this.options.root.length);return fragment;},start:function(options){if(historyStarted)throw new Error("Backbone.history has already been started");this.options=_.extend({},{root:'/'},this.options,options);this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var fragment=this.getFragment();var docMode=document.documentMode;var oldIE=(isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7));if(oldIE){this.iframe=$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo('body')[0].contentWindow;this.navigate(fragment);}
if(this._hasPushState){$(window).bind('popstate',this.checkUrl);}else if('onhashchange'in window&&!oldIE){$(window).bind('hashchange',this.checkUrl);}else{setInterval(this.checkUrl,this.interval);}
this.fragment=fragment;historyStarted=true;var loc=window.location;var atRoot=loc.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!atRoot){this.fragment=this.getFragment(null,true);window.location.replace(this.options.root+'#'+this.fragment);return true;}else if(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash){this.fragment=loc.hash.replace(hashStrip,'');window.history.replaceState({},document.title,loc.protocol+'//'+loc.host+this.options.root+this.fragment);}
if(!this.options.silent){return this.loadUrl();}},route:function(route,callback){this.handlers.unshift({route:route,callback:callback});},checkUrl:function(e){var current=this.getFragment();if(current==this.fragment&&this.iframe)current=this.getFragment(this.iframe.location.hash);if(current==this.fragment||current==decodeURIComponent(this.fragment))return false;if(this.iframe)this.navigate(current);this.loadUrl()||this.loadUrl(window.location.hash);},loadUrl:function(fragmentOverride){var fragment=this.fragment=this.getFragment(fragmentOverride);var matched=_.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true;}});return matched;},navigate:function(fragment,triggerRoute){var frag=(fragment||'').replace(hashStrip,'');if(this.fragment==frag||this.fragment==decodeURIComponent(frag))return;if(this._hasPushState){var loc=window.location;if(frag.indexOf(this.options.root)!=0)frag=this.options.root+frag;this.fragment=frag;window.history.pushState({},document.title,loc.protocol+'//'+loc.host+frag);}else{window.location.hash=this.fragment=frag;if(this.iframe&&(frag!=this.getFragment(this.iframe.location.hash))){this.iframe.document.open().close();this.iframe.location.hash=frag;}}
if(triggerRoute)this.loadUrl(fragment);}});Backbone.View=function(options){this.cid=_.uniqueId('view');this._configure(options||{});this._ensureElement();this.delegateEvents();this.initialize.apply(this,arguments);};var selectorDelegate=function(selector){return $(selector,this.el);};var eventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=['model','collection','el','id','attributes','className','tagName'];_.extend(Backbone.View.prototype,Backbone.Events,{tagName:'div',$:selectorDelegate,initialize:function(){},render:function(){return this;},remove:function(){$(this.el).remove();return this;},make:function(tagName,attributes,content){var el=document.createElement(tagName);if(attributes)$(el).attr(attributes);if(content)$(el).html(content);return el;},delegateEvents:function(events){if(!(events||(events=this.events)))return;if(_.isFunction(events))events=events.call(this);this.undelegateEvents();for(var key in events){var method=this[events[key]];if(!method)throw new Error('Event "'+events[key]+'" does not exist');var match=key.match(eventSplitter);var eventName=match[1],selector=match[2];method=_.bind(method,this);eventName+='.delegateEvents'+this.cid;if(selector===''){$(this.el).bind(eventName,method);}else{$(this.el).delegate(selector,eventName,method);}}},undelegateEvents:function(){$(this.el).unbind('.delegateEvents'+this.cid);},_configure:function(options){if(this.options)options=_.extend({},this.options,options);for(var i=0,l=viewOptions.length;i<l;i++){var attr=viewOptions[i];if(options[attr])this[attr]=options[attr];}
this.options=options;},_ensureElement:function(){if(!this.el){var attrs=this.attributes||{};if(this.id)attrs.id=this.id;if(this.className)attrs['class']=this.className;this.el=this.make(this.tagName,attrs);}else if(_.isString(this.el)){this.el=$(this.el).get(0);}}});var extend=function(protoProps,classProps){var child=inherits(this,protoProps,classProps);child.extend=this.extend;return child;};Backbone.Model.extend=Backbone.Collection.extend=Backbone.Router.extend=Backbone.View.extend=extend;var methodMap={'create':'POST','update':'PUT','delete':'DELETE','read':'GET'};Backbone.sync=function(method,model,options){var type=methodMap[method];var params=_.extend({type:type,dataType:'json'},options);if(!params.url){params.url=getUrl(model)||urlError();}
if(!params.data&&model&&(method=='create'||method=='update')){params.contentType='application/json';params.data=JSON.stringify(model.toJSON());}
if(Backbone.emulateJSON){params.contentType='application/x-www-form-urlencoded';params.data=params.data?{model:params.data}:{};}
if(Backbone.emulateHTTP){if(type==='PUT'||type==='DELETE'){if(Backbone.emulateJSON)params.data._method=type;params.type='POST';params.beforeSend=function(xhr){xhr.setRequestHeader('X-HTTP-Method-Override',type);};}}
if(params.type!=='GET'&&!Backbone.emulateJSON){params.processData=false;}
return $.ajax(params);};var ctor=function(){};var inherits=function(parent,protoProps,staticProps){var child;if(protoProps&&protoProps.hasOwnProperty('constructor')){child=protoProps.constructor;}else{child=function(){return parent.apply(this,arguments);};}
_.extend(child,parent);ctor.prototype=parent.prototype;child.prototype=new ctor();if(protoProps)_.extend(child.prototype,protoProps);if(staticProps)_.extend(child,staticProps);child.prototype.constructor=child;child.__super__=parent.prototype;return child;};var getUrl=function(object){if(!(object&&object.url))return null;return _.isFunction(object.url)?object.url():object.url;};var urlError=function(){throw new Error('A "url" property or function must be specified');};var wrapError=function(onError,model,options){return function(resp){if(onError){onError(model,resp,options);}else{model.trigger('error',model,resp,options);}};};var escapeHTML=function(string){return string.replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#x27;').replace(/\//g,'&#x2F;');};}).call(this);(function(_){_.mixin({argumentNames:function argumentNames(subject){var names=subject.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,'').replace(/\s+/g,'').split(',');return names.length==1&&!names[0]?[]:names;}});})(_);(function(_){var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=Base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
this._keyStr.charAt(enc1)+this._keyStr.charAt(enc2)+
this._keyStr.charAt(enc3)+this._keyStr.charAt(enc4);}
return output;},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2&15)<<4)|(enc3>>2);chr3=((enc3&3)<<6)|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2);}
if(enc4!=64){output=output+String.fromCharCode(chr3);}}
output=Base64._utf8_decode(output);return output;},_utf8_encode:function(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}
else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c&63)|128);}
else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)&63)|128);utftext+=String.fromCharCode((c&63)|128);}}
return utftext;},_utf8_decode:function(utftext){var string="";var i=0;var c=c1=c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}
else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=2;}
else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return string;}};_.mixin({encodeBase64:function(input){return Base64.encode(input);},decodeBase64:function(input){return Base64.decode(input);}});})(_);(function(window,undefined){var ko=window["ko"]={};ko.exportSymbol=function(publicPath,object){var tokens=publicPath.split(".");var target=window;for(var i=0;i<tokens.length-1;i++)
target=target[tokens[i]];target[tokens[tokens.length-1]]=object;};ko.exportProperty=function(owner,publicName,object){owner[publicName]=object;};ko.utils=new(function(){var stringTrimRegex=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;var isIe6=/MSIE 6/i.test(navigator.userAgent);var isIe7=/MSIE 7/i.test(navigator.userAgent);var knownMouseEvents={"click":1,"dblclick":1,"mousedown":1,"mouseup":1,"mousemove":1,"mouseover":1,"mouseout":1,"mouseenter":1,"mouseleave":1};function isClickOnCheckableElement(element,eventType){if((element.tagName!="INPUT")||!element.type)return false;if(eventType.toLowerCase()!="click")return false;var inputType=element.type.toLowerCase();return(inputType=="checkbox")||(inputType=="radio");}
return{fieldsIncludedWithJsonPost:['authenticity_token',/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(array,action){for(var i=0,j=array.length;i<j;i++)
action(array[i]);},arrayIndexOf:function(array,item){if(typeof array.indexOf=="function")
return array.indexOf(item);for(var i=0,j=array.length;i<j;i++)
if(array[i]===item)
return i;return-1;},arrayFirst:function(array,predicate,predicateOwner){for(var i=0,j=array.length;i<j;i++)
if(predicate.call(predicateOwner,array[i]))
return array[i];return null;},arrayRemoveItem:function(array,itemToRemove){var index=ko.utils.arrayIndexOf(array,itemToRemove);if(index>=0)
array.splice(index,1);},arrayMap:function(array,mapping){array=array||[];var result=[];for(var i=0,j=array.length;i<j;i++)
result.push(mapping(array[i]));return result;},arrayFilter:function(array,predicate){array=array||[];var result=[];for(var i=0,j=array.length;i<j;i++)
if(predicate(array[i]))
result.push(array[i]);return result;},arrayPushAll:function(array,valuesToPush){for(var i=0,j=valuesToPush.length;i<j;i++)
array.push(valuesToPush[i]);return array;},extend:function(target,source){for(var prop in source){if(source.hasOwnProperty(prop)){target[prop]=source[prop];}}
return target;},emptyDomNode:function(domNode){while(domNode.firstChild){ko.removeNode(domNode.firstChild);}},setDomNodeChildren:function(domNode,childNodes){ko.utils.emptyDomNode(domNode);if(childNodes){ko.utils.arrayForEach(childNodes,function(childNode){domNode.appendChild(childNode);});}},replaceDomNodes:function(nodeToReplaceOrNodeArray,newNodesArray){var nodesToReplaceArray=nodeToReplaceOrNodeArray.nodeType?[nodeToReplaceOrNodeArray]:nodeToReplaceOrNodeArray;if(nodesToReplaceArray.length>0){var insertionPoint=nodesToReplaceArray[0];var parent=insertionPoint.parentNode;for(var i=0,j=newNodesArray.length;i<j;i++)
parent.insertBefore(newNodesArray[i],insertionPoint);for(var i=0,j=nodesToReplaceArray.length;i<j;i++){ko.removeNode(nodesToReplaceArray[i]);}}},setOptionNodeSelectionState:function(optionNode,isSelected){if(navigator.userAgent.indexOf("MSIE 6")>=0)
optionNode.setAttribute("selected",isSelected);else
optionNode.selected=isSelected;},stringTrim:function(string){return(string||"").replace(stringTrimRegex,"");},stringTokenize:function(string,delimiter){var result=[];var tokens=(string||"").split(delimiter);for(var i=0,j=tokens.length;i<j;i++){var trimmed=ko.utils.stringTrim(tokens[i]);if(trimmed!=="")
result.push(trimmed);}
return result;},stringStartsWith:function(string,startsWith){string=string||"";if(startsWith.length>string.length)
return false;return string.substring(0,startsWith.length)===startsWith;},evalWithinScope:function(expression){var scopes=Array.prototype.slice.call(arguments,1);var functionBody="return ("+expression+")";for(var i=0;i<scopes.length;i++){if(scopes[i]&&typeof scopes[i]=="object")
functionBody="with(sc["+i+"]) { "+functionBody+" } ";}
return(new Function("sc",functionBody))(scopes);},domNodeIsContainedBy:function(node,containedByNode){if(containedByNode.compareDocumentPosition)
return(containedByNode.compareDocumentPosition(node)&16)==16;while(node!=null){if(node==containedByNode)
return true;node=node.parentNode;}
return false;},domNodeIsAttachedToDocument:function(node){return ko.utils.domNodeIsContainedBy(node,document);},registerEventHandler:function(element,eventType,handler){if(typeof jQuery!="undefined"){if(isClickOnCheckableElement(element,eventType)){var originalHandler=handler;handler=function(event,eventData){var jQuerySuppliedCheckedState=this.checked;if(eventData)
this.checked=eventData.checkedStateBeforeEvent!==true;originalHandler.call(this,event);this.checked=jQuerySuppliedCheckedState;};}
jQuery(element)['bind'](eventType,handler);}else if(typeof element.addEventListener=="function")
element.addEventListener(eventType,handler,false);else if(typeof element.attachEvent!="undefined")
element.attachEvent("on"+eventType,function(event){handler.call(element,event);});else
throw new Error("Browser doesn't support addEventListener or attachEvent");},triggerEvent:function(element,eventType){if(!(element&&element.nodeType))
throw new Error("element must be a DOM node when calling triggerEvent");if(typeof jQuery!="undefined"){var eventData=[];if(isClickOnCheckableElement(element,eventType)){eventData.push({checkedStateBeforeEvent:element.checked});}
jQuery(element)['trigger'](eventType,eventData);}else if(typeof document.createEvent=="function"){if(typeof element.dispatchEvent=="function"){var eventCategory=(eventType in knownMouseEvents?"MouseEvents":"HTMLEvents");var event=document.createEvent(eventCategory);event.initEvent(eventType,true,true,window,0,0,0,0,0,false,false,false,false,0,element);element.dispatchEvent(event);}
else
throw new Error("The supplied element doesn't support dispatchEvent");}else if(typeof element.fireEvent!="undefined"){if(eventType=="click"){if((element.tagName=="INPUT")&&((element.type.toLowerCase()=="checkbox")||(element.type.toLowerCase()=="radio")))
element.checked=element.checked!==true;}
element.fireEvent("on"+eventType);}
else
throw new Error("Browser doesn't support triggering events");},unwrapObservable:function(value){return ko.isObservable(value)?value():value;},domNodeHasCssClass:function(node,className){var currentClassNames=(node.className||"").split(/\s+/);return ko.utils.arrayIndexOf(currentClassNames,className)>=0;},toggleDomNodeCssClass:function(node,className,shouldHaveClass){var hasClass=ko.utils.domNodeHasCssClass(node,className);if(shouldHaveClass&&!hasClass){node.className=(node.className||"")+" "+className;}else if(hasClass&&!shouldHaveClass){var currentClassNames=(node.className||"").split(/\s+/);var newClassName="";for(var i=0;i<currentClassNames.length;i++)
if(currentClassNames[i]!=className)
newClassName+=currentClassNames[i]+" ";node.className=ko.utils.stringTrim(newClassName);}},outerHTML:function(node){var nativeOuterHtml=node.outerHTML;if(typeof nativeOuterHtml=="string")
return nativeOuterHtml;var dummyContainer=window.document.createElement("div");dummyContainer.appendChild(node.cloneNode(true));return dummyContainer.innerHTML;},range:function(min,max){min=ko.utils.unwrapObservable(min);max=ko.utils.unwrapObservable(max);var result=[];for(var i=min;i<=max;i++)
result.push(i);return result;},makeArray:function(arrayLikeObject){var result=[];for(var i=0,j=arrayLikeObject.length;i<j;i++){result.push(arrayLikeObject[i]);};return result;},isIe6:isIe6,isIe7:isIe7,getFormFields:function(form,fieldName){var fields=ko.utils.makeArray(form.getElementsByTagName("INPUT")).concat(ko.utils.makeArray(form.getElementsByTagName("TEXTAREA")));var isMatchingField=(typeof fieldName=='string')?function(field){return field.name===fieldName}:function(field){return fieldName.test(field.name)};var matches=[];for(var i=fields.length-1;i>=0;i--){if(isMatchingField(fields[i]))
matches.push(fields[i]);};return matches;},parseJson:function(jsonString){if(typeof jsonString=="string"){jsonString=ko.utils.stringTrim(jsonString);if(jsonString){if(window.JSON&&window.JSON.parse)
return window.JSON.parse(jsonString);return(new Function("return "+jsonString))();}}
return null;},stringifyJson:function(data){if((typeof JSON=="undefined")||(typeof JSON.stringify=="undefined"))
throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(ko.utils.unwrapObservable(data));},postJson:function(urlOrForm,data,options){options=options||{};var params=options['params']||{};var includeFields=options['includeFields']||this.fieldsIncludedWithJsonPost;var url=urlOrForm;if((typeof urlOrForm=='object')&&(urlOrForm.tagName=="FORM")){var originalForm=urlOrForm;url=originalForm.action;for(var i=includeFields.length-1;i>=0;i--){var fields=ko.utils.getFormFields(originalForm,includeFields[i]);for(var j=fields.length-1;j>=0;j--)
params[fields[j].name]=fields[j].value;}}
data=ko.utils.unwrapObservable(data);var form=document.createElement("FORM");form.style.display="none";form.action=url;form.method="post";for(var key in data){var input=document.createElement("INPUT");input.name=key;input.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key]));form.appendChild(input);}
for(var key in params){var input=document.createElement("INPUT");input.name=key;input.value=params[key];form.appendChild(input);}
document.body.appendChild(form);options['submitter']?options['submitter'](form):form.submit();setTimeout(function(){form.parentNode.removeChild(form);},0);}}})();ko.exportSymbol('ko.utils',ko.utils);ko.exportSymbol('ko.utils.arrayForEach',ko.utils.arrayForEach);ko.exportSymbol('ko.utils.arrayFirst',ko.utils.arrayFirst);ko.exportSymbol('ko.utils.arrayFilter',ko.utils.arrayFilter);ko.exportSymbol('ko.utils.arrayGetDistinctValues',ko.utils.arrayGetDistinctValues);ko.exportSymbol('ko.utils.arrayIndexOf',ko.utils.arrayIndexOf);ko.exportSymbol('ko.utils.arrayMap',ko.utils.arrayMap);ko.exportSymbol('ko.utils.arrayPushAll',ko.utils.arrayPushAll);ko.exportSymbol('ko.utils.arrayRemoveItem',ko.utils.arrayRemoveItem);ko.exportSymbol('ko.utils.extend',ko.utils.extend);ko.exportSymbol('ko.utils.fieldsIncludedWithJsonPost',ko.utils.fieldsIncludedWithJsonPost);ko.exportSymbol('ko.utils.getFormFields',ko.utils.getFormFields);ko.exportSymbol('ko.utils.postJson',ko.utils.postJson);ko.exportSymbol('ko.utils.parseJson',ko.utils.parseJson);ko.exportSymbol('ko.utils.registerEventHandler',ko.utils.registerEventHandler);ko.exportSymbol('ko.utils.stringifyJson',ko.utils.stringifyJson);ko.exportSymbol('ko.utils.range',ko.utils.range);ko.exportSymbol('ko.utils.toggleDomNodeCssClass',ko.utils.toggleDomNodeCssClass);ko.exportSymbol('ko.utils.triggerEvent',ko.utils.triggerEvent);ko.exportSymbol('ko.utils.unwrapObservable',ko.utils.unwrapObservable);if(!Function.prototype['bind']){Function.prototype['bind']=function(object){var originalFunction=this,args=Array.prototype.slice.call(arguments),object=args.shift();return function(){return originalFunction.apply(object,args.concat(Array.prototype.slice.call(arguments)));};};}
ko.utils.domData=new(function(){var uniqueId=0;var dataStoreKeyExpandoPropertyName="__ko__"+(new Date).getTime();var dataStore={};return{get:function(node,key){var allDataForNode=ko.utils.domData.getAll(node,false);return allDataForNode===undefined?undefined:allDataForNode[key];},set:function(node,key,value){if(value===undefined){if(ko.utils.domData.getAll(node,false)===undefined)
return;}
var allDataForNode=ko.utils.domData.getAll(node,true);allDataForNode[key]=value;},getAll:function(node,createIfNotFound){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];var hasExistingDataStore=dataStoreKey&&(dataStoreKey!=="null");if(!hasExistingDataStore){if(!createIfNotFound)
return undefined;dataStoreKey=node[dataStoreKeyExpandoPropertyName]="ko"+uniqueId++;dataStore[dataStoreKey]={};}
return dataStore[dataStoreKey];},clear:function(node){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];if(dataStoreKey){delete dataStore[dataStoreKey];node[dataStoreKeyExpandoPropertyName]=null;}}}})();ko.exportSymbol('ko.utils.domData',ko.utils.domData);ko.exportSymbol('ko.utils.domData.clear',ko.utils.domData.clear);ko.utils.domNodeDisposal=new(function(){var domDataKey="__ko_domNodeDisposal__"+(new Date).getTime();function getDisposeCallbacksCollection(node,createIfNotFound){var allDisposeCallbacks=ko.utils.domData.get(node,domDataKey);if((allDisposeCallbacks===undefined)&&createIfNotFound){allDisposeCallbacks=[];ko.utils.domData.set(node,domDataKey,allDisposeCallbacks);}
return allDisposeCallbacks;}
function destroyCallbacksCollection(node){ko.utils.domData.set(node,domDataKey,undefined);}
function cleanSingleNode(node){var callbacks=getDisposeCallbacksCollection(node,false);if(callbacks){callbacks=callbacks.slice(0);for(var i=0;i<callbacks.length;i++)
callbacks[i](node);}
ko.utils.domData.clear(node);if((typeof jQuery=="function")&&(typeof jQuery['cleanData']=="function"))
jQuery['cleanData']([node]);}
return{addDisposeCallback:function(node,callback){if(typeof callback!="function")
throw new Error("Callback must be a function");getDisposeCallbacksCollection(node,true).push(callback);},removeDisposeCallback:function(node,callback){var callbacksCollection=getDisposeCallbacksCollection(node,false);if(callbacksCollection){ko.utils.arrayRemoveItem(callbacksCollection,callback);if(callbacksCollection.length==0)
destroyCallbacksCollection(node);}},cleanNode:function(node){if((node.nodeType!=1)&&(node.nodeType!=9))
return;cleanSingleNode(node);var descendants=[];ko.utils.arrayPushAll(descendants,node.getElementsByTagName("*"));for(var i=0,j=descendants.length;i<j;i++)
cleanSingleNode(descendants[i]);},removeNode:function(node){ko.cleanNode(node);if(node.parentNode)
node.parentNode.removeChild(node);}}})();ko.cleanNode=ko.utils.domNodeDisposal.cleanNode;ko.removeNode=ko.utils.domNodeDisposal.removeNode;ko.exportSymbol('ko.cleanNode',ko.cleanNode);ko.exportSymbol('ko.removeNode',ko.removeNode);ko.exportSymbol('ko.utils.domNodeDisposal',ko.utils.domNodeDisposal);ko.exportSymbol('ko.utils.domNodeDisposal.addDisposeCallback',ko.utils.domNodeDisposal.addDisposeCallback);ko.exportSymbol('ko.utils.domNodeDisposal.removeDisposeCallback',ko.utils.domNodeDisposal.removeDisposeCallback);(function(){var leadingCommentRegex=/^(\s*)<!--(.*?)-->/;function simpleHtmlParse(html){html=html||"";var prefixNodes=[];while(html.match(leadingCommentRegex)){html=html.replace(leadingCommentRegex,function(){var whitespace=arguments[1],comment=arguments[2];if(whitespace)
prefixNodes.push(document.createTextNode(whitespace));prefixNodes.push(document.createComment(comment));return"";});}
var tags=ko.utils.stringTrim(html).toLowerCase(),div=document.createElement("div");var wrap=tags.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!tags.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!tags.indexOf("<td")||!tags.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""];div.innerHTML=wrap[1]+html+wrap[2];while(wrap[0]--)
div=div.lastChild;return prefixNodes.concat(ko.utils.makeArray(div.childNodes));}
ko.utils.parseHtmlFragment=function(html){return typeof jQuery!='undefined'?jQuery['clean']([html]):simpleHtmlParse(html);};ko.utils.setHtml=function(node,html){ko.utils.emptyDomNode(node);if((html!==null)&&(html!==undefined)){if(typeof html!='string')
html=html.toString();if(typeof jQuery!='undefined'){jQuery(node)['html'](html);}else{var parsedNodes=ko.utils.parseHtmlFragment(html);for(var i=0;i<parsedNodes.length;i++)
node.appendChild(parsedNodes[i]);}}};})();ko.exportSymbol('ko.utils.parseHtmlFragment',ko.utils.parseHtmlFragment);ko.memoization=(function(){var memos={};function randomMax8HexChars(){return(((1+Math.random())*0x100000000)|0).toString(16).substring(1);}
function generateRandomId(){return randomMax8HexChars()+randomMax8HexChars();}
function findMemoNodes(rootNode,appendToArray){if(!rootNode)
return;if(rootNode.nodeType==8){var memoId=ko.memoization.parseMemoText(rootNode.nodeValue);if(memoId!=null)
appendToArray.push({domNode:rootNode,memoId:memoId});}else if(rootNode.nodeType==1){for(var i=0,childNodes=rootNode.childNodes,j=childNodes.length;i<j;i++)
findMemoNodes(childNodes[i],appendToArray);}}
return{memoize:function(callback){if(typeof callback!="function")
throw new Error("You can only pass a function to ko.memoization.memoize()");var memoId=generateRandomId();memos[memoId]=callback;return"<!--[ko_memo:"+memoId+"]-->";},unmemoize:function(memoId,callbackParams){var callback=memos[memoId];if(callback===undefined)
throw new Error("Couldn't find any memo with ID "+memoId+". Perhaps it's already been unmemoized.");try{callback.apply(null,callbackParams||[]);return true;}
finally{delete memos[memoId];}},unmemoizeDomNodeAndDescendants:function(domNode,extraCallbackParamsArray){var memos=[];findMemoNodes(domNode,memos);for(var i=0,j=memos.length;i<j;i++){var node=memos[i].domNode;var combinedParams=[node];if(extraCallbackParamsArray)
ko.utils.arrayPushAll(combinedParams,extraCallbackParamsArray);ko.memoization.unmemoize(memos[i].memoId,combinedParams);node.nodeValue="";if(node.parentNode)
node.parentNode.removeChild(node);}},parseMemoText:function(memoText){var match=memoText.match(/^\[ko_memo\:(.*?)\]$/);return match?match[1]:null;}};})();ko.exportSymbol('ko.memoization',ko.memoization);ko.exportSymbol('ko.memoization.memoize',ko.memoization.memoize);ko.exportSymbol('ko.memoization.unmemoize',ko.memoization.unmemoize);ko.exportSymbol('ko.memoization.parseMemoText',ko.memoization.parseMemoText);ko.exportSymbol('ko.memoization.unmemoizeDomNodeAndDescendants',ko.memoization.unmemoizeDomNodeAndDescendants);ko.extenders={'throttle':function(target,timeout){target['throttleEvaluation']=timeout;var writeTimeoutInstance=null;return ko.dependentObservable({'read':target,'write':function(value){clearTimeout(writeTimeoutInstance);writeTimeoutInstance=setTimeout(function(){target(value);},timeout);}});}};function applyExtenders(requestedExtenders){var target=this;if(requestedExtenders){for(var key in requestedExtenders){var extenderHandler=ko.extenders[key];if(typeof extenderHandler=='function'){target=extenderHandler(target,requestedExtenders[key]);}}}
return target;}
ko.exportSymbol('ko.extenders',ko.extenders);ko.subscription=function(callback,disposeCallback){this.callback=callback;this.disposeCallback=disposeCallback;ko.exportProperty(this,'dispose',this.dispose);};ko.subscription.prototype.dispose=function(){this.isDisposed=true;this.disposeCallback();};ko.subscribable=function(){this._subscriptions=[];ko.utils.extend(this,ko.subscribable['fn']);ko.exportProperty(this,'subscribe',this.subscribe);ko.exportProperty(this,'extend',this.extend);ko.exportProperty(this,'notifySubscribers',this.notifySubscribers);ko.exportProperty(this,'getSubscriptionsCount',this.getSubscriptionsCount);}
ko.subscribable['fn']={subscribe:function(callback,callbackTarget){var boundCallback=callbackTarget?callback.bind(callbackTarget):callback;var subscription=new ko.subscription(boundCallback,function(){ko.utils.arrayRemoveItem(this._subscriptions,subscription);}.bind(this));this._subscriptions.push(subscription);return subscription;},notifySubscribers:function(valueToNotify){ko.utils.arrayForEach(this._subscriptions.slice(0),function(subscription){if(subscription&&(subscription.isDisposed!==true))
subscription.callback(valueToNotify);});},getSubscriptionsCount:function(){return this._subscriptions.length;},extend:applyExtenders};ko.isSubscribable=function(instance){return typeof instance.subscribe=="function"&&typeof instance.notifySubscribers=="function";};ko.exportSymbol('ko.subscribable',ko.subscribable);ko.exportSymbol('ko.isSubscribable',ko.isSubscribable);ko.dependencyDetection=(function(){var _frames=[];return{begin:function(callback){_frames.push({callback:callback,distinctDependencies:[]});},end:function(){_frames.pop();},registerDependency:function(subscribable){if(!ko.isSubscribable(subscribable))
throw"Only subscribable things can act as dependencies";if(_frames.length>0){var topFrame=_frames[_frames.length-1];if(ko.utils.arrayIndexOf(topFrame.distinctDependencies,subscribable)>=0)
return;topFrame.distinctDependencies.push(subscribable);topFrame.callback(subscribable);}}};})();var primitiveTypes={'undefined':true,'boolean':true,'number':true,'string':true};ko.observable=function(initialValue){var _latestValue=initialValue;function observable(){if(arguments.length>0){if((!observable['equalityComparer'])||!observable['equalityComparer'](_latestValue,arguments[0])){_latestValue=arguments[0];observable.notifySubscribers(_latestValue);}
return this;}
else{ko.dependencyDetection.registerDependency(observable);return _latestValue;}}
ko.subscribable.call(observable);observable.valueHasMutated=function(){observable.notifySubscribers(_latestValue);}
ko.utils.extend(observable,ko.observable['fn']);ko.exportProperty(observable,"valueHasMutated",observable.valueHasMutated);return observable;}
ko.observable['fn']={__ko_proto__:ko.observable,"equalityComparer":function valuesArePrimitiveAndEqual(a,b){var oldValueIsPrimitive=(a===null)||(typeof(a)in primitiveTypes);return oldValueIsPrimitive?(a===b):false;}};ko.isObservable=function(instance){if((instance===null)||(instance===undefined)||(instance.__ko_proto__===undefined))return false;if(instance.__ko_proto__===ko.observable)return true;return ko.isObservable(instance.__ko_proto__);}
ko.isWriteableObservable=function(instance){if((typeof instance=="function")&&instance.__ko_proto__===ko.observable)
return true;if((typeof instance=="function")&&(instance.__ko_proto__===ko.dependentObservable)&&(instance.hasWriteFunction))
return true;return false;}
ko.exportSymbol('ko.observable',ko.observable);ko.exportSymbol('ko.isObservable',ko.isObservable);ko.exportSymbol('ko.isWriteableObservable',ko.isWriteableObservable);ko.observableArray=function(initialValues){if(arguments.length==0){initialValues=[];}
if((initialValues!==null)&&(initialValues!==undefined)&&!('length'in initialValues))
throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var result=new ko.observable(initialValues);ko.utils.extend(result,ko.observableArray['fn']);ko.exportProperty(result,"remove",result.remove);ko.exportProperty(result,"removeAll",result.removeAll);ko.exportProperty(result,"destroy",result.destroy);ko.exportProperty(result,"destroyAll",result.destroyAll);ko.exportProperty(result,"indexOf",result.indexOf);ko.exportProperty(result,"replace",result.replace);return result;}
ko.observableArray['fn']={remove:function(valueOrPredicate){var underlyingArray=this();var remainingValues=[];var removedValues=[];var predicate=typeof valueOrPredicate=="function"?valueOrPredicate:function(value){return value===valueOrPredicate;};for(var i=0,j=underlyingArray.length;i<j;i++){var value=underlyingArray[i];if(!predicate(value))
remainingValues.push(value);else
removedValues.push(value);}
this(remainingValues);return removedValues;},removeAll:function(arrayOfValues){if(arrayOfValues===undefined){var allValues=this();this([]);return allValues;}
if(!arrayOfValues)
return[];return this.remove(function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0;});},destroy:function(valueOrPredicate){var underlyingArray=this();var predicate=typeof valueOrPredicate=="function"?valueOrPredicate:function(value){return value===valueOrPredicate;};for(var i=underlyingArray.length-1;i>=0;i--){var value=underlyingArray[i];if(predicate(value))
underlyingArray[i]["_destroy"]=true;}
this.valueHasMutated();},destroyAll:function(arrayOfValues){if(arrayOfValues===undefined)
return this.destroy(function(){return true});if(!arrayOfValues)
return[];return this.destroy(function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0;});},indexOf:function(item){var underlyingArray=this();return ko.utils.arrayIndexOf(underlyingArray,item);},replace:function(oldItem,newItem){var index=this.indexOf(oldItem);if(index>=0){this()[index]=newItem;this.valueHasMutated();}}}
ko.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(methodName){ko.observableArray['fn'][methodName]=function(){var underlyingArray=this();var methodCallResult=underlyingArray[methodName].apply(underlyingArray,arguments);this.valueHasMutated();return methodCallResult;};});ko.utils.arrayForEach(["slice"],function(methodName){ko.observableArray['fn'][methodName]=function(){var underlyingArray=this();return underlyingArray[methodName].apply(underlyingArray,arguments);};});ko.exportSymbol('ko.observableArray',ko.observableArray);function prepareOptions(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options){if(evaluatorFunctionOrOptions&&typeof evaluatorFunctionOrOptions=="object"){options=evaluatorFunctionOrOptions;}else{options=options||{};options["read"]=evaluatorFunctionOrOptions||options["read"];options["owner"]=evaluatorFunctionTarget||options["owner"];}
if(typeof options["read"]!="function")
throw"Pass a function that returns the value of the dependentObservable";return options;}
ko.dependentObservable=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options){var _latestValue,_hasBeenEvaluated=false,options=prepareOptions(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options);var disposeWhenNodeIsRemoved=(typeof options["disposeWhenNodeIsRemoved"]=="object")?options["disposeWhenNodeIsRemoved"]:null;var disposeWhenNodeIsRemovedCallback=null;if(disposeWhenNodeIsRemoved){disposeWhenNodeIsRemovedCallback=function(){dependentObservable.dispose()};ko.utils.domNodeDisposal.addDisposeCallback(disposeWhenNodeIsRemoved,disposeWhenNodeIsRemovedCallback);var existingDisposeWhenFunction=options["disposeWhen"];options["disposeWhen"]=function(){return(!ko.utils.domNodeIsAttachedToDocument(disposeWhenNodeIsRemoved))||((typeof existingDisposeWhenFunction=="function")&&existingDisposeWhenFunction());}}
var _subscriptionsToDependencies=[];function disposeAllSubscriptionsToDependencies(){ko.utils.arrayForEach(_subscriptionsToDependencies,function(subscription){subscription.dispose();});_subscriptionsToDependencies=[];}
var evaluationTimeoutInstance=null;function evaluatePossiblyAsync(){var throttleEvaluationTimeout=dependentObservable['throttleEvaluation'];if(throttleEvaluationTimeout&&throttleEvaluationTimeout>=0){clearTimeout(evaluationTimeoutInstance);evaluationTimeoutInstance=setTimeout(evaluateImmediate,throttleEvaluationTimeout);}else
evaluateImmediate();}
function evaluateImmediate(){if((_hasBeenEvaluated)&&typeof options["disposeWhen"]=="function"){if(options["disposeWhen"]()){dependentObservable.dispose();return;}}
try{disposeAllSubscriptionsToDependencies();ko.dependencyDetection.begin(function(subscribable){_subscriptionsToDependencies.push(subscribable.subscribe(evaluatePossiblyAsync));});_latestValue=options["owner"]?options["read"].call(options["owner"]):options["read"]();}finally{ko.dependencyDetection.end();}
dependentObservable.notifySubscribers(_latestValue);_hasBeenEvaluated=true;}
function dependentObservable(){if(arguments.length>0){if(typeof options["write"]==="function"){var valueForThis=options["owner"];options["write"].apply(valueForThis,arguments);}else{throw"Cannot write a value to a dependentObservable unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.";}}else{if(!_hasBeenEvaluated)
evaluateImmediate();ko.dependencyDetection.registerDependency(dependentObservable);return _latestValue;}}
dependentObservable.getDependenciesCount=function(){return _subscriptionsToDependencies.length;}
dependentObservable.hasWriteFunction=typeof options["write"]==="function";dependentObservable.dispose=function(){if(disposeWhenNodeIsRemoved)
ko.utils.domNodeDisposal.removeDisposeCallback(disposeWhenNodeIsRemoved,disposeWhenNodeIsRemovedCallback);disposeAllSubscriptionsToDependencies();};ko.subscribable.call(dependentObservable);ko.utils.extend(dependentObservable,ko.dependentObservable['fn']);if(options['deferEvaluation']!==true)
evaluateImmediate();ko.exportProperty(dependentObservable,'dispose',dependentObservable.dispose);ko.exportProperty(dependentObservable,'getDependenciesCount',dependentObservable.getDependenciesCount);return dependentObservable;};ko.dependentObservable['fn']={__ko_proto__:ko.dependentObservable};ko.dependentObservable.__ko_proto__=ko.observable;ko.exportSymbol('ko.dependentObservable',ko.dependentObservable);ko.exportSymbol('ko.computed',ko.dependentObservable);(function(){var maxNestedObservableDepth=10;ko.toJS=function(rootObject){if(arguments.length==0)
throw new Error("When calling ko.toJS, pass the object you want to convert.");return mapJsObjectGraph(rootObject,function(valueToMap){for(var i=0;ko.isObservable(valueToMap)&&(i<maxNestedObservableDepth);i++)
valueToMap=valueToMap();return valueToMap;});};ko.toJSON=function(rootObject){var plainJavaScriptObject=ko.toJS(rootObject);return ko.utils.stringifyJson(plainJavaScriptObject);};function mapJsObjectGraph(rootObject,mapInputCallback,visitedObjects){visitedObjects=visitedObjects||new objectLookup();rootObject=mapInputCallback(rootObject);var canHaveProperties=(typeof rootObject=="object")&&(rootObject!==null)&&(rootObject!==undefined);if(!canHaveProperties)
return rootObject;var outputProperties=rootObject instanceof Array?[]:{};visitedObjects.save(rootObject,outputProperties);visitPropertiesOrArrayEntries(rootObject,function(indexer){var propertyValue=mapInputCallback(rootObject[indexer]);switch(typeof propertyValue){case"boolean":case"number":case"string":case"function":outputProperties[indexer]=propertyValue;break;case"object":case"undefined":var previouslyMappedValue=visitedObjects.get(propertyValue);outputProperties[indexer]=(previouslyMappedValue!==undefined)?previouslyMappedValue:mapJsObjectGraph(propertyValue,mapInputCallback,visitedObjects);break;}});return outputProperties;}
function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(rootObject instanceof Array){for(var i=0;i<rootObject.length;i++)
visitorCallback(i);}else{for(var propertyName in rootObject)
visitorCallback(propertyName);}};function objectLookup(){var keys=[];var values=[];this.save=function(key,value){var existingIndex=ko.utils.arrayIndexOf(keys,key);if(existingIndex>=0)
values[existingIndex]=value;else{keys.push(key);values.push(value);}};this.get=function(key){var existingIndex=ko.utils.arrayIndexOf(keys,key);return(existingIndex>=0)?values[existingIndex]:undefined;};};})();ko.exportSymbol('ko.toJS',ko.toJS);ko.exportSymbol('ko.toJSON',ko.toJSON);(function(){ko.selectExtensions={readValue:function(element){if(element.tagName=='OPTION'){if(element['__ko__hasDomDataOptionValue__']===true)
return ko.utils.domData.get(element,ko.bindingHandlers.options.optionValueDomDataKey);return element.getAttribute("value");}else if(element.tagName=='SELECT')
return element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex]):undefined;else
return element.value;},writeValue:function(element,value){if(element.tagName=='OPTION'){switch(typeof value){case"string":case"number":ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,undefined);if('__ko__hasDomDataOptionValue__'in element){delete element['__ko__hasDomDataOptionValue__'];}
element.value=value;break;default:ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,value);element['__ko__hasDomDataOptionValue__']=true;element.value="";break;}}else if(element.tagName=='SELECT'){for(var i=element.options.length-1;i>=0;i--){if(ko.selectExtensions.readValue(element.options[i])==value){element.selectedIndex=i;break;}}}else{if((value===null)||(value===undefined))
value="";element.value=value;}}};})();ko.exportSymbol('ko.selectExtensions',ko.selectExtensions);ko.exportSymbol('ko.selectExtensions.readValue',ko.selectExtensions.readValue);ko.exportSymbol('ko.selectExtensions.writeValue',ko.selectExtensions.writeValue);ko.jsonExpressionRewriting=(function(){var restoreCapturedTokensRegex=/\@ko_token_(\d+)\@/g;var javaScriptAssignmentTarget=/^[\_$a-z][\_$a-z0-9]*(\[.*?\])*(\.[\_$a-z][\_$a-z0-9]*(\[.*?\])*)*$/i;var javaScriptReservedWords=["true","false"];function restoreTokens(string,tokens){var prevValue=null;while(string!=prevValue){prevValue=string;string=string.replace(restoreCapturedTokensRegex,function(match,tokenIndex){return tokens[tokenIndex];});}
return string;}
function isWriteableValue(expression){if(ko.utils.arrayIndexOf(javaScriptReservedWords,ko.utils.stringTrim(expression).toLowerCase())>=0)
return false;return expression.match(javaScriptAssignmentTarget)!==null;}
function ensureQuoted(key){var trimmedKey=ko.utils.stringTrim(key);switch(trimmedKey.length&&trimmedKey.charAt(0)){case"'":case'"':return key;default:return"'"+trimmedKey+"'";}}
return{bindingRewriteValidators:[],parseObjectLiteral:function(objectLiteralString){var str=ko.utils.stringTrim(objectLiteralString);if(str.length<3)
return[];if(str.charAt(0)==="{")
str=str.substring(1,str.length-1);var tokens=[];var tokenStart=null,tokenEndChar;for(var position=0;position<str.length;position++){var c=str.charAt(position);if(tokenStart===null){switch(c){case'"':case"'":case"/":tokenStart=position;tokenEndChar=c;break;}}else if((c==tokenEndChar)&&(str.charAt(position-1)!=="\\")){var token=str.substring(tokenStart,position+1);tokens.push(token);var replacement="@ko_token_"+(tokens.length-1)+"@";str=str.substring(0,tokenStart)+replacement+str.substring(position+1);position-=(token.length-replacement.length);tokenStart=null;}}
tokenStart=null;tokenEndChar=null;var tokenDepth=0,tokenStartChar=null;for(var position=0;position<str.length;position++){var c=str.charAt(position);if(tokenStart===null){switch(c){case"{":tokenStart=position;tokenStartChar=c;tokenEndChar="}";break;case"(":tokenStart=position;tokenStartChar=c;tokenEndChar=")";break;case"[":tokenStart=position;tokenStartChar=c;tokenEndChar="]";break;}}
if(c===tokenStartChar)
tokenDepth++;else if(c===tokenEndChar){tokenDepth--;if(tokenDepth===0){var token=str.substring(tokenStart,position+1);tokens.push(token);var replacement="@ko_token_"+(tokens.length-1)+"@";str=str.substring(0,tokenStart)+replacement+str.substring(position+1);position-=(token.length-replacement.length);tokenStart=null;}}}
var result=[];var keyValuePairs=str.split(",");for(var i=0,j=keyValuePairs.length;i<j;i++){var pair=keyValuePairs[i];var colonPos=pair.indexOf(":");if((colonPos>0)&&(colonPos<pair.length-1)){var key=pair.substring(0,colonPos);var value=pair.substring(colonPos+1);result.push({'key':restoreTokens(key,tokens),'value':restoreTokens(value,tokens)});}else{result.push({'unknown':restoreTokens(pair,tokens)});}}
return result;},insertPropertyAccessorsIntoJson:function(objectLiteralStringOrKeyValueArray){var keyValueArray=typeof objectLiteralStringOrKeyValueArray==="string"?ko.jsonExpressionRewriting.parseObjectLiteral(objectLiteralStringOrKeyValueArray):objectLiteralStringOrKeyValueArray;var resultStrings=[],propertyAccessorResultStrings=[];var keyValueEntry;for(var i=0;keyValueEntry=keyValueArray[i];i++){if(resultStrings.length>0)
resultStrings.push(",");if(keyValueEntry['key']){var quotedKey=ensureQuoted(keyValueEntry['key']),val=keyValueEntry['value'];resultStrings.push(quotedKey);resultStrings.push(":");resultStrings.push(val);if(isWriteableValue(ko.utils.stringTrim(val))){if(propertyAccessorResultStrings.length>0)
propertyAccessorResultStrings.push(", ");propertyAccessorResultStrings.push(quotedKey+" : function(__ko_value) { "+val+" = __ko_value; }");}}else if(keyValueEntry['unknown']){resultStrings.push(keyValueEntry['unknown']);}}
var combinedResult=resultStrings.join("");if(propertyAccessorResultStrings.length>0){var allPropertyAccessors=propertyAccessorResultStrings.join("");combinedResult=combinedResult+", '_ko_property_writers' : { "+allPropertyAccessors+" } ";}
return combinedResult;},keyValueArrayContainsKey:function(keyValueArray,key){for(var i=0;i<keyValueArray.length;i++)
if(ko.utils.stringTrim(keyValueArray[i]['key'])==key)
return true;return false;}};})();ko.exportSymbol('ko.jsonExpressionRewriting',ko.jsonExpressionRewriting);ko.exportSymbol('ko.jsonExpressionRewriting.bindingRewriteValidators',ko.jsonExpressionRewriting.bindingRewriteValidators);ko.exportSymbol('ko.jsonExpressionRewriting.parseObjectLiteral',ko.jsonExpressionRewriting.parseObjectLiteral);ko.exportSymbol('ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson',ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson);(function(){var startCommentRegex=/^\s*ko\s+(.*\:.*)\s*$/;var endCommentRegex=/^\s*\/ko\s*$/;function isStartComment(node){return(node.nodeType==8)&&node.nodeValue.match(startCommentRegex);}
function isEndComment(node){return(node.nodeType==8)&&node.nodeValue.match(endCommentRegex);}
function getVirtualChildren(startComment){var currentNode=startComment;var depth=1;var children=[];while(currentNode=currentNode.nextSibling){if(isEndComment(currentNode)){depth--;if(depth===0)
return children;}
children.push(currentNode);if(isStartComment(currentNode))
depth++;}
throw new Error("Cannot find closing comment tag to match: "+startComment.nodeValue);}
function getMatchingEndComment(startComment){var allVirtualChildren=getVirtualChildren(startComment);if(allVirtualChildren.length>0)
return allVirtualChildren[allVirtualChildren.length-1].nextSibling;return startComment.nextSibling;}
function nodeArrayToText(nodeArray,cleanNodes){var texts=[];for(var i=0,j=nodeArray.length;i<j;i++){if(cleanNodes)
ko.utils.domNodeDisposal.cleanNode(nodeArray[i]);texts.push(ko.utils.outerHTML(nodeArray[i]));}
return String.prototype.concat.apply("",texts);}
ko.virtualElements={allowedBindings:{},childNodes:function(node){return isStartComment(node)?getVirtualChildren(node):node.childNodes;},emptyNode:function(node){if(!isStartComment(node))
ko.utils.emptyDomNode(node);else{var virtualChildren=ko.virtualElements.childNodes(node);for(var i=0,j=virtualChildren.length;i<j;i++)
ko.removeNode(virtualChildren[i]);}},setDomNodeChildren:function(node,childNodes){if(!isStartComment(node))
ko.utils.setDomNodeChildren(node,childNodes);else{ko.virtualElements.emptyNode(node);var endCommentNode=node.nextSibling;for(var i=0,j=childNodes.length;i<j;i++)
endCommentNode.parentNode.insertBefore(childNodes[i],endCommentNode);}},prepend:function(containerNode,nodeToPrepend){if(!isStartComment(containerNode)){if(containerNode.firstChild)
containerNode.insertBefore(nodeToPrepend,containerNode.firstChild);else
containerNode.appendChild(nodeToPrepend);}else{containerNode.parentNode.insertBefore(nodeToPrepend,containerNode.nextSibling);}},insertAfter:function(containerNode,nodeToInsert,insertAfterNode){if(!isStartComment(containerNode)){if(insertAfterNode.nextSibling)
containerNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling);else
containerNode.appendChild(nodeToInsert);}else{containerNode.parentNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling);}},nextSibling:function(node){if(!isStartComment(node)){if(node.nextSibling&&isEndComment(node.nextSibling))
return undefined;return node.nextSibling;}else{return getMatchingEndComment(node).nextSibling;}},virtualNodeBindingValue:function(node){var regexMatch=isStartComment(node);return regexMatch?regexMatch[1]:null;},extractAnonymousTemplateIfVirtualElement:function(node){if(ko.virtualElements.virtualNodeBindingValue(node)){var virtualChildren=ko.virtualElements.childNodes(node);var anonymousTemplateText=nodeArrayToText(virtualChildren,true);ko.virtualElements.emptyNode(node);new ko.templateSources.anonymousTemplate(node).text(anonymousTemplateText);}}};})();(function(){var defaultBindingAttributeName="data-bind";ko.bindingProvider=function(){};ko.utils.extend(ko.bindingProvider.prototype,{'nodeHasBindings':function(node){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName)!=null;case 8:return ko.virtualElements.virtualNodeBindingValue(node)!=null;default:return false;}},'getBindings':function(node,bindingContext){var bindingsString=this['getBindingsString'](node,bindingContext);return bindingsString?this['parseBindingsString'](bindingsString,bindingContext):null;},'getBindingsString':function(node,bindingContext){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName);case 8:return ko.virtualElements.virtualNodeBindingValue(node);default:return null;}},'parseBindingsString':function(bindingsString,bindingContext){try{var viewModel=bindingContext['$data'];var rewrittenBindings=" { "+ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(bindingsString)+" } ";return ko.utils.evalWithinScope(rewrittenBindings,viewModel===null?window:viewModel,bindingContext);}catch(ex){throw new Error("Unable to parse bindings.\nMessage: "+ex+";\nBindings value: "+bindingsString);}}});ko.bindingProvider['instance']=new ko.bindingProvider();})();ko.exportSymbol('ko.bindingProvider',ko.bindingProvider);(function(){ko.bindingHandlers={};ko.bindingContext=function(dataItem,parentBindingContext){this['$data']=dataItem;if(parentBindingContext){this['$parent']=parentBindingContext['$data'];this['$parents']=(parentBindingContext['$parents']||[]).slice(0);this['$parents'].unshift(this['$parent']);this['$root']=parentBindingContext['$root'];}else{this['$parents']=[];this['$root']=dataItem;}}
ko.bindingContext.prototype={createChildContext:function(dataItem){return new ko.bindingContext(dataItem,this);}};function validateThatBindingIsAllowedForVirtualElements(bindingName){var validator=ko.virtualElements.allowedBindings[bindingName];if(!validator)
throw new Error("The binding '"+bindingName+"' cannot be used with virtual elements")}
function applyBindingsToDescendantsInternal(viewModel,elementVerified){var currentChild,nextInQueue=elementVerified.childNodes[0];while(currentChild=nextInQueue){nextInQueue=ko.virtualElements.nextSibling(currentChild);applyBindingsToNodeAndDescendantsInternal(viewModel,currentChild,false);}}
function applyBindingsToNodeAndDescendantsInternal(viewModel,nodeVerified,isRootNodeForBindingContext){var shouldBindDescendants=true;var isElement=(nodeVerified.nodeType==1);var shouldApplyBindings=(isElement&&isRootNodeForBindingContext)||ko.bindingProvider['instance']['nodeHasBindings'](nodeVerified);if(shouldApplyBindings)
shouldBindDescendants=applyBindingsToNodeInternal(nodeVerified,null,viewModel,isRootNodeForBindingContext).shouldBindDescendants;if(isElement&&shouldBindDescendants)
applyBindingsToDescendantsInternal(viewModel,nodeVerified);}
function applyBindingsToNodeInternal(node,bindings,viewModelOrBindingContext,isRootNodeForBindingContext){var isFirstEvaluation=true;ko.virtualElements.extractAnonymousTemplateIfVirtualElement(node);var parsedBindings;function makeValueAccessor(bindingKey){return function(){return parsedBindings[bindingKey]}}
function parsedBindingsAccessor(){return parsedBindings;}
var bindingHandlerThatControlsDescendantBindings;new ko.dependentObservable(function(){var bindingContextInstance=viewModelOrBindingContext&&(viewModelOrBindingContext instanceof ko.bindingContext)?viewModelOrBindingContext:new ko.bindingContext(ko.utils.unwrapObservable(viewModelOrBindingContext));var viewModel=bindingContextInstance['$data'];if(isRootNodeForBindingContext)
ko.storedBindingContextForNode(node,bindingContextInstance);var evaluatedBindings=(typeof bindings=="function")?bindings():bindings;parsedBindings=evaluatedBindings||ko.bindingProvider['instance']['getBindings'](node,bindingContextInstance);if(parsedBindings){if(isFirstEvaluation){for(var bindingKey in parsedBindings){var binding=ko.bindingHandlers[bindingKey];if(binding&&node.nodeType===8)
validateThatBindingIsAllowedForVirtualElements(bindingKey);if(binding&&typeof binding["init"]=="function"){var handlerInitFn=binding["init"];var initResult=handlerInitFn(node,makeValueAccessor(bindingKey),parsedBindingsAccessor,viewModel,bindingContextInstance);if(initResult&&initResult['controlsDescendantBindings']){if(bindingHandlerThatControlsDescendantBindings!==undefined)
throw new Error("Multiple bindings ("+bindingHandlerThatControlsDescendantBindings+" and "+bindingKey+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");bindingHandlerThatControlsDescendantBindings=bindingKey;}}}}
for(var bindingKey in parsedBindings){var binding=ko.bindingHandlers[bindingKey];if(binding&&typeof binding["update"]=="function"){var handlerUpdateFn=binding["update"];handlerUpdateFn(node,makeValueAccessor(bindingKey),parsedBindingsAccessor,viewModel,bindingContextInstance);}}}},null,{'disposeWhenNodeIsRemoved':node});isFirstEvaluation=false;return{shouldBindDescendants:bindingHandlerThatControlsDescendantBindings===undefined};};var storedBindingContextDomDataKey="__ko_bindingContext__";ko.storedBindingContextForNode=function(node,bindingContext){if(arguments.length==2)
ko.utils.domData.set(node,storedBindingContextDomDataKey,bindingContext);else
return ko.utils.domData.get(node,storedBindingContextDomDataKey);}
ko.applyBindingsToNode=function(node,bindings,viewModel){return applyBindingsToNodeInternal(node,bindings,viewModel,true);};ko.applyBindings=function(viewModel,rootNode){if(rootNode&&(rootNode.nodeType!==1)&&(rootNode.nodeType!==8))
throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");rootNode=rootNode||window.document.body;applyBindingsToNodeAndDescendantsInternal(viewModel,rootNode,true);};ko.contextFor=function(node){switch(node.nodeType){case 1:case 8:var context=ko.storedBindingContextForNode(node);if(context)return context;if(node.parentNode)return ko.contextFor(node.parentNode);break;}
return undefined;};ko.dataFor=function(node){var context=ko.contextFor(node);return context?context['$data']:undefined;};ko.exportSymbol('ko.bindingHandlers',ko.bindingHandlers);ko.exportSymbol('ko.applyBindings',ko.applyBindings);ko.exportSymbol('ko.applyBindingsToNode',ko.applyBindingsToNode);ko.exportSymbol('ko.contextFor',ko.contextFor);ko.exportSymbol('ko.dataFor',ko.dataFor);})();var eventHandlersWithShortcuts=['click'];ko.utils.arrayForEach(eventHandlersWithShortcuts,function(eventName){ko.bindingHandlers[eventName]={'init':function(element,valueAccessor,allBindingsAccessor,viewModel){var newValueAccessor=function(){var result={};result[eventName]=valueAccessor();return result;};return ko.bindingHandlers['event']['init'].call(this,element,newValueAccessor,allBindingsAccessor,viewModel);}}});ko.bindingHandlers['event']={'init':function(element,valueAccessor,allBindingsAccessor,viewModel){var eventsToHandle=valueAccessor()||{};for(var eventNameOutsideClosure in eventsToHandle){(function(){var eventName=eventNameOutsideClosure;if(typeof eventName=="string"){ko.utils.registerEventHandler(element,eventName,function(event){var handlerReturnValue;var handlerFunction=valueAccessor()[eventName];var allBindings=allBindingsAccessor();try{handlerReturnValue=handlerFunction.apply(viewModel,arguments);}finally{if(handlerReturnValue!==true){if(event.preventDefault)
event.preventDefault();else
event.returnValue=false;}}
var bubble=allBindings[eventName+'Bubble']!==false;if(!bubble){event.cancelBubble=true;if(event.stopPropagation)
event.stopPropagation();}});}})();}}};ko.bindingHandlers['submit']={'init':function(element,valueAccessor,allBindingsAccessor,viewModel){if(typeof valueAccessor()!="function")
throw new Error("The value for a submit binding must be a function to invoke on submit");ko.utils.registerEventHandler(element,"submit",function(event){var handlerReturnValue;var value=valueAccessor();try{handlerReturnValue=value.call(viewModel,element);}
finally{if(handlerReturnValue!==true){if(event.preventDefault)
event.preventDefault();else
event.returnValue=false;}}});}};ko.bindingHandlers['visible']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());var isCurrentlyVisible=!(element.style.display=="none");if(value&&!isCurrentlyVisible)
element.style.display="";else if((!value)&&isCurrentlyVisible)
element.style.display="none";}}
ko.bindingHandlers['enable']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if(value&&element.disabled)
element.removeAttribute("disabled");else if((!value)&&(!element.disabled))
element.disabled=true;}};ko.bindingHandlers['disable']={'update':function(element,valueAccessor){ko.bindingHandlers['enable']['update'](element,function(){return!ko.utils.unwrapObservable(valueAccessor())});}};ko.bindingHandlers['value']={'init':function(element,valueAccessor,allBindingsAccessor){var eventName=allBindingsAccessor()["valueUpdate"]||"change";var handleEventAsynchronously=false;if(ko.utils.stringStartsWith(eventName,"after")){handleEventAsynchronously=true;eventName=eventName.substring("after".length);}
var runEventHandler=handleEventAsynchronously?function(handler){setTimeout(handler,0)}:function(handler){handler()};ko.utils.registerEventHandler(element,eventName,function(){runEventHandler(function(){var modelValue=valueAccessor();var elementValue=ko.selectExtensions.readValue(element);if(ko.isWriteableObservable(modelValue))
modelValue(elementValue);else{var allBindings=allBindingsAccessor();if(allBindings['_ko_property_writers']&&allBindings['_ko_property_writers']['value'])
allBindings['_ko_property_writers']['value'](elementValue);}});});},'update':function(element,valueAccessor){var newValue=ko.utils.unwrapObservable(valueAccessor());var elementValue=ko.selectExtensions.readValue(element);var valueHasChanged=(newValue!=elementValue);if((newValue===0)&&(elementValue!==0)&&(elementValue!=="0"))
valueHasChanged=true;if(valueHasChanged){var applyValueAction=function(){ko.selectExtensions.writeValue(element,newValue);};applyValueAction();var alsoApplyAsynchronously=element.tagName=="SELECT";if(alsoApplyAsynchronously)
setTimeout(applyValueAction,0);}
if(element.tagName=="SELECT"){elementValue=ko.selectExtensions.readValue(element);if(elementValue!==newValue)
ko.utils.triggerEvent(element,"change");}}};ko.bindingHandlers['options']={'update':function(element,valueAccessor,allBindingsAccessor){if(element.tagName!="SELECT")
throw new Error("options binding applies only to SELECT elements");var previousSelectedValues=ko.utils.arrayMap(ko.utils.arrayFilter(element.childNodes,function(node){return node.tagName&&node.tagName=="OPTION"&&node.selected;}),function(node){return ko.selectExtensions.readValue(node)||node.innerText||node.textContent;});var previousScrollTop=element.scrollTop;var value=ko.utils.unwrapObservable(valueAccessor());var selectedValue=element.value;ko.utils.emptyDomNode(element);if(value){var allBindings=allBindingsAccessor();if(typeof value.length!="number")
value=[value];if(allBindings['optionsCaption']){var option=document.createElement("OPTION");option.innerHTML=allBindings['optionsCaption'];ko.selectExtensions.writeValue(option,undefined);element.appendChild(option);}
for(var i=0,j=value.length;i<j;i++){var option=document.createElement("OPTION");var optionValue=typeof allBindings['optionsValue']=="string"?value[i][allBindings['optionsValue']]:value[i];var optionsTextValue=allBindings['optionsText'];if(typeof optionsTextValue=="function")
optionText=optionsTextValue(value[i]);else if(typeof optionsTextValue=="string")
optionText=value[i][optionsTextValue];else
optionText=optionValue;optionValue=ko.utils.unwrapObservable(optionValue);optionText=ko.utils.unwrapObservable(optionText);ko.selectExtensions.writeValue(option,optionValue);option.innerHTML=optionText.toString();element.appendChild(option);}
var newOptions=element.getElementsByTagName("OPTION");var countSelectionsRetained=0;for(var i=0,j=newOptions.length;i<j;i++){if(ko.utils.arrayIndexOf(previousSelectedValues,ko.selectExtensions.readValue(newOptions[i]))>=0){ko.utils.setOptionNodeSelectionState(newOptions[i],true);countSelectionsRetained++;}}
if(previousScrollTop)
element.scrollTop=previousScrollTop;}}};ko.bindingHandlers['options'].optionValueDomDataKey='__ko.bindingHandlers.options.optionValueDomData__';ko.bindingHandlers['selectedOptions']={getSelectedValuesFromSelectNode:function(selectNode){var result=[];var nodes=selectNode.childNodes;for(var i=0,j=nodes.length;i<j;i++){var node=nodes[i];if((node.tagName=="OPTION")&&node.selected)
result.push(ko.selectExtensions.readValue(node));}
return result;},'init':function(element,valueAccessor,allBindingsAccessor){ko.utils.registerEventHandler(element,"change",function(){var value=valueAccessor();if(ko.isWriteableObservable(value))
value(ko.bindingHandlers['selectedOptions'].getSelectedValuesFromSelectNode(this));else{var allBindings=allBindingsAccessor();if(allBindings['_ko_property_writers']&&allBindings['_ko_property_writers']['value'])
allBindings['_ko_property_writers']['value'](ko.bindingHandlers['selectedOptions'].getSelectedValuesFromSelectNode(this));}});},'update':function(element,valueAccessor){if(element.tagName!="SELECT")
throw new Error("values binding applies only to SELECT elements");var newValue=ko.utils.unwrapObservable(valueAccessor());if(newValue&&typeof newValue.length=="number"){var nodes=element.childNodes;for(var i=0,j=nodes.length;i<j;i++){var node=nodes[i];if(node.tagName=="OPTION")
ko.utils.setOptionNodeSelectionState(node,ko.utils.arrayIndexOf(newValue,ko.selectExtensions.readValue(node))>=0);}}}};ko.bindingHandlers['text']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if((value===null)||(value===undefined))
value="";typeof element.innerText=="string"?element.innerText=value:element.textContent=value;}};ko.bindingHandlers['html']={'init':function(){return{'controlsDescendantBindings':true};},'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());ko.utils.setHtml(element,value);}};ko.bindingHandlers['css']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||{});for(var className in value){if(typeof className=="string"){var shouldHaveClass=ko.utils.unwrapObservable(value[className]);ko.utils.toggleDomNodeCssClass(element,className,shouldHaveClass);}}}};ko.bindingHandlers['style']={'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||{});for(var styleName in value){if(typeof styleName=="string"){var styleValue=ko.utils.unwrapObservable(value[styleName]);element.style[styleName]=styleValue||"";}}}};ko.bindingHandlers['uniqueName']={'init':function(element,valueAccessor){if(valueAccessor()){element.name="ko_unique_"+(++ko.bindingHandlers['uniqueName'].currentIndex);if(ko.utils.isIe6)
element.mergeAttributes(document.createElement("<input name='"+element.name+"'/>"),false);}}};ko.bindingHandlers['uniqueName'].currentIndex=0;ko.bindingHandlers['checked']={'init':function(element,valueAccessor,allBindingsAccessor){var updateHandler=function(){var valueToWrite;if(element.type=="checkbox"){valueToWrite=element.checked;}else if((element.type=="radio")&&(element.checked)){valueToWrite=element.value;}else{return;}
var modelValue=valueAccessor();if((element.type=="checkbox")&&(ko.utils.unwrapObservable(modelValue)instanceof Array)){var existingEntryIndex=ko.utils.arrayIndexOf(ko.utils.unwrapObservable(modelValue),element.value);if(element.checked&&(existingEntryIndex<0))
modelValue.push(element.value);else if((!element.checked)&&(existingEntryIndex>=0))
modelValue.splice(existingEntryIndex,1);}else if(ko.isWriteableObservable(modelValue)){if(modelValue()!==valueToWrite){modelValue(valueToWrite);}}else{var allBindings=allBindingsAccessor();if(allBindings['_ko_property_writers']&&allBindings['_ko_property_writers']['checked']){allBindings['_ko_property_writers']['checked'](valueToWrite);}}};ko.utils.registerEventHandler(element,"click",updateHandler);if((element.type=="radio")&&!element.name)
ko.bindingHandlers['uniqueName']['init'](element,function(){return true});},'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());if(element.type=="checkbox"){if(value instanceof Array){element.checked=ko.utils.arrayIndexOf(value,element.value)>=0;}else{element.checked=value;}
if(value&&ko.utils.isIe6)
element.mergeAttributes(document.createElement("<input type='checkbox' checked='checked' />"),false);}else if(element.type=="radio"){element.checked=(element.value==value);if((element.value==value)&&(ko.utils.isIe6||ko.utils.isIe7))
element.mergeAttributes(document.createElement("<input type='radio' checked='checked' />"),false);}}};ko.bindingHandlers['attr']={'update':function(element,valueAccessor,allBindingsAccessor){var value=ko.utils.unwrapObservable(valueAccessor())||{};for(var attrName in value){if(typeof attrName=="string"){var attrValue=ko.utils.unwrapObservable(value[attrName]);if((attrValue===false)||(attrValue===null)||(attrValue===undefined))
element.removeAttribute(attrName);else
element.setAttribute(attrName,attrValue.toString());}}}};ko.bindingHandlers['hasfocus']={'init':function(element,valueAccessor,allBindingsAccessor){var writeValue=function(valueToWrite){var modelValue=valueAccessor();if(valueToWrite==ko.utils.unwrapObservable(modelValue))
return;if(ko.isWriteableObservable(modelValue))
modelValue(valueToWrite);else{var allBindings=allBindingsAccessor();if(allBindings['_ko_property_writers']&&allBindings['_ko_property_writers']['hasfocus']){allBindings['_ko_property_writers']['hasfocus'](valueToWrite);}}};ko.utils.registerEventHandler(element,"focus",function(){writeValue(true)});ko.utils.registerEventHandler(element,"focusin",function(){writeValue(true)});ko.utils.registerEventHandler(element,"blur",function(){writeValue(false)});ko.utils.registerEventHandler(element,"focusout",function(){writeValue(false)});},'update':function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());value?element.focus():element.blur();ko.utils.triggerEvent(element,value?"focusin":"focusout");}};ko.bindingHandlers['with']={makeTemplateValueAccessor:function(valueAccessor){return function(){var value=valueAccessor();return{'if':value,'data':value,'templateEngine':ko.nativeTemplateEngine.instance}};},'init':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['init'](element,ko.bindingHandlers['with'].makeTemplateValueAccessor(valueAccessor));},'update':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['update'](element,ko.bindingHandlers['with'].makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext);}};ko.jsonExpressionRewriting.bindingRewriteValidators['with']=false;ko.virtualElements.allowedBindings['with']=true;ko.bindingHandlers['if']={makeTemplateValueAccessor:function(valueAccessor){return function(){return{'if':valueAccessor(),'templateEngine':ko.nativeTemplateEngine.instance}};},'init':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['init'](element,ko.bindingHandlers['if'].makeTemplateValueAccessor(valueAccessor));},'update':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['update'](element,ko.bindingHandlers['if'].makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext);}};ko.jsonExpressionRewriting.bindingRewriteValidators['if']=false;ko.virtualElements.allowedBindings['if']=true;ko.bindingHandlers['ifnot']={makeTemplateValueAccessor:function(valueAccessor){return function(){return{'ifnot':valueAccessor(),'templateEngine':ko.nativeTemplateEngine.instance}};},'init':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['init'](element,ko.bindingHandlers['ifnot'].makeTemplateValueAccessor(valueAccessor));},'update':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['update'](element,ko.bindingHandlers['ifnot'].makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext);}};ko.jsonExpressionRewriting.bindingRewriteValidators['ifnot']=false;ko.virtualElements.allowedBindings['ifnot']=true;ko.bindingHandlers['foreach']={makeTemplateValueAccessor:function(valueAccessor){return function(){var bindingValue=ko.utils.unwrapObservable(valueAccessor());if((!bindingValue)||typeof bindingValue.length=="number")
return{'foreach':bindingValue,'templateEngine':ko.nativeTemplateEngine.instance};return{'foreach':bindingValue['data'],'includeDestroyed':bindingValue['includeDestroyed'],'afterAdd':bindingValue['afterAdd'],'beforeRemove':bindingValue['beforeRemove'],'afterRender':bindingValue['afterRender'],'templateEngine':ko.nativeTemplateEngine.instance};};},'init':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['init'](element,ko.bindingHandlers['foreach'].makeTemplateValueAccessor(valueAccessor));},'update':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){return ko.bindingHandlers['template']['update'](element,ko.bindingHandlers['foreach'].makeTemplateValueAccessor(valueAccessor),allBindingsAccessor,viewModel,bindingContext);}};ko.jsonExpressionRewriting.bindingRewriteValidators['foreach']=false;ko.virtualElements.allowedBindings['foreach']=true;ko.templateEngine=function(){};ko.templateEngine.prototype['renderTemplateSource']=function(templateSource,bindingContext,options){throw"Override renderTemplateSource in your ko.templateEngine subclass";};ko.templateEngine.prototype['createJavaScriptEvaluatorBlock']=function(script){throw"Override createJavaScriptEvaluatorBlock in your ko.templateEngine subclass";};ko.templateEngine.prototype['makeTemplateSource']=function(template){if(typeof template=="string"){var elem=document.getElementById(template);if(!elem)
throw new Error("Cannot find template with ID "+template);return new ko.templateSources.domElement(elem);}else if((template.nodeType==1)||(template.nodeType==8)){return new ko.templateSources.anonymousTemplate(template);}else
throw new Error("Unrecognised template type: "+template);};ko.templateEngine.prototype['renderTemplate']=function(template,bindingContext,options){var templateSource=this['makeTemplateSource'](template);return this['renderTemplateSource'](templateSource,bindingContext,options);};ko.templateEngine.prototype['isTemplateRewritten']=function(template){if(this['allowTemplateRewriting']===false)
return true;if(this.knownRewrittenTemplates&&this.knownRewrittenTemplates[template])
return true;return this['makeTemplateSource'](template)['data']("isRewritten");};ko.templateEngine.prototype['rewriteTemplate']=function(template,rewriterCallback){var templateSource=this['makeTemplateSource'](template);var rewritten=rewriterCallback(templateSource['text']());templateSource['text'](rewritten);templateSource['data']("isRewritten",true);if(typeof template=="string"){this.knownRewrittenTemplates=this.knownRewrittenTemplates||{};this.knownRewrittenTemplates[template]=true;}};ko.exportSymbol('ko.templateEngine',ko.templateEngine);ko.templateRewriting=(function(){var memoizeDataBindingAttributeSyntaxRegex=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi;var memoizeVirtualContainerBindingSyntaxRegex=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;function validateDataBindValuesForRewriting(keyValueArray){var allValidators=ko.jsonExpressionRewriting.bindingRewriteValidators;for(var i=0;i<keyValueArray.length;i++){var key=keyValueArray[i]['key'];if(allValidators.hasOwnProperty(key)){var validator=allValidators[key];if(typeof validator==="function"){var possibleErrorMessage=validator(keyValueArray[i]['value']);if(possibleErrorMessage)
throw new Error(possibleErrorMessage);}else if(!validator){throw new Error("This template engine does not support the '"+key+"' binding within its templates");}}}}
function constructMemoizedTagReplacement(dataBindAttributeValue,tagToRetain,templateEngine){var dataBindKeyValueArray=ko.jsonExpressionRewriting.parseObjectLiteral(dataBindAttributeValue);validateDataBindValuesForRewriting(dataBindKeyValueArray);var rewrittenDataBindAttributeValue=ko.jsonExpressionRewriting.insertPropertyAccessorsIntoJson(dataBindKeyValueArray);var applyBindingsToNextSiblingScript='ko.templateRewriting.applyMemoizedBindingsToNextSibling(function() {  return (function() { return { " + rewrittenDataBindAttributeValue + " } })()  })';return templateEngine['createJavaScriptEvaluatorBlock'](applyBindingsToNextSiblingScript)+tagToRetain;}
return{ensureTemplateIsRewritten:function(template,templateEngine){if(!templateEngine['isTemplateRewritten'](template))
templateEngine['rewriteTemplate'](template,function(htmlString){return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString,templateEngine);});},memoizeBindingAttributeSyntax:function(htmlString,templateEngine){return htmlString.replace(memoizeDataBindingAttributeSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[6],arguments[1],templateEngine);}).replace(memoizeVirtualContainerBindingSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[1],"<!-- ko -->",templateEngine);});},applyMemoizedBindingsToNextSibling:function(bindings){return ko.memoization.memoize(function(domNode,bindingContext){if(domNode.nextSibling)
ko.applyBindingsToNode(domNode.nextSibling,bindings,bindingContext);});}}})();ko.exportSymbol('ko.templateRewriting',ko.templateRewriting);ko.exportSymbol('ko.templateRewriting.applyMemoizedBindingsToNextSibling',ko.templateRewriting.applyMemoizedBindingsToNextSibling);(function(){ko.templateSources={};ko.templateSources.domElement=function(element){this.domElement=element;}
ko.templateSources.domElement.prototype['text']=function(){if(arguments.length==0){return this.domElement.tagName.toLowerCase()=="script"?this.domElement.text:this.domElement.innerHTML;}else{var valueToWrite=arguments[0];if(this.domElement.tagName.toLowerCase()=="script")
this.domElement.text=valueToWrite;else
this.domElement.innerHTML=valueToWrite;}};ko.templateSources.domElement.prototype['data']=function(key){if(arguments.length===1){return ko.utils.domData.get(this.domElement,"templateSourceData_"+key);}else{ko.utils.domData.set(this.domElement,"templateSourceData_"+key,arguments[1]);}};var anonymousTemplatesDomDataKey="__ko_anon_template__";ko.templateSources.anonymousTemplate=function(element){this.domElement=element;}
ko.templateSources.anonymousTemplate.prototype=new ko.templateSources.domElement();ko.templateSources.anonymousTemplate.prototype['text']=function(){if(arguments.length==0){return ko.utils.domData.get(this.domElement,anonymousTemplatesDomDataKey);}else{var valueToWrite=arguments[0];ko.utils.domData.set(this.domElement,anonymousTemplatesDomDataKey,valueToWrite);}};ko.exportSymbol('ko.templateSources',ko.templateSources);ko.exportSymbol('ko.templateSources.domElement',ko.templateSources.domElement);ko.exportSymbol('ko.templateSources.anonymousTemplate',ko.templateSources.anonymousTemplate);})();(function(){var _templateEngine;ko.setTemplateEngine=function(templateEngine){if((templateEngine!=undefined)&&!(templateEngine instanceof ko.templateEngine))
throw"templateEngine must inherit from ko.templateEngine";_templateEngine=templateEngine;}
function invokeForEachNodeOrCommentInParent(nodeArray,parent,action){for(var i=0;node=nodeArray[i];i++){if(node.parentNode!==parent)
continue;if((node.nodeType===1)||(node.nodeType===8))
action(node);}}
ko.activateBindingsOnTemplateRenderedNodes=function(nodeArray,bindingContext){var nodeArrayClone=ko.utils.arrayPushAll([],nodeArray);var commonParentElement=(nodeArray.length>0)?nodeArray[0].parentNode:null;invokeForEachNodeOrCommentInParent(nodeArrayClone,commonParentElement,function(node){ko.applyBindings(bindingContext,node);});invokeForEachNodeOrCommentInParent(nodeArrayClone,commonParentElement,function(node){ko.memoization.unmemoizeDomNodeAndDescendants(node,[bindingContext]);});}
function getFirstNodeFromPossibleArray(nodeOrNodeArray){return nodeOrNodeArray.nodeType?nodeOrNodeArray:nodeOrNodeArray.length>0?nodeOrNodeArray[0]:null;}
function executeTemplate(targetNodeOrNodeArray,renderMode,template,bindingContext,options){options=options||{};var templateEngineToUse=(options['templateEngine']||_templateEngine);ko.templateRewriting.ensureTemplateIsRewritten(template,templateEngineToUse);var renderedNodesArray=templateEngineToUse['renderTemplate'](template,bindingContext,options);if((typeof renderedNodesArray.length!="number")||(renderedNodesArray.length>0&&typeof renderedNodesArray[0].nodeType!="number"))
throw"Template engine must return an array of DOM nodes";var haveAddedNodesToParent=false;switch(renderMode){case"replaceChildren":ko.virtualElements.setDomNodeChildren(targetNodeOrNodeArray,renderedNodesArray);haveAddedNodesToParent=true;break;case"replaceNode":ko.utils.replaceDomNodes(targetNodeOrNodeArray,renderedNodesArray);haveAddedNodesToParent=true;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+renderMode);}
if(haveAddedNodesToParent){ko.activateBindingsOnTemplateRenderedNodes(renderedNodesArray,bindingContext);if(options['afterRender'])
options['afterRender'](renderedNodesArray,bindingContext['$data']);}
return renderedNodesArray;}
ko.renderTemplate=function(template,dataOrBindingContext,options,targetNodeOrNodeArray,renderMode){options=options||{};if((options['templateEngine']||_templateEngine)==undefined)
throw"Set a template engine before calling renderTemplate";renderMode=renderMode||"replaceChildren";if(targetNodeOrNodeArray){var firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray);var whenToDispose=function(){return(!firstTargetNode)||!ko.utils.domNodeIsAttachedToDocument(firstTargetNode);};var activelyDisposeWhenNodeIsRemoved=(firstTargetNode&&renderMode=="replaceNode")?firstTargetNode.parentNode:firstTargetNode;return new ko.dependentObservable(function(){var bindingContext=(dataOrBindingContext&&(dataOrBindingContext instanceof ko.bindingContext))?dataOrBindingContext:new ko.bindingContext(ko.utils.unwrapObservable(dataOrBindingContext));var templateName=typeof(template)=='function'?template(bindingContext['$data']):template;var renderedNodesArray=executeTemplate(targetNodeOrNodeArray,renderMode,templateName,bindingContext,options);if(renderMode=="replaceNode"){targetNodeOrNodeArray=renderedNodesArray;firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray);}},null,{'disposeWhen':whenToDispose,'disposeWhenNodeIsRemoved':activelyDisposeWhenNodeIsRemoved});}else{return ko.memoization.memoize(function(domNode){ko.renderTemplate(template,dataOrBindingContext,options,domNode,"replaceNode");});}};ko.renderTemplateForEach=function(template,arrayOrObservableArray,options,targetNode,parentBindingContext){var createInnerBindingContext=function(arrayValue){return parentBindingContext.createChildContext(ko.utils.unwrapObservable(arrayValue));};var activateBindingsCallback=function(arrayValue,addedNodesArray){var bindingContext=createInnerBindingContext(arrayValue);ko.activateBindingsOnTemplateRenderedNodes(addedNodesArray,bindingContext);if(options['afterRender'])
options['afterRender'](addedNodesArray,bindingContext['$data']);};return new ko.dependentObservable(function(){var unwrappedArray=ko.utils.unwrapObservable(arrayOrObservableArray)||[];if(typeof unwrappedArray.length=="undefined")
unwrappedArray=[unwrappedArray];var filteredArray=ko.utils.arrayFilter(unwrappedArray,function(item){return options['includeDestroyed']||!item['_destroy'];});ko.utils.setDomNodeChildrenFromArrayMapping(targetNode,filteredArray,function(arrayValue){var templateName=typeof(template)=='function'?template(arrayValue):template;return executeTemplate(null,"ignoreTargetNode",templateName,createInnerBindingContext(arrayValue),options);},options,activateBindingsCallback);},null,{'disposeWhenNodeIsRemoved':targetNode});};var templateSubscriptionDomDataKey='__ko__templateSubscriptionDomDataKey__';function disposeOldSubscriptionAndStoreNewOne(element,newSubscription){var oldSubscription=ko.utils.domData.get(element,templateSubscriptionDomDataKey);if(oldSubscription&&(typeof(oldSubscription.dispose)=='function'))
oldSubscription.dispose();ko.utils.domData.set(element,templateSubscriptionDomDataKey,newSubscription);}
ko.bindingHandlers['template']={'init':function(element,valueAccessor){var bindingValue=ko.utils.unwrapObservable(valueAccessor());if((typeof bindingValue!="string")&&(!bindingValue.name)&&(element.nodeType==1)){new ko.templateSources.anonymousTemplate(element).text(element.innerHTML);ko.utils.emptyDomNode(element);}
return{'controlsDescendantBindings':true};},'update':function(element,valueAccessor,allBindingsAccessor,viewModel,bindingContext){var bindingValue=ko.utils.unwrapObservable(valueAccessor());var templateName;var shouldDisplay=true;if(typeof bindingValue=="string"){templateName=bindingValue;}else{templateName=bindingValue.name;if('if'in bindingValue)
shouldDisplay=shouldDisplay&&ko.utils.unwrapObservable(bindingValue['if']);if('ifnot'in bindingValue)
shouldDisplay=shouldDisplay&&!ko.utils.unwrapObservable(bindingValue['ifnot']);}
var templateSubscription=null;if(typeof bindingValue['foreach']!="undefined"){var dataArray=(shouldDisplay&&bindingValue['foreach'])||[];templateSubscription=ko.renderTemplateForEach(templateName||element,dataArray,bindingValue,element,bindingContext);}
else{if(shouldDisplay){var innerBindingContext=(typeof bindingValue=='object')&&('data'in bindingValue)?bindingContext.createChildContext(ko.utils.unwrapObservable(bindingValue['data'])):bindingContext;templateSubscription=ko.renderTemplate(templateName||element,innerBindingContext,bindingValue,element);}else
ko.virtualElements.emptyNode(element);}
disposeOldSubscriptionAndStoreNewOne(element,templateSubscription);}};ko.jsonExpressionRewriting.bindingRewriteValidators['template']=function(bindingValue){var parsedBindingValue=ko.jsonExpressionRewriting.parseObjectLiteral(bindingValue);if((parsedBindingValue.length==1)&&parsedBindingValue[0]['unknown'])
return null;if(ko.jsonExpressionRewriting.keyValueArrayContainsKey(parsedBindingValue,"name"))
return null;return"This template engine does not support anonymous templates nested within its templates";};ko.virtualElements.allowedBindings['template']=true;})();ko.exportSymbol('ko.setTemplateEngine',ko.setTemplateEngine);ko.exportSymbol('ko.renderTemplate',ko.renderTemplate);(function(){function calculateEditDistanceMatrix(oldArray,newArray,maxAllowedDistance){var distances=[];for(var i=0;i<=newArray.length;i++)
distances[i]=[];for(var i=0,j=Math.min(oldArray.length,maxAllowedDistance);i<=j;i++)
distances[0][i]=i;for(var i=1,j=Math.min(newArray.length,maxAllowedDistance);i<=j;i++){distances[i][0]=i;}
var oldIndex,oldIndexMax=oldArray.length,newIndex,newIndexMax=newArray.length;var distanceViaAddition,distanceViaDeletion;for(oldIndex=1;oldIndex<=oldIndexMax;oldIndex++){var newIndexMinForRow=Math.max(1,oldIndex-maxAllowedDistance);var newIndexMaxForRow=Math.min(newIndexMax,oldIndex+maxAllowedDistance);for(newIndex=newIndexMinForRow;newIndex<=newIndexMaxForRow;newIndex++){if(oldArray[oldIndex-1]===newArray[newIndex-1])
distances[newIndex][oldIndex]=distances[newIndex-1][oldIndex-1];else{var northDistance=distances[newIndex-1][oldIndex]===undefined?Number.MAX_VALUE:distances[newIndex-1][oldIndex]+1;var westDistance=distances[newIndex][oldIndex-1]===undefined?Number.MAX_VALUE:distances[newIndex][oldIndex-1]+1;distances[newIndex][oldIndex]=Math.min(northDistance,westDistance);}}}
return distances;}
function findEditScriptFromEditDistanceMatrix(editDistanceMatrix,oldArray,newArray){var oldIndex=oldArray.length;var newIndex=newArray.length;var editScript=[];var maxDistance=editDistanceMatrix[newIndex][oldIndex];if(maxDistance===undefined)
return null;while((oldIndex>0)||(newIndex>0)){var me=editDistanceMatrix[newIndex][oldIndex];var distanceViaAdd=(newIndex>0)?editDistanceMatrix[newIndex-1][oldIndex]:maxDistance+1;var distanceViaDelete=(oldIndex>0)?editDistanceMatrix[newIndex][oldIndex-1]:maxDistance+1;var distanceViaRetain=(newIndex>0)&&(oldIndex>0)?editDistanceMatrix[newIndex-1][oldIndex-1]:maxDistance+1;if((distanceViaAdd===undefined)||(distanceViaAdd<me-1))distanceViaAdd=maxDistance+1;if((distanceViaDelete===undefined)||(distanceViaDelete<me-1))distanceViaDelete=maxDistance+1;if(distanceViaRetain<me-1)distanceViaRetain=maxDistance+1;if((distanceViaAdd<=distanceViaDelete)&&(distanceViaAdd<distanceViaRetain)){editScript.push({status:"added",value:newArray[newIndex-1]});newIndex--;}else if((distanceViaDelete<distanceViaAdd)&&(distanceViaDelete<distanceViaRetain)){editScript.push({status:"deleted",value:oldArray[oldIndex-1]});oldIndex--;}else{editScript.push({status:"retained",value:oldArray[oldIndex-1]});newIndex--;oldIndex--;}}
return editScript.reverse();}
ko.utils.compareArrays=function(oldArray,newArray,maxEditsToConsider){if(maxEditsToConsider===undefined){return ko.utils.compareArrays(oldArray,newArray,1)||ko.utils.compareArrays(oldArray,newArray,10)||ko.utils.compareArrays(oldArray,newArray,Number.MAX_VALUE);}else{oldArray=oldArray||[];newArray=newArray||[];var editDistanceMatrix=calculateEditDistanceMatrix(oldArray,newArray,maxEditsToConsider);return findEditScriptFromEditDistanceMatrix(editDistanceMatrix,oldArray,newArray);}};})();ko.exportSymbol('ko.utils.compareArrays',ko.utils.compareArrays);(function(){function mapNodeAndRefreshWhenChanged(containerNode,mapping,valueToMap,callbackAfterAddingNodes){var mappedNodes=[];var dependentObservable=ko.dependentObservable(function(){var newMappedNodes=mapping(valueToMap)||[];if(mappedNodes.length>0){ko.utils.replaceDomNodes(mappedNodes,newMappedNodes);if(callbackAfterAddingNodes)
callbackAfterAddingNodes(valueToMap,newMappedNodes);}
mappedNodes.splice(0,mappedNodes.length);ko.utils.arrayPushAll(mappedNodes,newMappedNodes);},null,{'disposeWhenNodeIsRemoved':containerNode,'disposeWhen':function(){return(mappedNodes.length==0)||!ko.utils.domNodeIsAttachedToDocument(mappedNodes[0])}});return{mappedNodes:mappedNodes,dependentObservable:dependentObservable};}
var lastMappingResultDomDataKey="setDomNodeChildrenFromArrayMapping_lastMappingResult";ko.utils.setDomNodeChildrenFromArrayMapping=function(domNode,array,mapping,options,callbackAfterAddingNodes){array=array||[];options=options||{};var isFirstExecution=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)===undefined;var lastMappingResult=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)||[];var lastArray=ko.utils.arrayMap(lastMappingResult,function(x){return x.arrayEntry;});var editScript=ko.utils.compareArrays(lastArray,array);var newMappingResult=[];var lastMappingResultIndex=0;var nodesToDelete=[];var nodesAdded=[];var insertAfterNode=null;for(var i=0,j=editScript.length;i<j;i++){switch(editScript[i].status){case"retained":var dataToRetain=lastMappingResult[lastMappingResultIndex];newMappingResult.push(dataToRetain);if(dataToRetain.domNodes.length>0)
insertAfterNode=dataToRetain.domNodes[dataToRetain.domNodes.length-1];lastMappingResultIndex++;break;case"deleted":lastMappingResult[lastMappingResultIndex].dependentObservable.dispose();ko.utils.arrayForEach(lastMappingResult[lastMappingResultIndex].domNodes,function(node){nodesToDelete.push({element:node,index:i,value:editScript[i].value});insertAfterNode=node;});lastMappingResultIndex++;break;case"added":var valueToMap=editScript[i].value;var mapData=mapNodeAndRefreshWhenChanged(domNode,mapping,valueToMap,callbackAfterAddingNodes);var mappedNodes=mapData.mappedNodes;newMappingResult.push({arrayEntry:editScript[i].value,domNodes:mappedNodes,dependentObservable:mapData.dependentObservable});for(var nodeIndex=0,nodeIndexMax=mappedNodes.length;nodeIndex<nodeIndexMax;nodeIndex++){var node=mappedNodes[nodeIndex];nodesAdded.push({element:node,index:i,value:editScript[i].value});if(insertAfterNode==null){ko.virtualElements.prepend(domNode,node);}else{ko.virtualElements.insertAfter(domNode,node,insertAfterNode);}
insertAfterNode=node;}
if(callbackAfterAddingNodes)
callbackAfterAddingNodes(valueToMap,mappedNodes);break;}}
ko.utils.arrayForEach(nodesToDelete,function(node){ko.cleanNode(node.element)});var invokedBeforeRemoveCallback=false;if(!isFirstExecution){if(options['afterAdd']){for(var i=0;i<nodesAdded.length;i++)
options['afterAdd'](nodesAdded[i].element,nodesAdded[i].index,nodesAdded[i].value);}
if(options['beforeRemove']){for(var i=0;i<nodesToDelete.length;i++)
options['beforeRemove'](nodesToDelete[i].element,nodesToDelete[i].index,nodesToDelete[i].value);invokedBeforeRemoveCallback=true;}}
if(!invokedBeforeRemoveCallback)
ko.utils.arrayForEach(nodesToDelete,function(node){ko.removeNode(node.element);});ko.utils.domData.set(domNode,lastMappingResultDomDataKey,newMappingResult);}})();ko.exportSymbol('ko.utils.setDomNodeChildrenFromArrayMapping',ko.utils.setDomNodeChildrenFromArrayMapping);ko.nativeTemplateEngine=function(){this['allowTemplateRewriting']=false;}
ko.nativeTemplateEngine.prototype=new ko.templateEngine();ko.nativeTemplateEngine.prototype['renderTemplateSource']=function(templateSource,bindingContext,options){var templateText=templateSource.text();return ko.utils.parseHtmlFragment(templateText);};ko.nativeTemplateEngine.instance=new ko.nativeTemplateEngine();ko.setTemplateEngine(ko.nativeTemplateEngine.instance);ko.exportSymbol('ko.nativeTemplateEngine',ko.nativeTemplateEngine);(function(){ko.jqueryTmplTemplateEngine=function(){var jQueryTmplVersion=this.jQueryTmplVersion=(function(){if((typeof(jQuery)=="undefined")||!(jQuery['tmpl']||jQuery['render']))
return 0;try{if(jQuery['render'])
return 3;if(jQuery['tmpl']['tag']['tmpl']['open'].toString().indexOf('__')>=0){return 2;}}catch(ex){}
return 1;})();function ensureHasReferencedJQueryTemplates(){if(jQueryTmplVersion<2)
throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");}
function executeTemplate(compiledTemplate,data,jQueryTemplateOptions){if(jQueryTmplVersion<3)
return jQuery['tmpl'](compiledTemplate,data,jQueryTemplateOptions);var renderedHtml=jQuery['render'](compiledTemplate,data,jQueryTemplateOptions);return jQuery(ko.utils.parseHtmlFragment(renderedHtml));}
this['renderTemplateSource']=function(templateSource,bindingContext,options){options=options||{};ensureHasReferencedJQueryTemplates();var precompiled=templateSource['data']('precompiled');if(!precompiled){var templateText=templateSource.text()||"";var contextContainer=jQueryTmplVersion==2?"$item":"$ctx";templateText="{{ko_with "+contextContainer+".koBindingContext}}"+templateText+"{{/ko_with}}";precompiled=jQuery['template'](null,templateText);templateSource['data']('precompiled',precompiled);}
var data=[bindingContext['$data']];var jQueryTemplateOptions=jQuery['extend']({'koBindingContext':bindingContext},options['templateOptions']);var resultNodes=executeTemplate(precompiled,data,jQueryTemplateOptions);resultNodes['appendTo'](document.createElement("div"));jQuery['fragments']={};return resultNodes;};this['createJavaScriptEvaluatorBlock']=function(script){return"{{ko_code ((function() { return "+script+" })()) }}";};this['addTemplate']=function(templateName,templateMarkup){document.write("<script type='text/html' id='"+templateName+"'>"+templateMarkup+"</script>");};if(jQueryTmplVersion>=2){var tagContainer=jQueryTmplVersion==2?"tmpl":"tmplSettings";jQuery[tagContainer]['tag']['ko_code']={open:"__.push($1 || '');"};jQuery[tagContainer]['tag']['ko_with']={open:"with($1) {",close:"} "};}};ko.jqueryTmplTemplateEngine.prototype=new ko.templateEngine();var jqueryTmplTemplateEngineInstance=new ko.jqueryTmplTemplateEngine();if(jqueryTmplTemplateEngineInstance.jQueryTmplVersion>0)
ko.setTemplateEngine(jqueryTmplTemplateEngineInstance);ko.exportSymbol('ko.jqueryTmplTemplateEngine',ko.jqueryTmplTemplateEngine);})();})(window);ko.exportSymbol=function(publicPath,object){var tokens=publicPath.split(".");var target=window;for(var i=0;i<tokens.length-1;i++)
target=target[tokens[i]];target[tokens[tokens.length-1]]=object;};ko.exportProperty=function(owner,publicName,object){owner[publicName]=object;};(function(){ko.mapping={};var mappingProperty="__ko_mapping__";var realKoDependentObservable=ko.dependentObservable;var mappingNesting=0;var dependentObservables;var visitedObjects;var _defaultOptions={include:["_destroy"],ignore:[],copy:[]};var defaultOptions=_defaultOptions;function extendObject(destination,source){for(var key in source){if(source.hasOwnProperty(key)&&source[key]){if(key&&destination[key]&&!(destination[key]instanceof Array)){extendObject(destination[key],source[key]);}else{destination[key]=source[key];}}}}
function merge(obj1,obj2){var merged={};extendObject(merged,obj1);extendObject(merged,obj2);return merged;}
ko.mapping.isMapped=function(viewModel){var unwrapped=ko.utils.unwrapObservable(viewModel);return unwrapped&&unwrapped[mappingProperty];}
ko.mapping.fromJS=function(jsObject){if(arguments.length==0)throw new Error("When calling ko.fromJS, pass the object you want to convert.");window.setTimeout(function(){mappingNesting=0;},0);if(!mappingNesting++){dependentObservables=[];visitedObjects=new objectLookup();}
var options;var target;if(arguments.length==2){if(arguments[1][mappingProperty]){target=arguments[1];}else{options=arguments[1];}}
if(arguments.length==3){options=arguments[1];target=arguments[2];}
if(target){options=merge(options,target[mappingProperty]);}
options=fillOptions(options);var result=updateViewModel(target,jsObject,options);if(target){result=target;}
if(!--mappingNesting){window.setTimeout(function(){ko.utils.arrayForEach(dependentObservables,function(DO){if(DO)DO();});},0);}
result[mappingProperty]=merge(result[mappingProperty],options);return result;};ko.mapping.fromJSON=function(jsonString){var parsed=ko.utils.parseJson(jsonString);arguments[0]=parsed;return ko.mapping.fromJS.apply(this,arguments);};ko.mapping.updateFromJS=function(viewModel){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};ko.mapping.updateFromJSON=function(viewModel){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");};ko.mapping.toJS=function(rootObject,options){if(!defaultOptions)ko.mapping.resetDefaultOptions();if(arguments.length==0)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if(!(defaultOptions.ignore instanceof Array))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if(!(defaultOptions.include instanceof Array))throw new Error("ko.mapping.defaultOptions().include should be an array.");if(!(defaultOptions.copy instanceof Array))throw new Error("ko.mapping.defaultOptions().copy should be an array.");options=fillOptions(options,rootObject[mappingProperty]);return ko.mapping.visitModel(rootObject,function(x){return ko.utils.unwrapObservable(x)},options);};ko.mapping.toJSON=function(rootObject,options){var plainJavaScriptObject=ko.mapping.toJS(rootObject,options);return ko.utils.stringifyJson(plainJavaScriptObject);};ko.mapping.defaultOptions=function(){if(arguments.length>0){defaultOptions=arguments[0];}else{return defaultOptions;}};ko.mapping.resetDefaultOptions=function(){defaultOptions={include:_defaultOptions.include.slice(0),ignore:_defaultOptions.ignore.slice(0),copy:_defaultOptions.copy.slice(0)};};function getType(x){if((x)&&(typeof(x)==="object")&&(x.constructor==(new Date).constructor))return"date";return typeof x;}
function fillOptions(options,otherOptions){options=options||{};if((options.create instanceof Function)||(options.update instanceof Function)||(options.key instanceof Function)||(options.arrayChanged instanceof Function)){options={"":options};}
if(otherOptions){options.ignore=mergeArrays(otherOptions.ignore,options.ignore);options.include=mergeArrays(otherOptions.include,options.include);options.copy=mergeArrays(otherOptions.copy,options.copy);}
options.ignore=mergeArrays(options.ignore,defaultOptions.ignore);options.include=mergeArrays(options.include,defaultOptions.include);options.copy=mergeArrays(options.copy,defaultOptions.copy);options.mappedProperties=options.mappedProperties||{};return options;}
function mergeArrays(a,b){if(!(a instanceof Array)){if(getType(a)==="undefined")a=[];else a=[a];}
if(!(b instanceof Array)){if(getType(b)==="undefined")b=[];else b=[b];}
return a.concat(b);}
function withProxyDependentObservable(dependentObservables,callback){var localDO=ko.dependentObservable;ko.dependentObservable=function(read,owner,options){options=options||{};var realDeferEvaluation=options.deferEvaluation;if(read&&typeof read=="object"){options=read;}
var isRemoved=false;var wrap=function(DO){var wrapped=realKoDependentObservable({read:function(){if(!isRemoved){ko.utils.arrayRemoveItem(dependentObservables,DO);isRemoved=true;}
return DO.apply(DO,arguments);},write:function(val){return DO(val);},deferEvaluation:true});wrapped.__ko_proto__=realKoDependentObservable;return wrapped;};options.deferEvaluation=true;var realDependentObservable=new realKoDependentObservable(read,owner,options);realDependentObservable.__ko_proto__=realKoDependentObservable;if(!realDeferEvaluation){dependentObservables.push(realDependentObservable);realDependentObservable=wrap(realDependentObservable);}
return realDependentObservable;}
var result=callback();ko.dependentObservable=localDO;return result;}
function updateViewModel(mappedRootObject,rootObject,options,parentName,parent,parentPropertyName){var isArray=ko.utils.unwrapObservable(rootObject)instanceof Array;parentPropertyName=parentPropertyName||"";if(ko.mapping.isMapped(mappedRootObject)){var previousMapping=ko.utils.unwrapObservable(mappedRootObject)[mappingProperty];options=merge(previousMapping,options);}
var callbackParams={data:rootObject,parent:parent};var hasCreateCallback=function(){return options[parentName]&&options[parentName].create instanceof Function;};var createCallback=function(data){return withProxyDependentObservable(dependentObservables,function(){return options[parentName].create({data:data||callbackParams.data,parent:callbackParams.parent});});};var hasUpdateCallback=function(){return options[parentName]&&options[parentName].update instanceof Function;};var updateCallback=function(obj,data){var params={data:data||callbackParams.data,parent:callbackParams.parent,target:ko.utils.unwrapObservable(obj)};if(ko.isWriteableObservable(obj)){params.observable=obj;}
return options[parentName].update(params);}
var alreadyMapped=visitedObjects.get(rootObject);if(alreadyMapped){return alreadyMapped;}
parentName=parentName||"";if(!isArray){if(!canHaveProperties(rootObject)){switch(getType(rootObject)){case"function":if(hasUpdateCallback()){if(ko.isWriteableObservable(rootObject)){rootObject(updateCallback(rootObject));mappedRootObject=rootObject;}else{mappedRootObject=updateCallback(rootObject);}}else{mappedRootObject=rootObject;}
break;default:if(ko.isWriteableObservable(mappedRootObject)){if(hasUpdateCallback()){mappedRootObject(updateCallback(mappedRootObject));}else{mappedRootObject(ko.utils.unwrapObservable(rootObject));}}else{if(hasCreateCallback()){mappedRootObject=createCallback();}else{mappedRootObject=ko.observable(ko.utils.unwrapObservable(rootObject));}
if(hasUpdateCallback()){mappedRootObject(updateCallback(mappedRootObject));}}
break;}}else{mappedRootObject=ko.utils.unwrapObservable(mappedRootObject);if(!mappedRootObject){if(hasCreateCallback()){var result=createCallback();if(hasUpdateCallback()){result=updateCallback(result);}
return result;}else{if(hasUpdateCallback()){return updateCallback(result);}
mappedRootObject={};}}
if(hasUpdateCallback()){mappedRootObject=updateCallback(mappedRootObject);}
visitedObjects.save(rootObject,mappedRootObject);visitPropertiesOrArrayEntries(rootObject,function(indexer){var fullPropertyName=parentPropertyName.length?parentPropertyName+"."+indexer:indexer;if(ko.utils.arrayIndexOf(options.ignore,fullPropertyName)!=-1){return;}
if(ko.utils.arrayIndexOf(options.copy,fullPropertyName)!=-1){mappedRootObject[indexer]=rootObject[indexer];return;}
var prevMappedProperty=visitedObjects.get(rootObject[indexer]);var value=prevMappedProperty||updateViewModel(mappedRootObject[indexer],rootObject[indexer],options,indexer,mappedRootObject,fullPropertyName);if(ko.isWriteableObservable(mappedRootObject[indexer])){mappedRootObject[indexer](ko.utils.unwrapObservable(value));}else{mappedRootObject[indexer]=value;}
options.mappedProperties[fullPropertyName]=true;});}}else{var changes=[];var hasKeyCallback=false;var keyCallback=function(x){return x;}
if(options[parentName]&&options[parentName].key){keyCallback=options[parentName].key;hasKeyCallback=true;}
if(!ko.isObservable(mappedRootObject)){mappedRootObject=ko.observableArray([]);mappedRootObject.mappedRemove=function(valueOrPredicate){var predicate=typeof valueOrPredicate=="function"?valueOrPredicate:function(value){return value===keyCallback(valueOrPredicate);};return mappedRootObject.remove(function(item){return predicate(keyCallback(item));});}
mappedRootObject.mappedRemoveAll=function(arrayOfValues){var arrayOfKeys=filterArrayByKey(arrayOfValues,keyCallback);return mappedRootObject.remove(function(item){return ko.utils.arrayIndexOf(arrayOfKeys,keyCallback(item))!=-1;});}
mappedRootObject.mappedDestroy=function(valueOrPredicate){var predicate=typeof valueOrPredicate=="function"?valueOrPredicate:function(value){return value===keyCallback(valueOrPredicate);};return mappedRootObject.destroy(function(item){return predicate(keyCallback(item));});}
mappedRootObject.mappedDestroyAll=function(arrayOfValues){var arrayOfKeys=filterArrayByKey(arrayOfValues,keyCallback);return mappedRootObject.destroy(function(item){return ko.utils.arrayIndexOf(arrayOfKeys,keyCallback(item))!=-1;});}
mappedRootObject.mappedIndexOf=function(item){var keys=filterArrayByKey(mappedRootObject(),keyCallback);var key=keyCallback(item);return ko.utils.arrayIndexOf(keys,key);}
mappedRootObject.mappedCreate=function(value){if(mappedRootObject.mappedIndexOf(value)!==-1){throw new Error("There already is an object with the key that you specified.");}
var item=hasCreateCallback()?createCallback(value):value;if(hasUpdateCallback()){var newValue=updateCallback(item,value);if(ko.isWriteableObservable(item)){item(newValue);}else{item=newValue;}}
mappedRootObject.push(item);return item;}}
var currentArrayKeys=filterArrayByKey(ko.utils.unwrapObservable(mappedRootObject),keyCallback).sort();var newArrayKeys=filterArrayByKey(rootObject,keyCallback);if(hasKeyCallback)newArrayKeys.sort();var editScript=ko.utils.compareArrays(currentArrayKeys,newArrayKeys);var ignoreIndexOf={};var newContents=[];for(var i=0,j=editScript.length;i<j;i++){var key=editScript[i];var mappedItem;var fullPropertyName=parentPropertyName+"["+i+"]";switch(key.status){case"added":var item=getItemByKey(ko.utils.unwrapObservable(rootObject),key.value,keyCallback);mappedItem=ko.utils.unwrapObservable(updateViewModel(undefined,item,options,parentName,mappedRootObject,fullPropertyName));var index=ignorableIndexOf(ko.utils.unwrapObservable(rootObject),item,ignoreIndexOf);newContents[index]=mappedItem;ignoreIndexOf[index]=true;break;case"retained":var item=getItemByKey(ko.utils.unwrapObservable(rootObject),key.value,keyCallback);mappedItem=getItemByKey(mappedRootObject,key.value,keyCallback);updateViewModel(mappedItem,item,options,parentName,mappedRootObject,fullPropertyName);var index=ignorableIndexOf(ko.utils.unwrapObservable(rootObject),item,ignoreIndexOf);newContents[index]=mappedItem;ignoreIndexOf[index]=true;break;case"deleted":mappedItem=getItemByKey(mappedRootObject,key.value,keyCallback);break;}
changes.push({event:key.status,item:mappedItem});}
mappedRootObject(newContents);if(options[parentName]&&options[parentName].arrayChanged){ko.utils.arrayForEach(changes,function(change){options[parentName].arrayChanged(change.event,change.item);});}}
return mappedRootObject;}
function ignorableIndexOf(array,item,ignoreIndices){for(var i=0,j=array.length;i<j;i++){if(ignoreIndices[i]===true)continue;if(array[i]===item)return i;}
return null;}
function mapKey(item,callback){var mappedItem;if(callback)mappedItem=callback(item);if(getType(mappedItem)==="undefined")mappedItem=item;return ko.utils.unwrapObservable(mappedItem);}
function getItemByKey(array,key,callback){var filtered=ko.utils.arrayFilter(ko.utils.unwrapObservable(array),function(item){return mapKey(item,callback)===key;});if(filtered.length==0)throw new Error("When calling ko.update*, the key '"+key+"' was not found!");if((filtered.length>1)&&(canHaveProperties(filtered[0])))throw new Error("When calling ko.update*, the key '"+key+"' was not unique!");return filtered[0];}
function filterArrayByKey(array,callback){return ko.utils.arrayMap(ko.utils.unwrapObservable(array),function(item){if(callback){return mapKey(item,callback);}else{return item;}});}
function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(rootObject instanceof Array){for(var i=0;i<rootObject.length;i++)
visitorCallback(i);}else{for(var propertyName in rootObject)
visitorCallback(propertyName);}};function canHaveProperties(object){var type=getType(object);return(type==="object")&&(object!==null)&&(type!=="undefined");}
function getPropertyName(parentName,parent,indexer){var propertyName=parentName||"";if(parent instanceof Array){if(parentName){propertyName+="["+indexer+"]";}}else{if(parentName){propertyName+=".";}
propertyName+=indexer;}
return propertyName;}
ko.mapping.visitModel=function(rootObject,callback,options){options=options||{};options.visitedObjects=options.visitedObjects||new objectLookup();if(!options.parentName){options=fillOptions(options);}
var mappedRootObject;var unwrappedRootObject=ko.utils.unwrapObservable(rootObject);if(!canHaveProperties(unwrappedRootObject)){return callback(rootObject,options.parentName);}else{callback(rootObject,options.parentName);mappedRootObject=unwrappedRootObject instanceof Array?[]:{};}
options.visitedObjects.save(rootObject,mappedRootObject);var parentName=options.parentName;visitPropertiesOrArrayEntries(unwrappedRootObject,function(indexer){if(options.ignore&&ko.utils.arrayIndexOf(options.ignore,indexer)!=-1)return;var propertyValue=unwrappedRootObject[indexer];options.parentName=getPropertyName(parentName,unwrappedRootObject,indexer);if(ko.utils.arrayIndexOf(options.copy,indexer)===-1){if(ko.utils.arrayIndexOf(options.include,indexer)===-1){if(unwrappedRootObject[mappingProperty]&&unwrappedRootObject[mappingProperty].mappedProperties&&!unwrappedRootObject[mappingProperty].mappedProperties[indexer]&&!(unwrappedRootObject instanceof Array)){return;}}}
var outputProperty;switch(getType(ko.utils.unwrapObservable(propertyValue))){case"object":case"undefined":var previouslyMappedValue=options.visitedObjects.get(propertyValue);mappedRootObject[indexer]=(getType(previouslyMappedValue)!=="undefined")?previouslyMappedValue:ko.mapping.visitModel(propertyValue,callback,options);break;default:mappedRootObject[indexer]=callback(propertyValue,options.parentName);}});return mappedRootObject;}
function objectLookup(){var keys=[];var values=[];this.save=function(key,value){var existingIndex=ko.utils.arrayIndexOf(keys,key);if(existingIndex>=0)values[existingIndex]=value;else{keys.push(key);values.push(value);}};this.get=function(key){var existingIndex=ko.utils.arrayIndexOf(keys,key);return(existingIndex>=0)?values[existingIndex]:undefined;};};ko.exportSymbol('ko.mapping',ko.mapping);ko.exportSymbol('ko.mapping.fromJS',ko.mapping.fromJS);ko.exportSymbol('ko.mapping.fromJSON',ko.mapping.fromJSON);ko.exportSymbol('ko.mapping.isMapped',ko.mapping.isMapped);ko.exportSymbol('ko.mapping.defaultOptions',ko.mapping.defaultOptions);ko.exportSymbol('ko.mapping.toJS',ko.mapping.toJS);ko.exportSymbol('ko.mapping.toJSON',ko.mapping.toJSON);ko.exportSymbol('ko.mapping.updateFromJS',ko.mapping.updateFromJS);ko.exportSymbol('ko.mapping.updateFromJSON',ko.mapping.updateFromJSON);ko.exportSymbol('ko.mapping.visitModel',ko.mapping.visitModel);})();;(function(f){f.fn.drag=function(b,a,d){var e=typeof b=="string"?b:"",k=f.isFunction(b)?b:f.isFunction(a)?a:null;if(e.indexOf("drag")!==0)e="drag"+e;d=(b==k?a:d)||{};return k?this.bind(e,d,k):this.trigger(e)};var i=f.event,h=i.special,c=h.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:false,drop:true,click:false},datakey:"dragdata",livekey:"livedrag",add:function(b){var a=f.data(this,c.datakey),d=b.data||{};a.related+=1;if(!a.live&&b.selector){a.live=true;i.add(this,"draginit."+c.livekey,c.delegate)}f.each(c.defaults,function(e){if(d[e]!==undefined)a[e]=d[e]})},remove:function(){f.data(this,c.datakey).related-=1},setup:function(){if(!f.data(this,c.datakey)){var b=f.extend({related:0},c.defaults);f.data(this,c.datakey,b);i.add(this,"mousedown",c.init,b);this.attachEvent&&this.attachEvent("ondragstart",c.dontstart)}},teardown:function(){if(!f.data(this,c.datakey).related){f.removeData(this,c.datakey);i.remove(this,"mousedown",c.init);i.remove(this,"draginit",c.delegate);c.textselect(true);this.detachEvent&&this.detachEvent("ondragstart",c.dontstart)}},init:function(b){var a=b.data,d;if(!(a.which>0&&b.which!=a.which))if(!f(b.target).is(a.not))if(!(a.handle&&!f(b.target).closest(a.handle,b.currentTarget).length)){a.propagates=1;a.interactions=[c.interaction(this,a)];a.target=b.target;a.pageX=b.pageX;a.pageY=b.pageY;a.dragging=null;d=c.hijack(b,"draginit",a);if(a.propagates){if((d=c.flatten(d))&&d.length){a.interactions=[];f.each(d,function(){a.interactions.push(c.interaction(this,a))})}a.propagates=a.interactions.length;a.drop!==false&&h.drop&&h.drop.handler(b,a);c.textselect(false);i.add(document,"mousemove mouseup",c.handler,a);return false}}},interaction:function(b,a){return{drag:b,callback:new c.callback,droppable:[],offset:f(b)[a.relative?"position":"offset"]()||{top:0,left:0}}},handler:function(b){var a=b.data;switch(b.type){case!a.dragging&&"mousemove":if(Math.pow(b.pageX-a.pageX,2)+Math.pow(b.pageY-a.pageY,2)<Math.pow(a.distance,2))break;b.target=a.target;c.hijack(b,"dragstart",a);if(a.propagates)a.dragging=true;case"mousemove":if(a.dragging){c.hijack(b,"drag",a);if(a.propagates){a.drop!==false&&h.drop&&h.drop.handler(b,a);break}b.type="mouseup"}case"mouseup":i.remove(document,"mousemove mouseup",c.handler);if(a.dragging){a.drop!==false&&h.drop&&h.drop.handler(b,a);c.hijack(b,"dragend",a)}c.textselect(true);if(a.click===false&&a.dragging){jQuery.event.triggered=true;setTimeout(function(){jQuery.event.triggered=false},20);a.dragging=false}break}},delegate:function(b){var a=[],d,e=f.data(this,"events")||{};f.each(e.live||[],function(k,j){if(j.preType.indexOf("drag")===0)if(d=f(b.target).closest(j.selector,b.currentTarget)[0]){i.add(d,j.origType+"."+c.livekey,j.origHandler,j.data);f.inArray(d,a)<0&&a.push(d)}});if(!a.length)return false;return f(a).bind("dragend."+c.livekey,function(){i.remove(this,"."+c.livekey)})},hijack:function(b,a,d,e,k){if(d){var j={event:b.originalEvent,type:b.type},n=a.indexOf("drop")?"drag":"drop",l,o=e||0,g,m;e=!isNaN(e)?e:d.interactions.length;b.type=a;b.originalEvent=null;d.results=[];do if(g=d.interactions[o])if(!(a!=="dragend"&&g.cancelled)){m=c.properties(b,d,g);g.results=[];f(k||g[n]||d.droppable).each(function(q,p){l=(m.target=p)?i.handle.call(p,b,m):null;if(l===false){if(n=="drag"){g.cancelled=true;d.propagates-=1}if(a=="drop")g[n][q]=null}else if(a=="dropinit")g.droppable.push(c.element(l)||p);if(a=="dragstart")g.proxy=f(c.element(l)||g.drag)[0];g.results.push(l);delete b.result;if(a!=="dropinit")return l});d.results[o]=c.flatten(g.results);if(a=="dropinit")g.droppable=c.flatten(g.droppable);a=="dragstart"&&!g.cancelled&&m.update()}while(++o<e);b.type=j.type;b.originalEvent=j.event;return c.flatten(d.results)}},properties:function(b,a,d){var e=d.callback;e.drag=d.drag;e.proxy=d.proxy||d.drag;e.startX=a.pageX;e.startY=a.pageY;e.deltaX=b.pageX-a.pageX;e.deltaY=b.pageY-a.pageY;e.originalX=d.offset.left;e.originalY=d.offset.top;e.offsetX=b.pageX-(a.pageX-e.originalX);e.offsetY=b.pageY-(a.pageY-e.originalY);e.drop=c.flatten((d.drop||[]).slice());e.available=c.flatten((d.droppable||[]).slice());return e},element:function(b){if(b&&(b.jquery||b.nodeType==1))return b},flatten:function(b){return f.map(b,function(a){return a&&a.jquery?f.makeArray(a):a&&a.length?c.flatten(a):a})},textselect:function(b){f(document)[b?"unbind":"bind"]("selectstart",c.dontstart).attr("unselectable",b?"off":"on").css("MozUserSelect",b?"":"none")},dontstart:function(){return false},callback:function(){}};c.callback.prototype={update:function(){h.drop&&this.available.length&&f.each(this.available,function(b){h.drop.locate(this,b)})}};h.draginit=h.dragstart=h.dragend=c})(jQuery);(function(){var doc=document,win=window,math=Math,mathRound=math.round,mathFloor=math.floor,mathCeil=math.ceil,mathMax=math.max,mathMin=math.min,mathAbs=math.abs,mathCos=math.cos,mathSin=math.sin,mathPI=math.PI,deg2rad=mathPI*2/360,userAgent=navigator.userAgent,isIE=/msie/i.test(userAgent)&&!win.opera,docMode8=doc.documentMode==8,isWebKit=/AppleWebKit/.test(userAgent),isFirefox=/Firefox/.test(userAgent),hasSVG=!!doc.createElementNS&&!!doc.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,SVG_NS='http://www.w3.org/2000/svg',hasTouch='ontouchstart'in doc.documentElement,colorCounter,symbolCounter,symbolSizes={},idCounter=0,timeFactor=1,garbageBin,defaultOptions,dateFormat,globalAnimation,pathAnim,UNDEFINED,DIV='div',ABSOLUTE='absolute',RELATIVE='relative',HIDDEN='hidden',PREFIX='highcharts-',VISIBLE='visible',PX='px',NONE='none',M='M',L='L',TRACKER_FILL='rgba(192,192,192,'+(hasSVG?0.000001:0.002)+')',NORMAL_STATE='',HOVER_STATE='hover',SELECT_STATE='select',makeTime,getMinutes,getHours,getDay,getDate,getMonth,getFullYear,setMinutes,setHours,setDate,setMonth,setFullYear,globalAdapter=win.HighchartsAdapter,adapter=globalAdapter||{},each=adapter.each,grep=adapter.grep,map=adapter.map,merge=adapter.merge,hyphenate=adapter.hyphenate,addEvent=adapter.addEvent,removeEvent=adapter.removeEvent,fireEvent=adapter.fireEvent,animate=adapter.animate,stop=adapter.stop,seriesTypes={},hoverChart;function extend(a,b){if(!a){a={};}
for(var n in b){a[n]=b[n];}
return a;}
function pInt(s,mag){return parseInt(s,mag||10);}
function isString(s){return typeof s=='string';}
function isObject(obj){return typeof obj=='object';}
function isNumber(n){return typeof n=='number';}
function erase(arr,item){var i=arr.length;while(i--){if(arr[i]==item){arr.splice(i,1);break;}}}
function defined(obj){return obj!==UNDEFINED&&obj!==null;}
function attr(elem,prop,value){var key,setAttribute='setAttribute',ret;if(isString(prop)){if(defined(value)){elem[setAttribute](prop,value);}else if(elem&&elem.getAttribute){ret=elem.getAttribute(prop);}}else if(defined(prop)&&isObject(prop)){for(key in prop){elem[setAttribute](key,prop[key]);}}
return ret;}
function splat(obj){if(!obj||obj.constructor!=Array){obj=[obj];}
return obj;}
function pick(){var args=arguments,i,arg,length=args.length;for(i=0;i<length;i++){arg=args[i];if(typeof arg!=='undefined'&&arg!==null){return arg;}}}
function serializeCSS(style){var s='',key;for(key in style){s+=hyphenate(key)+':'+style[key]+';';}
return s;}
function css(el,styles){if(isIE){if(styles&&styles.opacity!==UNDEFINED){styles.filter='alpha(opacity='+(styles.opacity*100)+')';}}
extend(el.style,styles);}
function createElement(tag,attribs,styles,parent,nopad){var el=doc.createElement(tag);if(attribs){extend(el,attribs);}
if(nopad){css(el,{padding:0,border:NONE,margin:0});}
if(styles){css(el,styles);}
if(parent){parent.appendChild(el);}
return el;}
function setAnimation(animation,chart){globalAnimation=pick(animation,chart.animation);}
if(globalAdapter&&globalAdapter.init){globalAdapter.init();}
if(!globalAdapter&&win.jQuery){var jQ=jQuery;each=function(arr,fn){for(var i=0,len=arr.length;i<len;i++){if(fn.call(arr[i],arr[i],i,arr)===false){return i;}}};grep=jQ.grep;map=function(arr,fn){var results=[];for(var i=0,len=arr.length;i<len;i++){results[i]=fn.call(arr[i],arr[i],i,arr);}
return results;};merge=function(){var args=arguments;return jQ.extend(true,null,args[0],args[1],args[2],args[3]);};hyphenate=function(str){return str.replace(/([A-Z])/g,function(a,b){return'-'+b.toLowerCase();});};addEvent=function(el,event,fn){jQ(el).bind(event,fn);};removeEvent=function(el,eventType,handler){var func=doc.removeEventListener?'removeEventListener':'detachEvent';if(doc[func]&&!el[func]){el[func]=function(){};}
jQ(el).unbind(eventType,handler);};fireEvent=function(el,type,eventArguments,defaultFunction){var event=jQ.Event(type),detachedType='detached'+type;extend(event,eventArguments);if(el[type]){el[detachedType]=el[type];el[type]=null;}
jQ(el).trigger(event);if(el[detachedType]){el[type]=el[detachedType];el[detachedType]=null;}
if(defaultFunction&&!event.isDefaultPrevented()){defaultFunction(event);}};animate=function(el,params,options){var $el=jQ(el);if(params.d){el.toD=params.d;params.d=1;}
$el.stop();$el.animate(params,options);};stop=function(el){jQ(el).stop();};jQ.extend(jQ.easing,{easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b;}});var oldStepDefault=jQuery.fx.step._default,oldCur=jQuery.fx.prototype.cur;jQ.fx.step._default=function(fx){var elem=fx.elem;if(elem.attr){elem.attr(fx.prop,fx.now);}else{oldStepDefault.apply(this,arguments);}};jQ.fx.step.d=function(fx){var elem=fx.elem;if(!fx.started){var ends=pathAnim.init(elem,elem.d,elem.toD);fx.start=ends[0];fx.end=ends[1];fx.started=true;}
elem.attr('d',pathAnim.step(fx.start,fx.end,fx.pos,elem.toD));};jQ.fx.prototype.cur=function(){var elem=this.elem,r;if(elem.attr){r=elem.attr(this.prop);}else{r=oldCur.apply(this,arguments);}
return r;};}
pathAnim={init:function(elem,fromD,toD){fromD=fromD||'';var shift=elem.shift,bezier=fromD.indexOf('C')>-1,numParams=bezier?7:3,endLength,slice,i,start=fromD.split(' '),end=[].concat(toD),startBaseLine,endBaseLine,sixify=function(arr){i=arr.length;while(i--){if(arr[i]==M){arr.splice(i+1,0,arr[i+1],arr[i+2],arr[i+1],arr[i+2]);}}};if(bezier){sixify(start);sixify(end);}
if(elem.isArea){startBaseLine=start.splice(start.length-6,6);endBaseLine=end.splice(end.length-6,6);}
if(shift){end=[].concat(end).splice(0,numParams).concat(end);elem.shift=false;}
if(start.length){endLength=end.length;while(start.length<endLength){slice=[].concat(start).splice(start.length-numParams,numParams);if(bezier){slice[numParams-6]=slice[numParams-2];slice[numParams-5]=slice[numParams-1];}
start=start.concat(slice);}}
if(startBaseLine){start=start.concat(startBaseLine);end=end.concat(endBaseLine);}
return[start,end];},step:function(start,end,pos,complete){var ret=[],i=start.length,startVal;if(pos==1){ret=complete;}else if(i==end.length&&pos<1){while(i--){startVal=parseFloat(start[i]);ret[i]=isNaN(startVal)?start[i]:pos*(parseFloat(end[i]-startVal))+startVal;}}else{ret=end;}
return ret;}};function setTimeMethods(){var useUTC=defaultOptions.global.useUTC;makeTime=useUTC?Date.UTC:function(year,month,date,hours,minutes,seconds){return new Date(year,month,pick(date,1),pick(hours,0),pick(minutes,0),pick(seconds,0)).getTime();};getMinutes=useUTC?'getUTCMinutes':'getMinutes';getHours=useUTC?'getUTCHours':'getHours';getDay=useUTC?'getUTCDay':'getDay';getDate=useUTC?'getUTCDate':'getDate';getMonth=useUTC?'getUTCMonth':'getMonth';getFullYear=useUTC?'getUTCFullYear':'getFullYear';setMinutes=useUTC?'setUTCMinutes':'setMinutes';setHours=useUTC?'setUTCHours':'setHours';setDate=useUTC?'setUTCDate':'setDate';setMonth=useUTC?'setUTCMonth':'setMonth';setFullYear=useUTC?'setUTCFullYear':'setFullYear';}
function setOptions(options){defaultOptions=merge(defaultOptions,options);setTimeMethods();return defaultOptions;}
function getOptions(){return defaultOptions;}
function discardElement(element){if(!garbageBin){garbageBin=createElement(DIV);}
if(element){garbageBin.appendChild(element);}
garbageBin.innerHTML='';}
var
defaultLabelOptions={enabled:true,align:'center',x:0,y:15,style:{color:'#666',fontSize:'11px',lineHeight:'14px'}};defaultOptions={colors:['#4572A7','#AA4643','#89A54E','#80699B','#3D96AE','#DB843D','#92A8CD','#A47D7C','#B5CA92'],symbols:['circle','diamond','square','triangle','triangle-down'],lang:{loading:'Loading...',months:['January','February','March','April','May','June','July','August','September','October','November','December'],weekdays:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],decimalPoint:'.',resetZoom:'Reset zoom',resetZoomTitle:'Reset zoom level 1:1',thousandsSep:','},global:{useUTC:true},chart:{borderColor:'#4572A7',borderRadius:5,defaultSeriesType:'line',ignoreHiddenSeries:true,spacingTop:10,spacingRight:10,spacingBottom:15,spacingLeft:10,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:'12px'},backgroundColor:'#FFFFFF',plotBorderColor:'#C0C0C0'},title:{text:'Chart title',align:'center',y:15,style:{color:'#3E576F',fontSize:'16px'}},subtitle:{text:'',align:'center',y:30,style:{color:'#6D869F'}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:{duration:1000},events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:'#FFFFFF',states:{hover:{},select:{fillColor:'#FFFFFF',lineColor:'#000000',lineWidth:2}}},point:{events:{}},dataLabels:merge(defaultLabelOptions,{enabled:false,y:-6,formatter:function(){return this.y;}}),showInLegend:true,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:ABSOLUTE,color:'#3E576F'}},legend:{enabled:true,align:'center',layout:'horizontal',labelFormatter:function(){return this.name;},borderWidth:1,borderColor:'#909090',borderRadius:5,shadow:false,style:{padding:'5px'},itemStyle:{cursor:'pointer',color:'#3E576F'},itemHoverStyle:{cursor:'pointer',color:'#000000'},itemHiddenStyle:{color:'#C0C0C0'},itemCheckboxStyle:{position:ABSOLUTE,width:'13px',height:'13px'},symbolWidth:16,symbolPadding:5,verticalAlign:'bottom',x:0,y:0},loading:{hideDuration:100,labelStyle:{fontWeight:'bold',position:RELATIVE,top:'1em'},showDuration:100,style:{position:ABSOLUTE,backgroundColor:'white',opacity:0.5,textAlign:'center'}},tooltip:{enabled:true,backgroundColor:'rgba(255, 255, 255, .85)',borderWidth:2,borderRadius:5,shadow:true,snap:hasTouch?25:10,style:{color:'#333333',fontSize:'12px',padding:'5px',whiteSpace:'nowrap'}},toolbar:{itemStyle:{color:'#4572A7',cursor:'pointer'}},credits:{enabled:true,text:'Highcharts.com',href:'http://www.highcharts.com',position:{align:'right',x:-10,verticalAlign:'bottom',y:-5},style:{cursor:'pointer',color:'#909090',fontSize:'10px'}}};var defaultXAxisOptions={dateTimeLabelFormats:{second:'%H:%M:%S',minute:'%H:%M',hour:'%H:%M',day:'%e. %b',week:'%e. %b',month:'%b \'%y',year:'%Y'},endOnTick:false,gridLineColor:'#C0C0C0',labels:defaultLabelOptions,lineColor:'#C0D0E0',lineWidth:1,max:null,min:null,minPadding:0.01,maxPadding:0.01,minorGridLineColor:'#E0E0E0',minorGridLineWidth:1,minorTickColor:'#A0A0A0',minorTickLength:2,minorTickPosition:'outside',startOfWeek:1,startOnTick:false,tickColor:'#C0D0E0',tickLength:5,tickmarkPlacement:'between',tickPixelInterval:100,tickPosition:'outside',tickWidth:1,title:{align:'middle',style:{color:'#6D869F',fontWeight:'bold'}},type:'linear'},defaultYAxisOptions=merge(defaultXAxisOptions,{endOnTick:true,gridLineWidth:1,tickPixelInterval:72,showLastLabel:true,labels:{align:'right',x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{rotation:270,text:'Y-values'}}),defaultLeftAxisOptions={labels:{align:'right',x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions={labels:{align:'left',x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions={labels:{align:'center',x:0,y:14},title:{rotation:0}},defaultTopAxisOptions=merge(defaultBottomAxisOptions,{labels:{y:-5}});var defaultPlotOptions=defaultOptions.plotOptions,defaultSeriesOptions=defaultPlotOptions.line;defaultPlotOptions.spline=merge(defaultSeriesOptions);defaultPlotOptions.scatter=merge(defaultSeriesOptions,{lineWidth:0,states:{hover:{lineWidth:0}}});defaultPlotOptions.area=merge(defaultSeriesOptions,{});defaultPlotOptions.areaspline=merge(defaultPlotOptions.area);defaultPlotOptions.column=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,states:{hover:{brightness:0.1,shadow:false},select:{color:'#C0C0C0',borderColor:'#000000',shadow:false}}});defaultPlotOptions.bar=merge(defaultPlotOptions.column,{dataLabels:{align:'left',x:5,y:0}});defaultPlotOptions.pie=merge(defaultSeriesOptions,{borderColor:'#FFFFFF',borderWidth:1,center:['50%','50%'],colorByPoint:true,dataLabels:{distance:30,enabled:true,formatter:function(){return this.point.name;},y:5},legendType:'point',marker:null,size:'75%',showInLegend:false,slicedOffset:10,states:{hover:{brightness:0.1,shadow:false}}});setTimeMethods();function extendClass(parent,members){var object=function(){};object.prototype=new parent();extend(object.prototype,members);return object;}
var Color=function(input){var rgba=[],result;function init(input){if((result=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(input))){rgba=[pInt(result[1]),pInt(result[2]),pInt(result[3]),parseFloat(result[4],10)];}
else if((result=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(input))){rgba=[pInt(result[1],16),pInt(result[2],16),pInt(result[3],16),1];}}
function get(format){var ret;if(rgba&&!isNaN(rgba[0])){if(format=='rgb'){ret='rgb('+rgba[0]+','+rgba[1]+','+rgba[2]+')';}else if(format=='a'){ret=rgba[3];}else{ret='rgba('+rgba.join(',')+')';}}else{ret=input;}
return ret;}
function brighten(alpha){if(isNumber(alpha)&&alpha!==0){var i;for(i=0;i<3;i++){rgba[i]+=pInt(alpha*255);if(rgba[i]<0){rgba[i]=0;}
if(rgba[i]>255){rgba[i]=255;}}}
return this;}
function setOpacity(alpha){rgba[3]=alpha;return this;}
init(input);return{get:get,brighten:brighten,setOpacity:setOpacity};};function numberFormat(number,decimals,decPoint,thousandsSep){var lang=defaultOptions.lang,n=number,c=isNaN(decimals=mathAbs(decimals))?2:decimals,d=decPoint===undefined?lang.decimalPoint:decPoint,t=thousandsSep===undefined?lang.thousandsSep:thousandsSep,s=n<0?"-":"",i=pInt(n=mathAbs(+n||0).toFixed(c))+"",j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+
(c?d+mathAbs(n-i).toFixed(c).slice(2):"");}
dateFormat=function(format,timestamp,capitalize){function pad(number){return number.toString().replace(/^([0-9])$/,'0$1');}
if(!defined(timestamp)||isNaN(timestamp)){return'Invalid date';}
format=pick(format,'%Y-%m-%d %H:%M:%S');var date=new Date(timestamp*timeFactor),hours=date[getHours](),day=date[getDay](),dayOfMonth=date[getDate](),month=date[getMonth](),fullYear=date[getFullYear](),lang=defaultOptions.lang,langWeekdays=lang.weekdays,langMonths=lang.months,replacements={'a':langWeekdays[day].substr(0,3),'A':langWeekdays[day],'d':pad(dayOfMonth),'e':dayOfMonth,'b':langMonths[month].substr(0,3),'B':langMonths[month],'m':pad(month+1),'y':fullYear.toString().substr(2,2),'Y':fullYear,'H':pad(hours),'I':pad((hours%12)||12),'l':(hours%12)||12,'M':pad(date[getMinutes]()),'p':hours<12?'AM':'PM','P':hours<12?'am':'pm','S':pad(date.getSeconds())};for(var key in replacements){format=format.replace('%'+key,replacements[key]);}
return capitalize?format.substr(0,1).toUpperCase()+format.substr(1):format;};function getPosition(el){var p={left:el.offsetLeft,top:el.offsetTop};while((el=el.offsetParent)){p.left+=el.offsetLeft;p.top+=el.offsetTop;if(el!=doc.body&&el!=doc.documentElement){p.left-=el.scrollLeft;p.top-=el.scrollTop;}}
return p;}
function SVGElement(){}
SVGElement.prototype={init:function(renderer,nodeName){this.element=doc.createElementNS(SVG_NS,nodeName);this.renderer=renderer;},animate:function(params,options,complete){var animOptions=pick(options,globalAnimation,true);if(animOptions){animOptions=merge(animOptions);if(complete){animOptions.complete=complete;}
animate(this,params,animOptions);}else{this.attr(params);if(complete){complete();}}},attr:function(hash,val){var key,value,i,child,element=this.element,nodeName=element.nodeName,renderer=this.renderer,skipAttr,shadows=this.shadows,hasSetSymbolSize,ret=this;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val;}
if(isString(hash)){key=hash;if(nodeName=='circle'){key={x:'cx',y:'cy'}[key]||key;}else if(key=='strokeWidth'){key='stroke-width';}
ret=attr(element,key)||this[key]||0;if(key!='d'&&key!='visibility'){ret=parseFloat(ret);}}else{for(key in hash){skipAttr=false;value=hash[key];if(key=='d'){if(value&&value.join){value=value.join(' ');}
if(/(NaN| {2}|^$)/.test(value)){value='M 0 0';}
this.d=value;}else if(key=='x'&&nodeName=='text'){for(i=0;i<element.childNodes.length;i++){child=element.childNodes[i];if(attr(child,'x')==attr(element,'x')){attr(child,'x',value);}}
if(this.rotation){attr(element,'transform','rotate('+this.rotation+' '+value+' '+
pInt(hash.y||attr(element,'y'))+')');}}else if(key=='fill'){value=renderer.color(value,element,key);}else if(nodeName=='circle'&&(key=='x'||key=='y')){key={x:'cx',y:'cy'}[key]||key;}else if(key=='translateX'||key=='translateY'||key=='rotation'||key=='verticalAlign'){this[key]=value;this.updateTransform();skipAttr=true;}else if(key=='stroke'){value=renderer.color(value,element,key);}else if(key=='dashstyle'){key='stroke-dasharray';if(value){value=value.toLowerCase().replace('shortdashdotdot','3,1,1,1,1,1,').replace('shortdashdot','3,1,1,1').replace('shortdot','1,1,').replace('shortdash','3,1,').replace('longdash','8,3,').replace(/dot/g,'1,3,').replace('dash','4,3,').replace(/,$/,'').split(',');i=value.length;while(i--){value[i]=pInt(value[i])*hash['stroke-width'];}
value=value.join(',');}}else if(key=='isTracker'){this[key]=value;}else if(key=='width'){value=pInt(value);}else if(key=='align'){key='text-anchor';value={left:'start',center:'middle',right:'end'}[value];}
if(key=='strokeWidth'){key='stroke-width';}
if(isWebKit&&key=='stroke-width'&&value===0){value=0.000001;}
if(this.symbolName&&/^(x|y|r|start|end|innerR)/.test(key)){if(!hasSetSymbolSize){this.symbolAttr(hash);hasSetSymbolSize=true;}
skipAttr=true;}
if(shadows&&/^(width|height|visibility|x|y|d)$/.test(key)){i=shadows.length;while(i--){attr(shadows[i],key,value);}}
if(key=='text'){this.textStr=value;if(this.added){renderer.buildText(this);}}else if(!skipAttr){attr(element,key,value);}}}
return ret;},symbolAttr:function(hash){var wrapper=this;each(['x','y','r','start','end','width','height','innerR'],function(key){wrapper[key]=pick(hash[key],wrapper[key]);});wrapper.attr({d:wrapper.renderer.symbols[wrapper.symbolName](wrapper.x,wrapper.y,wrapper.r,{start:wrapper.start,end:wrapper.end,width:wrapper.width,height:wrapper.height,innerR:wrapper.innerR})});},clip:function(clipRect){return this.attr('clip-path','url('+this.renderer.url+'#'+clipRect.id+')');},crisp:function(strokeWidth,x,y,width,height){var wrapper=this,key,attr={},values={},normalizer;strokeWidth=strokeWidth||wrapper.strokeWidth||0;normalizer=strokeWidth%2/2;values.x=mathFloor(x||wrapper.x||0)+normalizer;values.y=mathFloor(y||wrapper.y||0)+normalizer;values.width=mathFloor((width||wrapper.width||0)-2*normalizer);values.height=mathFloor((height||wrapper.height||0)-2*normalizer);values.strokeWidth=strokeWidth;for(key in values){if(wrapper[key]!=values[key]){wrapper[key]=attr[key]=values[key];}}
return attr;},css:function(styles){var elemWrapper=this,elem=elemWrapper.element,textWidth=styles&&styles.width&&elem.nodeName=='text';if(styles&&styles.color){styles.fill=styles.color;}
styles=extend(elemWrapper.styles,styles);elemWrapper.styles=styles;if(isIE&&!hasSVG){if(textWidth){delete styles.width;}
css(elemWrapper.element,styles);}else{elemWrapper.attr({style:serializeCSS(styles)});}
if(textWidth&&elemWrapper.added){elemWrapper.renderer.buildText(elemWrapper);}
return elemWrapper;},on:function(eventType,handler){var fn=handler;if(hasTouch&&eventType=='click'){eventType='touchstart';fn=function(e){e.preventDefault();handler();}}
this.element['on'+eventType]=fn;return this;},translate:function(x,y){return this.attr({translateX:x,translateY:y});},invert:function(){var wrapper=this;wrapper.inverted=true;wrapper.updateTransform();return wrapper;},updateTransform:function(){var wrapper=this,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,inverted=wrapper.inverted,rotation=wrapper.rotation,transform=[];if(inverted){translateX+=wrapper.attr('width');translateY+=wrapper.attr('height');}
if(translateX||translateY){transform.push('translate('+translateX+','+translateY+')');}
if(inverted){transform.push('rotate(90) scale(-1,1)');}else if(rotation){transform.push('rotate('+rotation+' '+wrapper.x+' '+wrapper.y+')');}
if(transform.length){attr(wrapper.element,'transform',transform.join(' '));}},toFront:function(){var element=this.element;element.parentNode.appendChild(element);return this;},align:function(alignOptions,alignByTranslate,box){if(!alignOptions){alignOptions=this.alignOptions;alignByTranslate=this.alignByTranslate;}else{this.alignOptions=alignOptions;this.alignByTranslate=alignByTranslate;if(!box){this.renderer.alignedObjects.push(this);}}
box=pick(box,this.renderer);var align=alignOptions.align,vAlign=alignOptions.verticalAlign,x=(box.x||0)+(alignOptions.x||0),y=(box.y||0)+(alignOptions.y||0),attribs={};if(/^(right|center)$/.test(align)){x+=(box.width-(alignOptions.width||0))/{right:1,center:2}[align];}
attribs[alignByTranslate?'translateX':'x']=mathRound(x);if(/^(bottom|middle)$/.test(vAlign)){y+=(box.height-(alignOptions.height||0))/({bottom:1,middle:2}[vAlign]||1);}
attribs[alignByTranslate?'translateY':'y']=mathRound(y);this[this.placed?'animate':'attr'](attribs);this.placed=true;return this;},getBBox:function(){var bBox,width,height,rotation=this.rotation,rad=rotation*deg2rad;try{bBox=extend({},this.element.getBBox());}catch(e){bBox={width:0,height:0};}
width=bBox.width;height=bBox.height;if(rotation){bBox.width=mathAbs(height*mathSin(rad))+mathAbs(width*mathCos(rad));bBox.height=mathAbs(height*mathCos(rad))+mathAbs(width*mathSin(rad));}
return bBox;},show:function(){return this.attr({visibility:VISIBLE});},hide:function(){return this.attr({visibility:HIDDEN});},add:function(parent){var renderer=this.renderer,parentWrapper=parent||renderer,parentNode=parentWrapper.element||renderer.box,childNodes=parentNode.childNodes,element=this.element,zIndex=attr(element,'zIndex'),otherElement,otherZIndex,i;this.parentInverted=parent&&parent.inverted;if(this.textStr!==undefined){renderer.buildText(this);}
if(zIndex){parentWrapper.handleZ=true;zIndex=pInt(zIndex);}
if(parentWrapper.handleZ){for(i=0;i<childNodes.length;i++){otherElement=childNodes[i];otherZIndex=attr(otherElement,'zIndex');if(otherElement!=element&&(pInt(otherZIndex)>zIndex||(!defined(zIndex)&&defined(otherZIndex)))){parentNode.insertBefore(element,otherElement);return this;}}}
parentNode.appendChild(element);this.added=true;return this;},destroy:function(){var wrapper=this,element=wrapper.element||{},shadows=wrapper.shadows,parentNode=element.parentNode,key;element.onclick=element.onmouseout=element.onmouseover=element.onmousemove=null;stop(wrapper);if(parentNode){parentNode.removeChild(element);}
if(shadows){each(shadows,function(shadow){parentNode=shadow.parentNode;if(parentNode){parentNode.removeChild(shadow);}});}
erase(wrapper.renderer.alignedObjects,wrapper);for(key in wrapper){delete wrapper[key];}
return null;},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length;while(i--){element.removeChild(childNodes[i]);}},shadow:function(apply){var shadows=[],i,shadow,element=this.element,transform=this.parentInverted?'(-1,-1)':'(1,1)';if(apply){for(i=1;i<=3;i++){shadow=element.cloneNode(0);attr(shadow,{'isShadow':'true','stroke':'rgb(0, 0, 0)','stroke-opacity':0.05*i,'stroke-width':7-2*i,'transform':'translate'+transform,'fill':NONE});element.parentNode.insertBefore(shadow,element);shadows.push(shadow);}
this.shadows=shadows;}
return this;}};var SVGRenderer=function(){this.init.apply(this,arguments);};SVGRenderer.prototype={init:function(container,width,height,forExport){var renderer=this,loc=location,boxWrapper;renderer.Element=SVGElement;boxWrapper=renderer.createElement('svg').attr({xmlns:SVG_NS,version:'1.1'});container.appendChild(boxWrapper.element);renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.alignedObjects=[];renderer.url=isIE?'':loc.href.replace(/#.*?$/,'');renderer.defs=this.createElement('defs').add();renderer.forExport=forExport;renderer.setSize(width,height,false);},createElement:function(nodeName){var wrapper=new this.Element();wrapper.init(this,nodeName);return wrapper;},buildText:function(wrapper){var textNode=wrapper.element,lines=pick(wrapper.textStr,'').toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,'<span').replace(/<\/(b|strong|i|em|a)>/g,'</span>').split(/<br[^>]?>/g),childNodes=textNode.childNodes,styleRegex=/style="([^"]+)"/,hrefRegex=/href="([^"]+)"/,parentX=attr(textNode,'x'),textStyles=wrapper.styles,reverse=isFirefox&&textStyles&&textStyles.HcDirection=='rtl'&&!this.forExport,arr,width=textStyles&&pInt(textStyles.width),textLineHeight=textStyles&&textStyles.lineHeight,lastLine,i=childNodes.length;while(i--){textNode.removeChild(childNodes[i]);}
if(width&&!wrapper.added){this.box.appendChild(textNode);}
each(lines,function(line,lineNo){var spans,spanNo=0,lineHeight;line=line.replace(/<span/g,'|||<span').replace(/<\/span>/g,'</span>|||');spans=line.split('|||');each(spans,function(span){if(span!==''||spans.length==1){var attributes={},tspan=doc.createElementNS(SVG_NS,'tspan');if(styleRegex.test(span)){attr(tspan,'style',span.match(styleRegex)[1].replace(/(;| |^)color([ :])/,'$1fill$2'));}
if(hrefRegex.test(span)){attr(tspan,'onclick','location.href=\"'+span.match(hrefRegex)[1]+'\"');css(tspan,{cursor:'pointer'});}
span=span.replace(/<(.|\n)*?>/g,'')||' ';if(reverse){arr=[];i=span.length;while(i--){arr.push(span.charAt(i))}
span=arr.join('');}
tspan.appendChild(doc.createTextNode(span));if(!spanNo){attributes.x=parentX;}else{attributes.dx=3;}
if(!spanNo){if(lineNo){lineHeight=pInt(window.getComputedStyle(lastLine,null).getPropertyValue('line-height'));if(isNaN(lineHeight)){lineHeight=textLineHeight||lastLine.offsetHeight||18;}
attr(tspan,'dy',lineHeight);}
lastLine=tspan;}
attr(tspan,attributes);textNode.appendChild(tspan);spanNo++;if(width){var words=span.replace(/-/g,'- ').split(' '),tooLong,actualWidth,rest=[];while(words.length||rest.length){actualWidth=textNode.getBBox().width;tooLong=actualWidth>width;if(!tooLong||words.length==1){words=rest;rest=[];if(words.length){tspan=doc.createElementNS(SVG_NS,'tspan');attr(tspan,{x:parentX,dy:textLineHeight||16});textNode.appendChild(tspan);if(actualWidth>width){width=actualWidth;}}}else{tspan.removeChild(tspan.firstChild);rest.unshift(words.pop());}
tspan.appendChild(doc.createTextNode(words.join(' ').replace(/- /g,'-')));}}}});});},crispLine:function(points,width){if(points[1]==points[4]){points[1]=points[4]=mathRound(points[1])+(width%2/2);}
if(points[2]==points[5]){points[2]=points[5]=mathRound(points[2])+(width%2/2);}
return points;},path:function(path){return this.createElement('path').attr({d:path,fill:NONE});},circle:function(x,y,r){var attr=isObject(x)?x:{x:x,y:y,r:r};return this.createElement('circle').attr(attr);},arc:function(x,y,r,innerR,start,end){if(isObject(x)){y=x.y;r=x.r;innerR=x.innerR;start=x.start;end=x.end;x=x.x;}
return this.symbol('arc',x||0,y||0,r||0,{innerR:innerR||0,start:start||0,end:end||0});},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;r=x.r;x=x.x;}
var wrapper=this.createElement('rect').attr({rx:r,ry:r,fill:NONE});return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)));},setSize:function(width,height,animate){var renderer=this,alignedObjects=renderer.alignedObjects,i=alignedObjects.length;renderer.width=width;renderer.height=height;renderer.boxWrapper[pick(animate,true)?'animate':'attr']({width:width,height:height});while(i--){alignedObjects[i].align();}},g:function(name){return this.createElement('g').attr(defined(name)&&{'class':PREFIX+name});},image:function(src,x,y,width,height){var attribs={preserveAspectRatio:NONE},elemWrapper;if(arguments.length>1){extend(attribs,{x:x,y:y,width:width,height:height});}
elemWrapper=this.createElement('image').attr(attribs);elemWrapper.element.setAttributeNS('http://www.w3.org/1999/xlink','href',src);return elemWrapper;},symbol:function(symbol,x,y,radius,options){var obj,symbolFn=this.symbols[symbol],path=symbolFn&&symbolFn(x,y,radius,options),imageRegex=/^url\((.*?)\)$/,imageSrc;if(path){obj=this.path(path);extend(obj,{symbolName:symbol,x:x,y:y,r:radius});if(options){extend(obj,options);}}else if(imageRegex.test(symbol)){imageSrc=symbol.match(imageRegex)[1];obj=this.image(imageSrc).attr({x:x,y:y});createElement('img',{onload:function(){var img=this,size=symbolSizes[img.src]||[img.width,img.height];obj.attr({width:size[0],height:size[1]}).translate(-mathRound(size[0]/2),-mathRound(size[1]/2));},src:imageSrc});}else{obj=this.circle(x,y,radius);}
return obj;},symbols:{'square':function(x,y,radius){var len=0.707*radius;return[M,x-len,y-len,L,x+len,y-len,x+len,y+len,x-len,y+len,'Z'];},'triangle':function(x,y,radius){return[M,x,y-1.33*radius,L,x+radius,y+0.67*radius,x-radius,y+0.67*radius,'Z'];},'triangle-down':function(x,y,radius){return[M,x,y+1.33*radius,L,x-radius,y-0.67*radius,x+radius,y-0.67*radius,'Z'];},'diamond':function(x,y,radius){return[M,x,y-radius,L,x+radius,y,x,y+radius,x-radius,y,'Z'];},'arc':function(x,y,radius,options){var start=options.start,end=options.end-0.000001,innerRadius=options.innerR,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),longArc=options.end-start<mathPI?0:1;return[M,x+radius*cosStart,y+radius*sinStart,'A',radius,radius,0,longArc,1,x+radius*cosEnd,y+radius*sinEnd,L,x+innerRadius*cosEnd,y+innerRadius*sinEnd,'A',innerRadius,innerRadius,0,longArc,0,x+innerRadius*cosStart,y+innerRadius*sinStart,'Z'];}},clipRect:function(x,y,width,height){var wrapper,id=PREFIX+idCounter++,clipPath=this.createElement('clipPath').attr({id:id}).add(this.defs);wrapper=this.rect(x,y,width,height,0).add(clipPath);wrapper.id=id;return wrapper;},color:function(color,elem,prop){var colorObject,regexRgba=/^rgba/;if(color&&color.linearGradient){var renderer=this,strLinearGradient='linearGradient',linearGradient=color[strLinearGradient],id=PREFIX+idCounter++,gradientObject,stopColor,stopOpacity;gradientObject=renderer.createElement(strLinearGradient).attr({id:id,gradientUnits:'userSpaceOnUse',x1:linearGradient[0],y1:linearGradient[1],x2:linearGradient[2],y2:linearGradient[3]}).add(renderer.defs);each(color.stops,function(stop){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}
renderer.createElement('stop').attr({offset:stop[0],'stop-color':stopColor,'stop-opacity':stopOpacity}).add(gradientObject);});return'url('+this.url+'#'+id+')';}else if(regexRgba.test(color)){colorObject=Color(color);attr(elem,prop+'-opacity',colorObject.get('a'));return colorObject.get('rgb');}else{return color;}},text:function(str,x,y){var defaultChartStyle=defaultOptions.chart.style,wrapper;x=mathRound(pick(x,0));y=mathRound(pick(y,0));wrapper=this.createElement('text').attr({x:x,y:y,text:str}).css({'font-family':defaultChartStyle.fontFamily,'font-size':defaultChartStyle.fontSize});wrapper.x=x;wrapper.y=y;return wrapper;}};var VMLRenderer;if(!hasSVG){var VMLElement=extendClass(SVGElement,{init:function(renderer,nodeName){var markup=['<',nodeName,' filled="f" stroked="f"'],style=['position: ',ABSOLUTE,';'];if(nodeName=='shape'||nodeName==DIV){style.push('left:0;top:0;width:10px;height:10px;');}
if(docMode8){style.push('visibility: ',nodeName==DIV?HIDDEN:VISIBLE);}
markup.push(' style="',style.join(''),'"/>');if(nodeName){markup=nodeName==DIV||nodeName=='span'||nodeName=='img'?markup.join(''):renderer.prepVML(markup);this.element=createElement(markup);}
this.renderer=renderer;},add:function(parent){var wrapper=this,renderer=wrapper.renderer,element=wrapper.element,box=renderer.box,inverted=parent&&parent.inverted,parentNode=parent?parent.element||parent:box;if(inverted){renderer.invertChild(element,parentNode);}
if(docMode8&&parentNode.gVis==HIDDEN){css(element,{visibility:HIDDEN});}
parentNode.appendChild(element);wrapper.added=true;if(wrapper.alignOnAdd){wrapper.updateTransform();}
return wrapper;},attr:function(hash,val){var key,value,i,element=this.element||{},elemStyle=element.style,nodeName=element.nodeName,renderer=this.renderer,symbolName=this.symbolName,childNodes,hasSetSymbolSize,shadows=this.shadows,skipAttr,ret=this;if(isString(hash)&&defined(val)){key=hash;hash={};hash[key]=val;}
if(isString(hash)){key=hash;if(key=='strokeWidth'||key=='stroke-width'){ret=this.strokeweight;}else{ret=this[key];}}else{for(key in hash){value=hash[key];skipAttr=false;if(symbolName&&/^(x|y|r|start|end|width|height|innerR)/.test(key)){if(!hasSetSymbolSize){this.symbolAttr(hash);hasSetSymbolSize=true;}
skipAttr=true;}else if(key=='d'){value=value||[];this.d=value.join(' ');i=value.length;var convertedPath=[];while(i--){if(isNumber(value[i])){convertedPath[i]=mathRound(value[i]*10)-5;}
else if(value[i]=='Z'){convertedPath[i]='x';}
else{convertedPath[i]=value[i];}}
value=convertedPath.join(' ')||'x';element.path=value;if(shadows){i=shadows.length;while(i--){shadows[i].path=value;}}
skipAttr=true;}else if(key=='zIndex'||key=='visibility'){if(docMode8&&key=='visibility'&&nodeName=='DIV'){element.gVis=value;childNodes=element.childNodes;i=childNodes.length;while(i--){css(childNodes[i],{visibility:value});}
if(value==VISIBLE){value=null;}}
if(value){elemStyle[key]=value;}
skipAttr=true;}else if(/^(width|height)$/.test(key)){if(this.updateClipping){this[key]=value;this.updateClipping();}else{elemStyle[key]=value;}
skipAttr=true;}else if(/^(x|y)$/.test(key)){this[key]=value;if(element.tagName=='SPAN'){this.updateTransform();}else{elemStyle[{x:'left',y:'top'}[key]]=value;}}else if(key=='class'){element.className=value;}else if(key=='stroke'){value=renderer.color(value,element,key);key='strokecolor';}else if(key=='stroke-width'||key=='strokeWidth'){element.stroked=value?true:false;key='strokeweight';this[key]=value;if(isNumber(value)){value+=PX;}}else if(key=='dashstyle'){var strokeElem=element.getElementsByTagName('stroke')[0]||createElement(renderer.prepVML(['<stroke/>']),null,null,element);strokeElem[key]=value||'solid';this.dashstyle=value;skipAttr=true;}else if(key=='fill'){if(nodeName=='SPAN'){elemStyle.color=value;}else{element.filled=value!=NONE?true:false;value=renderer.color(value,element,key);key='fillcolor';}}else if(key=='translateX'||key=='translateY'||key=='rotation'||key=='align'){if(key=='align'){key='textAlign';}
this[key]=value;this.updateTransform();skipAttr=true;}
else if(key=='text'){element.innerHTML=value;skipAttr=true;}
if(shadows&&key=='visibility'){i=shadows.length;while(i--){shadows[i].style[key]=value;}}
if(!skipAttr){if(docMode8){element[key]=value;}else{attr(element,key,value);}}}}
return ret;},clip:function(clipRect){var wrapper=this,clipMembers=clipRect.members;clipMembers.push(wrapper);wrapper.destroyClip=function(){erase(clipMembers,wrapper);};return wrapper.css(clipRect.getCSS(wrapper.inverted));},css:function(styles){var wrapper=this,element=wrapper.element,textWidth=styles&&element.tagName=='SPAN'&&styles.width;if(textWidth){delete styles.width;wrapper.textWidth=textWidth;wrapper.updateTransform();}
wrapper.styles=extend(wrapper.styles,styles);css(wrapper.element,styles);return wrapper;},destroy:function(){var wrapper=this;if(wrapper.destroyClip){wrapper.destroyClip();}
SVGElement.prototype.destroy.apply(wrapper);},empty:function(){var element=this.element,childNodes=element.childNodes,i=childNodes.length,node;while(i--){node=childNodes[i];node.parentNode.removeChild(node);}},getBBox:function(){var element=this.element;if(element.nodeName=='text'){element.style.position=ABSOLUTE;}
return{x:element.offsetLeft,y:element.offsetTop,width:element.offsetWidth,height:element.offsetHeight};},on:function(eventType,handler){this.element['on'+eventType]=function(){var evt=win.event;evt.target=evt.srcElement;handler(evt);};return this;},updateTransform:function(hash){if(!this.added){this.alignOnAdd=true;return;}
var wrapper=this,elem=wrapper.element,translateX=wrapper.translateX||0,translateY=wrapper.translateY||0,x=wrapper.x||0,y=wrapper.y||0,align=wrapper.textAlign||'left',alignCorrection={left:0,center:0.5,right:1}[align],nonLeft=align&&align!='left';if(translateX||translateY){wrapper.css({marginLeft:translateX,marginTop:translateY});}
if(wrapper.inverted){each(elem.childNodes,function(child){wrapper.renderer.invertChild(child,elem);});}
if(elem.tagName=='SPAN'){var width,height,rotation=wrapper.rotation,lineHeight,radians=0,costheta=1,sintheta=0,quad,textWidth=pInt(wrapper.textWidth),xCorr=wrapper.xCorr||0,yCorr=wrapper.yCorr||0,currentTextTransform=[rotation,align,elem.innerHTML,wrapper.textWidth].join(',');if(currentTextTransform!=wrapper.cTT){if(defined(rotation)){radians=rotation*deg2rad;costheta=mathCos(radians);sintheta=mathSin(radians);css(elem,{filter:rotation?['progid:DXImageTransform.Microsoft.Matrix(M11=',costheta,', M12=',-sintheta,', M21=',sintheta,', M22=',costheta,', sizingMethod=\'auto expand\')'].join(''):NONE});}
width=elem.offsetWidth;height=elem.offsetHeight;if(width>textWidth){css(elem,{width:textWidth+PX,display:'block',whiteSpace:'normal'});width=textWidth;}
lineHeight=mathRound(pInt(elem.style.fontSize||12)*1.2);xCorr=costheta<0&&-width;yCorr=sintheta<0&&-height;quad=costheta*sintheta<0;xCorr+=sintheta*lineHeight*(quad?1-alignCorrection:alignCorrection);yCorr-=costheta*lineHeight*(rotation?(quad?alignCorrection:1-alignCorrection):1);if(nonLeft){xCorr-=width*alignCorrection*(costheta<0?-1:1);if(rotation){yCorr-=height*alignCorrection*(sintheta<0?-1:1);}
css(elem,{textAlign:align});}
wrapper.xCorr=xCorr;wrapper.yCorr=yCorr;}
css(elem,{left:x+xCorr,top:y+yCorr});wrapper.cTT=currentTextTransform;}},shadow:function(apply){var shadows=[],i,element=this.element,renderer=this.renderer,shadow,elemStyle=element.style,markup,path=element.path;if(''+element.path===''){path='x';}
if(apply){for(i=1;i<=3;i++){markup=['<shape isShadow="true" strokeweight="',(7-2*i),'" filled="false" path="',path,'" coordsize="100,100" style="',element.style.cssText,'" />'];shadow=createElement(renderer.prepVML(markup),null,{left:pInt(elemStyle.left)+1,top:pInt(elemStyle.top)+1});markup=['<stroke color="black" opacity="',(0.05*i),'"/>'];createElement(renderer.prepVML(markup),null,null,shadow);element.parentNode.insertBefore(shadow,element);shadows.push(shadow);}
this.shadows=shadows;}
return this;}});VMLRenderer=function(){this.init.apply(this,arguments);};VMLRenderer.prototype=merge(SVGRenderer.prototype,{isIE8:userAgent.indexOf('MSIE 8.0')>-1,init:function(container,width,height){var renderer=this,boxWrapper;renderer.Element=VMLElement;renderer.alignedObjects=[];boxWrapper=renderer.createElement(DIV);container.appendChild(boxWrapper.element);renderer.box=boxWrapper.element;renderer.boxWrapper=boxWrapper;renderer.setSize(width,height,false);if(!doc.namespaces.hcv){doc.namespaces.add('hcv','urn:schemas-microsoft-com:vml');doc.createStyleSheet().cssText='hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke'+'{ behavior:url(#default#VML); display: inline-block; } ';}},clipRect:function(x,y,width,height){var clipRect=this.createElement();return extend(clipRect,{members:[],left:x,top:y,width:width,height:height,getCSS:function(inverted){var rect=this,top=rect.top,left=rect.left,right=left+rect.width,bottom=top+rect.height,ret={clip:'rect('+
mathRound(inverted?left:top)+'px,'+
mathRound(inverted?bottom:right)+'px,'+
mathRound(inverted?right:bottom)+'px,'+
mathRound(inverted?top:left)+'px)'};if(!inverted&&docMode8){extend(ret,{width:right+PX,height:bottom+PX});}
return ret;},updateClipping:function(){each(clipRect.members,function(member){member.css(clipRect.getCSS(member.inverted));});}});},color:function(color,elem,prop){var colorObject,regexRgba=/^rgba/,markup;if(color&&color.linearGradient){var stopColor,stopOpacity,linearGradient=color.linearGradient,angle,color1,opacity1,color2,opacity2;each(color.stops,function(stop,i){if(regexRgba.test(stop[1])){colorObject=Color(stop[1]);stopColor=colorObject.get('rgb');stopOpacity=colorObject.get('a');}else{stopColor=stop[1];stopOpacity=1;}
if(!i){color1=stopColor;opacity1=stopOpacity;}else{color2=stopColor;opacity2=stopOpacity;}});angle=90-math.atan((linearGradient[3]-linearGradient[1])/(linearGradient[2]-linearGradient[0]))*180/mathPI;markup=['<',prop,' colors="0% ',color1,',100% ',color2,'" angle="',angle,'" opacity="',opacity2,'" o:opacity2="',opacity1,'" type="gradient" focus="100%" />'];createElement(this.prepVML(markup),null,null,elem);}else if(regexRgba.test(color)&&elem.tagName!='IMG'){colorObject=Color(color);markup=['<',prop,' opacity="',colorObject.get('a'),'"/>'];createElement(this.prepVML(markup),null,null,elem);return colorObject.get('rgb');}else{return color;}},prepVML:function(markup){var vmlStyle='display:inline-block;behavior:url(#default#VML);',isIE8=this.isIE8;markup=markup.join('');if(isIE8){markup=markup.replace('/>',' xmlns="urn:schemas-microsoft-com:vml" />');if(markup.indexOf('style="')==-1){markup=markup.replace('/>',' style="'+vmlStyle+'" />');}else{markup=markup.replace('style="','style="'+vmlStyle);}}else{markup=markup.replace('<','<hcv:');}
return markup;},text:function(str,x,y){var defaultChartStyle=defaultOptions.chart.style;return this.createElement('span').attr({text:str,x:mathRound(x),y:mathRound(y)}).css({whiteSpace:'nowrap',fontFamily:defaultChartStyle.fontFamily,fontSize:defaultChartStyle.fontSize});},path:function(path){return this.createElement('shape').attr({coordsize:'100 100',d:path});},circle:function(x,y,r){return this.path(this.symbols.circle(x,y,r));},g:function(name){var wrapper,attribs;if(name){attribs={'className':PREFIX+name,'class':PREFIX+name};}
wrapper=this.createElement(DIV).attr(attribs);return wrapper;},image:function(src,x,y,width,height){var obj=this.createElement('img').attr({src:src});if(arguments.length>1){obj.css({left:x,top:y,width:width,height:height});}
return obj;},rect:function(x,y,width,height,r,strokeWidth){if(isObject(x)){y=x.y;width=x.width;height=x.height;r=x.r;x=x.x;}
var wrapper=this.symbol('rect');wrapper.r=r;return wrapper.attr(wrapper.crisp(strokeWidth,x,y,mathMax(width,0),mathMax(height,0)));},invertChild:function(element,parentNode){var parentStyle=parentNode.style;css(element,{flip:'x',left:pInt(parentStyle.width)-10,top:pInt(parentStyle.height)-10,rotation:-90});},symbols:{arc:function(x,y,radius,options){var start=options.start,end=options.end,cosStart=mathCos(start),sinStart=mathSin(start),cosEnd=mathCos(end),sinEnd=mathSin(end),innerRadius=options.innerR,circleCorrection=0.07/radius,innerCorrection=innerRadius&&0.1/innerRadius||0;if(end-start===0){return['x'];}else if(2*mathPI-end+start<circleCorrection){cosEnd=-circleCorrection;}else if(end-start<innerCorrection){cosEnd=mathCos(start+innerCorrection);}
return['wa',x-radius,y-radius,x+radius,y+radius,x+radius*cosStart,y+radius*sinStart,x+radius*cosEnd,y+radius*sinEnd,'at',x-innerRadius,y-innerRadius,x+innerRadius,y+innerRadius,x+innerRadius*cosEnd,y+innerRadius*sinEnd,x+innerRadius*cosStart,y+innerRadius*sinStart,'x','e'];},circle:function(x,y,r){return['wa',x-r,y-r,x+r,y+r,x+r,y,x+r,y,'e'];},rect:function(left,top,r,options){if(!defined(options)){return[];}
var width=options.width,height=options.height,right=left+width,bottom=top+height;r=mathMin(r,width,height);return[M,left+r,top,L,right-r,top,'wa',right-2*r,top,right,top+2*r,right-r,top,right,top+r,L,right,bottom-r,'wa',right-2*r,bottom-2*r,right,bottom,right,bottom-r,right-r,bottom,L,left+r,bottom,'wa',left,bottom-2*r,left+2*r,bottom,left+r,bottom,left,bottom-r,L,left,top+r,'wa',left,top,left+2*r,top+2*r,left,top+r,left+r,top,'x','e'];}}});}
var Renderer=hasSVG?SVGRenderer:VMLRenderer;function Chart(options,callback){defaultXAxisOptions=merge(defaultXAxisOptions,defaultOptions.xAxis);defaultYAxisOptions=merge(defaultYAxisOptions,defaultOptions.yAxis);defaultOptions.xAxis=defaultOptions.yAxis=null;options=merge(defaultOptions,options);var optionsChart=options.chart,optionsMargin=optionsChart.margin,margin=isObject(optionsMargin)?optionsMargin:[optionsMargin,optionsMargin,optionsMargin,optionsMargin],optionsMarginTop=pick(optionsChart.marginTop,margin[0]),optionsMarginRight=pick(optionsChart.marginRight,margin[1]),optionsMarginBottom=pick(optionsChart.marginBottom,margin[2]),optionsMarginLeft=pick(optionsChart.marginLeft,margin[3]),spacingTop=optionsChart.spacingTop,spacingRight=optionsChart.spacingRight,spacingBottom=optionsChart.spacingBottom,spacingLeft=optionsChart.spacingLeft,spacingBox,chartTitleOptions,chartSubtitleOptions,plotTop,marginRight,marginBottom,plotLeft,axisOffset,renderTo,renderToClone,container,containerId,containerWidth,containerHeight,chartWidth,chartHeight,oldChartWidth,oldChartHeight,chartBackground,plotBackground,plotBGImage,plotBorder,chart=this,chartEvents=optionsChart.events,runChartClick=chartEvents&&!!chartEvents.click,eventType,isInsidePlot,tooltip,mouseIsDown,loadingDiv,loadingSpan,loadingShown,plotHeight,plotWidth,tracker,trackerGroup,placeTrackerGroup,legend,legendWidth,legendHeight,chartPosition,hasCartesianSeries=optionsChart.showAxes,isResizing=0,axes=[],maxTicks,series=[],inverted,renderer,tooltipTick,tooltipInterval,hoverX,drawChartBox,getMargins,resetMargins,setChartSize,resize,zoom,zoomOut;function Axis(chart,options){var isXAxis=options.isX,opposite=options.opposite,horiz=inverted?!isXAxis:isXAxis,side=horiz?(opposite?0:2):(opposite?1:3),stacks={};options=merge(isXAxis?defaultXAxisOptions:defaultYAxisOptions,[defaultTopAxisOptions,defaultRightAxisOptions,defaultBottomAxisOptions,defaultLeftAxisOptions][side],options);var axis=this,isDatetimeAxis=options.type=='datetime',offset=options.offset||0,xOrY=isXAxis?'x':'y',axisLength,transA,oldTransA,transB=horiz?plotLeft:marginBottom,translate,getPlotLinePath,axisGroup,gridGroup,axisLine,dataMin,dataMax,associatedSeries,userSetMin,userSetMax,max=null,min=null,oldMin,oldMax,minPadding=options.minPadding,maxPadding=options.maxPadding,isLinked=defined(options.linkedTo),ignoreMinPadding,ignoreMaxPadding,usePercentage,events=options.events,eventType,plotLinesAndBands=[],tickInterval,minorTickInterval,magnitude,tickPositions,ticks={},minorTicks={},alternateBands={},tickAmount,labelOffset,axisTitleMargin,dateTimeLabelFormat,categories=options.categories,labelFormatter=options.labels.formatter||function(){var value=this.value,ret;if(dateTimeLabelFormat){ret=dateFormat(dateTimeLabelFormat,value);}else if(tickInterval%1000000===0){ret=(value/1000000)+'M';}else if(tickInterval%1000===0){ret=(value/1000)+'k';}else if(!categories&&value>=1000){ret=numberFormat(value,0);}else{ret=value;}
return ret;},staggerLines=horiz&&options.labels.staggerLines,reversed=options.reversed,tickmarkOffset=(categories&&options.tickmarkPlacement=='between')?0.5:0;function Tick(pos,minor){var tick=this;tick.pos=pos;tick.minor=minor;tick.isNew=true;if(!minor){tick.addLabel();}}
Tick.prototype={addLabel:function(){var pos=this.pos,labelOptions=options.labels,str,withLabel=!((pos==min&&!pick(options.showFirstLabel,1))||(pos==max&&!pick(options.showLastLabel,0))),width=categories&&horiz&&categories.length&&!labelOptions.step&&!labelOptions.staggerLines&&!labelOptions.rotation&&plotWidth/categories.length||!horiz&&plotWidth/2,css,label=this.label;str=labelFormatter.call({isFirst:pos==tickPositions[0],isLast:pos==tickPositions[tickPositions.length-1],dateTimeLabelFormat:dateTimeLabelFormat,value:(categories&&categories[pos]?categories[pos]:pos)});css=width&&{width:(width-2*(labelOptions.padding||10))+PX};css=extend(css,labelOptions.style);if(label===UNDEFINED){this.label=defined(str)&&withLabel&&labelOptions.enabled?renderer.text(str,0,0).attr({align:labelOptions.align,rotation:labelOptions.rotation}).css(css).add(axisGroup):null;}else if(label){label.attr({text:str}).css(css);}},getLabelSize:function(){var label=this.label;return label?((this.labelBBox=label.getBBox()))[horiz?'height':'width']:0;},render:function(index,old){var tick=this,major=!tick.minor,label=tick.label,pos=tick.pos,labelOptions=options.labels,gridLine=tick.gridLine,gridLineWidth=major?options.gridLineWidth:options.minorGridLineWidth,gridLineColor=major?options.gridLineColor:options.minorGridLineColor,dashStyle=major?options.gridLineDashStyle:options.minorGridLineDashStyle,gridLinePath,mark=tick.mark,markPath,tickLength=major?options.tickLength:options.minorTickLength,tickWidth=major?options.tickWidth:(options.minorTickWidth||0),tickColor=major?options.tickColor:options.minorTickColor,tickPosition=major?options.tickPosition:options.minorTickPosition,step=labelOptions.step,cHeight=old&&oldChartHeight||chartHeight,attribs,x,y;x=horiz?translate(pos+tickmarkOffset,null,null,old)+transB:plotLeft+offset+(opposite?(old&&oldChartWidth||chartWidth)-marginRight-plotLeft:0);y=horiz?cHeight-marginBottom+offset-(opposite?plotHeight:0):cHeight-translate(pos+tickmarkOffset,null,null,old)-transB;if(gridLineWidth){gridLinePath=getPlotLinePath(pos+tickmarkOffset,gridLineWidth,old);if(gridLine===UNDEFINED){attribs={stroke:gridLineColor,'stroke-width':gridLineWidth};if(dashStyle){attribs.dashstyle=dashStyle;}
tick.gridLine=gridLine=gridLineWidth?renderer.path(gridLinePath).attr(attribs).add(gridGroup):null;}
if(gridLine&&gridLinePath){gridLine.animate({d:gridLinePath});}}
if(tickWidth){if(tickPosition=='inside'){tickLength=-tickLength;}
if(opposite){tickLength=-tickLength;}
markPath=renderer.crispLine([M,x,y,L,x+(horiz?0:-tickLength),y+(horiz?tickLength:0)],tickWidth);if(mark){mark.animate({d:markPath});}else{tick.mark=renderer.path(markPath).attr({stroke:tickColor,'stroke-width':tickWidth}).add(axisGroup);}}
if(label){x=x+labelOptions.x-(tickmarkOffset&&horiz?tickmarkOffset*transA*(reversed?-1:1):0);y=y+labelOptions.y-(tickmarkOffset&&!horiz?tickmarkOffset*transA*(reversed?1:-1):0);if(!defined(labelOptions.y)){y+=parseInt(label.styles.lineHeight)*0.9-label.getBBox().height/2;}
if(staggerLines){y+=(index%staggerLines)*16;}
if(step){label[index%step?'hide':'show']();}
label[tick.isNew?'attr':'animate']({x:x,y:y});}
tick.isNew=false;},destroy:function(){var tick=this,n;for(n in tick){if(tick[n]&&tick[n].destroy){tick[n].destroy();}}}};function PlotLineOrBand(options){var plotLine=this;if(options){plotLine.options=options;plotLine.id=options.id;}
return plotLine;}
PlotLineOrBand.prototype={render:function(){var plotLine=this,options=plotLine.options,optionsLabel=options.label,label=plotLine.label,width=options.width,to=options.to,toPath,from=options.from,dashStyle=options.dashStyle,svgElem=plotLine.svgElem,path=[],addEvent,eventType,xs,ys,x,y,color=options.color,zIndex=options.zIndex,events=options.events,attribs;if(width){path=getPlotLinePath(options.value,width);attribs={stroke:color,'stroke-width':width};if(dashStyle){attribs.dashstyle=dashStyle;}}
else if(defined(from)&&defined(to)){from=mathMax(from,min);to=mathMin(to,max);toPath=getPlotLinePath(to);path=getPlotLinePath(from);if(path&&toPath){path.push(toPath[4],toPath[5],toPath[1],toPath[2]);}else{path=null;}
attribs={fill:color};}else{return;}
if(defined(zIndex)){attribs.zIndex=zIndex;}
if(svgElem){if(path){svgElem.animate({d:path},null,svgElem.onGetPath);}else{svgElem.hide();svgElem.onGetPath=function(){svgElem.show();}}}else if(path&&path.length){plotLine.svgElem=svgElem=renderer.path(path).attr(attribs).add();if(events){addEvent=function(eventType){svgElem.on(eventType,function(e){events[eventType].apply(plotLine,[e]);});};for(eventType in events){addEvent(eventType);}}}
if(optionsLabel&&defined(optionsLabel.text)&&path&&path.length&&plotWidth>0&&plotHeight>0){optionsLabel=merge({align:horiz&&toPath&&'center',x:horiz?!toPath&&4:10,verticalAlign:!horiz&&toPath&&'middle',y:horiz?toPath?16:10:toPath?6:-4,rotation:horiz&&!toPath&&90},optionsLabel);if(!label){plotLine.label=label=renderer.text(optionsLabel.text,0,0).attr({align:optionsLabel.textAlign||optionsLabel.align,rotation:optionsLabel.rotation,zIndex:zIndex}).css(optionsLabel.style).add();}
xs=[path[1],path[4],path[6]||path[1]];ys=[path[2],path[5],path[7]||path[2]];x=mathMin.apply(math,xs);y=mathMin.apply(math,ys);label.align(optionsLabel,false,{x:x,y:y,width:mathMax.apply(math,xs)-x,height:mathMax.apply(math,ys)-y});label.show();}else if(label){label.hide();}
return plotLine;},destroy:function(){var obj=this,n;for(n in obj){if(obj[n]&&obj[n].destroy){obj[n].destroy();}
delete obj[n];}
erase(plotLinesAndBands,obj);}};function getSeriesExtremes(){var posStack=[],negStack=[],run;dataMin=dataMax=null;associatedSeries=[];each(series,function(serie){run=false;each(['xAxis','yAxis'],function(strAxis){if(serie.isCartesian&&(strAxis=='xAxis'&&isXAxis||strAxis=='yAxis'&&!isXAxis)&&((serie.options[strAxis]==options.index)||(serie.options[strAxis]===UNDEFINED&&options.index===0))){serie[strAxis]=axis;associatedSeries.push(serie);run=true;}});if(!serie.visible&&optionsChart.ignoreHiddenSeries){run=false;}
if(run){var stacking,posPointStack,negPointStack,stackKey,negKey;if(!isXAxis){stacking=serie.options.stacking;usePercentage=stacking=='percent';if(stacking){stackKey=serie.type+pick(serie.options.stack,'');negKey='-'+stackKey;serie.stackKey=stackKey;posPointStack=posStack[stackKey]||[];posStack[stackKey]=posPointStack;negPointStack=negStack[negKey]||[];negStack[negKey]=negPointStack;}
if(usePercentage){dataMin=0;dataMax=99;}}
if(serie.isCartesian){each(serie.data,function(point,i){var pointX=point.x,pointY=point.y,isNegative=pointY<0,pointStack=isNegative?negPointStack:posPointStack,key=isNegative?negKey:stackKey,totalPos,pointLow;if(dataMin===null){dataMin=dataMax=point[xOrY];}
if(isXAxis){if(pointX>dataMax){dataMax=pointX;}else if(pointX<dataMin){dataMin=pointX;}}
else if(defined(pointY)){if(stacking){pointStack[pointX]=defined(pointStack[pointX])?pointStack[pointX]+pointY:pointY;}
totalPos=pointStack?pointStack[pointX]:pointY;pointLow=pick(point.low,totalPos);if(!usePercentage){if(totalPos>dataMax){dataMax=totalPos;}else if(pointLow<dataMin){dataMin=pointLow;}}
if(stacking){if(!stacks[key]){stacks[key]={};}
stacks[key][pointX]={total:totalPos,cum:totalPos};}}});if(/(area|column|bar)/.test(serie.type)&&!isXAxis){if(dataMin>=0){dataMin=0;ignoreMinPadding=true;}else if(dataMax<0){dataMax=0;ignoreMaxPadding=true;}}}}});}
translate=function(val,backwards,cvsCoord,old){var sign=1,cvsOffset=0,localA=old?oldTransA:transA,localMin=old?oldMin:min,returnValue;if(!localA){localA=transA;}
if(cvsCoord){sign*=-1;cvsOffset=axisLength;}
if(reversed){sign*=-1;cvsOffset-=sign*axisLength;}
if(backwards){if(reversed){val=axisLength-val;}
returnValue=val/localA+localMin;}else{returnValue=sign*(val-localMin)*localA+cvsOffset;}
return returnValue;};getPlotLinePath=function(value,lineWidth,old){var x1,y1,x2,y2,translatedValue=translate(value,null,null,old),cHeight=old&&oldChartHeight||chartHeight,cWidth=old&&oldChartWidth||chartWidth,skip;x1=x2=mathRound(translatedValue+transB);y1=y2=mathRound(cHeight-translatedValue-transB);if(isNaN(translatedValue)){skip=true;}else if(horiz){y1=plotTop;y2=cHeight-marginBottom;if(x1<plotLeft||x1>plotLeft+plotWidth){skip=true;}}else{x1=plotLeft;x2=cWidth-marginRight;if(y1<plotTop||y1>plotTop+plotHeight){skip=true;}}
return skip?null:renderer.crispLine([M,x1,y1,L,x2,y2],lineWidth||0);};function normalizeTickInterval(interval,multiples){var normalized;magnitude=multiples?1:math.pow(10,mathFloor(math.log(interval)/math.LN10));normalized=interval/magnitude;if(!multiples){multiples=[1,2,2.5,5,10];if(options.allowDecimals===false){if(magnitude==1){multiples=[1,2,5,10];}else if(magnitude<=0.1){multiples=[1/magnitude];}}}
for(var i=0;i<multiples.length;i++){interval=multiples[i];if(normalized<=(multiples[i]+(multiples[i+1]||multiples[i]))/2){break;}}
interval*=magnitude;return interval;}
function setDateTimeTickPositions(){tickPositions=[];var i,useUTC=defaultOptions.global.useUTC,oneSecond=1000/timeFactor,oneMinute=60000/timeFactor,oneHour=3600000/timeFactor,oneDay=24*3600000/timeFactor,oneWeek=7*24*3600000/timeFactor,oneMonth=30*24*3600000/timeFactor,oneYear=31556952000/timeFactor,units=[['second',oneSecond,[1,2,5,10,15,30]],['minute',oneMinute,[1,2,5,10,15,30]],['hour',oneHour,[1,2,3,4,6,8,12]],['day',oneDay,[1,2]],['week',oneWeek,[1,2]],['month',oneMonth,[1,2,3,4,6]],['year',oneYear,null]],unit=units[6],interval=unit[1],multiples=unit[2];for(i=0;i<units.length;i++){unit=units[i];interval=unit[1];multiples=unit[2];if(units[i+1]){var lessThan=(interval*multiples[multiples.length-1]+
units[i+1][1])/2;if(tickInterval<=lessThan){break;}}}
if(interval==oneYear&&tickInterval<5*interval){multiples=[1,2,5];}
var multitude=normalizeTickInterval(tickInterval/interval,multiples),minYear,minDate=new Date(min*timeFactor);minDate.setMilliseconds(0);if(interval>=oneSecond){minDate.setSeconds(interval>=oneMinute?0:multitude*mathFloor(minDate.getSeconds()/multitude));}
if(interval>=oneMinute){minDate[setMinutes](interval>=oneHour?0:multitude*mathFloor(minDate[getMinutes]()/multitude));}
if(interval>=oneHour){minDate[setHours](interval>=oneDay?0:multitude*mathFloor(minDate[getHours]()/multitude));}
if(interval>=oneDay){minDate[setDate](interval>=oneMonth?1:multitude*mathFloor(minDate[getDate]()/multitude));}
if(interval>=oneMonth){minDate[setMonth](interval>=oneYear?0:multitude*mathFloor(minDate[getMonth]()/multitude));minYear=minDate[getFullYear]();}
if(interval>=oneYear){minYear-=minYear%multitude;minDate[setFullYear](minYear);}
if(interval==oneWeek){minDate[setDate](minDate[getDate]()-minDate[getDay]()+
options.startOfWeek);}
i=1;minYear=minDate[getFullYear]();var time=minDate.getTime()/timeFactor,minMonth=minDate[getMonth](),minDateDate=minDate[getDate]();while(time<max&&i<plotWidth){tickPositions.push(time);if(interval==oneYear){time=makeTime(minYear+i*multitude,0)/timeFactor;}else if(interval==oneMonth){time=makeTime(minYear,minMonth+i*multitude)/timeFactor;}else if(!useUTC&&(interval==oneDay||interval==oneWeek)){time=makeTime(minYear,minMonth,minDateDate+
i*multitude*(interval==oneDay?1:7));}else{time+=interval*multitude;}
i++;}
tickPositions.push(time);dateTimeLabelFormat=options.dateTimeLabelFormats[unit[0]];}
function correctFloat(num){var invMag,ret=num;if(defined(magnitude)){invMag=(magnitude<1?mathRound(1/magnitude):1)*10;ret=mathRound(num*invMag)/invMag;}
return ret;}
function setLinearTickPositions(){var i,roundedMin=mathFloor(min/tickInterval)*tickInterval,roundedMax=mathCeil(max/tickInterval)*tickInterval;tickPositions=[];i=correctFloat(roundedMin);while(i<=roundedMax){tickPositions.push(i);i=correctFloat(i+tickInterval);}}
function setTickPositions(secondPass){var length,catPad,linkedParent,linkedParentExtremes,tickIntervalOption=options.tickInterval,tickPixelIntervalOption=options.tickPixelInterval,maxZoom=options.maxZoom||(isXAxis?mathMin(chart.smallestInterval*5,dataMax-dataMin):null),zoomOffset;axisLength=horiz?plotWidth:plotHeight;if(isLinked){linkedParent=chart[isXAxis?'xAxis':'yAxis'][options.linkedTo];linkedParentExtremes=linkedParent.getExtremes();min=pick(linkedParentExtremes.min,linkedParentExtremes.dataMin);max=pick(linkedParentExtremes.max,linkedParentExtremes.dataMax);}
else{min=pick(userSetMin,options.min,dataMin);max=pick(userSetMax,options.max,dataMax);}
if(max-min<maxZoom){zoomOffset=(maxZoom-max+min)/2;min=mathMax(min-zoomOffset,pick(options.min,min-zoomOffset),dataMin);max=mathMin(min+maxZoom,pick(options.max,min+maxZoom),dataMax);}
if(!categories&&!usePercentage&&!isLinked&&defined(min)&&defined(max)){length=(max-min)||1;if(!defined(options.min)&&!defined(userSetMin)&&minPadding&&(dataMin<0||!ignoreMinPadding)){min-=length*minPadding;}
if(!defined(options.max)&&!defined(userSetMax)&&maxPadding&&(dataMax>0||!ignoreMaxPadding)){max+=length*maxPadding;}}
if(min==max){tickInterval=1;}else if(isLinked&&!tickIntervalOption&&tickPixelIntervalOption==linkedParent.options.tickPixelInterval){tickInterval=linkedParent.tickInterval;}else{tickInterval=pick(tickIntervalOption,categories?1:(max-min)*tickPixelIntervalOption/axisLength);}
if(!isDatetimeAxis&&!defined(options.tickInterval)){tickInterval=normalizeTickInterval(tickInterval);}
axis.tickInterval=tickInterval;minorTickInterval=options.minorTickInterval==='auto'&&tickInterval?tickInterval/5:options.minorTickInterval;if(isDatetimeAxis){setDateTimeTickPositions();}else{setLinearTickPositions();}
if(!isLinked){if(categories||(isXAxis&&chart.hasColumn)){catPad=(categories?1:tickInterval)*0.5;if(categories||!defined(pick(options.min,userSetMin))){min-=catPad;}
if(categories||!defined(pick(options.max,userSetMax))){max+=catPad;}}
var roundedMin=tickPositions[0],roundedMax=tickPositions[tickPositions.length-1];if(options.startOnTick){min=roundedMin;}else if(min>roundedMin){tickPositions.shift();}
if(options.endOnTick){max=roundedMax;}else if(max<roundedMax){tickPositions.pop();}
if(!maxTicks){maxTicks={x:0,y:0};}
if(!isDatetimeAxis&&tickPositions.length>maxTicks[xOrY]){maxTicks[xOrY]=tickPositions.length;}}}
function adjustTickAmount(){if(maxTicks&&!isDatetimeAxis&&!categories&&!isLinked){var oldTickAmount=tickAmount,calculatedTickAmount=tickPositions.length;tickAmount=maxTicks[xOrY];if(calculatedTickAmount<tickAmount){while(tickPositions.length<tickAmount){tickPositions.push(correctFloat(tickPositions[tickPositions.length-1]+tickInterval));}
transA*=(calculatedTickAmount-1)/(tickAmount-1);max=tickPositions[tickPositions.length-1];}
if(defined(oldTickAmount)&&tickAmount!=oldTickAmount){axis.isDirty=true;}}}
function setScale(){var type,i;oldMin=min;oldMax=max;getSeriesExtremes();setTickPositions();oldTransA=transA;transA=axisLength/((max-min)||1);if(!isXAxis){for(type in stacks){for(i in stacks[type]){stacks[type][i].cum=stacks[type][i].total;}}}
if(!axis.isDirty){axis.isDirty=(min!=oldMin||max!=oldMax);}}
function setExtremes(newMin,newMax,redraw,animation){redraw=pick(redraw,true);fireEvent(axis,'setExtremes',{min:newMin,max:newMax},function(){userSetMin=newMin;userSetMax=newMax;if(redraw){chart.redraw(animation);}});}
function getExtremes(){return{min:min,max:max,dataMin:dataMin,dataMax:dataMax};}
function getThreshold(threshold){if(min>threshold){threshold=min;}else if(max<threshold){threshold=max;}
return translate(threshold,0,1);}
function addPlotBandOrLine(options){var obj=new PlotLineOrBand(options).render();plotLinesAndBands.push(obj);return obj;}
function getOffset(){var hasData=associatedSeries.length&&defined(min)&&defined(max),titleOffset=0,titleMargin=0,axisTitleOptions=options.title,labelOptions=options.labels,directionFactor=[-1,1,1,-1][side];if(!axisGroup){axisGroup=renderer.g('axis').attr({zIndex:7}).add();gridGroup=renderer.g('grid').attr({zIndex:1}).add();}
labelOffset=0;if(hasData||isLinked){each(tickPositions,function(pos){if(!ticks[pos]){ticks[pos]=new Tick(pos);}else{ticks[pos].addLabel();}
if(side===0||side==2||{1:'left',3:'right'}[side]==labelOptions.align){labelOffset=mathMax(ticks[pos].getLabelSize(),labelOffset);}});if(staggerLines){labelOffset+=(staggerLines-1)*16;}}else{for(var n in ticks){ticks[n].destroy();delete ticks[n];}}
if(axisTitleOptions&&axisTitleOptions.text){if(!axis.axisTitle){axis.axisTitle=renderer.text(axisTitleOptions.text,0,0).attr({zIndex:7,rotation:axisTitleOptions.rotation||0,align:axisTitleOptions.textAlign||{low:'left',middle:'center',high:'right'}[axisTitleOptions.align]}).css(axisTitleOptions.style).add();}
titleOffset=axis.axisTitle.getBBox()[horiz?'height':'width'];titleMargin=pick(axisTitleOptions.margin,horiz?5:10);}
offset=directionFactor*(options.offset||axisOffset[side]);axisTitleMargin=labelOffset+
(side!=2&&labelOffset&&directionFactor*options.labels[horiz?'y':'x'])+
titleMargin;axisOffset[side]=mathMax(axisOffset[side],axisTitleMargin+titleOffset+directionFactor*offset);}
function render(){var axisTitleOptions=options.title,alternateGridColor=options.alternateGridColor,lineWidth=options.lineWidth,lineLeft,lineTop,linePath,hasRendered=chart.hasRendered,slideInTicks=hasRendered&&defined(oldMin)&&!isNaN(oldMin),hasData=associatedSeries.length&&defined(min)&&defined(max);axisLength=horiz?plotWidth:plotHeight;transA=axisLength/((max-min)||1);transB=horiz?plotLeft:marginBottom;if(hasData||isLinked){if(minorTickInterval&&!categories){var pos=min+(tickPositions[0]-min)%minorTickInterval;for(pos;pos<=max;pos+=minorTickInterval){if(!minorTicks[pos]){minorTicks[pos]=new Tick(pos,true);}
if(slideInTicks&&minorTicks[pos].isNew){minorTicks[pos].render(null,true);}
minorTicks[pos].isActive=true;minorTicks[pos].render();}}
each(tickPositions,function(pos,i){if(!isLinked||(pos>=min&&pos<=max)){if(slideInTicks&&ticks[pos].isNew){ticks[pos].render(i,true);}
ticks[pos].isActive=true;ticks[pos].render(i);}});if(alternateGridColor){each(tickPositions,function(pos,i){if(i%2===0&&pos<max){if(!alternateBands[pos]){alternateBands[pos]=new PlotLineOrBand();}
alternateBands[pos].options={from:pos,to:tickPositions[i+1]!==UNDEFINED?tickPositions[i+1]:max,color:alternateGridColor};alternateBands[pos].render();alternateBands[pos].isActive=true;}});}
if(!hasRendered){each((options.plotLines||[]).concat(options.plotBands||[]),function(plotLineOptions){plotLinesAndBands.push(new PlotLineOrBand(plotLineOptions).render());});}}
each([ticks,minorTicks,alternateBands],function(coll){for(var pos in coll){if(!coll[pos].isActive){coll[pos].destroy();delete coll[pos];}else{coll[pos].isActive=false;}}});if(lineWidth){lineLeft=plotLeft+(opposite?plotWidth:0)+offset;lineTop=chartHeight-marginBottom-(opposite?plotHeight:0)+offset;linePath=renderer.crispLine([M,horiz?plotLeft:lineLeft,horiz?lineTop:plotTop,L,horiz?chartWidth-marginRight:lineLeft,horiz?lineTop:chartHeight-marginBottom],lineWidth);if(!axisLine){axisLine=renderer.path(linePath).attr({stroke:options.lineColor,'stroke-width':lineWidth,zIndex:7}).add();}else{axisLine.animate({d:linePath});}}
if(axis.axisTitle){var margin=horiz?plotLeft:plotTop,fontSize=pInt(axisTitleOptions.style.fontSize||12),alongAxis={low:margin+(horiz?0:axisLength),middle:margin+axisLength/2,high:margin+(horiz?axisLength:0)}[axisTitleOptions.align],offAxis=(horiz?plotTop+plotHeight:plotLeft)+
(horiz?1:-1)*(opposite?-1:1)*axisTitleMargin+
(side==2?fontSize:0);axis.axisTitle[hasRendered?'animate':'attr']({x:horiz?alongAxis:offAxis+(opposite?plotWidth:0)+offset+
(axisTitleOptions.x||0),y:horiz?offAxis-(opposite?plotHeight:0)+offset:alongAxis+(axisTitleOptions.y||0)});}
axis.isDirty=false;}
function removePlotBandOrLine(id){var i=plotLinesAndBands.length;while(i--){if(plotLinesAndBands[i].id==id){plotLinesAndBands[i].destroy();}}}
function redraw(){if(tracker.resetTracker){tracker.resetTracker();}
render();each(plotLinesAndBands,function(plotLine){plotLine.render();});each(associatedSeries,function(series){series.isDirty=true;});}
function setCategories(newCategories,doRedraw){axis.categories=categories=newCategories;each(associatedSeries,function(series){series.translate();series.setTooltipPoints(true);});axis.isDirty=true;if(pick(doRedraw,true)){chart.redraw();}}
if(inverted&&isXAxis&&reversed===UNDEFINED){reversed=true;}
extend(axis,{addPlotBand:addPlotBandOrLine,addPlotLine:addPlotBandOrLine,adjustTickAmount:adjustTickAmount,categories:categories,getExtremes:getExtremes,getPlotLinePath:getPlotLinePath,getThreshold:getThreshold,isXAxis:isXAxis,options:options,plotLinesAndBands:plotLinesAndBands,getOffset:getOffset,render:render,setCategories:setCategories,setExtremes:setExtremes,setScale:setScale,setTickPositions:setTickPositions,translate:translate,redraw:redraw,removePlotBand:removePlotBandOrLine,removePlotLine:removePlotBandOrLine,reversed:reversed,stacks:stacks});for(eventType in events){addEvent(axis,eventType,events[eventType]);}
setScale();}
function Toolbar(chart){var buttons={};function add(id,text,title,fn){if(!buttons[id]){var button=renderer.text(text,0,0).css(options.toolbar.itemStyle).align({align:'right',x:-marginRight-20,y:plotTop+30}).on('click',fn).attr({align:'right',zIndex:20}).add();buttons[id]=button;}}
function remove(id){discardElement(buttons[id].element);buttons[id]=null;}
return{add:add,remove:remove};}
function Tooltip(options){var currentSeries,borderWidth=options.borderWidth,crosshairsOptions=options.crosshairs,crosshairs=[],style=options.style,shared=options.shared,padding=pInt(style.padding),boxOffLeft=borderWidth+padding,tooltipIsHidden=true,boxWidth,boxHeight,currentX=0,currentY=0;style.padding=0;var group=renderer.g('tooltip').attr({zIndex:8}).add(),box=renderer.rect(boxOffLeft,boxOffLeft,0,0,options.borderRadius,borderWidth).attr({fill:options.backgroundColor,'stroke-width':borderWidth}).add(group).shadow(options.shadow),label=renderer.text('',padding+boxOffLeft,pInt(style.fontSize)+padding+boxOffLeft).attr({zIndex:1}).css(style).add(group);group.hide();function defaultFormatter(){var pThis=this,items=pThis.points||splat(pThis),xAxis=items[0].series.xAxis,x=pThis.x,isDateTime=xAxis&&xAxis.options.type=='datetime',useHeader=isString(x)||isDateTime,series,s;s=useHeader?['<span style="font-size: 10px">',(isDateTime?dateFormat('%A, %b %e, %Y',x):x),'</span><br/>']:[];each(items,function(item){s.push(item.point.tooltipFormatter(useHeader));});return s.join('');}
function move(finalX,finalY){currentX=tooltipIsHidden?finalX:(2*currentX+finalX)/3;currentY=tooltipIsHidden?finalY:(currentY+finalY)/2;group.translate(currentX,currentY);if(mathAbs(finalX-currentX)>1||mathAbs(finalY-currentY)>1){tooltipTick=function(){move(finalX,finalY);};}else{tooltipTick=null;}}
function hide(){if(!tooltipIsHidden){var hoverPoints=chart.hoverPoints;group.hide();each(crosshairs,function(crosshair){if(crosshair){crosshair.hide();}});if(hoverPoints){each(hoverPoints,function(point){point.setState();});}
chart.hoverPoints=null;tooltipIsHidden=true;}}
function refresh(point){var x,y,boxX,boxY,show,bBox,plotX,plotY=0,textConfig={},text,pointConfig=[],tooltipPos=point.tooltipPos,formatter=options.formatter||defaultFormatter,hoverPoints=chart.hoverPoints,getConfig=function(point){return{series:point.series,point:point,x:point.category,y:point.y,percentage:point.percentage,total:point.total||point.stackTotal};};if(shared){if(hoverPoints){each(hoverPoints,function(point){point.setState();});}
chart.hoverPoints=point;each(point,function(item,i){item.setState(HOVER_STATE);plotY+=item.plotY;pointConfig.push(getConfig(item));});plotX=point[0].plotX;plotY=mathRound(plotY)/point.length;textConfig={x:point[0].category};textConfig.points=pointConfig;point=point[0];}else{textConfig=getConfig(point);}
text=formatter.call(textConfig);currentSeries=point.series;plotX=shared?plotX:point.plotX;plotY=shared?plotY:point.plotY;x=mathRound(tooltipPos?tooltipPos[0]:(inverted?plotWidth-plotY:plotX));y=mathRound(tooltipPos?tooltipPos[1]:(inverted?plotHeight-plotX:plotY));show=shared||!point.series.isCartesian||isInsidePlot(x,y);if(text===false||!show){hide();}else{if(tooltipIsHidden){group.show();tooltipIsHidden=false;}
label.attr({text:text});bBox=label.getBBox();boxWidth=bBox.width+2*padding;boxHeight=bBox.height+2*padding;box.attr({width:boxWidth,height:boxHeight,stroke:options.borderColor||point.color||currentSeries.color||'#606060'});boxX=x-boxWidth+plotLeft-25;boxY=y-boxHeight+plotTop+10;if(boxX<7){boxX=7;boxY-=30;}
if(boxY<5){boxY=5;}else if(boxY+boxHeight>chartHeight){boxY=chartHeight-boxHeight-5;}
move(mathRound(boxX-boxOffLeft),mathRound(boxY-boxOffLeft));}
if(crosshairsOptions){crosshairsOptions=splat(crosshairsOptions);var path,i=crosshairsOptions.length,attribs,axis;while(i--){if(crosshairsOptions[i]&&(axis=point.series[i?'yAxis':'xAxis'])){path=axis.getPlotLinePath(point[i?'y':'x'],1);if(crosshairs[i]){crosshairs[i].attr({d:path,visibility:VISIBLE});}else{attribs={'stroke-width':crosshairsOptions[i].width||1,stroke:crosshairsOptions[i].color||'#C0C0C0',zIndex:2};if(crosshairsOptions[i].dashStyle){attribs.dashstyle=crosshairsOptions[i].dashStyle;}
crosshairs[i]=renderer.path(path).attr(attribs).add();}}}}}
return{shared:shared,refresh:refresh,hide:hide};}
function MouseTracker(chart,options){var mouseDownX,mouseDownY,hasDragged,selectionMarker,zoomType=optionsChart.zoomType,zoomX=/x/.test(zoomType),zoomY=/y/.test(zoomType),zoomHor=zoomX&&!inverted||zoomY&&inverted,zoomVert=zoomY&&!inverted||zoomX&&inverted;function normalizeMouseEvent(e){var ePos;e=e||win.event;if(!e.target){e.target=e.srcElement;}
ePos=e.touches?e.touches.item(0):e;if(e.type!='mousemove'||win.opera){chartPosition=getPosition(container);}
if(isIE){e.chartX=e.x;e.chartY=e.y;}else{if(ePos.layerX===UNDEFINED){e.chartX=ePos.pageX-chartPosition.left;e.chartY=ePos.pageY-chartPosition.top;}else{e.chartX=e.layerX;e.chartY=e.layerY;}}
return e;}
function getMouseCoordinates(e){var coordinates={xAxis:[],yAxis:[]};each(axes,function(axis,i){var translate=axis.translate,isXAxis=axis.isXAxis,isHorizontal=inverted?!isXAxis:isXAxis;coordinates[isXAxis?'xAxis':'yAxis'].push({axis:axis,value:translate(isHorizontal?e.chartX-plotLeft:plotHeight-e.chartY+plotTop,true)});});return coordinates;}
function onmousemove(e){var point,points,hoverPoint=chart.hoverPoint,hoverSeries=chart.hoverSeries,i,j,distance=chartWidth,index=inverted?e.chartY:e.chartX-plotLeft;if(tooltip&&options.shared){points=[];i=series.length;for(j=0;j<i;j++){if(series[j].visible&&series[j].tooltipPoints.length){point=series[j].tooltipPoints[index];point._dist=mathAbs(index-point.plotX);distance=mathMin(distance,point._dist);points.push(point);}}
i=points.length;while(i--){if(points[i]._dist>distance){points.splice(i,1);}}
if(points.length&&(points[0].plotX!=hoverX)){tooltip.refresh(points);hoverX=points[0].plotX;}}
if(hoverSeries&&hoverSeries.tracker){point=hoverSeries.tooltipPoints[index];if(point&&point!=hoverPoint){point.onMouseOver();}}}
function resetTracker(){var hoverSeries=chart.hoverSeries,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut();}
if(hoverSeries){hoverSeries.onMouseOut();}
if(tooltip){tooltip.hide();}
hoverX=null;}
function drop(){if(selectionMarker){var selectionData={xAxis:[],yAxis:[]},selectionBox=selectionMarker.getBBox(),selectionLeft=selectionBox.x-plotLeft,selectionTop=selectionBox.y-plotTop;if(hasDragged){each(axes,function(axis,i){var translate=axis.translate,isXAxis=axis.isXAxis,isHorizontal=inverted?!isXAxis:isXAxis,selectionMin=translate(isHorizontal?selectionLeft:plotHeight-selectionTop-selectionBox.height,true),selectionMax=translate(isHorizontal?selectionLeft+selectionBox.width:plotHeight-selectionTop,true);selectionData[isXAxis?'xAxis':'yAxis'].push({axis:axis,min:mathMin(selectionMin,selectionMax),max:mathMax(selectionMin,selectionMax)});});fireEvent(chart,'selection',selectionData,zoom);}
selectionMarker=selectionMarker.destroy();}
chart.mouseIsDown=mouseIsDown=hasDragged=false;removeEvent(doc,hasTouch?'touchend':'mouseup',drop);}
function setDOMEvents(){var lastWasOutsidePlot=true;container.onmousedown=function(e){e=normalizeMouseEvent(e);chart.mouseIsDown=mouseIsDown=true;mouseDownX=e.chartX;mouseDownY=e.chartY;addEvent(doc,hasTouch?'touchend':'mouseup',drop);};var mouseMove=function(e){if(e&&e.touches&&e.touches.length>1){return;}
e=normalizeMouseEvent(e);if(!hasTouch){e.returnValue=false;}
var chartX=e.chartX,chartY=e.chartY,isOutsidePlot=!isInsidePlot(chartX-plotLeft,chartY-plotTop);if(hasTouch&&e.type=='touchstart'){if(attr(e.target,'isTracker')){if(!chart.runTrackerClick){e.preventDefault();}}else if(!runChartClick&&!isOutsidePlot){e.preventDefault();}}
if(isOutsidePlot){if(!lastWasOutsidePlot){resetTracker();}
if(chartX<plotLeft){chartX=plotLeft;}else if(chartX>plotLeft+plotWidth){chartX=plotLeft+plotWidth;}
if(chartY<plotTop){chartY=plotTop;}else if(chartY>plotTop+plotHeight){chartY=plotTop+plotHeight;}}
if(mouseIsDown&&e.type!='touchstart'){if((hasDragged=Math.sqrt(Math.pow(mouseDownX-chartX,2)+
Math.pow(mouseDownY-chartY,2))>10)){if(hasCartesianSeries&&(zoomX||zoomY)&&isInsidePlot(mouseDownX-plotLeft,mouseDownY-plotTop)){if(!selectionMarker){selectionMarker=renderer.rect(plotLeft,plotTop,zoomHor?1:plotWidth,zoomVert?1:plotHeight,0).attr({fill:'rgba(69,114,167,0.25)',zIndex:7}).add();}}
if(selectionMarker&&zoomHor){var xSize=chartX-mouseDownX;selectionMarker.attr({width:mathAbs(xSize),x:(xSize>0?0:xSize)+mouseDownX});}
if(selectionMarker&&zoomVert){var ySize=chartY-mouseDownY;selectionMarker.attr({height:mathAbs(ySize),y:(ySize>0?0:ySize)+mouseDownY});}}}else if(!isOutsidePlot){onmousemove(e);}
lastWasOutsidePlot=isOutsidePlot;return isOutsidePlot||!hasCartesianSeries;};container.onmousemove=mouseMove;addEvent(container,'mouseleave',resetTracker);container.ontouchstart=function(e){if(zoomX||zoomY){container.onmousedown(e);}
mouseMove(e);};container.ontouchmove=mouseMove;container.ontouchend=function(){if(hasDragged){resetTracker();}};container.onclick=function(e){var hoverPoint=chart.hoverPoint;e=normalizeMouseEvent(e);e.cancelBubble=true;if(!hasDragged){if(hoverPoint&&attr(e.target,'isTracker')){var plotX=hoverPoint.plotX,plotY=hoverPoint.plotY;extend(hoverPoint,{pageX:chartPosition.left+plotLeft+
(inverted?plotWidth-plotY:plotX),pageY:chartPosition.top+plotTop+
(inverted?plotHeight-plotX:plotY)});fireEvent(hoverPoint.series,'click',extend(e,{point:hoverPoint}));hoverPoint.firePointEvent('click',e);}else{extend(e,getMouseCoordinates(e));if(isInsidePlot(e.chartX-plotLeft,e.chartY-plotTop)){fireEvent(chart,'click',e);}}}
hasDragged=false;};}
placeTrackerGroup=function(){if(!trackerGroup){chart.trackerGroup=trackerGroup=renderer.g('tracker').attr({zIndex:9}).add();}else{trackerGroup.translate(plotLeft,plotTop);if(inverted){trackerGroup.attr({width:chart.plotWidth,height:chart.plotHeight}).invert();}}};placeTrackerGroup();if(options.enabled){chart.tooltip=tooltip=Tooltip(options);}
setDOMEvents();tooltipInterval=setInterval(function(){if(tooltipTick){tooltipTick();}},32);extend(this,{zoomX:zoomX,zoomY:zoomY,resetTracker:resetTracker});}
var Legend=function(chart){var options=chart.options.legend;if(!options.enabled){return;}
var horizontal=options.layout=='horizontal',symbolWidth=options.symbolWidth,symbolPadding=options.symbolPadding,allItems,style=options.style,itemStyle=options.itemStyle,itemHoverStyle=options.itemHoverStyle,itemHiddenStyle=options.itemHiddenStyle,padding=pInt(style.padding),rightPadding=20,y=18,initialItemX=4+padding+symbolWidth+symbolPadding,itemX,itemY,lastItemY,itemHeight=0,box,legendBorderWidth=options.borderWidth,legendBackgroundColor=options.backgroundColor,legendGroup,offsetWidth,widthOption=options.width,series=chart.series,reversedLegend=options.reversed;function colorizeItem(item,visible){var legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,hiddenColor=itemHiddenStyle.color,textColor=visible?options.itemStyle.color:hiddenColor,symbolColor=visible?item.color:hiddenColor;if(legendItem){legendItem.css({fill:textColor});}
if(legendLine){legendLine.attr({stroke:symbolColor});}
if(legendSymbol){legendSymbol.attr({stroke:symbolColor,fill:symbolColor});}}
function positionItem(item,itemX,itemY){var legendItem=item.legendItem,legendLine=item.legendLine,legendSymbol=item.legendSymbol,checkbox=item.checkbox;if(legendItem){legendItem.attr({x:itemX,y:itemY});}
if(legendLine){legendLine.translate(itemX,itemY-4);}
if(legendSymbol){legendSymbol.attr({x:itemX+legendSymbol.xOff,y:itemY+legendSymbol.yOff});}
if(checkbox){checkbox.x=itemX;checkbox.y=itemY;}}
function destroyItem(item){var checkbox=item.checkbox;each(['legendItem','legendLine','legendSymbol'],function(key){if(item[key]){item[key].destroy();}});if(checkbox){discardElement(item.checkbox);}}
function positionCheckboxes(){each(allItems,function(item){var checkbox=item.checkbox;if(checkbox){css(checkbox,{left:(legendGroup.attr('translateX')+item.legendItemWidth+checkbox.x-40)+PX,top:(legendGroup.attr('translateY')+checkbox.y-11)+PX});}});}
function renderItem(item){var bBox,itemWidth,legendSymbol,symbolX,symbolY,attribs,simpleSymbol,li=item.legendItem,series=item.series||item,i=allItems.length;if(!li){simpleSymbol=/^(bar|pie|area|column)$/.test(series.type);item.legendItem=li=renderer.text(options.labelFormatter.call(item),0,0).css(item.visible?itemStyle:itemHiddenStyle).on('mouseover',function(){item.setState(HOVER_STATE);li.css(itemHoverStyle);}).on('mouseout',function(){li.css(item.visible?itemStyle:itemHiddenStyle);item.setState();}).on('click',function(event){var strLegendItemClick='legendItemClick',fnLegendItemClick=function(){item.setVisible();};if(item.firePointEvent){item.firePointEvent(strLegendItemClick,null,fnLegendItemClick);}else{fireEvent(item,strLegendItemClick,null,fnLegendItemClick);}}).attr({zIndex:2}).add(legendGroup);if(!simpleSymbol&&item.options&&item.options.lineWidth){var itemOptions=item.options;attribs={'stroke-width':itemOptions.lineWidth,zIndex:2};if(itemOptions.dashStyle){attribs.dashstyle=itemOptions.dashStyle;}
item.legendLine=renderer.path([M,-symbolWidth-symbolPadding,0,L,-symbolPadding,0]).attr(attribs).add(legendGroup);}
if(simpleSymbol){legendSymbol=renderer.rect((symbolX=-symbolWidth-symbolPadding),(symbolY=-11),symbolWidth,12,2).attr({'stroke-width':0,zIndex:3}).add(legendGroup);}
else if(item.options&&item.options.marker&&item.options.marker.enabled){legendSymbol=renderer.symbol(item.symbol,(symbolX=-symbolWidth/2-symbolPadding),(symbolY=-4),item.options.marker.radius).attr(item.pointAttr[NORMAL_STATE]).attr({zIndex:3}).add(legendGroup);}
if(legendSymbol){legendSymbol.xOff=symbolX;legendSymbol.yOff=symbolY;}
item.legendSymbol=legendSymbol;colorizeItem(item,item.visible);if(item.options&&item.options.showCheckbox){item.checkbox=createElement('input',{type:'checkbox',checked:item.selected,defaultChecked:item.selected},options.itemCheckboxStyle,container);addEvent(item.checkbox,'click',function(event){var target=event.target;fireEvent(item,'checkboxClick',{checked:target.checked},function(){item.select();});});}}
bBox=li.getBBox();itemWidth=item.legendItemWidth=options.itemWidth||symbolWidth+symbolPadding+bBox.width+rightPadding;itemHeight=bBox.height;if(horizontal&&itemX-initialItemX+itemWidth>(widthOption||(chartWidth-2*padding-initialItemX))){itemX=initialItemX;itemY+=itemHeight;}
lastItemY=itemY;positionItem(item,itemX,itemY);if(horizontal){itemX+=itemWidth;}else{itemY+=itemHeight;}
offsetWidth=widthOption||mathMax(horizontal?itemX-initialItemX:itemWidth,offsetWidth);allItems.push(item);}
function renderLegend(){itemX=initialItemX;itemY=y;offsetWidth=0;lastItemY=0;allItems=[];if(!legendGroup){legendGroup=renderer.g('legend').attr({zIndex:7}).add();}
if(reversedLegend){series.reverse();}
each(series,function(serie){if(!serie.options.showInLegend){return;}
var items=(serie.options.legendType=='point')?serie.data:[serie];each(items,renderItem);});if(reversedLegend){series.reverse();}
legendWidth=widthOption||offsetWidth;legendHeight=lastItemY-y+itemHeight;if(legendBorderWidth||legendBackgroundColor){legendWidth+=2*padding;legendHeight+=2*padding;if(!box){box=renderer.rect(0,0,legendWidth,legendHeight,options.borderRadius,legendBorderWidth||0).attr({stroke:options.borderColor,'stroke-width':legendBorderWidth||0,fill:legendBackgroundColor||NONE}).add(legendGroup).shadow(options.shadow);}else if(legendWidth>0&&legendHeight>0){box.animate(box.crisp(null,null,null,legendWidth,legendHeight));}
box[allItems.length?'show':'hide']();}
var props=['left','right','top','bottom'],prop,i=4;while(i--){prop=props[i];if(style[prop]&&style[prop]!='auto'){options[i<2?'align':'verticalAlign']=prop;options[i<2?'x':'y']=pInt(style[prop])*(i%2?-1:1);}}
legendGroup.align(extend(options,{width:legendWidth,height:legendHeight}),true,spacingBox);if(!isResizing){positionCheckboxes();}}
renderLegend();addEvent(chart,'endResize',positionCheckboxes);return{colorizeItem:colorizeItem,destroyItem:destroyItem,renderLegend:renderLegend};};function initSeries(options){var type=options.type||optionsChart.type||optionsChart.defaultSeriesType,typeClass=seriesTypes[type],serie,hasRendered=chart.hasRendered;if(hasRendered){if(inverted&&type=='column'){typeClass=seriesTypes.bar;}else if(!inverted&&type=='bar'){typeClass=seriesTypes.column;}}
serie=new typeClass();serie.init(chart,options);if(!hasRendered&&serie.inverted){inverted=true;}
if(serie.isCartesian){hasCartesianSeries=serie.isCartesian;}
series.push(serie);return serie;}
function addSeries(options,redraw,animation){var series;if(options){setAnimation(animation,chart);redraw=pick(redraw,true);fireEvent(chart,'addSeries',{options:options},function(){series=initSeries(options);series.isDirty=true;chart.isDirtyLegend=true;if(redraw){chart.redraw();}});}
return series;}
isInsidePlot=function(x,y){return x>=0&&x<=plotWidth&&y>=0&&y<=plotHeight;};function adjustTickAmounts(){if(optionsChart.alignTicks!==false){each(axes,function(axis){axis.adjustTickAmount();});}
maxTicks=null;}
function redraw(animation){var redrawLegend=chart.isDirtyLegend,hasStackedSeries,isDirtyBox=chart.isDirtyBox,seriesLength=series.length,i=seriesLength,clipRect=chart.clipRect,serie;setAnimation(animation,chart);while(i--){serie=series[i];if(serie.isDirty&&serie.options.stacking){hasStackedSeries=true;break;}}
if(hasStackedSeries){i=seriesLength;while(i--){serie=series[i];if(serie.options.stacking){serie.isDirty=true;}}}
each(series,function(serie){if(serie.isDirty){serie.cleanData();serie.getSegments();if(serie.options.legendType=='point'){redrawLegend=true;}}});if(redrawLegend&&legend.renderLegend){legend.renderLegend();chart.isDirtyLegend=false;}
if(hasCartesianSeries){if(!isResizing){maxTicks=null;each(axes,function(axis){axis.setScale();});}
adjustTickAmounts();getMargins();each(axes,function(axis){if(axis.isDirty||isDirtyBox){axis.redraw();isDirtyBox=true;}});}
if(isDirtyBox){drawChartBox();placeTrackerGroup();if(clipRect){stop(clipRect);clipRect.animate({width:chart.plotSizeX,height:chart.plotSizeY});}}
each(series,function(serie){if(serie.isDirty&&serie.visible&&(!serie.isCartesian||serie.xAxis)){serie.redraw();}});if(tracker&&tracker.resetTracker){tracker.resetTracker();}
fireEvent(chart,'redraw');}
function showLoading(str){var loadingOptions=options.loading;if(!loadingDiv){loadingDiv=createElement(DIV,{className:'highcharts-loading'},extend(loadingOptions.style,{left:plotLeft+PX,top:plotTop+PX,width:plotWidth+PX,height:plotHeight+PX,zIndex:10,display:NONE}),container);loadingSpan=createElement('span',null,loadingOptions.labelStyle,loadingDiv);}
loadingSpan.innerHTML=str||options.lang.loading;if(!loadingShown){css(loadingDiv,{opacity:0,display:''});animate(loadingDiv,{opacity:loadingOptions.style.opacity},{duration:loadingOptions.showDuration});loadingShown=true;}}
function hideLoading(){animate(loadingDiv,{opacity:0},{duration:options.loading.hideDuration,complete:function(){css(loadingDiv,{display:NONE});}});loadingShown=false;}
function get(id){var i,j,data;for(i=0;i<axes.length;i++){if(axes[i].options.id==id){return axes[i];}}
for(i=0;i<series.length;i++){if(series[i].options.id==id){return series[i];}}
for(i=0;i<series.length;i++){data=series[i].data;for(j=0;j<data.length;j++){if(data[j].id==id){return data[j];}}}
return null;}
function getAxes(){var xAxisOptions=options.xAxis||{},yAxisOptions=options.yAxis||{},axis;xAxisOptions=splat(xAxisOptions);each(xAxisOptions,function(axis,i){axis.index=i;axis.isX=true;});yAxisOptions=splat(yAxisOptions);each(yAxisOptions,function(axis,i){axis.index=i;});axes=xAxisOptions.concat(yAxisOptions);chart.xAxis=[];chart.yAxis=[];axes=map(axes,function(axisOptions){axis=new Axis(chart,axisOptions);chart[axis.isXAxis?'xAxis':'yAxis'].push(axis);return axis;});adjustTickAmounts();}
function getSelectedPoints(){var points=[];each(series,function(serie){points=points.concat(grep(serie.data,function(point){return point.selected;}));});return points;}
function getSelectedSeries(){return grep(series,function(serie){return serie.selected;});}
zoomOut=function(){fireEvent(chart,'selection',{resetSelection:true},zoom);chart.toolbar.remove('zoom');};zoom=function(event){var lang=defaultOptions.lang,animate=chart.pointCount<100;chart.toolbar.add('zoom',lang.resetZoom,lang.resetZoomTitle,zoomOut);if(!event||event.resetSelection){each(axes,function(axis){axis.setExtremes(null,null,false,animate);});}
else{each(event.xAxis.concat(event.yAxis),function(axisData){var axis=axisData.axis;if(chart.tracker[axis.isXAxis?'zoomX':'zoomY']){axis.setExtremes(axisData.min,axisData.max,false,animate);}});}
redraw();};function setTitle(titleOptions,subtitleOptions){chartTitleOptions=merge(options.title,titleOptions);chartSubtitleOptions=merge(options.subtitle,subtitleOptions);each([['title',titleOptions,chartTitleOptions],['subtitle',subtitleOptions,chartSubtitleOptions]],function(arr){var name=arr[0],title=chart[name],titleOptions=arr[1],chartTitleOptions=arr[2];if(title&&titleOptions){title.destroy();title=null;}
if(chartTitleOptions&&chartTitleOptions.text&&!title){chart[name]=renderer.text(chartTitleOptions.text,0,0).attr({align:chartTitleOptions.align,'class':'highcharts-'+name,zIndex:1}).css(chartTitleOptions.style).add().align(chartTitleOptions,false,spacingBox);}});}
function getChartSize(){containerWidth=(renderToClone||renderTo).offsetWidth;containerHeight=(renderToClone||renderTo).offsetHeight;chart.chartWidth=chartWidth=optionsChart.width||containerWidth||600;chart.chartHeight=chartHeight=optionsChart.height||(containerHeight>19?containerHeight:400);}
function getContainer(){renderTo=optionsChart.renderTo;containerId=PREFIX+idCounter++;if(isString(renderTo)){renderTo=doc.getElementById(renderTo);}
renderTo.innerHTML='';if(!renderTo.offsetWidth){renderToClone=renderTo.cloneNode(0);css(renderToClone,{position:ABSOLUTE,top:'-9999px',display:''});doc.body.appendChild(renderToClone);}
getChartSize();chart.container=container=createElement(DIV,{className:'highcharts-container'+
(optionsChart.className?' '+optionsChart.className:''),id:containerId},extend({position:RELATIVE,overflow:HIDDEN,width:chartWidth+PX,height:chartHeight+PX,textAlign:'left'},optionsChart.style),renderToClone||renderTo);chart.renderer=renderer=optionsChart.forExport?new SVGRenderer(container,chartWidth,chartHeight,true):new Renderer(container,chartWidth,chartHeight);var subPixelFix,rect;if(isFirefox&&container.getBoundingClientRect){subPixelFix=function(){css(container,{left:0,top:0});rect=container.getBoundingClientRect();css(container,{left:(-rect.left%1)+PX,top:(-rect.top%1)+PX});};subPixelFix();addEvent(win,'resize',subPixelFix);addEvent(chart,'destroy',function(){removeEvent(win,'resize',subPixelFix);});}}
getMargins=function(){var legendOptions=options.legend,legendMargin=pick(legendOptions.margin,10),legendX=legendOptions.x,legendY=legendOptions.y,align=legendOptions.align,verticalAlign=legendOptions.verticalAlign,titleOffset;resetMargins();if((chart.title||chart.subtitle)&&!defined(optionsMarginTop)){titleOffset=mathMax(chart.title&&!chartTitleOptions.floating&&!chartTitleOptions.verticalAlign&&chartTitleOptions.y||0,chart.subtitle&&!chartSubtitleOptions.floating&&!chartSubtitleOptions.verticalAlign&&chartSubtitleOptions.y||0);if(titleOffset){plotTop=mathMax(plotTop,titleOffset+pick(chartTitleOptions.margin,15)+spacingTop);}}
if(legendOptions.enabled&&!legendOptions.floating){if(align=='right'){if(!defined(optionsMarginRight)){marginRight=mathMax(marginRight,legendWidth-legendX+legendMargin+spacingRight);}}else if(align=='left'){if(!defined(optionsMarginLeft)){plotLeft=mathMax(plotLeft,legendWidth+legendX+legendMargin+spacingLeft);}}else if(verticalAlign=='top'){if(!defined(optionsMarginTop)){plotTop=mathMax(plotTop,legendHeight+legendY+legendMargin+spacingTop);}}else if(verticalAlign=='bottom'){if(!defined(optionsMarginBottom)){marginBottom=mathMax(marginBottom,legendHeight-legendY+legendMargin+spacingBottom);}}}
if(hasCartesianSeries){each(axes,function(axis){axis.getOffset();});}
if(!defined(optionsMarginLeft)){plotLeft+=axisOffset[3];}
if(!defined(optionsMarginTop)){plotTop+=axisOffset[0];}
if(!defined(optionsMarginBottom)){marginBottom+=axisOffset[2];}
if(!defined(optionsMarginRight)){marginRight+=axisOffset[1];}
setChartSize();};function initReflow(){var reflowTimeout;function reflow(){var width=optionsChart.width||renderTo.offsetWidth,height=optionsChart.height||renderTo.offsetHeight;if(width&&height){if(width!=containerWidth||height!=containerHeight){clearTimeout(reflowTimeout);reflowTimeout=setTimeout(function(){resize(width,height,false);},100);}
containerWidth=width;containerHeight=height;}}
addEvent(window,'resize',reflow);addEvent(chart,'destroy',function(){removeEvent(window,'resize',reflow);});}
resize=function(width,height,animation){var chartTitle=chart.title,chartSubtitle=chart.subtitle;isResizing+=1;setAnimation(animation,chart);oldChartHeight=chartHeight;oldChartWidth=chartWidth;chartWidth=mathRound(width);chartHeight=mathRound(height);css(container,{width:chartWidth+PX,height:chartHeight+PX});renderer.setSize(chartWidth,chartHeight,animation);plotWidth=chartWidth-plotLeft-marginRight;plotHeight=chartHeight-plotTop-marginBottom;maxTicks=null;each(axes,function(axis){axis.isDirty=true;axis.setScale();});each(series,function(serie){serie.isDirty=true;});chart.isDirtyLegend=true;chart.isDirtyBox=true;getMargins();if(chartTitle){chartTitle.align(null,null,spacingBox);}
if(chartSubtitle){chartSubtitle.align(null,null,spacingBox);}
redraw(animation);oldChartHeight=null;fireEvent(chart,'resize');setTimeout(function(){fireEvent(chart,'endResize',null,function(){isResizing-=1;});},globalAnimation&&globalAnimation.duration||500);};setChartSize=function(){chart.plotLeft=plotLeft=mathRound(plotLeft);chart.plotTop=plotTop=mathRound(plotTop);chart.plotWidth=plotWidth=mathRound(chartWidth-plotLeft-marginRight);chart.plotHeight=plotHeight=mathRound(chartHeight-plotTop-marginBottom);chart.plotSizeX=inverted?plotHeight:plotWidth;chart.plotSizeY=inverted?plotWidth:plotHeight;spacingBox={x:spacingLeft,y:spacingTop,width:chartWidth-spacingLeft-spacingRight,height:chartHeight-spacingTop-spacingBottom};};resetMargins=function(){plotTop=pick(optionsMarginTop,spacingTop);marginRight=pick(optionsMarginRight,spacingRight);marginBottom=pick(optionsMarginBottom,spacingBottom);plotLeft=pick(optionsMarginLeft,spacingLeft);axisOffset=[0,0,0,0];};drawChartBox=function(){var chartBorderWidth=optionsChart.borderWidth||0,chartBackgroundColor=optionsChart.backgroundColor,plotBackgroundColor=optionsChart.plotBackgroundColor,plotBackgroundImage=optionsChart.plotBackgroundImage,mgn,plotSize={x:plotLeft,y:plotTop,width:plotWidth,height:plotHeight};mgn=chartBorderWidth+(optionsChart.shadow?8:0);if(chartBorderWidth||chartBackgroundColor){if(!chartBackground){chartBackground=renderer.rect(mgn/2,mgn/2,chartWidth-mgn,chartHeight-mgn,optionsChart.borderRadius,chartBorderWidth).attr({stroke:optionsChart.borderColor,'stroke-width':chartBorderWidth,fill:chartBackgroundColor||NONE}).add().shadow(optionsChart.shadow);}else{chartBackground.animate(chartBackground.crisp(null,null,null,chartWidth-mgn,chartHeight-mgn));}}
if(plotBackgroundColor){if(!plotBackground){plotBackground=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0).attr({fill:plotBackgroundColor}).add().shadow(optionsChart.plotShadow);}else{plotBackground.animate(plotSize);}}
if(plotBackgroundImage){if(!plotBGImage){plotBGImage=renderer.image(plotBackgroundImage,plotLeft,plotTop,plotWidth,plotHeight).add();}else{plotBGImage.animate(plotSize);}}
if(optionsChart.plotBorderWidth){if(!plotBorder){plotBorder=renderer.rect(plotLeft,plotTop,plotWidth,plotHeight,0,optionsChart.plotBorderWidth).attr({stroke:optionsChart.plotBorderColor,'stroke-width':optionsChart.plotBorderWidth,zIndex:4}).add();}else{plotBorder.animate(plotBorder.crisp(null,plotLeft,plotTop,plotWidth,plotHeight));}}
chart.isDirtyBox=false;};function render(){var labels=options.labels,credits=options.credits,creditsHref;setTitle();legend=chart.legend=new Legend(chart);getMargins();each(axes,function(axis){axis.setTickPositions(true);});adjustTickAmounts();getMargins();drawChartBox();if(hasCartesianSeries){each(axes,function(axis){axis.render();});}
if(!chart.seriesGroup){chart.seriesGroup=renderer.g('series-group').attr({zIndex:3}).add();}
each(series,function(serie){serie.translate();serie.setTooltipPoints();serie.render();});if(labels.items){each(labels.items,function(){var style=extend(labels.style,this.style),x=pInt(style.left)+plotLeft,y=pInt(style.top)+plotTop+12;delete style.left;delete style.top;renderer.text(this.html,x,y).attr({zIndex:2}).css(style).add();});}
if(!chart.toolbar){chart.toolbar=Toolbar(chart);}
if(credits.enabled&&!chart.credits){creditsHref=credits.href;renderer.text(credits.text,0,0).on('click',function(){if(creditsHref){location.href=creditsHref;}}).attr({align:credits.position.align,zIndex:8}).css(credits.style).add().align(credits.position);}
placeTrackerGroup();chart.hasRendered=true;if(renderToClone){renderTo.appendChild(container);discardElement(renderToClone);}}
function destroy(){var i=series.length,parentNode=container&&container.parentNode;fireEvent(chart,'destroy');removeEvent(win,'unload',destroy);removeEvent(chart);each(axes,function(axis){removeEvent(axis);});while(i--){series[i].destroy();}
if(container){container.innerHTML='';removeEvent(container);if(parentNode){parentNode.removeChild(container);}
container=null;}
if(renderer){renderer.alignedObjects=null;}
clearInterval(tooltipInterval);for(i in chart){delete chart[i];}}
function firstRender(){var onreadystatechange='onreadystatechange';if(!hasSVG&&win==win.top&&doc.readyState!='complete'){doc.attachEvent(onreadystatechange,function(){doc.detachEvent(onreadystatechange,firstRender);firstRender();});return;}
getContainer();resetMargins();setChartSize();each(options.series||[],function(serieOptions){initSeries(serieOptions);});chart.inverted=inverted=pick(inverted,options.chart.inverted);getAxes();chart.render=render;chart.tracker=tracker=new MouseTracker(chart,options.tooltip);render();fireEvent(chart,'load');if(callback){callback.apply(chart,[chart]);}
each(chart.callbacks,function(fn){fn.apply(chart,[chart]);});}
colorCounter=0;symbolCounter=0;addEvent(win,'unload',destroy);if(optionsChart.reflow!==false){addEvent(chart,'load',initReflow);}
if(chartEvents){for(eventType in chartEvents){addEvent(chart,eventType,chartEvents[eventType]);}}
chart.options=options;chart.series=series;chart.addSeries=addSeries;chart.animation=pick(optionsChart.animation,true);chart.destroy=destroy;chart.get=get;chart.getSelectedPoints=getSelectedPoints;chart.getSelectedSeries=getSelectedSeries;chart.hideLoading=hideLoading;chart.isInsidePlot=isInsidePlot;chart.redraw=redraw;chart.setSize=resize;chart.setTitle=setTitle;chart.showLoading=showLoading;chart.pointCount=0;firstRender();}
Chart.prototype.callbacks=[];var Point=function(){};Point.prototype={init:function(series,options){var point=this,defaultColors;point.series=series;point.applyOptions(options);point.pointAttr={};if(series.options.colorByPoint){defaultColors=series.chart.options.colors;if(!point.options){point.options={};}
point.color=point.options.color=point.color||defaultColors[colorCounter++];if(colorCounter>=defaultColors.length){colorCounter=0;}}
series.chart.pointCount++;return point;},applyOptions:function(options){var point=this,series=point.series;point.config=options;if(isNumber(options)||options===null){point.y=options;}
else if(isObject(options)&&!isNumber(options.length)){extend(point,options);point.options=options;}
else if(isString(options[0])){point.name=options[0];point.y=options[1];}
else if(isNumber(options[0])){point.x=options[0];point.y=options[1];}
if(point.x===UNDEFINED){point.x=series.autoIncrement();}},destroy:function(){var point=this,series=point.series,prop;series.chart.pointCount--;if(point==series.chart.hoverPoint){point.onMouseOut();}
series.chart.hoverPoints=null;removeEvent(point);each(['graphic','tracker','group','dataLabel','connector'],function(prop){if(point[prop]){point[prop].destroy();}});if(point.legendItem){point.series.chart.legend.destroyItem(point);}
for(prop in point){point[prop]=null;}},select:function(selected,accumulate){var point=this,series=point.series,chart=series.chart;point.selected=selected=pick(selected,!point.selected);point.firePointEvent(selected?'select':'unselect');point.setState(selected&&SELECT_STATE);if(!accumulate){each(chart.getSelectedPoints(),function(loopPoint){if(loopPoint.selected&&loopPoint!=point){loopPoint.selected=false;loopPoint.setState(NORMAL_STATE);loopPoint.firePointEvent('unselect');}});}},onMouseOver:function(){var point=this,chart=point.series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint&&hoverPoint!=point){hoverPoint.onMouseOut();}
point.firePointEvent('mouseOver');if(tooltip&&!tooltip.shared){tooltip.refresh(point);}
point.setState(HOVER_STATE);chart.hoverPoint=point;},onMouseOut:function(){var point=this;point.firePointEvent('mouseOut');point.setState();point.series.chart.hoverPoint=null;},tooltipFormatter:function(useHeader){var point=this,series=point.series;return['<span style="color:'+series.color+'">',(point.name||series.name),'</span>: ',(!useHeader?('<b>x = '+(point.name||point.x)+',</b> '):''),'<b>',(!useHeader?'y = ':''),point.y,'</b><br/>'].join('');},getDataLabelText:function(){var point=this;return this.series.options.dataLabels.formatter.call({x:point.x,y:point.y,series:point.series,point:point,percentage:point.percentage,total:point.total||point.stackTotal});},update:function(options,redraw,animation){var point=this,series=point.series,dataLabel=point.dataLabel,graphic=point.graphic,chart=series.chart;redraw=pick(redraw,true);point.firePointEvent('update',{options:options},function(){point.applyOptions(options);if(dataLabel){dataLabel.attr({text:point.getDataLabelText()})}
if(isObject(options)){series.getAttribs();if(graphic){graphic.attr(point.pointAttr[series.state]);}}
series.isDirty=true;if(redraw){chart.redraw(animation);}});},remove:function(redraw,animation){var point=this,series=point.series,chart=series.chart,data=series.data;setAnimation(animation,chart);redraw=pick(redraw,true);point.firePointEvent('remove',null,function(){erase(data,point);point.destroy();series.isDirty=true;if(redraw){chart.redraw();}});},firePointEvent:function(eventType,eventArgs,defaultFunction){var point=this,series=this.series,seriesOptions=series.options;if(seriesOptions.point.events[eventType]||(point.options&&point.options.events&&point.options.events[eventType])){this.importEvents();}
if(eventType=='click'&&seriesOptions.allowPointSelect){defaultFunction=function(event){point.select(null,event.ctrlKey||event.metaKey||event.shiftKey);};}
fireEvent(this,eventType,eventArgs,defaultFunction);},importEvents:function(){if(!this.hasImportedEvents){var point=this,options=merge(point.series.options.point,point.options),events=options.events,eventType;point.events=events;for(eventType in events){addEvent(point,eventType,events[eventType]);}
this.hasImportedEvents=true;}},setState:function(state){var point=this,series=point.series,stateOptions=series.options.states,markerOptions=defaultPlotOptions[series.type].marker&&series.options.marker,normalDisabled=markerOptions&&!markerOptions.enabled,markerStateOptions=markerOptions&&markerOptions.states[state],stateDisabled=markerStateOptions&&markerStateOptions.enabled===false,stateMarkerGraphic=series.stateMarkerGraphic,chart=series.chart,pointAttr=point.pointAttr;if(!state){state=NORMAL_STATE;}
if(state==point.state||(point.selected&&state!=SELECT_STATE)||(stateOptions[state]&&stateOptions[state].enabled===false)||(state&&(stateDisabled||normalDisabled&&!markerStateOptions.enabled))){return;}
if(point.graphic){point.graphic.attr(pointAttr[state]);}
else{if(state){if(!stateMarkerGraphic){series.stateMarkerGraphic=stateMarkerGraphic=chart.renderer.circle(0,0,pointAttr[state].r).attr(pointAttr[state]).add(series.group);}
stateMarkerGraphic.translate(point.plotX,point.plotY);}
if(stateMarkerGraphic){stateMarkerGraphic[state?'show':'hide']();}}
point.state=state;}};var Series=function(){};Series.prototype={isCartesian:true,type:'line',pointClass:Point,pointAttrToOptions:{stroke:'lineColor','stroke-width':'lineWidth',fill:'fillColor',r:'radius'},init:function(chart,options){var series=this,eventType,events,index=chart.series.length;series.chart=chart;options=series.setOptions(options);extend(series,{index:index,options:options,name:options.name||'Series '+(index+1),state:NORMAL_STATE,pointAttr:{},visible:options.visible!==false,selected:options.selected===true});events=options.events;for(eventType in events){addEvent(series,eventType,events[eventType]);}
if((events&&events.click)||(options.point&&options.point.events&&options.point.events.click)||options.allowPointSelect){chart.runTrackerClick=true;}
series.getColor();series.getSymbol();series.setData(options.data,false);},autoIncrement:function(){var series=this,options=series.options,xIncrement=series.xIncrement;xIncrement=pick(xIncrement,options.pointStart,0);series.pointInterval=pick(series.pointInterval,options.pointInterval,1);series.xIncrement=xIncrement+series.pointInterval;return xIncrement;},cleanData:function(){var series=this,chart=series.chart,data=series.data,closestPoints,smallestInterval,chartSmallestInterval=chart.smallestInterval,interval,i;data.sort(function(a,b){return(a.x-b.x);});for(i=data.length-1;i>=0;i--){if(data[i-1]){if(data[i-1].x==data[i].x){data.splice(i-1,1);}}}
for(i=data.length-1;i>=0;i--){if(data[i-1]){interval=data[i].x-data[i-1].x;if(smallestInterval===UNDEFINED||interval<smallestInterval){smallestInterval=interval;closestPoints=i;}}}
if(chartSmallestInterval===UNDEFINED||smallestInterval<chartSmallestInterval){chart.smallestInterval=smallestInterval;}
series.closestPoints=closestPoints;},getSegments:function(){var lastNull=-1,segments=[],data=this.data;each(data,function(point,i){if(point.y===null){if(i>lastNull+1){segments.push(data.slice(lastNull+1,i));}
lastNull=i;}else if(i==data.length-1){segments.push(data.slice(lastNull+1,i+1));}});this.segments=segments;},setOptions:function(itemOptions){var plotOptions=this.chart.options.plotOptions,options=merge(plotOptions[this.type],plotOptions.series,itemOptions);return options;},getColor:function(){var defaultColors=this.chart.options.colors;this.color=this.options.color||defaultColors[colorCounter++]||'#0000ff';if(colorCounter>=defaultColors.length){colorCounter=0;}},getSymbol:function(){var defaultSymbols=this.chart.options.symbols,symbol=this.options.marker.symbol||defaultSymbols[symbolCounter++];this.symbol=symbol;if(symbolCounter>=defaultSymbols.length){symbolCounter=0;}},addPoint:function(options,redraw,shift,animation){var series=this,data=series.data,graph=series.graph,area=series.area,chart=series.chart,point=(new series.pointClass()).init(series,options);setAnimation(animation,chart);if(graph&&shift){graph.shift=shift;}
if(area){area.shift=shift;area.isArea=true;}
redraw=pick(redraw,true);data.push(point);if(shift){data[0].remove(false);}
series.isDirty=true;if(redraw){chart.redraw();}},setData:function(data,redraw){var series=this,oldData=series.data,initialColor=series.initialColor,chart=series.chart,i=oldData&&oldData.length||0;series.xIncrement=null;if(defined(initialColor)){colorCounter=initialColor;}
data=map(splat(data||[]),function(pointOptions){return(new series.pointClass()).init(series,pointOptions);});while(i--){oldData[i].destroy();}
series.data=data;series.cleanData();series.getSegments();series.isDirty=true;chart.isDirtyBox=true;if(pick(redraw,true)){chart.redraw(false);}},remove:function(redraw,animation){var series=this,chart=series.chart;redraw=pick(redraw,true);if(!series.isRemoving){series.isRemoving=true;fireEvent(series,'remove',null,function(){series.destroy();chart.isDirtyLegend=chart.isDirtyBox=true;if(redraw){chart.redraw(animation);}});}
series.isRemoving=false;},translate:function(){var series=this,chart=series.chart,stacking=series.options.stacking,categories=series.xAxis.categories,yAxis=series.yAxis,data=series.data,i=data.length;while(i--){var point=data[i],xValue=point.x,yValue=point.y,yBottom=point.low,stack=yAxis.stacks[(yValue<0?'-':'')+series.stackKey],pointStack,pointStackTotal;point.plotX=series.xAxis.translate(xValue);if(stacking&&series.visible&&stack&&stack[xValue]){pointStack=stack[xValue];pointStackTotal=pointStack.total;pointStack.cum=yBottom=pointStack.cum-yValue;yValue=yBottom+yValue;if(stacking=='percent'){yBottom=pointStackTotal?yBottom*100/pointStackTotal:0;yValue=pointStackTotal?yValue*100/pointStackTotal:0;}
point.percentage=pointStackTotal?point.y*100/pointStackTotal:0;point.stackTotal=pointStackTotal;}
if(defined(yBottom)){point.yBottom=yAxis.translate(yBottom,0,1);}
if(yValue!==null){point.plotY=yAxis.translate(yValue,0,1);}
point.clientX=chart.inverted?chart.plotHeight-point.plotX:point.plotX;point.category=categories&&categories[point.x]!==UNDEFINED?categories[point.x]:point.x;}},setTooltipPoints:function(renew){var series=this,chart=series.chart,inverted=chart.inverted,data=[],plotSize=mathRound((inverted?chart.plotTop:chart.plotLeft)+chart.plotSizeX),low,high,tooltipPoints=[];if(renew){series.tooltipPoints=null;}
each(series.segments,function(segment){data=data.concat(segment);});if(series.xAxis&&series.xAxis.reversed){data=data.reverse();}
each(data,function(point,i){low=data[i-1]?data[i-1].high+1:0;high=point.high=data[i+1]?(mathFloor((point.plotX+(data[i+1]?data[i+1].plotX:plotSize))/2)):plotSize;while(low<=high){tooltipPoints[inverted?plotSize-low++:low++]=point;}});series.tooltipPoints=tooltipPoints;},onMouseOver:function(){var series=this,chart=series.chart,hoverSeries=chart.hoverSeries;if(!hasTouch&&chart.mouseIsDown){return;}
if(hoverSeries&&hoverSeries!=series){hoverSeries.onMouseOut();}
if(series.options.events.mouseOver){fireEvent(series,'mouseOver');}
if(series.tracker){series.tracker.toFront();}
series.setState(HOVER_STATE);chart.hoverSeries=series;},onMouseOut:function(){var series=this,options=series.options,chart=series.chart,tooltip=chart.tooltip,hoverPoint=chart.hoverPoint;if(hoverPoint){hoverPoint.onMouseOut();}
if(series&&options.events.mouseOut){fireEvent(series,'mouseOut');}
if(tooltip&&!options.stickyTracking){tooltip.hide();}
series.setState();chart.hoverSeries=null;},animate:function(init){var series=this,chart=series.chart,clipRect=series.clipRect,animation=series.options.animation;if(animation&&!isObject(animation)){animation={};}
if(init){if(!clipRect.isAnimating){clipRect.attr('width',0);clipRect.isAnimating=true;}}else{clipRect.animate({width:chart.plotSizeX},animation);this.animate=null;}},drawPoints:function(){var series=this,pointAttr,data=series.data,chart=series.chart,plotX,plotY,i,point,radius,graphic;if(series.options.marker.enabled){i=data.length;while(i--){point=data[i];plotX=point.plotX;plotY=point.plotY;graphic=point.graphic;if(plotY!==UNDEFINED&&!isNaN(plotY)){pointAttr=point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE];radius=pointAttr.r;if(graphic){graphic.animate({x:plotX,y:plotY,r:radius});}else{point.graphic=chart.renderer.symbol(pick(point.marker&&point.marker.symbol,series.symbol),plotX,plotY,radius).attr(pointAttr).add(series.group);}}}}},convertAttribs:function(options,base1,base2,base3){var conversion=this.pointAttrToOptions,attr,option,obj={};options=options||{};base1=base1||{};base2=base2||{};base3=base3||{};for(attr in conversion){option=conversion[attr];obj[attr]=pick(options[option],base1[attr],base2[attr],base3[attr]);}
return obj;},getAttribs:function(){var series=this,normalOptions=defaultPlotOptions[series.type].marker?series.options.marker:series.options,stateOptions=normalOptions.states,stateOptionsHover=stateOptions[HOVER_STATE],pointStateOptionsHover,seriesColor=series.color,normalDefaults={stroke:seriesColor,fill:seriesColor},data=series.data,i,point,seriesPointAttr=[],pointAttr,pointAttrToOptions=series.pointAttrToOptions,hasPointSpecificOptions;if(series.options.marker){stateOptionsHover.radius=stateOptionsHover.radius||normalOptions.radius+2;stateOptionsHover.lineWidth=stateOptionsHover.lineWidth||normalOptions.lineWidth+1;}else{stateOptionsHover.color=stateOptionsHover.color||Color(stateOptionsHover.color||seriesColor).brighten(stateOptionsHover.brightness).get();}
seriesPointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,normalDefaults);each([HOVER_STATE,SELECT_STATE],function(state){seriesPointAttr[state]=series.convertAttribs(stateOptions[state],seriesPointAttr[NORMAL_STATE]);});series.pointAttr=seriesPointAttr;i=data.length;while(i--){point=data[i];normalOptions=(point.options&&point.options.marker)||point.options;if(normalOptions&&normalOptions.enabled===false){normalOptions.radius=0;}
hasPointSpecificOptions=false;if(point.options){for(var key in pointAttrToOptions){if(defined(normalOptions[pointAttrToOptions[key]])){hasPointSpecificOptions=true;}}}
if(hasPointSpecificOptions){pointAttr=[];stateOptions=normalOptions.states||{};pointStateOptionsHover=stateOptions[HOVER_STATE]=stateOptions[HOVER_STATE]||{};if(!series.options.marker){pointStateOptionsHover.color=Color(pointStateOptionsHover.color||point.options.color).brighten(pointStateOptionsHover.brightness||stateOptionsHover.brightness).get();}
pointAttr[NORMAL_STATE]=series.convertAttribs(normalOptions,seriesPointAttr[NORMAL_STATE]);pointAttr[HOVER_STATE]=series.convertAttribs(stateOptions[HOVER_STATE],seriesPointAttr[HOVER_STATE],pointAttr[NORMAL_STATE]);pointAttr[SELECT_STATE]=series.convertAttribs(stateOptions[SELECT_STATE],seriesPointAttr[SELECT_STATE],pointAttr[NORMAL_STATE]);}else{pointAttr=seriesPointAttr;}
point.pointAttr=pointAttr;}},destroy:function(){var series=this,chart=series.chart,clipRect=series.clipRect,issue134=/\/5[0-9\.]+ (Safari|Mobile)\//.test(userAgent),destroy,prop;removeEvent(series);if(series.legendItem){series.chart.legend.destroyItem(series);}
each(series.data,function(point){point.destroy();});each(['area','graph','dataLabelsGroup','group','tracker'],function(prop){if(series[prop]){destroy=issue134&&prop=='group'?'hide':'destroy';series[prop][destroy]();}});if(chart.hoverSeries==series){chart.hoverSeries=null;}
erase(chart.series,series);for(prop in series){delete series[prop];}},drawDataLabels:function(){if(this.options.dataLabels.enabled){var series=this,x,y,data=series.data,options=series.options.dataLabels,str,dataLabelsGroup=series.dataLabelsGroup,chart=series.chart,inverted=chart.inverted,seriesType=series.type,color;if(!dataLabelsGroup){dataLabelsGroup=series.dataLabelsGroup=chart.renderer.g(PREFIX+'data-labels').attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:5}).translate(chart.plotLeft,chart.plotTop).add();}
color=options.color;if(color=='auto'){color=null;}
options.style.color=pick(color,series.color);each(data,function(point,i){var barX=point.barX,plotX=barX&&barX+point.barW/2||point.plotX||-999,plotY=pick(point.plotY,-999),dataLabel=point.dataLabel,align=options.align;str=point.getDataLabelText();x=(inverted?chart.plotWidth-plotY:plotX)+options.x;y=(inverted?chart.plotHeight-plotX:plotY)+options.y;if(seriesType=='column'){x+={left:-1,right:1}[align]*point.barW/2||0;}
if(dataLabel){dataLabel.animate({x:x,y:y});}else if(defined(str)){dataLabel=point.dataLabel=chart.renderer.text(str,x,y).attr({align:align,rotation:options.rotation,zIndex:1}).css(options.style).add(dataLabelsGroup);}
if(inverted&&!options.y){dataLabel.attr({y:y+parseInt(dataLabel.styles.lineHeight)*0.9-dataLabel.getBBox().height/2});}});}},drawGraph:function(state){var series=this,options=series.options,chart=series.chart,graph=series.graph,graphPath=[],fillColor,area=series.area,group=series.group,color=options.lineColor||series.color,lineWidth=options.lineWidth,dashStyle=options.dashStyle,segmentPath,renderer=chart.renderer,translatedThreshold=series.yAxis.getThreshold(options.threshold||0),useArea=/^area/.test(series.type),singlePoints=[],areaPath=[],attribs;each(series.segments,function(segment){segmentPath=[];each(segment,function(point,i){if(series.getPointSpline){segmentPath.push.apply(segmentPath,series.getPointSpline(segment,point,i));}else{segmentPath.push(i?L:M);if(i&&options.step){var lastPoint=segment[i-1];segmentPath.push(point.plotX,lastPoint.plotY);}
segmentPath.push(point.plotX,point.plotY);}});if(segment.length>1){graphPath=graphPath.concat(segmentPath);}else{singlePoints.push(segment[0]);}
if(useArea){var areaSegmentPath=[],i,segLength=segmentPath.length;for(i=0;i<segLength;i++){areaSegmentPath.push(segmentPath[i]);}
if(segLength==3){areaSegmentPath.push(L,segmentPath[1],segmentPath[2]);}
if(options.stacking&&series.type!='areaspline'){for(i=segment.length-1;i>=0;i--){areaSegmentPath.push(segment[i].plotX,segment[i].yBottom);}}else{areaSegmentPath.push(L,segment[segment.length-1].plotX,translatedThreshold,L,segment[0].plotX,translatedThreshold);}
areaPath=areaPath.concat(areaSegmentPath);}});series.graphPath=graphPath;series.singlePoints=singlePoints;if(useArea){fillColor=pick(options.fillColor,Color(series.color).setOpacity(options.fillOpacity||0.75).get());if(area){area.animate({d:areaPath});}else{series.area=series.chart.renderer.path(areaPath).attr({fill:fillColor}).add(group);}}
if(graph){graph.animate({d:graphPath});}else{if(lineWidth){attribs={'stroke':color,'stroke-width':lineWidth};if(dashStyle){attribs.dashstyle=dashStyle;}
series.graph=renderer.path(graphPath).attr(attribs).add(group).shadow(options.shadow);}}},render:function(){var series=this,chart=series.chart,group,setInvert,options=series.options,animation=options.animation,doAnimation=animation&&series.animate,duration=doAnimation?animation&&animation.duration||500:0,clipRect=series.clipRect,renderer=chart.renderer;if(!clipRect){clipRect=series.clipRect=!chart.hasRendered&&chart.clipRect?chart.clipRect:renderer.clipRect(0,0,chart.plotSizeX,chart.plotSizeY);if(!chart.clipRect){chart.clipRect=clipRect;}}
if(!series.group){group=series.group=renderer.g('series');if(chart.inverted){setInvert=function(){group.attr({width:chart.plotWidth,height:chart.plotHeight}).invert();};setInvert();addEvent(chart,'resize',setInvert);}
group.clip(series.clipRect).attr({visibility:series.visible?VISIBLE:HIDDEN,zIndex:options.zIndex}).translate(chart.plotLeft,chart.plotTop).add(chart.seriesGroup);}
series.drawDataLabels();if(doAnimation){series.animate(true);}
series.getAttribs();if(series.drawGraph){series.drawGraph();}
series.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker();}
if(doAnimation){series.animate();}
setTimeout(function(){clipRect.isAnimating=false;group=series.group;if(group&&clipRect!=chart.clipRect&&clipRect.renderer){group.clip((series.clipRect=chart.clipRect));clipRect.destroy();}},duration);series.isDirty=false;},redraw:function(){var series=this,chart=series.chart,clipRect=series.clipRect,group=series.group;if(group){if(chart.inverted){group.attr({width:chart.plotWidth,height:chart.plotHeight});}
group.animate({translateX:chart.plotLeft,translateY:chart.plotTop});}
series.translate();series.setTooltipPoints(true);series.render();},setState:function(state){var series=this,options=series.options,graph=series.graph,stateOptions=options.states,lineWidth=options.lineWidth;state=state||NORMAL_STATE;if(series.state!=state){series.state=state;if(stateOptions[state]&&stateOptions[state].enabled===false){return;}
if(state){lineWidth=stateOptions[state].lineWidth||lineWidth+1;}
if(graph&&!graph.dashstyle){graph.attr({'stroke-width':lineWidth},state?0:500);}}},setVisible:function(vis,redraw){var series=this,chart=series.chart,legendItem=series.legendItem,seriesGroup=series.group,seriesTracker=series.tracker,dataLabelsGroup=series.dataLabelsGroup,showOrHide,i,data=series.data,point,ignoreHiddenSeries=chart.options.chart.ignoreHiddenSeries,oldVisibility=series.visible;series.visible=vis=vis===UNDEFINED?!oldVisibility:vis;showOrHide=vis?'show':'hide';if(seriesGroup){seriesGroup[showOrHide]();}
if(seriesTracker){seriesTracker[showOrHide]();}else{i=data.length;while(i--){point=data[i];if(point.tracker){point.tracker[showOrHide]();}}}
if(dataLabelsGroup){dataLabelsGroup[showOrHide]();}
if(legendItem){chart.legend.colorizeItem(series,vis);}
series.isDirty=true;if(series.options.stacking){each(chart.series,function(otherSeries){if(otherSeries.options.stacking&&otherSeries.visible){otherSeries.isDirty=true;}});}
if(ignoreHiddenSeries){chart.isDirtyBox=true;}
if(redraw!==false){chart.redraw();}
fireEvent(series,showOrHide);},show:function(){this.setVisible(true);},hide:function(){this.setVisible(false);},select:function(selected){var series=this;series.selected=selected=(selected===UNDEFINED)?!series.selected:selected;if(series.checkbox){series.checkbox.checked=selected;}
fireEvent(series,selected?'select':'unselect');},drawTracker:function(){var series=this,options=series.options,trackerPath=[].concat(series.graphPath),trackerPathLength=trackerPath.length,chart=series.chart,snap=chart.options.tooltip.snap,tracker=series.tracker,cursor=options.cursor,css=cursor&&{cursor:cursor},singlePoints=series.singlePoints,singlePoint,i;if(trackerPathLength){i=trackerPathLength+1;while(i--){if(trackerPath[i]==M){trackerPath.splice(i+1,0,trackerPath[i+1]-snap,trackerPath[i+2],L);}
if((i&&trackerPath[i]==M)||i==trackerPathLength){trackerPath.splice(i,0,L,trackerPath[i-2]+snap,trackerPath[i-1]);}}}
for(i=0;i<singlePoints.length;i++){singlePoint=singlePoints[i];trackerPath.push(M,singlePoint.plotX-snap,singlePoint.plotY,L,singlePoint.plotX+snap,singlePoint.plotY);}
if(tracker){tracker.attr({d:trackerPath});}else{series.tracker=chart.renderer.path(trackerPath).attr({isTracker:true,stroke:TRACKER_FILL,fill:NONE,'stroke-width':options.lineWidth+2*snap,visibility:series.visible?VISIBLE:HIDDEN,zIndex:1}).on(hasTouch?'touchstart':'mouseover',function(){if(chart.hoverSeries!=series){series.onMouseOver();}}).on('mouseout',function(){if(!options.stickyTracking){series.onMouseOut();}}).css(css).add(chart.trackerGroup);}}};var LineSeries=extendClass(Series);seriesTypes.line=LineSeries;var AreaSeries=extendClass(Series,{type:'area'});seriesTypes.area=AreaSeries;var SplineSeries=extendClass(Series,{type:'spline',getPointSpline:function(segment,point,i){var smoothing=1.5,denom=smoothing+1,plotX=point.plotX,plotY=point.plotY,lastPoint=segment[i-1],nextPoint=segment[i+1],leftContX,leftContY,rightContX,rightContY,ret;if(i&&i<segment.length-1){var lastX=lastPoint.plotX,lastY=lastPoint.plotY,nextX=nextPoint.plotX,nextY=nextPoint.plotY,correction;leftContX=(smoothing*plotX+lastX)/denom;leftContY=(smoothing*plotY+lastY)/denom;rightContX=(smoothing*plotX+nextX)/denom;rightContY=(smoothing*plotY+nextY)/denom;correction=((rightContY-leftContY)*(rightContX-plotX))/(rightContX-leftContX)+plotY-rightContY;leftContY+=correction;rightContY+=correction;if(leftContY>lastY&&leftContY>plotY){leftContY=mathMax(lastY,plotY);rightContY=2*plotY-leftContY;}else if(leftContY<lastY&&leftContY<plotY){leftContY=mathMin(lastY,plotY);rightContY=2*plotY-leftContY;}
if(rightContY>nextY&&rightContY>plotY){rightContY=mathMax(nextY,plotY);leftContY=2*plotY-rightContY;}else if(rightContY<nextY&&rightContY<plotY){rightContY=mathMin(nextY,plotY);leftContY=2*plotY-rightContY;}
point.rightContX=rightContX;point.rightContY=rightContY;}
if(!i){ret=[M,plotX,plotY];}
else{ret=['C',lastPoint.rightContX||lastPoint.plotX,lastPoint.rightContY||lastPoint.plotY,leftContX||plotX,leftContY||plotY,plotX,plotY];lastPoint.rightContX=lastPoint.rightContY=null;}
return ret;}});seriesTypes.spline=SplineSeries;var AreaSplineSeries=extendClass(SplineSeries,{type:'areaspline'});seriesTypes.areaspline=AreaSplineSeries;var ColumnSeries=extendClass(Series,{type:'column',pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color',r:'borderRadius'},init:function(){Series.prototype.init.apply(this,arguments);var series=this,chart=series.chart;chart.hasColumn=true;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type==series.type){otherSeries.isDirty=true;}});}},translate:function(){var series=this,chart=series.chart,columnCount=0,reversedXAxis=series.xAxis.reversed,categories=series.xAxis.categories,stackGroups={},stackKey,columnIndex;Series.prototype.translate.apply(series);each(chart.series,function(otherSeries){if(otherSeries.type==series.type){if(otherSeries.options.stacking){stackKey=otherSeries.stackKey;if(stackGroups[stackKey]===UNDEFINED){stackGroups[stackKey]=columnCount++;}
columnIndex=stackGroups[stackKey];}else if(otherSeries.visible){columnIndex=columnCount++;}
otherSeries.columnIndex=columnIndex;}});var options=series.options,data=series.data,closestPoints=series.closestPoints,categoryWidth=mathAbs(data[1]?data[closestPoints].plotX-data[closestPoints-1].plotX:chart.plotSizeX/(categories?categories.length:1)),groupPadding=categoryWidth*options.groupPadding,groupWidth=categoryWidth-2*groupPadding,pointOffsetWidth=groupWidth/columnCount,optionPointWidth=options.pointWidth,pointPadding=defined(optionPointWidth)?(pointOffsetWidth-optionPointWidth)/2:pointOffsetWidth*options.pointPadding,pointWidth=mathMax(pick(optionPointWidth,pointOffsetWidth-2*pointPadding),1),colIndex=(reversedXAxis?columnCount-
series.columnIndex:series.columnIndex)||0,pointXOffset=pointPadding+(groupPadding+colIndex*pointOffsetWidth-(categoryWidth/2))*(reversedXAxis?-1:1),threshold=options.threshold||0,translatedThreshold=series.yAxis.getThreshold(threshold),minPointLength=pick(options.minPointLength,5);each(data,function(point){var plotY=point.plotY,yBottom=point.yBottom||translatedThreshold,barX=point.plotX+pointXOffset,barY=mathCeil(mathMin(plotY,yBottom)),barH=mathCeil(mathMax(plotY,yBottom)-barY),trackerY;if(mathAbs(barH)<minPointLength){if(minPointLength){barH=minPointLength;barY=mathAbs(barY-translatedThreshold)>minPointLength?yBottom-minPointLength:translatedThreshold-(plotY<=translatedThreshold?minPointLength:0);}
trackerY=barY-3;}
extend(point,{barX:barX,barY:barY,barW:pointWidth,barH:barH});point.shapeType='rect';point.shapeArgs={x:barX,y:barY,width:pointWidth,height:barH,r:options.borderRadius};point.trackerArgs=defined(trackerY)&&merge(point.shapeArgs,{height:mathMax(6,barH+3),y:trackerY});});},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var series=this,options=series.options,renderer=series.chart.renderer,graphic,shapeArgs;each(series.data,function(point){var plotY=point.plotY;if(plotY!==UNDEFINED&&!isNaN(plotY)){graphic=point.graphic;shapeArgs=point.shapeArgs;if(graphic){stop(graphic);graphic.animate(shapeArgs);}else{point.graphic=renderer[point.shapeType](shapeArgs).attr(point.pointAttr[point.selected?SELECT_STATE:NORMAL_STATE]).add(series.group).shadow(options.shadow);}}});},drawTracker:function(){var series=this,chart=series.chart,renderer=chart.renderer,shapeArgs,tracker,trackerLabel=+new Date(),cursor=series.options.cursor,css=cursor&&{cursor:cursor},rel;each(series.data,function(point){tracker=point.tracker;shapeArgs=point.trackerArgs||point.shapeArgs;if(point.y!==null){if(tracker){tracker.attr(shapeArgs);}else{point.tracker=renderer[point.shapeType](shapeArgs).attr({isTracker:trackerLabel,fill:TRACKER_FILL,visibility:series.visible?VISIBLE:HIDDEN,zIndex:1}).on(hasTouch?'touchstart':'mouseover',function(event){rel=event.relatedTarget||event.fromElement;if(chart.hoverSeries!=series&&attr(rel,'isTracker')!=trackerLabel){series.onMouseOver();}
point.onMouseOver();}).on('mouseout',function(event){if(!series.options.stickyTracking){rel=event.relatedTarget||event.toElement;if(attr(rel,'isTracker')!=trackerLabel){series.onMouseOut();}}}).css(css).add(chart.trackerGroup);}}});},animate:function(init){var series=this,data=series.data;if(!init){each(data,function(point){var graphic=point.graphic;if(graphic){graphic.attr({height:0,y:series.yAxis.translate(0,0,1)});graphic.animate({height:point.barH,y:point.barY},series.options.animation);}});series.animate=null;}},remove:function(){var series=this,chart=series.chart;if(chart.hasRendered){each(chart.series,function(otherSeries){if(otherSeries.type==series.type){otherSeries.isDirty=true;}});}
Series.prototype.remove.apply(series,arguments);}});seriesTypes.column=ColumnSeries;var BarSeries=extendClass(ColumnSeries,{type:'bar',init:function(chart){chart.inverted=this.inverted=true;ColumnSeries.prototype.init.apply(this,arguments);}});seriesTypes.bar=BarSeries;var ScatterSeries=extendClass(Series,{type:'scatter',translate:function(){var series=this;Series.prototype.translate.apply(series);each(series.data,function(point){point.shapeType='circle';point.shapeArgs={x:point.plotX,y:point.plotY,r:series.chart.options.tooltip.snap};});},drawTracker:function(){var series=this,cursor=series.options.cursor,css=cursor&&{cursor:cursor},graphic;each(series.data,function(point){graphic=point.graphic;if(graphic){graphic.attr({isTracker:true}).on('mouseover',function(event){series.onMouseOver();point.onMouseOver();}).on('mouseout',function(event){if(!series.options.stickyTracking){series.onMouseOut();}}).css(css);}});},cleanData:function(){}});seriesTypes.scatter=ScatterSeries;var PiePoint=extendClass(Point,{init:function(){Point.prototype.init.apply(this,arguments);var point=this,toggleSlice;extend(point,{visible:point.visible!==false,name:pick(point.name,'Slice')});toggleSlice=function(){point.slice();};addEvent(point,'select',toggleSlice);addEvent(point,'unselect',toggleSlice);return point;},setVisible:function(vis){var point=this,chart=point.series.chart,tracker=point.tracker,dataLabel=point.dataLabel,connector=point.connector,method;point.visible=vis=vis===UNDEFINED?!point.visible:vis;method=vis?'show':'hide';point.group[method]();if(tracker){tracker[method]();}
if(dataLabel){dataLabel[method]();}
if(connector){connector[method]();}
if(point.legendItem){chart.legend.colorizeItem(point,vis);}},slice:function(sliced,redraw,animation){var point=this,series=point.series,chart=series.chart,slicedTranslation=point.slicedTranslation;setAnimation(animation,chart);redraw=pick(redraw,true);sliced=point.sliced=defined(sliced)?sliced:!point.sliced;point.group.animate({translateX:(sliced?slicedTranslation[0]:chart.plotLeft),translateY:(sliced?slicedTranslation[1]:chart.plotTop)});}});var PieSeries=extendClass(Series,{type:'pie',isCartesian:false,pointClass:PiePoint,pointAttrToOptions:{stroke:'borderColor','stroke-width':'borderWidth',fill:'color'},getColor:function(){this.initialColor=colorCounter;},animate:function(init){var series=this,data=series.data;each(data,function(point){var graphic=point.graphic,args=point.shapeArgs,up=-mathPI/2;if(graphic){graphic.attr({r:0,start:up,end:up});graphic.animate({r:args.r,start:args.start,end:args.end},series.options.animation);}});series.animate=null;},translate:function(){var total=0,series=this,cumulative=-0.25,precision=1000,options=series.options,slicedOffset=options.slicedOffset,connectorOffset=slicedOffset+options.borderWidth,positions=options.center,chart=series.chart,plotWidth=chart.plotWidth,plotHeight=chart.plotHeight,start,end,angle,data=series.data,circ=2*mathPI,fraction,smallestSize=mathMin(plotWidth,plotHeight),isPercent,radiusX,radiusY,labelDistance=options.dataLabels.distance;positions.push(options.size,options.innerSize||0);positions=map(positions,function(length,i){isPercent=/%$/.test(length);return isPercent?[plotWidth,plotHeight,smallestSize,smallestSize][i]*pInt(length)/100:length;});series.getX=function(y,left){angle=math.asin((y-positions[1])/(positions[2]/2+labelDistance));return positions[0]+
(left?-1:1)*(mathCos(angle)*(positions[2]/2+labelDistance));};series.center=positions;each(data,function(point){total+=point.y;});each(data,function(point){fraction=total?point.y/total:0;start=mathRound(cumulative*circ*precision)/precision;cumulative+=fraction;end=mathRound(cumulative*circ*precision)/precision;point.shapeType='arc';point.shapeArgs={x:positions[0],y:positions[1],r:positions[2]/2,innerR:positions[3]/2,start:start,end:end};angle=(end+start)/2;point.slicedTranslation=map([mathCos(angle)*slicedOffset+chart.plotLeft,mathSin(angle)*slicedOffset+chart.plotTop],mathRound);radiusX=mathCos(angle)*positions[2]/2;radiusY=mathSin(angle)*positions[2]/2;point.tooltipPos=[positions[0]+radiusX*0.7,positions[1]+radiusY*0.7];point.labelPos=[positions[0]+radiusX+mathCos(angle)*labelDistance,positions[1]+radiusY+mathSin(angle)*labelDistance,positions[0]+radiusX+mathCos(angle)*connectorOffset,positions[1]+radiusY+mathSin(angle)*connectorOffset,positions[0]+radiusX,positions[1]+radiusY,labelDistance<0?'center':angle<circ/4?'left':'right',angle];point.percentage=fraction*100;point.total=total;});this.setTooltipPoints();},render:function(){var series=this;series.getAttribs();this.drawPoints();if(series.options.enableMouseTracking!==false){series.drawTracker();}
this.drawDataLabels();if(series.options.animation&&series.animate){series.animate();}
series.isDirty=false;},drawPoints:function(){var series=this,chart=series.chart,renderer=chart.renderer,groupTranslation,graphic,group,shapeArgs;each(series.data,function(point){graphic=point.graphic;shapeArgs=point.shapeArgs;group=point.group;if(!group){group=point.group=renderer.g('point').attr({zIndex:5}).add();}
groupTranslation=point.sliced?point.slicedTranslation:[chart.plotLeft,chart.plotTop];group.translate(groupTranslation[0],groupTranslation[1])
if(graphic){graphic.animate(shapeArgs);}else{point.graphic=renderer.arc(shapeArgs).attr(extend(point.pointAttr[NORMAL_STATE],{'stroke-linejoin':'round'})).add(point.group);}
if(point.visible===false){point.setVisible(false);}});},drawDataLabels:function(){var series=this,data=series.data,point,chart=series.chart,options=series.options.dataLabels,connectorPadding=pick(options.connectorPadding,10),connectorWidth=pick(options.connectorWidth,1),connector,connectorPath,outside=options.distance>0,dataLabel,labelPos,labelHeight,lastY,centerY=series.center[1],quarters=[[],[],[],[]],x,y,visibility,overlapping,rankArr,secondPass,sign,lowerHalf,sort,i=4,j;Series.prototype.drawDataLabels.apply(series);each(data,function(point){var angle=point.labelPos[7],quarter;if(angle<0){quarter=0;}else if(angle<mathPI/2){quarter=1;}else if(angle<mathPI){quarter=2;}else{quarter=3;}
quarters[quarter].push(point);});quarters[1].reverse();quarters[3].reverse();sort=function(a,b){return a.y>b.y;};while(i--){overlapping=0;rankArr=[].concat(quarters[i]);rankArr.sort(sort);j=rankArr.length;while(j--){rankArr[j].rank=j;}
for(secondPass=0;secondPass<2;secondPass++){lowerHalf=i%3;lastY=lowerHalf?9999:-9999;sign=lowerHalf?-1:1;for(j=0;j<quarters[i].length;j++){point=quarters[i][j];if((dataLabel=point.dataLabel)){labelPos=point.labelPos;visibility=VISIBLE;x=labelPos[0];y=labelPos[1];if(!labelHeight){labelHeight=dataLabel&&dataLabel.getBBox().height;}
if(outside){if(secondPass&&point.rank<overlapping){visibility=HIDDEN;}else if((!lowerHalf&&y<lastY+labelHeight)||(lowerHalf&&y>lastY-labelHeight)){y=lastY+sign*labelHeight;x=series.getX(y,i>1);if((!lowerHalf&&y+labelHeight>centerY)||(lowerHalf&&y-labelHeight<centerY)){if(secondPass){visibility=HIDDEN;}else{overlapping++;}}}}
if(point.visible===false){visibility=HIDDEN;}
if(visibility==VISIBLE){lastY=y;}
if(secondPass){dataLabel.attr({visibility:visibility,align:labelPos[6]})
[dataLabel.moved?'animate':'attr']({x:x+options.x+
({left:connectorPadding,right:-connectorPadding}[labelPos[6]]||0),y:y+options.y});dataLabel.moved=true;if(outside&&connectorWidth){connector=point.connector;connectorPath=[M,x+(labelPos[6]=='left'?5:-5),y,L,x,y,L,labelPos[2],labelPos[3],L,labelPos[4],labelPos[5]];if(connector){connector.animate({d:connectorPath});connector.attr('visibility',visibility);}else{point.connector=connector=series.chart.renderer.path(connectorPath).attr({'stroke-width':connectorWidth,stroke:options.connectorColor||'#606060',visibility:visibility,zIndex:3}).translate(chart.plotLeft,chart.plotTop).add();}}}}}}}},drawTracker:ColumnSeries.prototype.drawTracker,getSymbol:function(){}});seriesTypes.pie=PieSeries;win.Highcharts={Chart:Chart,dateFormat:dateFormat,pathAnim:pathAnim,getOptions:getOptions,numberFormat:numberFormat,Point:Point,Color:Color,Renderer:Renderer,seriesTypes:seriesTypes,setOptions:setOptions,Series:Series,addEvent:addEvent,createElement:createElement,discardElement:discardElement,css:css,each:each,extend:extend,map:map,merge:merge,pick:pick,extendClass:extendClass,version:'2.1.4'};})();(function($){$.extend(true,window,{"Slick":{"Event":Event,"EventData":EventData,"Range":Range,"NonDataRow":NonDataItem,"Group":Group,"GroupTotals":GroupTotals,"EditorLock":EditorLock,"GlobalEditorLock":new EditorLock()}});function EventData(){var isPropagationStopped=false;var isImmediatePropagationStopped=false;this.stopPropagation=function(){isPropagationStopped=true;};this.isPropagationStopped=function(){return isPropagationStopped;};this.stopImmediatePropagation=function(){isImmediatePropagationStopped=true;};this.isImmediatePropagationStopped=function(){return isImmediatePropagationStopped;}}
function Event(){var handlers=[];this.subscribe=function(fn){handlers.push(fn);};this.unsubscribe=function(fn){for(var i=handlers.length-1;i>=0;i--){if(handlers[i]===fn){handlers.splice(i,1);}}};this.notify=function(args,e,scope){e=e||new EventData();scope=scope||this;var returnValue;for(var i=0;i<handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());i++){returnValue=handlers[i].call(scope,e,args);}
return returnValue;};}
function Range(fromRow,fromCell,toRow,toCell){if(toRow===undefined&&toCell===undefined){toRow=fromRow;toCell=fromCell;}
this.fromRow=Math.min(fromRow,toRow);this.fromCell=Math.min(fromCell,toCell);this.toRow=Math.max(fromRow,toRow);this.toCell=Math.max(fromCell,toCell);this.isSingleRow=function(){return this.fromRow==this.toRow;};this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell;};this.contains=function(row,cell){return row>=this.fromRow&&row<=this.toRow&&cell>=this.fromCell&&cell<=this.toCell;};this.toString=function(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")";}
else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")";}}}
function NonDataItem(){this.__nonDataRow=true;}
function Group(){this.__group=true;this.__updated=false;this.count=0;this.value=null;this.title=null;this.collapsed=false;this.totals=null;}
Group.prototype=new NonDataItem();Group.prototype.equals=function(group){return this.value===group.value&&this.count===group.count&&this.collapsed===group.collapsed;};function GroupTotals(){this.__groupTotals=true;this.group=null;}
GroupTotals.prototype=new NonDataItem();function EditorLock(){var activeEditController=null;this.isActive=function(editController){return(editController?activeEditController===editController:activeEditController!==null);};this.activate=function(editController){if(editController===activeEditController){return;}
if(activeEditController!==null){throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";}
if(!editController.commitCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";}
if(!editController.cancelCurrentEdit){throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";}
activeEditController=editController;};this.deactivate=function(editController){if(activeEditController!==editController){throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";}
activeEditController=null;};this.commitCurrentEdit=function(){return(activeEditController?activeEditController.commitCurrentEdit():true);};this.cancelCurrentEdit=function cancelCurrentEdit(){return(activeEditController?activeEditController.cancelCurrentEdit():true);};}})(jQuery);(function($){var SlickEditor={SelectorCellFormatter:function(row,cell,value,columnDef,dataContext){return(!dataContext?"":row);},PercentCompleteCellFormatter:function(row,cell,value,columnDef,dataContext){if(value==null||value==="")
return"-";else if(value<50)
return"<span style='color:red;font-weight:bold;'>"+value+"%</span>";else
return"<span style='color:green'>"+value+"%</span>";},GraphicalPercentCompleteCellFormatter:function(row,cell,value,columnDef,dataContext){if(value==null||value==="")
return"";var color;if(value<30)
color="red";else if(value<70)
color="silver";else
color="green";return"<span class='percent-complete-bar' style='background:"+color+";width:"+value+"%'></span>";},YesNoCellFormatter:function(row,cell,value,columnDef,dataContext){return value?"Yes":"No";},BoolCellFormatter:function(row,cell,value,columnDef,dataContext){return value?"<img src='../images/tick.png'>":"";},TaskNameFormatter:function(row,cell,value,columnDef,dataContext){var spacer="<span style='display:inline-block;height:1px;width:"+(2+15*dataContext["indent"])+"px'></span>";return spacer+" <img src='../images/expand.gif'>&nbsp;"+value;},ResourcesFormatter:function(row,cell,value,columnDef,dataContext){var resources=dataContext["resources"];if(!resources||resources.length==0)
return"";if(columnDef.width<50)
return(resources.length>1?"<center><img src='../images/user_identity_plus.gif' ":"<center><img src='../images/user_identity.gif' ")+" title='"+resources.join(", ")+"'></center>";else
return resources.join(", ");},StarFormatter:function(row,cell,value,columnDef,dataContext){return(value)?"<img src='../images/bullet_star.png' align='absmiddle'>":"";},TextCellEditor:function(args){var $input;var defaultValue;var scope=this;this.init=function(){$input=$("<INPUT type=text class='editor-text' />").appendTo(args.container).bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT){e.stopImmediatePropagation();}}).focus().select();};this.destroy=function(){$input.remove();};this.focus=function(){$input.focus();};this.getValue=function(){return $input.val();};this.setValue=function(val){$input.val(val);};this.loadValue=function(item){defaultValue=item[args.column.field]||"";$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select();};this.serializeValue=function(){return $input.val();};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return(!($input.val()==""&&defaultValue==null))&&($input.val()!=defaultValue);};this.validate=function(){if(args.column.validator){var validationResults=args.column.validator($input.val());if(!validationResults.valid)
return validationResults;}
return{valid:true,msg:null};};this.init();},IntegerCellEditor:function(args){var $input;var defaultValue;var scope=this;this.init=function(){$input=$("<INPUT type=text class='editor-text' />");$input.bind("keydown.nav",function(e){if(e.keyCode===$.ui.keyCode.LEFT||e.keyCode===$.ui.keyCode.RIGHT){e.stopImmediatePropagation();}});$input.appendTo(args.container);$input.focus().select();};this.destroy=function(){$input.remove();};this.focus=function(){$input.focus();};this.loadValue=function(item){defaultValue=item[args.column.field];$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select();};this.serializeValue=function(){return parseInt($input.val(),10)||0;};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return(!($input.val()==""&&defaultValue==null))&&($input.val()!=defaultValue);};this.validate=function(){if(isNaN($input.val()))
return{valid:false,msg:"Please enter a valid integer"};return{valid:true,msg:null};};this.init();},DateCellEditor:function(args){var $input;var defaultValue;var scope=this;var calendarOpen=false;this.init=function(){$input=$("<INPUT type=text class='editor-text' />");$input.appendTo(args.container);$input.focus().select();$input.datepicker({showOn:"button",buttonImageOnly:true,buttonImage:"../images/calendar.gif",beforeShow:function(){calendarOpen=true},onClose:function(){calendarOpen=false}});$input.width($input.width()-18);};this.destroy=function(){$.datepicker.dpDiv.stop(true,true);$input.datepicker("hide");$input.datepicker("destroy");$input.remove();};this.show=function(){if(calendarOpen){$.datepicker.dpDiv.stop(true,true).show();}};this.hide=function(){if(calendarOpen){$.datepicker.dpDiv.stop(true,true).hide();}};this.position=function(position){if(!calendarOpen)return;$.datepicker.dpDiv.css("top",position.top+30).css("left",position.left);};this.focus=function(){$input.focus();};this.loadValue=function(item){defaultValue=item[args.column.field];$input.val(defaultValue);$input[0].defaultValue=defaultValue;$input.select();};this.serializeValue=function(){return $input.val();};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return(!($input.val()==""&&defaultValue==null))&&($input.val()!=defaultValue);};this.validate=function(){return{valid:true,msg:null};};this.init();},YesNoSelectCellEditor:function(args){var $select;var defaultValue;var scope=this;this.init=function(){$select=$("<SELECT tabIndex='0' class='editor-yesno'><OPTION value='yes'>Yes</OPTION><OPTION value='no'>No</OPTION></SELECT>");$select.appendTo(args.container);$select.focus();};this.destroy=function(){$select.remove();};this.focus=function(){$select.focus();};this.loadValue=function(item){$select.val((defaultValue=item[args.column.field])?"yes":"no");$select.select();};this.serializeValue=function(){return($select.val()=="yes");};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return($select.val()!=defaultValue);};this.validate=function(){return{valid:true,msg:null};};this.init();},YesNoCheckboxCellEditor:function(args){var $select;var defaultValue;var scope=this;this.init=function(){$select=$("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>");$select.appendTo(args.container);$select.focus();};this.destroy=function(){$select.remove();};this.focus=function(){$select.focus();};this.loadValue=function(item){defaultValue=item[args.column.field];if(defaultValue)
$select.attr("checked","checked");else
$select.removeAttr("checked");};this.serializeValue=function(){return $select.attr("checked");};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return($select.attr("checked")!=defaultValue);};this.validate=function(){return{valid:true,msg:null};};this.init();},PercentCompleteCellEditor:function(args){var $input,$picker;var defaultValue;var scope=this;this.init=function(){$input=$("<INPUT type=text class='editor-percentcomplete' />");$input.width($(args.container).innerWidth()-25);$input.appendTo(args.container);$picker=$("<div class='editor-percentcomplete-picker' />").appendTo(args.container);$picker.append("<div class='editor-percentcomplete-helper'><div class='editor-percentcomplete-wrapper'><div class='editor-percentcomplete-slider' /><div class='editor-percentcomplete-buttons' /></div></div>");$picker.find(".editor-percentcomplete-buttons").append("<button val=0>Not started</button><br/><button val=50>In Progress</button><br/><button val=100>Complete</button>");$input.focus().select();$picker.find(".editor-percentcomplete-slider").slider({orientation:"vertical",range:"min",value:defaultValue,slide:function(event,ui){$input.val(ui.value)}});$picker.find(".editor-percentcomplete-buttons button").bind("click",function(e){$input.val($(this).attr("val"));$picker.find(".editor-percentcomplete-slider").slider("value",$(this).attr("val"));})};this.destroy=function(){$input.remove();$picker.remove();};this.focus=function(){$input.focus();};this.loadValue=function(item){$input.val(defaultValue=item[args.column.field]);$input.select();};this.serializeValue=function(){return parseInt($input.val(),10)||0;};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return(!($input.val()==""&&defaultValue==null))&&((parseInt($input.val(),10)||0)!=defaultValue);};this.validate=function(){if(isNaN(parseInt($input.val(),10)))
return{valid:false,msg:"Please enter a valid positive number"};return{valid:true,msg:null};};this.init();},StarCellEditor:function(args){var $input;var defaultValue;var scope=this;function toggle(e){if(e.type=="keydown"&&e.which!=32)return;if($input.css("opacity")=="1")
$input.css("opacity",0.5);else
$input.css("opacity",1);e.preventDefault();e.stopPropagation();return false;}
this.init=function(){$input=$("<IMG src='../images/bullet_star.png' align=absmiddle tabIndex=0 title='Click or press Space to toggle' />").bind("click keydown",toggle).appendTo(args.container).focus();};this.destroy=function(){$input.unbind("click keydown",toggle);$input.remove();};this.focus=function(){$input.focus();};this.loadValue=function(item){defaultValue=item[args.column.field];$input.css("opacity",defaultValue?1:0.2);};this.serializeValue=function(){return($input.css("opacity")=="1");};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return defaultValue!=($input.css("opacity")=="1");};this.validate=function(){return{valid:true,msg:null};};this.init();},LongTextCellEditor:function(args){var $input,$wrapper;var defaultValue;var scope=this;this.init=function(){var $container=$("body");$wrapper=$("<DIV style='z-index:10000;position:absolute;background:white;padding:5px;border:3px solid gray; -moz-border-radius:10px; border-radius:10px;'/>").appendTo($container);$input=$("<TEXTAREA hidefocus rows=5 style='backround:white;width:250px;height:80px;border:0;outline:0'>").appendTo($wrapper);$("<DIV style='text-align:right'><BUTTON>Save</BUTTON><BUTTON>Cancel</BUTTON></DIV>").appendTo($wrapper);$wrapper.find("button:first").bind("click",this.save);$wrapper.find("button:last").bind("click",this.cancel);$input.bind("keydown",this.handleKeyDown);scope.position(args.position);$input.focus().select();};this.handleKeyDown=function(e){if(e.which==$.ui.keyCode.ENTER&&e.ctrlKey){scope.save();}
else if(e.which==$.ui.keyCode.ESCAPE){e.preventDefault();scope.cancel();}
else if(e.which==$.ui.keyCode.TAB&&e.shiftKey){e.preventDefault();grid.navigatePrev();}
else if(e.which==$.ui.keyCode.TAB){e.preventDefault();grid.navigateNext();}};this.save=function(){args.commitChanges();};this.cancel=function(){$input.val(defaultValue);args.cancelChanges();};this.hide=function(){$wrapper.hide();};this.show=function(){$wrapper.show();};this.position=function(position){$wrapper.css("top",position.top-5).css("left",position.left-5)};this.destroy=function(){$wrapper.remove();};this.focus=function(){$input.focus();};this.loadValue=function(item){$input.val(defaultValue=item[args.column.field]);$input.select();};this.serializeValue=function(){return $input.val();};this.applyValue=function(item,state){item[args.column.field]=state;};this.isValueChanged=function(){return(!($input.val()==""&&defaultValue==null))&&($input.val()!=defaultValue);};this.validate=function(){return{valid:true,msg:null};};this.init();}};$.extend(window,SlickEditor);})(jQuery);(function($){$.extend(true,window,{"Slick":{"CellRangeDecorator":CellRangeDecorator}});function CellRangeDecorator(grid,options){var _elem;var _defaults={selectionCss:{"zIndex":"9999","border":"2px dashed red"}};options=$.extend(true,{},_defaults,options);function show(range){if(!_elem){_elem=$("<div></div>",{css:options.selectionCss}).css("position","absolute").appendTo(grid.getCanvasNode());}
var from=grid.getCellNodeBox(range.fromRow,range.fromCell);var to=grid.getCellNodeBox(range.toRow,range.toCell);_elem.css({top:from.top-1,left:from.left-1,height:to.bottom-from.top-2,width:to.right-from.left-2});return _elem;}
function hide(){if(_elem){_elem.remove();_elem=null;}}
$.extend(this,{"show":show,"hide":hide});}})(jQuery);(function($){$.extend(true,window,{"Slick":{"CellRangeSelector":CellRangeSelector}});function CellRangeSelector(options){var _grid;var _canvas;var _dragging;var _decorator;var _self=this;var _defaults={selectionCss:{"border":"2px dashed blue"}};function init(grid){options=$.extend(true,{},_defaults,options);_decorator=new Slick.CellRangeDecorator(grid,options);_grid=grid;_canvas=_grid.getCanvasNode();_grid.onDragInit.subscribe(handleDragInit);_grid.onDragStart.subscribe(handleDragStart);_grid.onDrag.subscribe(handleDrag);_grid.onDragEnd.subscribe(handleDragEnd);}
function destroy(){_grid.onDragInit.unsubscribe(handleDragInit);_grid.onDragStart.unsubscribe(handleDragStart);_grid.onDrag.unsubscribe(handleDrag);_grid.onDragEnd.unsubscribe(handleDragEnd);}
function handleDragInit(e,dd){e.stopImmediatePropagation();}
function handleDragStart(e,dd){var cell=_grid.getCellFromEvent(e);if(_self.onBeforeCellRangeSelected.notify(cell)!==false){if(_grid.canCellBeSelected(cell.row,cell.cell)){_dragging=true;e.stopImmediatePropagation();}}
if(!_dragging){return;}
var start=_grid.getCellFromPoint(dd.startX-$(_canvas).offset().left,dd.startY-$(_canvas).offset().top);dd.range={start:start,end:{}};return _decorator.show(new Slick.Range(start.row,start.cell));}
function handleDrag(e,dd){if(!_dragging){return;}
e.stopImmediatePropagation();var end=_grid.getCellFromPoint(e.pageX-$(_canvas).offset().left,e.pageY-$(_canvas).offset().top);if(!_grid.canCellBeSelected(end.row,end.cell)){return;}
dd.range.end=end;_decorator.show(new Slick.Range(dd.range.start.row,dd.range.start.cell,end.row,end.cell));}
function handleDragEnd(e,dd){if(!_dragging){return;}
_dragging=false;e.stopImmediatePropagation();_decorator.hide();_self.onCellRangeSelected.notify({range:new Slick.Range(dd.range.start.row,dd.range.start.cell,dd.range.end.row,dd.range.end.cell)});}
$.extend(this,{"init":init,"destroy":destroy,"onBeforeCellRangeSelected":new Slick.Event(),"onCellRangeSelected":new Slick.Event()});}})(jQuery);(function($){$.extend(true,window,{"Slick":{"CellSelectionModel":CellSelectionModel}});function CellSelectionModel(options){var _grid;var _canvas;var _ranges=[];var _self=this;var _selector=new Slick.CellRangeSelector({"selectionCss":{"border":"2px solid black"}});var _options;var _defaults={selectActiveCell:true};function init(grid){_options=$.extend(true,{},_defaults,options);_grid=grid;_canvas=_grid.getCanvasNode();_grid.onActiveCellChanged.subscribe(handleActiveCellChange);grid.registerPlugin(_selector);_selector.onCellRangeSelected.subscribe(handleCellRangeSelected);_selector.onBeforeCellRangeSelected.subscribe(handleBeforeCellRangeSelected);}
function destroy(){_grid.onActiveCellChanged.unsubscribe(handleActiveCellChange);_selector.onCellRangeSelected.unsubscribe(handleCellRangeSelected);_selector.onBeforeCellRangeSelected.unsubscribe(handleBeforeCellRangeSelected);_grid.unregisterPlugin(_selector);}
function removeInvalidRanges(ranges){var result=[];for(var i=0;i<ranges.length;i++){var r=ranges[i];if(_grid.canCellBeSelected(r.fromRow,r.fromCell)&&_grid.canCellBeSelected(r.toRow,r.toCell)){result.push(r);}}
return result;}
function setSelectedRanges(ranges){_ranges=removeInvalidRanges(ranges);_self.onSelectedRangesChanged.notify(_ranges);}
function getSelectedRanges(){return _ranges;}
function handleBeforeCellRangeSelected(e,args){if(_grid.getEditorLock().isActive()){e.stopPropagation();return false;}}
function handleCellRangeSelected(e,args){setSelectedRanges([args.range]);}
function handleActiveCellChange(e,args){if(_options.selectActiveCell){setSelectedRanges([new Slick.Range(args.row,args.cell)]);}}
$.extend(this,{"getSelectedRanges":getSelectedRanges,"setSelectedRanges":setSelectedRanges,"init":init,"destroy":destroy,"onSelectedRangesChanged":new Slick.Event()});}})(jQuery);(function($){$.extend(true,window,{"Slick":{"RowSelectionModel":RowSelectionModel}});function RowSelectionModel(options){var _grid;var _ranges=[];var _self=this;var _options;var _defaults={selectActiveRow:true};function init(grid){_options=$.extend(true,{},_defaults,options);_grid=grid;_grid.onActiveCellChanged.subscribe(handleActiveCellChange);_grid.onKeyDown.subscribe(handleKeyDown);_grid.onClick.subscribe(handleClick);}
function destroy(){_grid.onActiveCellChanged.unsubscribe(handleActiveCellChange);_grid.onKeyDown.unsubscribe(handleKeyDown);_grid.onClick.unsubscribe(handleClick);}
function rangesToRows(ranges){var rows=[];for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){rows.push(j);}}
return rows;}
function rowsToRanges(rows){var ranges=[];var lastCell=_grid.getColumns().length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));}
return ranges;}
function getRowsRange(from,to){var i,rows=[];for(i=from;i<=to;i++){rows.push(i);}
for(i=to;i<from;i++){rows.push(i);}
return rows;}
function getSelectedRows(){return rangesToRows(_ranges);}
function setSelectedRows(rows){setSelectedRanges(rowsToRanges(rows));}
function setSelectedRanges(ranges){_ranges=ranges;_self.onSelectedRangesChanged.notify(_ranges);}
function getSelectedRanges(){return _ranges;}
function handleActiveCellChange(e,data){if(_options.selectActiveRow){setSelectedRanges([new Slick.Range(data.row,0,data.row,_grid.getColumns().length-1)]);}}
function handleKeyDown(e){var activeRow=_grid.getActiveCell();if(activeRow&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.which==38||e.which==40)){var selectedRows=getSelectedRows();selectedRows.sort(function(x,y){return x-y});if(!selectedRows.length){selectedRows=[activeRow.row];}
var top=selectedRows[0];var bottom=selectedRows[selectedRows.length-1];var active;if(e.which==40){active=activeRow.row<bottom||top==bottom?++bottom:++top;}
else{active=activeRow.row<bottom?--bottom:--top;}
if(active>=0&&active<_grid.getDataLength()){_grid.scrollRowIntoView(active);_ranges=rowsToRanges(getRowsRange(top,bottom));setSelectedRanges(_ranges);}
e.preventDefault();e.stopPropagation();}}
function handleClick(e){var cell=_grid.getCellFromEvent(e);if(!cell||!_grid.canCellBeActive(cell.row,cell.cell)){return false;}
var selection=rangesToRows(_ranges);var idx=$.inArray(cell.row,selection);if(!e.ctrlKey&&!e.shiftKey&&!e.metaKey){return false;}
else if(_grid.getOptions().multiSelect){if(idx===-1&&(e.ctrlKey||e.metaKey)){selection.push(cell.row);_grid.setActiveCell(cell.row,cell.cell);}
else if(idx!==-1&&(e.ctrlKey||e.metaKey)){selection=$.grep(selection,function(o,i){return(o!==cell.row);});_grid.setActiveCell(cell.row,cell.cell);}
else if(selection.length&&e.shiftKey){var last=selection.pop();var from=Math.min(cell.row,last);var to=Math.max(cell.row,last);selection=[];for(var i=from;i<=to;i++){if(i!==last){selection.push(i);}}
selection.push(last);_grid.setActiveCell(cell.row,cell.cell);}}
_ranges=rowsToRanges(selection);setSelectedRanges(_ranges);e.stopImmediatePropagation();return true;}
$.extend(this,{"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"getSelectedRanges":getSelectedRanges,"setSelectedRanges":setSelectedRanges,"init":init,"destroy":destroy,"onSelectedRangesChanged":new Slick.Event()});}})(jQuery);if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded";}
if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded";}
if(typeof Slick==="undefined"){throw"slick.core.js not loaded";}
(function($){$.extend(true,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions;function SlickGrid(container,data,columns,options){var defaults={headerHeight:25,rowHeight:25,defaultColumnWidth:80,enableAddRow:false,leaveSpaceForNewRows:false,editable:false,autoEdit:true,enableCellNavigation:true,enableCellRangeSelection:false,enableColumnReorder:true,asyncEditorLoading:false,asyncEditorLoadDelay:100,forceFitColumns:false,enableAsyncPostRender:false,asyncPostRenderDelay:60,autoHeight:false,editorLock:Slick.GlobalEditorLock,showHeaderRow:false,headerRowHeight:25,showTopPanel:false,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:true,enableTextSelectionOnCells:false};var columnDefaults={name:"",resizable:true,sortable:false,minWidth:30,rerenderOnResize:false,headerCssClass:null};var maxSupportedCssHeight;var th;var h;var ph;var n;var cj;var page=0;var offset=0;var scrollDir=1;var $container;var uid="slickgrid_"+Math.round(1000000*Math.random());var self=this;var $headerScroller;var $headers;var $headerRow,$headerRowScroller;var $topPanelScroller;var $topPanel;var $viewport;var $canvas;var $style;var stylesheet;var viewportH,viewportW;var viewportHasHScroll;var headerColumnWidthDiff,headerColumnHeightDiff,cellWidthDiff,cellHeightDiff;var absoluteColumnMinWidth;var activePosX;var activeRow,activeCell;var activeCellNode=null;var currentEditor=null;var serializedEditorValue;var editController;var rowsCache={};var renderedRows=0;var numVisibleRows;var prevScrollTop=0;var scrollTop=0;var lastRenderedScrollTop=0;var prevScrollLeft=0;var avgRowRenderTime=10;var selectionModel;var selectedRows=[];var plugins=[];var cellCssClasses={};var columnsById={};var sortColumnId;var sortAsc=true;var h_editorLoader=null;var h_render=null;var h_postrender=null;var postProcessedRows={};var postProcessToRow=null;var postProcessFromRow=null;var counter_rows_rendered=0;var counter_rows_removed=0;function init(){$container=$(container);if($container.length<1){throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");}
maxSupportedCssHeight=getMaxSupportedCssHeight();scrollbarDimensions=scrollbarDimensions||measureScrollbar();options=$.extend({},defaults,options);columnDefaults.width=options.defaultColumnWidth;if(options.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's \"enableColumnReorder = true\" option requires jquery-ui.sortable module to be loaded");}
editController={"commitCurrentEdit":commitCurrentEdit,"cancelCurrentEdit":cancelCurrentEdit};$container.empty().attr("tabIndex",0).attr("hideFocus",true).css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget");if(!/relative|absolute|fixed/.test($container.css("position")))
$container.css("position","relative");$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headers=$("<div class='slick-header-columns' style='width:10000px; left:-1000px' />").appendTo($headerScroller);$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$headerRow=$("<div class='slick-headerrow-columns' style='width:10000px;' />").appendTo($headerRowScroller);$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container);$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller);if(!options.showTopPanel){$topPanelScroller.hide();}
if(!options.showHeaderRow){$headerRowScroller.hide();}
$viewport=$("<div class='slick-viewport' tabIndex='0' hideFocus style='width:100%;overflow-x:auto;outline:0;position:relative;overflow-y:auto;'>").appendTo($container);$canvas=$("<div class='grid-canvas' tabIndex='0' hideFocus />").appendTo($viewport);measureCellPaddingAndBorder();disableSelection($headers);if(!options.enableTextSelectionOnCells){$viewport.bind("selectstart.ui",function(event){return $(event.target).is("input,textarea");});}
viewportW=parseFloat($.css($container[0],"width",true));createColumnHeaders();setupColumnSort();createCssRules();resizeAndRender();bindAncestorScrollEvents();$viewport.bind("scroll.slickgrid",handleScroll);$container.bind("resize.slickgrid",resizeAndRender);$headerScroller.bind("contextmenu.slickgrid",handleHeaderContextMenu).bind("click.slickgrid",handleHeaderClick);$canvas.bind("keydown.slickgrid",handleKeyDown).bind("click.slickgrid",handleClick).bind("dblclick.slickgrid",handleDblClick).bind("contextmenu.slickgrid",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd);$canvas.delegate(".slick-cell","mouseenter",handleMouseEnter);$canvas.delegate(".slick-cell","mouseleave",handleMouseLeave);}
function registerPlugin(plugin){plugins.unshift(plugin);plugin.init(self);}
function unregisterPlugin(plugin){for(var i=plugins.length;i>=0;i--){if(plugins[i]===plugin){if(plugins[i].destroy){plugins[i].destroy();}
plugins.splice(i,1);break;}}}
function setSelectionModel(model){if(selectionModel){selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged);if(selectionModel.destroy){selectionModel.destroy();}}
selectionModel=model;if(selectionModel){selectionModel.init(self);selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged);}}
function getSelectionModel(){return selectionModel;}
function getCanvasNode(){return $canvas[0];}
function measureScrollbar(){var $c=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");var dim={width:$c.width()-$c[0].clientWidth,height:$c.height()-$c[0].clientHeight};$c.remove();return dim;}
function getRowWidth(){var rowWidth=0;var i=columns.length;while(i--){rowWidth+=(columns[i].width||columnDefaults.width);}
return rowWidth;}
function setCanvasWidth(width){$canvas.width(width);viewportHasHScroll=(width>viewportW-scrollbarDimensions.width);}
function disableSelection($target){if($target&&$target.jquery){$target.attr('unselectable','on').css('MozUserSelect','none').bind('selectstart.ui',function(){return false;});}}
function getMaxSupportedCssHeight(){var increment=1000000;var supportedHeight=increment;var testUpTo=($.browser.mozilla)?5000000:1000000000;var div=$("<div style='display:none' />").appendTo(document.body);while(supportedHeight<=testUpTo){div.css("height",supportedHeight+increment);if(div.height()!==supportedHeight+increment)
break;else
supportedHeight+=increment;}
div.remove();return supportedHeight;}
function bindAncestorScrollEvents(){var elem=$canvas[0];while((elem=elem.parentNode)!=document.body){if(elem==$viewport[0]||elem.scrollWidth!=elem.clientWidth||elem.scrollHeight!=elem.clientHeight)
$(elem).bind("scroll.slickgrid",handleActiveCellPositionChange);}}
function unbindAncestorScrollEvents(){$canvas.parents().unbind("scroll.slickgrid");}
function updateColumnHeader(columnId,title,toolTip){var idx=getColumnIndex(columnId);var $header=$headers.children().eq(idx);if($header){columns[idx].name=title;columns[idx].toolTip=toolTip;$header.attr("title",toolTip||title||"").children().eq(0).html(title);}}
function getHeaderRow(){return $headerRow[0];}
function getHeaderRowColumn(columnId){var idx=getColumnIndex(columnId);var $header=$headerRow.children().eq(idx);return $header&&$header[0];}
function createColumnHeaders(){var i;function hoverBegin(){$(this).addClass("ui-state-hover");}
function hoverEnd(){$(this).removeClass("ui-state-hover");}
$headers.empty();$headerRow.empty();columnsById={};for(i=0;i<columns.length;i++){var m=columns[i]=$.extend({},columnDefaults,columns[i]);columnsById[m.id]=i;var header=$("<div class='ui-state-default slick-header-column' id='"+uid+m.id+"' />").html("<span class='slick-column-name'>"+m.name+"</span>").width(m.width-headerColumnWidthDiff).attr("title",m.toolTip||m.name||"").data("fieldId",m.id).addClass(m.headerCssClass||"").appendTo($headers);if(options.enableColumnReorder||m.sortable){header.hover(hoverBegin,hoverEnd);}
if(m.sortable){header.append("<span class='slick-sort-indicator' />");}
if(options.showHeaderRow){$("<div class='ui-state-default slick-headerrow-column c"+i+"'></div>").appendTo($headerRow);}}
setSortColumn(sortColumnId,sortAsc);setupColumnResize();if(options.enableColumnReorder){setupColumnReorder();}}
function setupColumnSort(){$headers.click(function(e){if($(e.target).hasClass("slick-resizable-handle")){return;}
var $col=$(e.target).closest(".slick-header-column");if(!$col.length)
return;var column=columns[getColumnIndex($col.data("fieldId"))];if(column.sortable){if(!getEditorLock().commitCurrentEdit())
return;if(column.id===sortColumnId){sortAsc=!sortAsc;}
else{sortColumnId=column.id;sortAsc=true;}
setSortColumn(sortColumnId,sortAsc);trigger(self.onSort,{sortCol:column,sortAsc:sortAsc});}});}
function setupColumnReorder(){$headers.sortable({containment:"parent",axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:true,start:function(e,ui){$(ui.helper).addClass("slick-header-column-active");},beforeStop:function(e,ui){$(ui.helper).removeClass("slick-header-column-active");},stop:function(e){if(!getEditorLock().commitCurrentEdit()){$(this).sortable("cancel");return;}
var reorderedIds=$headers.sortable("toArray");var reorderedColumns=[];for(var i=0;i<reorderedIds.length;i++){reorderedColumns.push(columns[getColumnIndex(reorderedIds[i].replace(uid,""))]);}
setColumns(reorderedColumns);trigger(self.onColumnsReordered,{});e.stopPropagation();setupColumnResize();}});}
function setupColumnResize(){var $col,j,c,pageX,columnElements,minPageX,maxPageX,firstResizable,lastResizable,originalCanvasWidth;columnElements=$headers.children();columnElements.find(".slick-resizable-handle").remove();columnElements.each(function(i,e){if(columns[i].resizable){if(firstResizable===undefined){firstResizable=i;}
lastResizable=i;}});if(firstResizable===undefined){return;}
columnElements.each(function(i,e){if(i<firstResizable||(options.forceFitColumns&&i>=lastResizable)){return;}
$col=$(e);$("<div class='slick-resizable-handle' />").appendTo(e).bind("dragstart",function(e,dd){if(!getEditorLock().commitCurrentEdit()){return false;}
pageX=e.pageX;$(this).parent().addClass("slick-header-column-active");var shrinkLeewayOnRight=null,stretchLeewayOnRight=null;columnElements.each(function(i,e){columns[i].previousWidth=$(e).outerWidth();});if(options.forceFitColumns){shrinkLeewayOnRight=0;stretchLeewayOnRight=0;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnRight!==null){if(c.maxWidth){stretchLeewayOnRight+=c.maxWidth-c.previousWidth;}
else{stretchLeewayOnRight=null;}}
shrinkLeewayOnRight+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth);}}}
var shrinkLeewayOnLeft=0,stretchLeewayOnLeft=0;for(j=0;j<=i;j++){c=columns[j];if(c.resizable){if(stretchLeewayOnLeft!==null){if(c.maxWidth){stretchLeewayOnLeft+=c.maxWidth-c.previousWidth;}
else{stretchLeewayOnLeft=null;}}
shrinkLeewayOnLeft+=c.previousWidth-Math.max(c.minWidth||0,absoluteColumnMinWidth);}}
if(shrinkLeewayOnRight===null){shrinkLeewayOnRight=100000;}
if(shrinkLeewayOnLeft===null){shrinkLeewayOnLeft=100000;}
if(stretchLeewayOnRight===null){stretchLeewayOnRight=100000;}
if(stretchLeewayOnLeft===null){stretchLeewayOnLeft=100000;}
maxPageX=pageX+Math.min(shrinkLeewayOnRight,stretchLeewayOnLeft);minPageX=pageX-Math.min(shrinkLeewayOnLeft,stretchLeewayOnRight);originalCanvasWidth=$canvas.width();}).bind("drag",function(e,dd){var actualMinWidth,d=Math.min(maxPageX,Math.max(minPageX,e.pageX))-pageX,x,ci;if(d<0){x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth;}else{c.width=c.previousWidth+x;x=0;}}}
if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth;}else{c.width=c.previousWidth+x;x=0;}}}}else if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d);}}else{x=d;for(j=i;j>=0;j--){c=columns[j];if(c.resizable){if(x&&c.maxWidth&&(c.maxWidth-c.previousWidth<x)){x-=c.maxWidth-c.previousWidth;c.width=c.maxWidth;}else{c.width=c.previousWidth+x;x=0;}}}
if(options.forceFitColumns){x=-d;for(j=i+1;j<columnElements.length;j++){c=columns[j];if(c.resizable){actualMinWidth=Math.max(c.minWidth||0,absoluteColumnMinWidth);if(x&&c.previousWidth+x<actualMinWidth){x+=c.previousWidth-actualMinWidth;c.width=actualMinWidth;}else{c.width=c.previousWidth+x;x=0;}}}}else if(options.syncColumnCellResize){setCanvasWidth(originalCanvasWidth+d);}}
applyColumnHeaderWidths();if(options.syncColumnCellResize){applyColumnWidths();}}).bind("dragend",function(e,dd){var newWidth;$(this).parent().removeClass("slick-header-column-active");for(j=0;j<columnElements.length;j++){c=columns[j];newWidth=$(columnElements[j]).outerWidth();if(c.previousWidth!==newWidth&&c.rerenderOnResize){invalidateAllRows();}}
applyColumnWidths();resizeCanvas();trigger(self.onColumnsResized,{});});});}
function getVBoxDelta($el){var p=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var delta=0;$.each(p,function(n,val){delta+=parseFloat($el.css(val))||0;});return delta;}
function measureCellPaddingAndBorder(){var el;var h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var v=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];el=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers);headerColumnWidthDiff=headerColumnHeightDiff=0;$.each(h,function(n,val){headerColumnWidthDiff+=parseFloat(el.css(val))||0;});$.each(v,function(n,val){headerColumnHeightDiff+=parseFloat(el.css(val))||0;});el.remove();var r=$("<div class='slick-row' />").appendTo($canvas);el=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r);cellWidthDiff=cellHeightDiff=0;$.each(h,function(n,val){cellWidthDiff+=parseFloat(el.css(val))||0;});$.each(v,function(n,val){cellHeightDiff+=parseFloat(el.css(val))||0;});r.remove();absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff);}
function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));var rowHeight=(options.rowHeight-cellHeightDiff);var rules=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+rowHeight+"px; }","."+uid+" .slick-row { width:"+getRowWidth()+"px; height:"+options.rowHeight+"px; }","."+uid+" .lr { float:none; position:absolute; }"];var rowWidth=getRowWidth();var x=0,w;for(var i=0;i<columns.length;i++){w=columns[i].width;rules.push("."+uid+" .l"+i+" { left: "+x+"px; }");rules.push("."+uid+" .r"+i+" { right: "+(rowWidth-x-w)+"px; }");x+=columns[i].width;}
if($style[0].styleSheet){$style[0].styleSheet.cssText=rules.join(" ");}
else{$style[0].appendChild(document.createTextNode(rules.join(" ")));}
var sheets=document.styleSheets;for(var i=0;i<sheets.length;i++){if((sheets[i].ownerNode||sheets[i].owningElement)==$style[0]){stylesheet=sheets[i];break;}}}
function findCssRule(selector){var rules=(stylesheet.cssRules||stylesheet.rules);for(var i=0;i<rules.length;i++){if(rules[i].selectorText==selector)
return rules[i];}
return null;}
function removeCssRules(){$style.remove();}
function destroy(){getEditorLock().cancelCurrentEdit();trigger(self.onBeforeDestroy,{});for(var i=0;i<plugins.length;i++){unregisterPlugin(plugins[i]);}
if(options.enableColumnReorder&&$headers.sortable)
$headers.sortable("destroy");unbindAncestorScrollEvents();$container.unbind(".slickgrid");removeCssRules();$canvas.unbind("draginit dragstart dragend drag");$container.empty().removeClass(uid);}
function trigger(evt,args,e){e=e||new Slick.EventData();args=args||{};args.grid=self;return evt.notify(args,e,self);}
function getEditorLock(){return options.editorLock;}
function getEditController(){return editController;}
function getColumnIndex(id){return columnsById[id];}
function autosizeColumns(){var i,c,widths=[],shrinkLeeway=0,availWidth=(options.autoHeight?viewportW:viewportW-scrollbarDimensions.width),total=0,existingTotal=0;for(i=0;i<columns.length;i++){c=columns[i];widths.push(c.width);existingTotal+=c.width;shrinkLeeway+=c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth);}
total=existingTotal;invalidateAllRows();while(total>availWidth){if(!shrinkLeeway){return;}
var shrinkProportion=(total-availWidth)/shrinkLeeway;for(i=0;i<columns.length&&total>availWidth;i++){c=columns[i];if(!c.resizable||c.minWidth===c.width||c.width===absoluteColumnMinWidth){continue;}
var shrinkSize=Math.floor(shrinkProportion*(c.width-Math.max(c.minWidth||0,absoluteColumnMinWidth)))||1;total-=shrinkSize;widths[i]-=shrinkSize;}}
var previousTotal=total;while(total<availWidth){var growProportion=availWidth/total;for(i=0;i<columns.length&&total<availWidth;i++){c=columns[i];if(!c.resizable||c.maxWidth<=c.width){continue;}
var growSize=Math.min(Math.floor(growProportion*c.width)-c.width,(c.maxWidth-c.width)||1000000)||1;total+=growSize;widths[i]+=growSize;}
if(previousTotal==total)break;previousTotal=total;}
for(i=0;i<columns.length;i++){columns[i].width=widths[i];}
applyColumnHeaderWidths();applyColumnWidths();resizeCanvas();}
function applyColumnHeaderWidths(){var h;for(var i=0,headers=$headers.children(),ii=headers.length;i<ii;i++){h=$(headers[i]);if(h.width()!==columns[i].width-headerColumnWidthDiff){h.width(columns[i].width-headerColumnWidthDiff);}}}
function applyColumnWidths(){var rowWidth=getRowWidth();var x=0,w,rule;for(var i=0;i<columns.length;i++){w=columns[i].width;rule=findCssRule("."+uid+" .l"+i);rule.style.left=x+"px";rule=findCssRule("."+uid+" .r"+i);rule.style.right=(rowWidth-x-w)+"px";x+=columns[i].width;}
rule=findCssRule("."+uid+" .slick-row");rule.style.width=rowWidth+"px";}
function setSortColumn(columnId,ascending){sortColumnId=columnId;sortAsc=ascending;var columnIndex=getColumnIndex(sortColumnId);$headers.children().removeClass("slick-header-column-sorted");$headers.find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc");if(columnIndex!=null){$headers.children().eq(columnIndex).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc");}}
function handleSelectedRangesChanged(e,ranges){selectedRows=[];var hash={};for(var i=0;i<ranges.length;i++){for(var j=ranges[i].fromRow;j<=ranges[i].toRow;j++){if(!hash[j]){selectedRows.push(j);}
hash[j]={};for(var k=ranges[i].fromCell;k<=ranges[i].toCell;k++){if(canCellBeSelected(j,k)){hash[j][columns[k].id]=options.selectedCellCssClass;}}}}
setCellCssStyles(options.selectedCellCssClass,hash);trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e);}
function getColumns(){return columns;}
function setColumns(columnDefinitions){columns=columnDefinitions;invalidateAllRows();createColumnHeaders();removeCssRules();createCssRules();resizeAndRender();handleScroll();}
function getOptions(){return options;}
function setOptions(args){if(!getEditorLock().commitCurrentEdit()){return;}
makeActiveCellNormal();if(options.enableAddRow!==args.enableAddRow){invalidateRow(getDataLength());}
options=$.extend(options,args);render();}
function setData(newData,scrollToTop){invalidateAllRows();data=newData;if(scrollToTop)
scrollTo(0);}
function getData(){return data;}
function getDataLength(){if(data.getLength){return data.getLength();}
else{return data.length;}}
function getDataItem(i){if(data.getItem){return data.getItem(i);}
else{return data[i];}}
function getTopPanel(){return $topPanel[0];}
function showTopPanel(){options.showTopPanel=true;$topPanelScroller.slideDown("fast",resizeCanvas);}
function hideTopPanel(){options.showTopPanel=false;$topPanelScroller.slideUp("fast",resizeCanvas);}
function showHeaderRowColumns(){options.showHeaderRow=true;$headerRowScroller.slideDown("fast",resizeCanvas);}
function hideHeaderRowColumns(){options.showHeaderRow=false;$headerRowScroller.slideUp("fast",resizeCanvas);}
function scrollTo(y){var oldOffset=offset;page=Math.min(n-1,Math.floor(y/ph));offset=Math.round(page*cj);var newScrollTop=y-offset;if(offset!=oldOffset){var range=getVisibleRange(newScrollTop);cleanupRows(range.top,range.bottom);updateRowPositions();}
if(prevScrollTop!=newScrollTop){scrollDir=(prevScrollTop+oldOffset<newScrollTop+offset)?1:-1;$viewport[0].scrollTop=(lastRenderedScrollTop=scrollTop=prevScrollTop=newScrollTop);trigger(self.onViewportChanged,{});}}
function defaultFormatter(row,cell,value,columnDef,dataContext){return(value===null||value===undefined)?"":value;}
function getFormatter(row,column){var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnOverrides=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[column.id]||rowMetadata.columns[getColumnIndex(column.id)]);return(columnOverrides&&columnOverrides.formatter)||(rowMetadata&&rowMetadata.formatter)||column.formatter||(options.formatterFactory&&options.formatterFactory.getFormatter(column))||defaultFormatter;}
function getEditor(row,cell){var column=columns[cell];var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[column.id]&&columnMetadata[column.id].editor!==undefined){return columnMetadata[column.id].editor;}
if(columnMetadata&&columnMetadata[cell]&&columnMetadata[cell].editor!==undefined){return columnMetadata[cell].editor;}
return column.editor||(options.editorFactory&&options.editorFactory.getEditor(column));}
function appendRowHtml(stringArray,row){var d=getDataItem(row);var dataLoading=row<getDataLength()&&!d;var cellCss;var rowCss="slick-row "+
(dataLoading?" loading":"")+
(row%2==1?' odd':' even');var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(metadata&&metadata.cssClasses){rowCss+=" "+metadata.cssClasses;}
stringArray.push("<div class='ui-widget-content "+rowCss+"' row='"+row+"' style='top:"+(options.rowHeight*row-offset)+"px'>");var colspan;var rowHasColumnData=metadata&&metadata.columns;for(var i=0,cols=columns.length;i<cols;i++){var m=columns[i];colspan=getColspan(row,i);cellCss="slick-cell lr l"+i+" r"+Math.min(columns.length-1,i+colspan-1)+(m.cssClass?" "+m.cssClass:"");if(row===activeRow&&i===activeCell){cellCss+=(" active");}
for(var key in cellCssClasses){if(cellCssClasses[key][row]&&cellCssClasses[key][row][m.id]){cellCss+=(" "+cellCssClasses[key][row][m.id]);}}
stringArray.push("<div class='"+cellCss+"'>");if(d){stringArray.push(getFormatter(row,m)(row,i,d[m.field],m,d));}
stringArray.push("</div>");if(colspan)
i+=(colspan-1);}
stringArray.push("</div>");}
function cleanupRows(rangeToKeep){for(var i in rowsCache){if(((i=parseInt(i,10))!==activeRow)&&(i<rangeToKeep.top||i>rangeToKeep.bottom)){removeRowFromCache(i);}}}
function invalidate(){updateRowCount();invalidateAllRows();render();}
function invalidateAllRows(){if(currentEditor){makeActiveCellNormal();}
for(var row in rowsCache){removeRowFromCache(row);}}
function removeRowFromCache(row){var node=rowsCache[row];if(!node){return;}
$canvas[0].removeChild(node);delete rowsCache[row];delete postProcessedRows[row];renderedRows--;counter_rows_removed++;}
function invalidateRows(rows){var i,rl;if(!rows||!rows.length){return;}
scrollDir=0;for(i=0,rl=rows.length;i<rl;i++){if(currentEditor&&activeRow===i){makeActiveCellNormal();}
if(rowsCache[rows[i]]){removeRowFromCache(rows[i]);}}}
function invalidateRow(row){invalidateRows([row]);}
function updateCell(row,cell){var cellNode=getCellNode(row,cell);if(!cellNode){return;}
var m=columns[cell],d=getDataItem(row);if(currentEditor&&activeRow===row&&activeCell===cell){currentEditor.loadValue(d);}
else{cellNode.innerHTML=d?getFormatter(row,m)(row,cell,d[m.field],m,d):"";invalidatePostProcessingResults(row);}}
function updateRow(row){if(!rowsCache[row]){return;}
$(rowsCache[row]).children().each(function(i){var m=columns[i];if(row===activeRow&&i===activeCell&&currentEditor){currentEditor.loadValue(getDataItem(activeRow));}
else if(getDataItem(row)){this.innerHTML=getFormatter(row,m)(row,i,getDataItem(row)[m.field],m,getDataItem(row));}
else{this.innerHTML="";}});invalidatePostProcessingResults(row);}
function getViewportHeight(){return parseFloat($.css($container[0],"height",true))-
options.headerHeight-
getVBoxDelta($headers)-
(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-
(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0);}
function resizeCanvas(){if(options.autoHeight){viewportH=options.rowHeight*(getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0));}
else{viewportH=getViewportHeight();}
numVisibleRows=Math.ceil(viewportH/options.rowHeight);viewportW=parseFloat($.css($container[0],"width",true));$viewport.height(viewportH);var w=0,i=columns.length;while(i--){w+=columns[i].width;}
setCanvasWidth(w);updateRowCount();render();}
function resizeAndRender(){if(options.forceFitColumns){autosizeColumns();}else{resizeCanvas();}}
function updateRowCount(){var newRowCount=getDataLength()+(options.enableAddRow?1:0)+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var oldH=h;var l=options.enableAddRow?getDataLength():getDataLength()-1;for(var i in rowsCache){if(i>=l){removeRowFromCache(i);}}
th=Math.max(options.rowHeight*newRowCount,viewportH-scrollbarDimensions.height);if(th<maxSupportedCssHeight){h=ph=th;n=1;cj=0;}
else{h=maxSupportedCssHeight;ph=h/100;n=Math.floor(th/ph);cj=(th-h)/(n-1);}
if(h!==oldH){$canvas.css("height",h);scrollTop=$viewport[0].scrollTop;}
var oldScrollTopInRange=(scrollTop+offset<=th-viewportH);if(th==0||scrollTop==0){page=offset=0;}
else if(oldScrollTopInRange){scrollTo(scrollTop+offset);}
else{scrollTo(th-viewportH);}
if(h!=oldH&&options.autoHeight){resizeCanvas();}}
function getVisibleRange(viewportTop){if(viewportTop==null)
viewportTop=scrollTop;return{top:Math.floor((scrollTop+offset)/options.rowHeight),bottom:Math.ceil((scrollTop+offset+viewportH)/options.rowHeight)};}
function getRenderedRange(viewportTop){var range=getVisibleRange(viewportTop);var buffer=Math.round(viewportH/options.rowHeight);var minBuffer=3;if(scrollDir==-1){range.top-=buffer;range.bottom+=minBuffer;}
else if(scrollDir==1){range.top-=minBuffer;range.bottom+=buffer;}
else{range.top-=minBuffer;range.bottom+=minBuffer;}
range.top=Math.max(0,range.top);range.bottom=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,range.bottom);return range;}
function renderRows(range){var i,l,parentNode=$canvas[0],rowsBefore=renderedRows,stringArray=[],rows=[],startTimestamp=new Date(),needToReselectCell=false;for(i=range.top;i<=range.bottom;i++){if(rowsCache[i]){continue;}
renderedRows++;rows.push(i);appendRowHtml(stringArray,i);if(activeCellNode&&activeRow===i){needToReselectCell=true;}
counter_rows_rendered++;}
var x=document.createElement("div");x.innerHTML=stringArray.join("");for(i=0,l=x.childNodes.length;i<l;i++){rowsCache[rows[i]]=parentNode.appendChild(x.firstChild);}
if(needToReselectCell){activeCellNode=getCellNode(activeRow,activeCell);}
if(renderedRows-rowsBefore>5){avgRowRenderTime=(new Date()-startTimestamp)/(renderedRows-rowsBefore);}}
function startPostProcessing(){if(!options.enableAsyncPostRender){return;}
clearTimeout(h_postrender);h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);}
function invalidatePostProcessingResults(row){delete postProcessedRows[row];postProcessFromRow=Math.min(postProcessFromRow,row);postProcessToRow=Math.max(postProcessToRow,row);startPostProcessing();}
function updateRowPositions(){for(var row in rowsCache){rowsCache[row].style.top=(row*options.rowHeight-offset)+"px";}}
function render(){var visible=getVisibleRange();var rendered=getRenderedRange();cleanupRows(rendered);renderRows(rendered);postProcessFromRow=visible.top;postProcessToRow=Math.min(options.enableAddRow?getDataLength():getDataLength()-1,visible.bottom);startPostProcessing();lastRenderedScrollTop=scrollTop;h_render=null;}
function handleScroll(){scrollTop=$viewport[0].scrollTop;var scrollLeft=$viewport[0].scrollLeft;var scrollDist=Math.abs(scrollTop-prevScrollTop);if(scrollLeft!==prevScrollLeft){prevScrollLeft=scrollLeft;$headerScroller[0].scrollLeft=scrollLeft;$topPanelScroller[0].scrollLeft=scrollLeft;$headerRowScroller[0].scrollLeft=scrollLeft;}
if(scrollDist){scrollDir=prevScrollTop<scrollTop?1:-1;prevScrollTop=scrollTop;if(scrollDist<viewportH){scrollTo(scrollTop+offset);}
else{var oldOffset=offset;page=Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph)));offset=Math.round(page*cj);if(oldOffset!=offset)
invalidateAllRows();}
if(h_render)
clearTimeout(h_render);if(Math.abs(lastRenderedScrollTop-scrollTop)<viewportH)
render();else
h_render=setTimeout(render,50);trigger(self.onViewportChanged,{});}
trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop});}
function asyncPostProcessRows(){while(postProcessFromRow<=postProcessToRow){var row=(scrollDir>=0)?postProcessFromRow++:postProcessToRow--;var rowNode=rowsCache[row];if(!rowNode||postProcessedRows[row]||row>=getDataLength()){continue;}
var d=getDataItem(row),cellNodes=rowNode.childNodes;for(var i=0,j=0,l=columns.length;i<l;++i){var m=columns[i];if(m.asyncPostRender){m.asyncPostRender(cellNodes[j],postProcessFromRow,d,m);}
++j;}
postProcessedRows[row]=true;h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay);return;}}
function addCellCssStyles(key,hash){if(cellCssClasses[key]){throw"addCellCssStyles: cell CSS hash with key '"+key+"' already exists.";}
cellCssClasses[key]=hash;var node;for(var row in rowsCache){if(hash[row]){for(var columnId in hash[row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).addClass(hash[row][columnId]);}}}}}
function removeCellCssStyles(key){if(!cellCssClasses[key]){return;}
var node;for(var row in rowsCache){if(cellCssClasses[key][row]){for(var columnId in cellCssClasses[key][row]){node=getCellNode(row,getColumnIndex(columnId));if(node){$(node).removeClass(cellCssClasses[key][row][columnId]);}}}}
delete cellCssClasses[key];}
function setCellCssStyles(key,hash){removeCellCssStyles(key);addCellCssStyles(key,hash);}
function flashCell(row,cell,speed){speed=speed||100;if(rowsCache[row]){var $cell=$(getCellNode(row,cell));function toggleCellClass(times){if(!times)return;setTimeout(function(){$cell.queue(function(){$cell.toggleClass(options.cellFlashingCssClass).dequeue();toggleCellClass(times-1);});},speed);}
toggleCellClass(4);}}
function handleDragInit(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false;}
retval=trigger(self.onDragInit,dd,e);if(e.isImmediatePropagationStopped()){return retval;}
return false;}
function handleDragStart(e,dd){var cell=getCellFromEvent(e);if(!cell||!cellExists(cell.row,cell.cell)){return false;}
var retval=trigger(self.onDragStart,dd,e);if(e.isImmediatePropagationStopped()){return retval;}
return false;}
function handleDrag(e,dd){return trigger(self.onDrag,dd,e);}
function handleDragEnd(e,dd){trigger(self.onDragEnd,dd,e);}
function handleKeyDown(e){trigger(self.onKeyDown,{},e);var handled=e.isImmediatePropagationStopped();if(!handled){if(!e.shiftKey&&!e.altKey&&!e.ctrlKey){if(e.which==27){if(!getEditorLock().isActive()){return;}
cancelEditAndSetFocus();}
else if(e.which==37){navigateLeft();}
else if(e.which==39){navigateRight();}
else if(e.which==38){navigateUp();}
else if(e.which==40){navigateDown();}
else if(e.which==9){navigateNext();}
else if(e.which==13){if(options.editable){if(currentEditor){if(activeRow===getDataLength()){navigateDown();}
else{commitEditAndSetFocus();}}else{if(getEditorLock().commitCurrentEdit()){makeActiveCellEditable();}}}}
else
return;}
else if(e.which==9&&e.shiftKey&&!e.ctrlKey&&!e.altKey){navigatePrev();}
else
return;}
e.stopPropagation();e.preventDefault();try{e.originalEvent.keyCode=0;}
catch(error){}}
function handleClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return;}
trigger(self.onClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return;}
if(canCellBeActive(cell.row,cell.cell)){if(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit()){scrollRowIntoView(cell.row,false);setActiveCellInternal(getCellNode(cell.row,cell.cell),(cell.row===getDataLength())||options.autoEdit);}}}
function handleContextMenu(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if($cell.length===0){return;}
if(activeCellNode===$cell[0]&&currentEditor!==null){return;}
trigger(self.onContextMenu,{},e);}
function handleDblClick(e){var cell=getCellFromEvent(e);if(!cell||(currentEditor!==null&&activeRow==cell.row&&activeCell==cell.cell)){return;}
trigger(self.onDblClick,{row:cell.row,cell:cell.cell},e);if(e.isImmediatePropagationStopped()){return;}
if(options.editable){gotoCell(cell.row,cell.cell,true);}}
function handleHeaderContextMenu(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderContextMenu,{column:column},e);}
function handleHeaderClick(e){var $header=$(e.target).closest(".slick-header-column",".slick-header-columns");var column=$header&&columns[self.getColumnIndex($header.data("fieldId"))];trigger(self.onHeaderClick,{column:column},e);}
function handleMouseEnter(e){trigger(self.onMouseEnter,{},e);}
function handleMouseLeave(e){trigger(self.onMouseLeave,{},e);}
function cellExists(row,cell){return!(row<0||row>=getDataLength()||cell<0||cell>=columns.length);}
function getCellFromPoint(x,y){var row=Math.floor((y+offset)/options.rowHeight);var cell=0;var w=0;for(var i=0;i<columns.length&&w<x;i++){w+=columns[i].width;cell++;}
if(cell<0){cell=0;}
return{row:row,cell:cell-1};}
function getCellFromNode(node){var cls=/l\d+/.exec(node.className)||/c\d+/.exec(node.className);if(!cls)
throw"getCellFromNode: cannot get cell - "+node.className;return parseInt(cls[0].substr(1,cls[0].length-1),10);}
function getCellFromEvent(e){var $cell=$(e.target).closest(".slick-cell",$canvas);if(!$cell.length)
return null;return{row:$cell.parent().attr("row")|0,cell:getCellFromNode($cell[0])};}
function getCellNodeBox(row,cell){if(!cellExists(row,cell))
return null;var y1=row*options.rowHeight-offset;var y2=y1+options.rowHeight-1;var x1=0;for(var i=0;i<cell;i++){x1+=columns[i].width;}
var x2=x1+columns[cell].width;return{top:y1,left:x1,bottom:y2,right:x2};}
function resetActiveCell(){setActiveCellInternal(null,false);}
function setFocus(){if($.browser.msie){$canvas[0].setActive();}
else{$canvas[0].focus();}}
function scrollActiveCellIntoView(){if(activeCellNode){var left=$(activeCellNode).position().left,right=left+$(activeCellNode).outerWidth(),scrollLeft=$viewport.scrollLeft(),scrollRight=scrollLeft+$viewport.width();if(left<scrollLeft)
$viewport.scrollLeft(left);else if(right>scrollRight)
$viewport.scrollLeft(Math.min(left,right-$viewport[0].clientWidth));}}
function setActiveCellInternal(newCell,editMode){if(activeCellNode!==null){makeActiveCellNormal();$(activeCellNode).removeClass("active");}
var activeCellChanged=(activeCellNode!==newCell);activeCellNode=newCell;if(activeCellNode!=null){activeRow=parseInt($(activeCellNode).parent().attr("row"));activeCell=activePosX=getCellFromNode(activeCellNode);$(activeCellNode).addClass("active");if(options.editable&&editMode&&isCellPotentiallyEditable(activeRow,activeCell)){clearTimeout(h_editorLoader);if(options.asyncEditorLoading){h_editorLoader=setTimeout(function(){makeActiveCellEditable();},options.asyncEditorLoadDelay);}
else{makeActiveCellEditable();}}
else{setFocus();}}
else{activeRow=activeCell=null;}
if(activeCellChanged){scrollActiveCellIntoView();trigger(self.onActiveCellChanged,getActiveCell());}}
function clearTextSelection(){if(document.selection&&document.selection.empty){document.selection.empty();}
else if(window.getSelection){var sel=window.getSelection();if(sel&&sel.removeAllRanges){sel.removeAllRanges();}}}
function isCellPotentiallyEditable(row,cell){if(row<getDataLength()&&!getDataItem(row)){return false;}
if(columns[cell].cannotTriggerInsert&&row>=getDataLength()){return false;}
if(!getEditor(row,cell)){return false;}
return true;}
function makeActiveCellNormal(){if(!currentEditor){return;}
trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor});currentEditor.destroy();currentEditor=null;if(activeCellNode){$(activeCellNode).removeClass("editable invalid");if(getDataItem(activeRow)){var column=columns[activeCell];activeCellNode.innerHTML=getFormatter(activeRow,column)(activeRow,activeCell,getDataItem(activeRow)[column.field],column,getDataItem(activeRow));invalidatePostProcessingResults(activeRow);}}
if($.browser.msie){clearTextSelection();}
getEditorLock().deactivate(editController);}
function makeActiveCellEditable(editor){if(!activeCellNode){return;}
if(!options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";}
clearTimeout(h_editorLoader);if(!isCellPotentiallyEditable(activeRow,activeCell)){return;}
var columnDef=columns[activeCell];var item=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:item,column:columnDef})===false){setFocus();return;}
getEditorLock().activate(editController);$(activeCellNode).addClass("editable");if(!editor){activeCellNode.innerHTML="";}
currentEditor=new(editor||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:columnDef,item:item||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus});if(item)
currentEditor.loadValue(item);serializedEditorValue=currentEditor.serializeValue();if(currentEditor.position)
handleActiveCellPositionChange();}
function commitEditAndSetFocus(){if(getEditorLock().commitCurrentEdit()){setFocus();if(options.autoEdit){navigateDown();}}}
function cancelEditAndSetFocus(){if(getEditorLock().cancelCurrentEdit()){setFocus();}}
function absBox(elem){var box={top:elem.offsetTop,left:elem.offsetLeft,bottom:0,right:0,width:$(elem).outerWidth(),height:$(elem).outerHeight(),visible:true};box.bottom=box.top+box.height;box.right=box.left+box.width;var offsetParent=elem.offsetParent;while((elem=elem.parentNode)!=document.body){if(box.visible&&elem.scrollHeight!=elem.offsetHeight&&$(elem).css("overflowY")!="visible")
box.visible=box.bottom>elem.scrollTop&&box.top<elem.scrollTop+elem.clientHeight;if(box.visible&&elem.scrollWidth!=elem.offsetWidth&&$(elem).css("overflowX")!="visible")
box.visible=box.right>elem.scrollLeft&&box.left<elem.scrollLeft+elem.clientWidth;box.left-=elem.scrollLeft;box.top-=elem.scrollTop;if(elem===offsetParent){box.left+=elem.offsetLeft;box.top+=elem.offsetTop;offsetParent=elem.offsetParent;}
box.bottom=box.top+box.height;box.right=box.left+box.width;}
return box;}
function getActiveCellPosition(){return absBox(activeCellNode);}
function getGridPosition(){return absBox($container[0])}
function handleActiveCellPositionChange(){if(!activeCellNode)return;var cellBox;trigger(self.onActiveCellPositionChanged,{});if(currentEditor){cellBox=cellBox||getActiveCellPosition();if(currentEditor.show&&currentEditor.hide){if(!cellBox.visible)
currentEditor.hide();else
currentEditor.show();}
if(currentEditor.position)
currentEditor.position(cellBox);}}
function getCellEditor(){return currentEditor;}
function getActiveCell(){if(!activeCellNode)
return null;else
return{row:activeRow,cell:activeCell};}
function getActiveCellNode(){return activeCellNode;}
function scrollRowIntoView(row,doPaging){var rowAtTop=row*options.rowHeight;var rowAtBottom=(row+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);if((row+1)*options.rowHeight>scrollTop+viewportH+offset){scrollTo(doPaging?rowAtTop:rowAtBottom);render();}
else if(row*options.rowHeight<scrollTop+offset){scrollTo(doPaging?rowAtBottom:rowAtTop);render();}}
function getColspan(row,cell){var metadata=data.getItemMetadata&&data.getItemMetadata(row);if(!metadata||!metadata.columns){return 1;}
var columnData=metadata.columns[columns[cell].id]||metadata.columns[cell];var colspan=(columnData&&columnData.colspan);if(colspan==="*"){colspan=columns.length-cell;}
return(colspan||1);}
function findFirstFocusableCell(row){var cell=0;while(cell<columns.length){if(canCellBeActive(row,cell)){return cell;}
cell+=getColspan(row,cell);}
return null;}
function findLastFocusableCell(row){var cell=0;var lastFocusableCell=null;while(cell<columns.length){if(canCellBeActive(row,cell)){lastFocusableCell=cell;}
cell+=getColspan(row,cell);}
return lastFocusableCell;}
function gotoRight(row,cell,posX){if(cell>=columns.length){return null;}
do{cell+=getColspan(row,cell);}
while(cell<columns.length&&!canCellBeActive(row,cell));if(cell<columns.length){return{"row":row,"cell":cell,"posX":cell};}
return null;}
function gotoLeft(row,cell,posX){if(cell<=0){return null;}
var firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell===null||firstFocusableCell>=cell){return null;}
var prev={"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};var pos;while(true){pos=gotoRight(prev.row,prev.cell,prev.posX);if(!pos){return null;}
if(pos.cell>=cell){return prev;}
prev=pos;}}
function gotoDown(row,cell,posX){var prevCell;while(true){if(++row>=getDataLength()+(options.enableAddRow?1:0)){return null;}
prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell);}
if(canCellBeActive(row,prevCell)){return{"row":row,"cell":prevCell,"posX":posX};}}}
function gotoUp(row,cell,posX){var prevCell;while(true){if(--row<0){return null;}
prevCell=cell=0;while(cell<=posX){prevCell=cell;cell+=getColspan(row,cell);}
if(canCellBeActive(row,prevCell)){return{"row":row,"cell":prevCell,"posX":posX};}}}
function gotoNext(row,cell,posX){var pos=gotoRight(row,cell,posX);if(pos){return pos;}
var firstFocusableCell=null;while(++row<getDataLength()+(options.enableAddRow?1:0)){firstFocusableCell=findFirstFocusableCell(row);if(firstFocusableCell!==null){return{"row":row,"cell":firstFocusableCell,"posX":firstFocusableCell};}}
return null;}
function gotoPrev(row,cell,posX){var pos;var lastSelectableCell;while(!pos){pos=gotoLeft(row,cell,posX);if(pos){break;}
if(--row<0){return null;}
cell=0;lastSelectableCell=findLastFocusableCell(row);if(lastSelectableCell!==null){pos={"row":row,"cell":lastSelectableCell,"posX":lastSelectableCell};}}
return pos;}
function navigateRight(){navigate("right");}
function navigateLeft(){navigate("left");}
function navigateDown(){navigate("down");}
function navigateUp(){navigate("up");}
function navigateNext(){navigate("next");}
function navigatePrev(){navigate("prev");}
function navigate(dir){if(!activeCellNode||!options.enableCellNavigation){return;}
if(!getEditorLock().commitCurrentEdit()){return;}
var stepFunctions={"up":gotoUp,"down":gotoDown,"left":gotoLeft,"right":gotoRight,"prev":gotoPrev,"next":gotoNext};var stepFn=stepFunctions[dir];var pos=stepFn(activeRow,activeCell,activePosX);if(pos){var isAddNewRow=(pos.row==getDataLength());scrollRowIntoView(pos.row,!isAddNewRow);setActiveCellInternal(getCellNode(pos.row,pos.cell),isAddNewRow||options.autoEdit);activePosX=pos.posX;}}
function getCellNode(row,cell){if(rowsCache[row]){var cells=$(rowsCache[row]).children();var nodeCell;for(var i=0;i<cells.length;i++){nodeCell=getCellFromNode(cells[i]);if(nodeCell===cell){return cells[i];}
else if(nodeCell>cell){return null;}}}
return null;}
function setActiveCell(row,cell){if(row>getDataLength()||row<0||cell>=columns.length||cell<0){return;}
if(!options.enableCellNavigation){return;}
scrollRowIntoView(row,false);setActiveCellInternal(getCellNode(row,cell),false);}
function canCellBeActive(row,cell){if(!options.enableCellNavigation||row>=getDataLength()+(options.enableAddRow?1:0)||row<0||cell>=columns.length||cell<0){return false;}
var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.focusable==="boolean"){return rowMetadata.focusable;}
var columnMetadata=rowMetadata&&rowMetadata.columns;if(columnMetadata&&columnMetadata[columns[cell].id]&&typeof columnMetadata[columns[cell].id].focusable==="boolean"){return columnMetadata[columns[cell].id].focusable;}
if(columnMetadata&&columnMetadata[cell]&&typeof columnMetadata[cell].focusable==="boolean"){return columnMetadata[cell].focusable;}
if(typeof columns[cell].focusable==="boolean"){return columns[cell].focusable;}
return true;}
function canCellBeSelected(row,cell){if(row>=getDataLength()||row<0||cell>=columns.length||cell<0){return false;}
var rowMetadata=data.getItemMetadata&&data.getItemMetadata(row);if(rowMetadata&&typeof rowMetadata.selectable==="boolean"){return rowMetadata.selectable;}
var columnMetadata=rowMetadata&&rowMetadata.columns&&(rowMetadata.columns[columns[cell].id]||rowMetadata.columns[cell]);if(columnMetadata&&typeof columnMetadata.selectable==="boolean"){return columnMetadata.selectable;}
if(typeof columns[cell].selectable==="boolean"){return columns[cell].selectable;}
return true;}
function gotoCell(row,cell,forceEdit){if(!canCellBeActive(row,cell)){return;}
if(!getEditorLock().commitCurrentEdit()){return;}
scrollRowIntoView(row,false);var newCell=getCellNode(row,cell);setActiveCellInternal(newCell,forceEdit||(row===getDataLength())||options.autoEdit);if(!currentEditor){setFocus();}}
function commitCurrentEdit(){var item=getDataItem(activeRow);var column=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var validationResults=currentEditor.validate();if(validationResults.valid){if(activeRow<getDataLength()){var editCommand={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(item,this.serializedValue);updateRow(this.row);},undo:function(){this.editor.applyValue(item,this.prevSerializedValue);updateRow(this.row);}};if(options.editCommandHandler){makeActiveCellNormal();options.editCommandHandler(item,column,editCommand);}
else{editCommand.execute();makeActiveCellNormal();}
trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:item});}
else{var newItem={};currentEditor.applyValue(newItem,currentEditor.serializeValue());makeActiveCellNormal();trigger(self.onAddNewRow,{item:newItem,column:column});}
return!getEditorLock().isActive();}
else{$(activeCellNode).addClass("invalid");$(activeCellNode).stop(true,true).effect("highlight",{color:"red"},300);trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:validationResults,row:activeRow,cell:activeCell,column:column});currentEditor.focus();return false;}}
makeActiveCellNormal();}
return true;}
function cancelCurrentEdit(){makeActiveCellNormal();return true;}
function rowsToRanges(rows){var ranges=[];var lastCell=columns.length-1;for(var i=0;i<rows.length;i++){ranges.push(new Slick.Range(rows[i],0,rows[i],lastCell));}
return ranges;}
function getSelectedRows(){if(!selectionModel){throw"Selection model is not set";}
return selectedRows;}
function setSelectedRows(rows){if(!selectionModel){throw"Selection model is not set";}
selectionModel.setSelectedRanges(rowsToRanges(rows));}
this.debug=function(){var s="";s+=("\n"+"counter_rows_rendered:  "+counter_rows_rendered);s+=("\n"+"counter_rows_removed:  "+counter_rows_removed);s+=("\n"+"renderedRows:  "+renderedRows);s+=("\n"+"numVisibleRows:  "+numVisibleRows);s+=("\n"+"maxSupportedCssHeight:  "+maxSupportedCssHeight);s+=("\n"+"n(umber of pages):  "+n);s+=("\n"+"(current) page:  "+page);s+=("\n"+"page height (ph):  "+ph);s+=("\n"+"scrollDir:  "+scrollDir);alert(s);};this.eval=function(expr){return eval(expr);};$.extend(this,{"slickGridVersion":"2.0a1","onScroll":new Slick.Event(),"onSort":new Slick.Event(),"onHeaderContextMenu":new Slick.Event(),"onHeaderClick":new Slick.Event(),"onMouseEnter":new Slick.Event(),"onMouseLeave":new Slick.Event(),"onClick":new Slick.Event(),"onDblClick":new Slick.Event(),"onContextMenu":new Slick.Event(),"onKeyDown":new Slick.Event(),"onAddNewRow":new Slick.Event(),"onValidationError":new Slick.Event(),"onViewportChanged":new Slick.Event(),"onColumnsReordered":new Slick.Event(),"onColumnsResized":new Slick.Event(),"onCellChange":new Slick.Event(),"onBeforeEditCell":new Slick.Event(),"onBeforeCellEditorDestroy":new Slick.Event(),"onBeforeDestroy":new Slick.Event(),"onActiveCellChanged":new Slick.Event(),"onActiveCellPositionChanged":new Slick.Event(),"onDragInit":new Slick.Event(),"onDragStart":new Slick.Event(),"onDrag":new Slick.Event(),"onDragEnd":new Slick.Event(),"onSelectedRowsChanged":new Slick.Event(),"registerPlugin":registerPlugin,"unregisterPlugin":unregisterPlugin,"getColumns":getColumns,"setColumns":setColumns,"getColumnIndex":getColumnIndex,"updateColumnHeader":updateColumnHeader,"setSortColumn":setSortColumn,"autosizeColumns":autosizeColumns,"getOptions":getOptions,"setOptions":setOptions,"getData":getData,"getDataLength":getDataLength,"getDataItem":getDataItem,"setData":setData,"getSelectionModel":getSelectionModel,"setSelectionModel":setSelectionModel,"getSelectedRows":getSelectedRows,"setSelectedRows":setSelectedRows,"render":render,"invalidate":invalidate,"invalidateRow":invalidateRow,"invalidateRows":invalidateRows,"invalidateAllRows":invalidateAllRows,"updateCell":updateCell,"updateRow":updateRow,"getViewport":getVisibleRange,"resizeCanvas":resizeCanvas,"updateRowCount":updateRowCount,"scrollRowIntoView":scrollRowIntoView,"getCanvasNode":getCanvasNode,"getCellFromPoint":getCellFromPoint,"getCellFromEvent":getCellFromEvent,"getActiveCell":getActiveCell,"setActiveCell":setActiveCell,"getActiveCellNode":getActiveCellNode,"getActiveCellPosition":getActiveCellPosition,"resetActiveCell":resetActiveCell,"editActiveCell":makeActiveCellEditable,"getCellEditor":getCellEditor,"getCellNode":getCellNode,"getCellNodeBox":getCellNodeBox,"canCellBeSelected":canCellBeSelected,"canCellBeActive":canCellBeActive,"navigatePrev":navigatePrev,"navigateNext":navigateNext,"navigateUp":navigateUp,"navigateDown":navigateDown,"navigateLeft":navigateLeft,"navigateRight":navigateRight,"gotoCell":gotoCell,"getTopPanel":getTopPanel,"showTopPanel":showTopPanel,"hideTopPanel":hideTopPanel,"showHeaderRowColumns":showHeaderRowColumns,"hideHeaderRowColumns":hideHeaderRowColumns,"getHeaderRow":getHeaderRow,"getHeaderRowColumn":getHeaderRowColumn,"getGridPosition":getGridPosition,"flashCell":flashCell,"addCellCssStyles":addCellCssStyles,"setCellCssStyles":setCellCssStyles,"removeCellCssStyles":removeCellCssStyles,"destroy":destroy,"getEditorLock":getEditorLock,"getEditController":getEditController});init();}}(jQuery));(function($){$.extend(true,window,{Slick:{Data:{GroupItemMetadataProvider:GroupItemMetadataProvider}}});function GroupItemMetadataProvider(options){var _grid;var _defaults={groupCssClass:"slick-group",totalsCssClass:"slick-group-totals",groupFocusable:true,totalsFocusable:false,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:true};options=$.extend(true,{},_defaults,options);function defaultGroupCellFormatter(row,cell,value,columnDef,item){if(!options.enableExpandCollapse){return item.title;}
return"<span class='"+options.toggleCssClass+" "+
(item.collapsed?options.toggleCollapsedCssClass:options.toggleExpandedCssClass)+"'></span>"+item.title;}
function defaultTotalsCellFormatter(row,cell,value,columnDef,item){return(columnDef.groupTotalsFormatter&&columnDef.groupTotalsFormatter(item,columnDef))||"";}
function init(grid){_grid=grid;_grid.onClick.subscribe(handleGridClick);_grid.onKeyDown.subscribe(handleGridKeyDown);}
function destroy(){if(_grid){_grid.onClick.unsubscribe(handleGridClick);_grid.onKeyDown.unsubscribe(handleGridKeyDown);}}
function handleGridClick(e,args){var item=this.getDataItem(args.row);if(item&&item instanceof Slick.Group&&$(e.target).hasClass(options.toggleCssClass)){if(item.collapsed){this.getData().expandGroup(item.value);}
else{this.getData().collapseGroup(item.value);}
e.stopImmediatePropagation();e.preventDefault();}}
function handleGridKeyDown(e,args){if(options.enableExpandCollapse&&(e.which==$.ui.keyCode.SPACE)){var activeCell=this.getActiveCell();if(activeCell){var item=this.getDataItem(activeCell.row);if(item&&item instanceof Slick.Group){if(item.collapsed){this.getData().expandGroup(item.value);}
else{this.getData().collapseGroup(item.value);}
e.stopImmediatePropagation();e.preventDefault();}}}}
function getGroupRowMetadata(item){return{selectable:false,focusable:options.groupFocusable,cssClasses:options.groupCssClass,columns:{0:{colspan:"*",formatter:defaultGroupCellFormatter,editor:null}}};}
function getTotalsRowMetadata(item){return{selectable:false,focusable:options.totalsFocusable,cssClasses:options.totalsCssClass,formatter:defaultTotalsCellFormatter,editor:null};}
return{"init":init,"destroy":destroy,"getGroupRowMetadata":getGroupRowMetadata,"getTotalsRowMetadata":getTotalsRowMetadata};}})(jQuery);(function($){$.extend(true,window,{Slick:{Data:{DataView:DataView,Aggregators:{Avg:AvgAggregator,Min:MinAggregator,Max:MaxAggregator}}}});function DataView(options){var self=this;var defaults={groupItemMetadataProvider:null};var idProperty="id";var items=[];var rows=[];var idxById={};var rowsById=null;var filter=null;var updated=null;var suspend=false;var sortAsc=true;var fastSortField;var sortComparer;var groupingGetter;var groupingGetterIsAFn;var groupingFormatter;var groupingComparer;var groups=[];var collapsedGroups={};var aggregators;var aggregateCollapsed=false;var pagesize=0;var pagenum=0;var totalRows=0;var onRowCountChanged=new Slick.Event();var onRowsChanged=new Slick.Event();var onPagingInfoChanged=new Slick.Event();options=$.extend(true,{},defaults,options);function beginUpdate(){suspend=true;}
function endUpdate(hints){suspend=false;refresh(hints);}
function updateIdxById(startingIndex){startingIndex=startingIndex||0;var id;for(var i=startingIndex,l=items.length;i<l;i++){id=items[i][idProperty];if(id===undefined){throw"Each data element must implement a unique 'id' property";}
idxById[id]=i;}}
function ensureIdUniqueness(){var id;for(var i=0,l=items.length;i<l;i++){id=items[i][idProperty];if(id===undefined||idxById[id]!==i){throw"Each data element must implement a unique 'id' property";}}}
function getItems(){return items;}
function setItems(data,objectIdProperty){if(objectIdProperty!==undefined)idProperty=objectIdProperty;items=data;idxById={};updateIdxById();ensureIdUniqueness();refresh();}
function setPagingOptions(args){if(args.pageSize!=undefined)
pagesize=args.pageSize;if(args.pageNum!=undefined)
pagenum=Math.min(args.pageNum,Math.ceil(totalRows/pagesize));onPagingInfoChanged.notify(getPagingInfo(),null,self);refresh();}
function getPagingInfo(){return{pageSize:pagesize,pageNum:pagenum,totalRows:totalRows};}
function sort(comparer,ascending){sortAsc=ascending;sortComparer=comparer;fastSortField=null;if(ascending===false)items.reverse();items.sort(comparer);if(ascending===false)items.reverse();idxById={};updateIdxById();refresh();}
function fastSort(field,ascending){sortAsc=ascending;fastSortField=field;sortComparer=null;var oldToString=Object.prototype.toString;Object.prototype.toString=(typeof field=="function")?field:function(){return this[field]};if(ascending===false)items.reverse();items.sort();Object.prototype.toString=oldToString;if(ascending===false)items.reverse();idxById={};updateIdxById();refresh();}
function reSort(){if(sortComparer){sort(sortComparer,sortAsc);}
else if(fastSortField){fastSort(fastSortField,sortAsc);}}
function setFilter(filterFn){filter=filterFn;refresh();}
function groupBy(valueGetter,valueFormatter,sortComparer){if(!options.groupItemMetadataProvider){options.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider();}
groupingGetter=valueGetter;groupingGetterIsAFn=typeof groupingGetter==="function";groupingFormatter=valueFormatter;groupingComparer=sortComparer;collapsedGroups={};groups=[];refresh();}
function setAggregators(groupAggregators,includeCollapsed){aggregators=groupAggregators;aggregateCollapsed=includeCollapsed!==undefined?includeCollapsed:aggregateCollapsed;refresh();}
function getItemByIdx(i){return items[i];}
function getIdxById(id){return idxById[id];}
function getRowById(id){if(!rowsById){rowsById={};for(var i=0,l=rows.length;i<l;++i){rowsById[rows[i][idProperty]]=i;}}
return rowsById[id];}
function getItemById(id){return items[idxById[id]];}
function updateItem(id,item){if(idxById[id]===undefined||id!==item[idProperty])
throw"Invalid or non-matching id";items[idxById[id]]=item;if(!updated)updated={};updated[id]=true;refresh();}
function insertItem(insertBefore,item){items.splice(insertBefore,0,item);updateIdxById(insertBefore);refresh();}
function addItem(item){items.push(item);updateIdxById(items.length-1);refresh();}
function deleteItem(id){var idx=idxById[id];if(idx===undefined){throw"Invalid id";}
delete idxById[id];items.splice(idx,1);updateIdxById(idx);refresh();}
function getLength(){return rows.length;}
function getItem(i){return rows[i];}
function getItemMetadata(i){var item=rows[i];if(item===undefined){return null;}
if(item.__group){return options.groupItemMetadataProvider.getGroupRowMetadata(item);}
if(item.__groupTotals){return options.groupItemMetadataProvider.getTotalsRowMetadata(item);}
return null;}
function collapseGroup(groupingValue){collapsedGroups[groupingValue]=true;refresh();}
function expandGroup(groupingValue){delete collapsedGroups[groupingValue];refresh();}
function getGroups(){return groups;}
function extractGroups(rows){var group;var val;var groups=[];var groupsByVal={};var r;for(var i=0,l=rows.length;i<l;i++){r=rows[i];val=(groupingGetterIsAFn)?groupingGetter(r):r[groupingGetter];group=groupsByVal[val];if(!group){group=new Slick.Group();group.count=0;group.value=val;group.rows=[];groups[groups.length]=group;groupsByVal[val]=group;}
group.rows[group.count++]=r;}
return groups;}
function calculateGroupTotals(group){var r,idx;if(group.collapsed&&!aggregateCollapsed){return;}
idx=aggregators.length;while(idx--){aggregators[idx].init();}
for(var j=0,jj=group.rows.length;j<jj;j++){r=group.rows[j];idx=aggregators.length;while(idx--){aggregators[idx].accumulate(r);}}
var t=new Slick.GroupTotals();idx=aggregators.length;while(idx--){aggregators[idx].storeResult(t);}
t.group=group;group.totals=t;}
function calculateTotals(groups){var idx=groups.length;while(idx--){calculateGroupTotals(groups[idx]);}}
function finalizeGroups(groups){var idx=groups.length,g;while(idx--){g=groups[idx];g.collapsed=(g.value in collapsedGroups);g.title=groupingFormatter?groupingFormatter(g):g.value;}}
function flattenGroupedRows(groups){var groupedRows=[],gl=0,idx,t,g,r;for(var i=0,l=groups.length;i<l;i++){g=groups[i];groupedRows[gl++]=g;if(!g.collapsed){for(var j=0,jj=g.rows.length;j<jj;j++){groupedRows[gl++]=g.rows[j];}}
if(g.totals&&(!g.collapsed||aggregateCollapsed)){groupedRows[gl++]=g.totals;}}
return groupedRows;}
function getFilteredAndPagedItems(items,filter){var pageStartRow=pagesize*pagenum;var pageEndRow=pageStartRow+pagesize;var itemIdx=0,rowIdx=0,item;var newRows=[];if(filter){for(var i=0,il=items.length;i<il;++i){item=items[i];if(!filter||filter(item)){if(!pagesize||(itemIdx>=pageStartRow&&itemIdx<pageEndRow)){newRows[rowIdx]=item;rowIdx++;}
itemIdx++;}}}
else{newRows=pagesize?items.slice(pageStartRow,pageEndRow):items.concat();itemIdx=items.length;}
return{totalRows:itemIdx,rows:newRows};}
function getRowDiffs(rows,newRows){var item,r,eitherIsNonData,diff=[];for(var i=0,rl=rows.length,nrl=newRows.length;i<nrl;i++){if(i>=rl){diff[diff.length]=i;}
else{item=newRows[i];r=rows[i];if((groupingGetter&&(eitherIsNonData=(item.__nonDataRow)||(r.__nonDataRow))&&item.__group!==r.__group||item.__updated||item.__group&&!item.equals(r))||(aggregators&&eitherIsNonData&&(item.__groupTotals||r.__groupTotals))||item[idProperty]!=r[idProperty]||(updated&&updated[item[idProperty]])){diff[diff.length]=i;}}}
return diff;}
function recalc(_items,_rows,_filter){rowsById=null;var newRows=[];var filteredItems=getFilteredAndPagedItems(_items,_filter);totalRows=filteredItems.totalRows;newRows=filteredItems.rows;groups=[];if(groupingGetter!=null){groups=extractGroups(newRows);if(groups.length){finalizeGroups(groups);if(aggregators){calculateTotals(groups);}
groups.sort(groupingComparer);newRows=flattenGroupedRows(groups);}}
var diff=getRowDiffs(_rows,newRows);rows=newRows;return diff;}
function refresh(){if(suspend)return;var countBefore=rows.length;var totalRowsBefore=totalRows;var diff=recalc(items,rows,filter);if(pagesize&&totalRows<pagenum*pagesize){pagenum=Math.floor(totalRows/pagesize);diff=recalc(items,rows,filter);}
updated=null;if(totalRowsBefore!=totalRows)onPagingInfoChanged.notify(getPagingInfo(),null,self);if(countBefore!=rows.length)onRowCountChanged.notify({previous:countBefore,current:rows.length},null,self);if(diff.length>0)onRowsChanged.notify({rows:diff},null,self);}
return{"beginUpdate":beginUpdate,"endUpdate":endUpdate,"setPagingOptions":setPagingOptions,"getPagingInfo":getPagingInfo,"getItems":getItems,"setItems":setItems,"setFilter":setFilter,"sort":sort,"fastSort":fastSort,"reSort":reSort,"groupBy":groupBy,"setAggregators":setAggregators,"collapseGroup":collapseGroup,"expandGroup":expandGroup,"getGroups":getGroups,"getIdxById":getIdxById,"getRowById":getRowById,"getItemById":getItemById,"getItemByIdx":getItemByIdx,"refresh":refresh,"updateItem":updateItem,"insertItem":insertItem,"addItem":addItem,"deleteItem":deleteItem,"getLength":getLength,"getItem":getItem,"getItemMetadata":getItemMetadata,"onRowCountChanged":onRowCountChanged,"onRowsChanged":onRowsChanged,"onPagingInfoChanged":onPagingInfoChanged};}
function AvgAggregator(field){var count;var nonNullCount;var sum;this.init=function(){count=0;nonNullCount=0;sum=0;};this.accumulate=function(item){var val=item[field];count++;if(val!=null&&val!=NaN){nonNullCount++;sum+=1*val;}};this.storeResult=function(groupTotals){if(!groupTotals.avg){groupTotals.avg={};}
if(nonNullCount!=0){groupTotals.avg[field]=sum/nonNullCount;}};}
function MinAggregator(field){var min;this.init=function(){min=null;};this.accumulate=function(item){var val=item[field];if(val!=null&&val!=NaN){if(min==null||val<min){min=val;}}};this.storeResult=function(groupTotals){if(!groupTotals.min){groupTotals.min={};}
groupTotals.min[field]=min;}}
function MaxAggregator(field){var max;this.init=function(){max=null;};this.accumulate=function(item){var val=item[field];if(val!=null&&val!=NaN){if(max==null||val>max){max=val;}}};this.storeResult=function(groupTotals){if(!groupTotals.max){groupTotals.max={};}
groupTotals.max[field]=max;}}})(jQuery);(function($){function SlickGridPager(dataView,grid,$container)
{var $status,$contextMenu;function init()
{dataView.onPagingInfoChanged.subscribe(function(e,pagingInfo){updatePager(pagingInfo);});constructPagerUI();updatePager(dataView.getPagingInfo());}
function getNavState()
{var cannotLeaveEditMode=!Slick.GlobalEditorLock.commitCurrentEdit();var pagingInfo=dataView.getPagingInfo();var lastPage=Math.floor(pagingInfo.totalRows/pagingInfo.pageSize);return{canGotoFirst:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum>0,canGotoLast:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum!=lastPage,canGotoPrev:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum>0,canGotoNext:!cannotLeaveEditMode&&pagingInfo.pageSize!=0&&pagingInfo.pageNum<lastPage,pagingInfo:pagingInfo,lastPage:lastPage}}
function setPageSize(n)
{dataView.setPagingOptions({pageSize:n});}
function gotoFirst()
{if(getNavState().canGotoFirst)
dataView.setPagingOptions({pageNum:0});}
function gotoLast()
{var state=getNavState();if(state.canGotoLast)
dataView.setPagingOptions({pageNum:state.lastPage});}
function gotoPrev()
{var state=getNavState();if(state.canGotoPrev)
dataView.setPagingOptions({pageNum:state.pagingInfo.pageNum-1});}
function gotoNext()
{var state=getNavState();if(state.canGotoNext)
dataView.setPagingOptions({pageNum:state.pagingInfo.pageNum+1});}
function constructPagerUI()
{$container.empty();var $nav=$("<span class='slick-pager-nav' />").appendTo($container);var $settings=$("<span class='slick-pager-settings' />").appendTo($container);$status=$("<span class='slick-pager-status' />").appendTo($container);$settings.append("<span class='slick-pager-settings-expanded' style='display:none'>Show: <a data=0>All</a><a data='-1'>Auto</a><a data=25>25</a><a data=50>50</a><a data=100>100</a></span>");$settings.find("a[data]").click(function(e){var pagesize=$(e.target).attr("data");if(pagesize!=undefined)
{if(pagesize==-1)
{var vp=grid.getViewport();setPageSize(vp.bottom-vp.top);}
else
setPageSize(parseInt(pagesize));}});var icon_prefix="<span class='ui-state-default ui-corner-all ui-icon-container'><span class='ui-icon ";var icon_suffix="' /></span>";$(icon_prefix+"ui-icon-lightbulb"+icon_suffix).click(function(){$(".slick-pager-settings-expanded").toggle()}).appendTo($settings);$(icon_prefix+"ui-icon-seek-first"+icon_suffix).click(gotoFirst).appendTo($nav);$(icon_prefix+"ui-icon-seek-prev"+icon_suffix).click(gotoPrev).appendTo($nav);$(icon_prefix+"ui-icon-seek-next"+icon_suffix).click(gotoNext).appendTo($nav);$(icon_prefix+"ui-icon-seek-end"+icon_suffix).click(gotoLast).appendTo($nav);$container.find(".ui-icon-container").hover(function(){$(this).toggleClass("ui-state-hover");});$container.children().wrapAll("<div class='slick-pager' />");}
function updatePager(pagingInfo)
{var state=getNavState();$container.find(".slick-pager-nav span").removeClass("ui-state-disabled");if(!state.canGotoFirst)$container.find(".ui-icon-seek-first").addClass("ui-state-disabled");if(!state.canGotoLast)$container.find(".ui-icon-seek-end").addClass("ui-state-disabled");if(!state.canGotoNext)$container.find(".ui-icon-seek-next").addClass("ui-state-disabled");if(!state.canGotoPrev)$container.find(".ui-icon-seek-prev").addClass("ui-state-disabled");if(pagingInfo.pageSize==0)
$status.text("Showing all "+pagingInfo.totalRows+" rows");else
$status.text("Showing page "+(pagingInfo.pageNum+1)+" of "+(Math.floor(pagingInfo.totalRows/pagingInfo.pageSize)+1));}
init();}
$.extend(true,window,{Slick:{Controls:{Pager:SlickGridPager}}});})(jQuery);(function(w){var k=function(b,c){typeof c=="undefined"&&(c={});this.init(b,c)},a=k.prototype,o,p=["canvas","vml"],h=["oval","spiral","square","rect","roundRect"],x=/^\#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,v=navigator.appVersion.indexOf("MSIE")!==-1&&parseFloat(navigator.appVersion.split("MSIE")[1])===8?true:false,y=!!document.createElement("canvas").getContext,q=true,n=function(b,c,a){var b=document.createElement(b),d;for(d in a)b[d]=a[d];typeof c!=="undefined"&&c.appendChild(b);return b},m=function(b,c){for(var a in c)b.style[a]=c[a];return b},t=function(b,c){for(var a in c)b.setAttribute(a,c[a]);return b},u=function(b,c,a,d){b.save();b.translate(c,a);b.rotate(d);b.translate(-c,-a);b.beginPath()};a.init=function(b,c){if(typeof c.safeVML==="boolean")q=c.safeVML;try{this.mum=document.getElementById(b)!==void 0?document.getElementById(b):document.body}catch(a){this.mum=document.body}c.id=typeof c.id!=="undefined"?c.id:"canvasLoader";this.cont=n("div",this.mum,{id:c.id});if(y)o=p[0],this.can=n("canvas",this.cont),this.con=this.can.getContext("2d"),this.cCan=m(n("canvas",this.cont),{display:"none"}),this.cCon=this.cCan.getContext("2d");else{o=p[1];if(typeof k.vmlSheet==="undefined"){document.getElementsByTagName("head")[0].appendChild(n("style"));k.vmlSheet=document.styleSheets[document.styleSheets.length-1];var d=["group","oval","roundrect","fill"],e;for(e in d)k.vmlSheet.addRule(d[e],"behavior:url(#default#VML); position:absolute;")}this.vml=n("group",this.cont)}this.setColor(this.color);this.ready=true;this.draw();m(this.cont,{display:"none"})};a.cont={};a.can={};a.con={};a.cCan={};a.cCon={};a.ready=false;a.timer={};a.activeId=0;a.diameter=40;a.setDiameter=function(b){this.diameter=Math.round(Math.abs(b));this.redraw()};a.getDiameter=function(){return this.diameter};a.cRGB={};a.color="#000000";a.setColor=function(b){this.color=x.test(b)?b:"#000000";this.cRGB=this.getRGB(this.color);this.redraw()};a.getColor=function(){return this.color};a.shape=h[0];a.setShape=function(b){for(var c in h)if(b===h[c]){this.shape=b;this.redraw();break}};a.getShape=function(){return this.shape};a.density=40;a.setDensity=function(b){this.density=q&&o===p[1]?Math.round(Math.abs(b))<=40?Math.round(Math.abs(b)):40:Math.round(Math.abs(b));this.redraw()};a.getDensity=function(){return this.density};a.range=1.3;a.setRange=function(b){this.range=Math.abs(b);this.redraw()};a.getRange=function(){return this.range};a.speed=2;a.setSpeed=function(b){this.speed=Math.round(Math.abs(b));this.reset()};a.getSpeed=function(){return this.speed};a.fps=24;a.setFPS=function(b){this.fps=Math.round(Math.abs(b));this.reset()};a.getFPS=function(){return this.fps};a.getRGB=function(b){b=b.charAt(0)==="#"?b.substring(1,7):b;return{r:parseInt(b.substring(0,2),16),g:parseInt(b.substring(2,4),16),b:parseInt(b.substring(4,6),16)}};a.draw=function(){var b=0,c,a,d,e,g,k,j,r=this.density,s=Math.round(r*this.range),l,i,q=0;i=this.cCon;var f=this.diameter;if(o===p[0]){i.clearRect(0,0,1E3,1E3);t(this.can,{width:f,height:f});for(t(this.cCan,{width:f,height:f});b<r;){l=b<=s?1-1/s*b:l=0;k=360-360/r*b;j=k/180*Math.PI;i.fillStyle="rgba("+this.cRGB.r+","+this.cRGB.g+","+this.cRGB.b+","+l.toString()+")";switch(this.shape){case h[0]:case h[1]:c=f*0.07;e=f*0.47+Math.cos(j)*(f*0.47-c)-f*0.47;g=f*0.47+Math.sin(j)*(f*0.47-c)-f*0.47;i.beginPath();this.shape===h[1]?i.arc(f*0.5+e,f*0.5+g,c*l,0,Math.PI*2,false):i.arc(f*0.5+e,f*0.5+g,c,0,Math.PI*2,false);break;case h[2]:c=f*0.12;e=Math.cos(j)*(f*0.47-c)+f*0.5;g=Math.sin(j)*(f*0.47-c)+f*0.5;u(i,e,g,j);i.fillRect(e,g-c*0.5,c,c);break;case h[3]:case h[4]:a=f*0.3,d=a*0.27,e=Math.cos(j)*(d+(f-d)*0.13)+f*0.5,g=Math.sin(j)*(d+(f-d)*0.13)+f*0.5,u(i,e,g,j),this.shape===h[3]?i.fillRect(e,g-d*0.5,a,d):(c=d*0.55,i.moveTo(e+c,g-d*0.5),i.lineTo(e+a-c,g-d*0.5),i.quadraticCurveTo(e+a,g-d*0.5,e+a,g-d*0.5+c),i.lineTo(e+a,g-d*0.5+d-c),i.quadraticCurveTo(e+a,g-d*0.5+d,e+a-c,g-d*0.5+d),i.lineTo(e+c,g-d*0.5+d),i.quadraticCurveTo(e,g-d*0.5+d,e,g-d*0.5+d-c),i.lineTo(e,g-d*0.5+c),i.quadraticCurveTo(e,g-d*0.5,e+c,g-d*0.5))}i.closePath();i.fill();i.restore();++b}}else{m(this.cont,{width:f,height:f});m(this.vml,{width:f,height:f});switch(this.shape){case h[0]:case h[1]:j="oval";c=140;break;case h[2]:j="roundrect";c=120;break;case h[3]:case h[4]:j="roundrect",c=300}a=d=c;e=500-d;for(g=-d*0.5;b<r;){l=b<=s?1-1/s*b:l=0;k=270-360/r*b;switch(this.shape){case h[1]:a=d=c*l;e=500-c*0.5-c*l*0.5;g=(c-c*l)*0.5;break;case h[0]:case h[2]:v&&(g=0,this.shape===h[2]&&(e=500-d*0.5));break;case h[3]:case h[4]:a=c*0.95,d=a*0.28,v?(e=0,g=500-d*0.5):(e=500-a,g=-d*0.5),q=this.shape===h[4]?0.6:0}i=t(m(n("group",this.vml),{width:1E3,height:1E3,rotation:k}),{coordsize:"1000,1000",coordorigin:"-500,-500"});i=m(n(j,i,{stroked:false,arcSize:q}),{width:a,height:d,top:g,left:e});n("fill",i,{color:this.color,opacity:l});++b}}this.tick(true)};a.clean=function(){if(o===p[0])this.con.clearRect(0,0,1E4,1E4);else{var b=this.vml;if(b.hasChildNodes())for(;b.childNodes.length>=1;)b.removeChild(b.firstChild)}};a.redraw=function(){this.ready&&(this.clean(),this.draw())};a.reset=function(){typeof this.timer==="number"&&(this.hide(),this.show())};a.tick=function(b){var a=this.density,a=a>360?a/360:360/a,h=this.con,d=this.diameter;a*=this.speed;b||(this.activeId+=a);this.activeId>=360&&(this.activeId-=360);o===p[0]?(h.clearRect(0,0,d,d),u(h,d*0.5,d*0.5,Math.PI/180*this.activeId),h.drawImage(this.cCan,0,0,d,d),h.restore()):m(this.vml,{rotation:this.activeId})};a.show=function(){if(typeof this.timer!=="number"){var a=this;this.timer=self.setInterval(function(){a.tick()},Math.round(1E3/this.fps));m(this.cont,{display:"block"})}};a.hide=function(){typeof this.timer==="number"&&(clearInterval(this.timer),delete this.timer,m(this.cont,{display:"none"}))};a.kill=function(){var a=this.cont;typeof this.timer==="number"&&this.hide();o===p[0]?(a.removeChild(this.can),a.removeChild(this.cCan)):a.removeChild(this.vml);for(var c in this)delete this[c]};w.CanvasLoader=k})(window);if(typeof N2==="undefined"){var N2={dataView:null};}
if(typeof exports!=='undefined'){exports.N2=N2;}else{this.N2=N2;}
(function(){var _username="jp";var _password="rukkert";var _defaultRequestChannel=[];var _requestChannels={};N2.data={config:{grid:{rowHeight:25,headerHeight:25,headerRowHeight:25}},timeOutDurations:{host:30000,grid:30000,chart:300000},timeURIFormat:"yyyy-MM-ddTHH:mm",timeouts:{},flushDefaultRequestChannel:function(){var that=this;_.each(this.timeouts,function(ignore,timeoutId){clearTimeout(timeoutId);delete that.timeouts[timeoutId];});_.each(_defaultRequestChannel,function(request,index){request.success=request.error=function(){};request.abort();});},flushRequestChannel:function(channelName){var channel=_requestChannels[channelName];if(channel){_.each(channel,function(xhr){xhr.abort();});}
_requestChannels[channelName]=[];},setTimeout:function(f,ms){var that=this;var newTimeout;var c=function(){delete that.timeouts[newTimeout];f();};newTimeout=setTimeout(c,ms);that.timeouts[newTimeout]=true;},report:function(){_.each(_requests,function(request,index){});},baseUrl:"/data",setUsernameAndPassword:function(username,password){_username=username;_password=password;},beforeSend:function(){},complete:function(){},initialize:function(){var that=this;var methodMap={'create':'POST','update':'PUT','delete':'DELETE','read':'GET'};var getUrl=function(object){if(!(object&&object.url))throw new Error("A 'url' property or function must be specified");return _.isFunction(object.url)?object.url():object.url;};Backbone.sync=function(method,model,options){var type=methodMap[method];var params=_.extend({type:type,dataType:'json',beforeSend:function(xhr){if(model&&model.requestChannel){if(!_requestChannels[model.requestChannel]){_requestChannels[model.requestChannel]=[];}
_requestChannels[model.requestChannel].push(xhr);}else if(!model||(model&&!model.ignoreDefaultRequestChannel)){_defaultRequestChannel.push(xhr);}
that.beforeSend(xhr);},complete:function(xhr){if(model&&model.requestChannel){_requestChannels[model.requestChannel]=_.without(_requestChannels[model.requestChannel],xhr);}else if(!model||(model&&!model.ignoreDefaultRequestChannel)){_defaultRequestChannel=_.without(_defaultRequestChannel,xhr);}
that.complete(xhr);}},options);if(!params.url){params.url=getUrl(model)||urlError();}
if(!params.data&&model&&(method=='create'||method=='update')){params.contentType='application/json';params.data=JSON.stringify(model.toJSON());}
if(Backbone.emulateJSON){params.contentType='application/x-www-form-urlencoded';params.data=params.data?{model:params.data}:{};}
if(Backbone.emulateHTTP){if(type==='PUT'||type==='DELETE'){if(Backbone.emulateJSON)params.data._method=type;params.type='POST';params.beforeSend=function(xhr){xhr.setRequestHeader('X-HTTP-Method-Override',type);};}}
if(params.type!=='GET'&&!Backbone.emulateJSON){params.processData=false;}
return $.ajax(params);};},contexts:[]};})();N2.data.model={};N2.data.model.Session=Backbone.Model.extend({url:function(){return"/n2/session";}});(function($){var _i=0;var _defaultOptions={className:"trail",visit:$.fn.show,leave:$.fn.hide,nodes:{}};var _baseDefaults=$.extend({},_defaultOptions);var _perNodeOptions={};var _toShortString=function(e){if(e.jquery){e=e.get(0);}
var i=e.outerHTML.indexOf(e.innerHTML);if(i!==-1){return e.outerHTML.substring(0,i)+"..."+e.outerHTML.substring(i+e.innerHTML.length,e.outerHTML.length);}else{return e.outerHTML;}};var _findOptions=function(e){function up(e){if(e.attr("id")&&_perNodeOptions[e.attr("id")]){return _perNodeOptions[e.attr("id")];}else{if(e.parent().length===1){return up(e.parent());}}}
var result=up(e);return result?$.extend({},_defaultOptions,result):_defaultOptions;};var _findOffspringTrail=function(e,className,offspringTrail){if(!offspringTrail){offspringTrail=[];}
if(!e.jquery){e=$(e);}
var found=false;$.each(e.children(),function(index,child){if(!found){if($(child).hasClass(className)){found=child;}}});if(!found){$.each(e.children(),function(index,child){_findOffspringTrail($(child),className,offspringTrail);});}else{_findOffspringTrail(found,className,offspringTrail);offspringTrail.push(found);}
return offspringTrail;}
var _methods={configure:function(options){if(typeof options!=='object'){$.error('jQuery.trail\'s configure method expects an object as argument');return this;}
if(!this.get(0)){_defaultOptions=$.extend({},_baseDefaults,options);return _defaultOptions;}else{if(!this.attr("id")){$.error('jQuery.trail\'s configure method expects the target element to have an id, no id for element: '+_toShortString(this));return this;}
if(_perNodeOptions==null){_perNodeOptions={};}
_perNodeOptions[this.attr("id")]=options;}
return this;},createTrail:function(){if(this.length===0){$.error('jQuery.trail\'s createTrail method expects an element');}
if(this.length>1||!this.attr("id")){$.error('jQuery.trail only supports unique nodes with id, no id for element: '+_toShortString(this));return this;}
var options;if(_perNodeOptions===null){options=_defaultOptions;}else{options=_findOptions(this);}
if(!this.hasClass(options.className)){$.error('jQuery.trail expects element to have class \''+options.className+'\' as trailing class: '+_toShortString(this));}
var trail=this.parentsUntil($("html"),"."+options.className);trail.push(this.get(0));_findOffspringTrail(this,options.className,trail);var trail=$(trail);var hashedTrail={};trail.each(function(index,e){e=$(e);if(!e.attr("id")){$.error('jQuery.trail only supports unique nodes with an id, no id for element: '+_toShortString(e));return this;}
hashedTrail[e.attr("id")]=e;});$("."+options.className).each(function(index,e){e=$(e);if(!e.attr("id")){$.error('jQuery.trail only supports unique nodes with an id, no id for element: '+_toShortString(e));return this;}
var trailState=e.data("trailState");if(!hashedTrail[e.attr("id")]){if(trailState===undefined||trailState===true){var leave=options.leave;var nodeOptions=options.nodes[e.attr("id")];if(nodeOptions){if(nodeOptions&&nodeOptions.beforeLeave&&$.isFunction(nodeOptions.beforeLeave)){nodeOptions.beforeLeave.apply(e);}
if(nodeOptions&&nodeOptions.leave&&$.isFunction(nodeOptions.leave)){leave=nodeOptions.leave;}}
leave.apply(e);e.data("trailState",false);}}});$("."+options.className).each(function(index,e){e=$(e);if(!e.attr("id")){$.error('jQuery.trail only supports unique nodes with an id, no id for element: '+_toShortString(e));return this;}
var trailState=e.data("trailState");if(hashedTrail[e.attr("id")]){if(trailState===undefined||trailState===false){var visit=options.visit;var nodeOptions=options.nodes[e.attr("id")];if(nodeOptions){if(!e.data("wasVisited")){if(nodeOptions.beforeFirstVisit&&$.isFunction(nodeOptions.beforeFirstVisit)){nodeOptions.beforeFirstVisit.apply(e);}
if(nodeOptions.firstVisit&&$.isFunction(nodeOptions.firstVisit)){nodeOptions.firstVisit.apply(e);}}
if(nodeOptions.beforeVisit&&$.isFunction(nodeOptions.beforeVisit)){nodeOptions.beforeVisit.apply(e);}
if(nodeOptions.visit&&$.isFunction(nodeOptions.visit)){visit=nodeOptions.visit;}}
visit.apply(e);if(nodeOptions){if(nodeOptions.afterVisit&&$.isFunction(nodeOptions.afterVisit)){nodeOptions.afterVisit.apply(e);}}
e.data("wasVisited",true);e.data("trailState",true);}}});return this;}};$.fn.trail=function(method){if(_methods[method]){return _methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else if(typeof method==='object'||!method){return _methods.createTrail.apply(this,arguments);}else{$.error('Method '+method+' does not exist on jQuery.trail');}}})(jQuery);var Knockback={};Knockback.Model=function(attributes,options){this.childCollections={};this.childModels={};this.childViewModels={};this.parent={};Backbone.Model.call(this,attributes,options);this.viewModel=ko.mapping.fromJS(this.attributes);var that=this;_.each(this.defaultChildModels,function(ChildModel,childModelName){var childModel=_.isString(ChildModel)?new this[ChildModel]():new ChildModel();childModel.parent=that;that.childModels[childModelName]=childModel;that.viewModel[childModelName]=childModel.viewModel;});_.each(this.defaultChildCollections,function(ChildCollection,childCollectionName){var childCollection=_.isString(ChildCollection)?new this[ChildCollection]():new ChildCollection();childCollection.parent=that;that.childCollections[childCollectionName]=childCollection;that.viewModel[childCollectionName]=childCollection.viewModelArray;});};_.extend(Knockback.Model.prototype,Backbone.Model.prototype,{childCollections:{},childModels:{},childViewModels:{},parent:null,viewModel:{},set:function(attrs,options){var that=this;_.each(attrs,function(v,k){if(that.viewModel[k]){that.viewModel[k](v);}});return Backbone.Model.prototype.set.apply(this,arguments);},get:function(attr){var childModel=this.childModels[attr];if(childModel){return childModel;}
var childCollection=this.childCollections[attr];if(childCollection){return childCollection;}
return this.attributes[attr];},toBackbone:function(){var attributes=ko.mapping.toJS(this.viewModel);this.set(attributes);return this.attributes;}});Knockback.Collection=function(models,options){this.parent={};this.viewModelArray=ko.observableArray([]);Backbone.Collection.call(this,models,options);};_.extend(Knockback.Collection.prototype,Backbone.Collection.prototype,{parent:null,viewModelArray:null,_add:function(model,options){model=Backbone.Collection.prototype._add.call(this,model,options);model.parent=this;this.viewModelArray.push(model.viewModel);return model;},_remove:function(model,options){model=Backbone.Collection.prototype._remove.call(this,model,options);this.viewModelArray.splice(this.indexOf(model),1);return model;}});(function(){var _onNextRoute=null;Knockback.Router=Backbone.Router.extend({actions:{},before:function(options,proceed){proceed();},route:function(route,name,callback,options){Backbone.history||(Backbone.history=new Backbone.History);if(!_.isRegExp(route))route=this._routeToRegExp(route);var that=this;Backbone.history.route(route,_.bind(function(fragment){if(_.isFunction(_onNextRoute)){_onNextRoute();_onNextRoute=null;}
var proceed=function(){var args=that._extractParameters(route,fragment);var onNextRoute=callback.apply(that,args);that.trigger.apply(that,['route:'+name].concat(args));if(_.isFunction(onNextRoute)){_onNextRoute=onNextRoute;}}
if(_.isFunction(that.before)){that.before(options,proceed,fragment);}else{proceed();}},this));},_bindRoutes:function(){if(!this.routes)return;for(var route in this.routes){var options=this.routes[route];if(options&&options.as&&this.routes[options.as]){options=this.routes[options.as];}
if(_.isString(options)){options={callback:options};}
this.route(route,options.callback,this.actions[options.callback],options);}}});})();Knockback.Model.extend=Knockback.Collection.extend=Knockback.Router.extend=Backbone.Model.extend;$.widget("ui.hostSearch",{version:"@VERSION",defaultElement:"<div>",options:{},_create:function(){this.element.html($.tmpl($("#searchTemplate"),{}));}});$.widget("ui.timeControls",{version:"@VERSION",defaultElement:"<div>",options:{now:Date.now(),date:null,enabledClass:"timeControlButtonEnabled",disabledClass:"timeControlButtonDisabled",mouseOverClass:"timeControllButtonOver"},_create:function(){this.update(this.options.date);},update:function(givenDate){var id=Math.ceil(Math.random()*1000000)+"radio";var click=function(someDate){if(that.options.click){that.options.click(someDate);}};var now=Date.now();var date;if(givenDate==null||givenDate==""){date=now;}else{date=givenDate;}
var data={name:id,id:id,month:date.toString("MMM"),year:date.toString("yy"),day:date.toString("d"),time:date.toString("hh:mm:ss")};this.element.html($.tmpl($("#timeControlTemplate"),data));$(".dateDisplay").html($.tmpl($("#regularDateTimeTemplate"),{date:date}));var buttons=[{selector:".minusDay",newDate:new Date(date).addDays(-1)},{selector:".minusHour",newDate:new Date(date).addHours(-1)},{selector:".minus5m",newDate:new Date(date).addMinutes(-5)},{selector:".minus1m",newDate:new Date(date).addMinutes(-1)},{selector:".now"},{selector:".plus1m",newDate:new Date(date).addMinutes(1)},{selector:".plus5m",newDate:new Date(date).addMinutes(5)},{selector:".plusHour",newDate:new Date(date).addHours(1)},{selector:".plusDay",newDate:new Date(date).addDays(1)}];$(".timeControlList input",this.element).each(function(index,b){$(b).attr({id:id+""+(index+1)});$(b).next().attr({"for":$(b).attr("id")});});var that=this;$("#"+id,this.element).buttonset();_.each(buttons,function(button){var e=$(button.selector,that.element);var newDate=button.newDate;if(!button.newDate){newDate=now;}
if(newDate.compareTo(now)<=0){e.bind("click",function(){click(button.newDate);});e.button('enable');}else{e.button('disable');}});}});(function(){var _addMissingOptions=function(options,defaultOptions){if(!_.isString(defaultOptions)&&!_.isNumber(defaultOptions)&&!_.isBoolean(defaultOptions)){_.each(defaultOptions,function(option,key){if(_.isUndefined(options[key])){options[key]=option;}else{_addMissingOptions(options[key],option);}});return options;}};var _extractSortComparers=function(columns){var that=this;var sortComparers={};_.each(columns,function(column){if(column.comparer){sortComparers[column.id]=column.comparer;}});return sortComparers;};var _data=[];$.widget("ui.slickGrid",{version:"@VERSION",defaultElement:"<div>",sortComparers:{},sortComparer:function(){},groupCollapseStates:{},filterData:{},dataView:{},defaultOptions:{columns:[{id:"id",name:"id",field:"id"}],options:{enableCellNavigation:true,enableColumnReorder:false,forceFitColumns:true,autoHeight:false,rowHeight:25},filters:[],sort:{column:"id",direction:"ascending"},grouping:{}},options:{},getData:function(){return _data;},setData:function(data){_data=data;var that=this;_.each(data,function(d,index){if(!d.id){data[index].id=index+1;}});this.updateDataView(data);},collapseAllGroups:function(){this.dataView.beginUpdate();for(var i=0;i<this.dataView.getGroups().length;i++){this.dataView.collapseGroup(this.dataView.getGroups()[i].value);}
this.dataView.endUpdate();},filter:function(key,value){if(this.filterData[key]!==value){this.filterData[key]=value;this.dataView.refresh();this.reselect();}},refresh:function(){this.dataView.refresh();},autosizeColumns:function(){this.grid.autosizeColumns();},setOptions:function(options){this.options=_addMissingOptions(options,this.defaultOptions);this.sortComparers=_extractSortComparers(options.columns);this.groupCollapseStates={};},group:function(id){this.dataView.groupBy(id);},createGrid:function(){var that=this;var groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider();this.dataView=new Slick.Data.DataView({groupItemMetadataProvider:groupItemMetadataProvider});this.grid=new Slick.Grid(this.element,this.dataView,this.options.columns,this.options.options);this.grid.registerPlugin(groupItemMetadataProvider);var rowSelectionModel=new Slick.RowSelectionModel();this.grid.setSelectionModel(rowSelectionModel);this.dataView.onRowCountChanged.subscribe(function(e,args){that.grid.updateRowCount();that.grid.render();});this.dataView.onRowsChanged.subscribe(function(e,args){that.grid.invalidateRows(args.rows);that.grid.render();});this.grid.onSort.subscribe(function(e,args){that.options.sort.column=args.sortCol.field;that.options.sort.direction=args.sortAsc===true?"ascending":"descending";var sortComparer=that.sortComparers[that.options.sort.column];that.sort(that.dataView,args.sortCol.field,args.sortAsc,sortComparer?sortComparer:that.sortComparer);that.reselect();});this.grid.onClick.subscribe(function(e,o){var item=this.getDataItem(o.row);if(item&&item instanceof Slick.Group&&$(e.target).hasClass("grid-group-toggle")){if(item.collapsed){that.groupCollapseStates[item.value]=false;that.dataView.expandGroup(item.value);}
else{that.groupCollapseStates[item.value]=true;that.dataView.collapseGroup(item.value);}
e.stopImmediatePropagation();e.preventDefault();}});this.grid.setSortColumn(this.options.sort.column,this.options.sort.direction);this.setHeaderVisibility();},setHeaderVisibility:function(){if(this.options.options.hideHeader){$(".slick-header-columns").css("height","0px");$(".slick-header").css({"border":"0px solid white"});this.grid.resizeCanvas();}else{if($(".slick-header-columns").css("height")=="0px"){$(".slick-header-columns").css("height","24px");$(".slick-header").css({"border":""});this.grid.resizeCanvas();}}},define:function(options){this.setOptions(options);this.setHeaderVisibility();this.grid.setOptions(this.options.options);this.grid.setSortColumn(this.options.sort.column,this.options.sort.direction);this.grid.setColumns(this.options.columns);this.updateDataView();this.applyGroupCollapsing(true);},applyGroupCollapsing:function(hasData){var that=this;if(hasData){if(this.options.grouping.by){_.each(this.dataView.getGroups(),function(group,index){if(that.options.grouping.collapsed){if(that.groupCollapseStates[group.value]===undefined){that.groupCollapseStates[group.value]=true;}}
if(that.options.grouping.keepCollapsed){that.groupCollapseStates[group.value]=true;}});}}
if(this.options.grouping.by){if(this.options.grouping.keepCollapsed){this.collapseAllGroups();}else{_.each(this.dataView.getGroups(),function(group,index){if(that.groupCollapseStates[group.value]){that.dataView.collapseGroup(group.value);}else{that.dataView.expandGroup(group.value);}});}}},updateDataView:function(data){this.dataView.beginUpdate();this.dataView.setFilter(null);var that=this;var combinedFilter=function(item){var i=0;while(i<that.options.filters.length){if(!that.options.filters[i](item,that.filterData)){return false;}
i++;}
return true;}
if(data){this.dataView.setItems(data);this.grid.setData(this.dataView);}
this.dataView.setFilter(combinedFilter);if(this.options.grouping.by){this.dataView.groupBy(this.options.grouping.by,this.options.grouping.render);if(this.options.grouping.aggregators){this.dataView.setAggregators(this.options.grouping.aggregators);}else{this.dataView.setAggregators([]);}}else{this.dataView.groupBy(null);this.dataView.setAggregators([]);}
this.dataView.endUpdate();this.applyGroupCollapsing(data);var sortComparer=this.sortComparers[this.options.sort.column];this.sort(this.dataView,this.options.sort.column,this.options.sort.direction=="ascending",sortComparer?sortComparer:this.sortComparer);this.reselect();if(data){this.grid.render();}},reselect:function(){if(this.selectedItem){this.grid.setSelectedRows([this.dataView.getIdxById(this.selectedItem.id)]);}},_create:function(){var that=this;this.sortComparer=function(a,b){var x=a[that.options.sort.column],y=b[that.options.sort.column];return(x==y?0:(x>y?1:-1));};this.setOptions(this.options);this.createGrid();this.grid.onDblClick.subscribe(function(e,o){var item=that.dataView.getItem(o.row);if(_.isFunction(that.options.dblClick)){that.options.dblClick(item);}});this.grid.onClick.subscribe(function(e,o){that.selectedItem=that.dataView.getItem(o.row);});},destroy:function(){this.grid.destroy();$.Widget.prototype.destroy.call(this);this.element.empty();},sort:function(dataView,sortcol,sortasc,comparer){if($.browser.msie&&$.browser.version<=8){var percentCompleteValueFn=function(){var val=this["percentComplete"];if(val<10)
return"00"+val;else if(val<100)
return"0"+val;else
return val;};dataView.fastSort((sortcol=="percentComplete")?percentCompleteValueFn:sortcol,sortasc);}else{dataView.sort(comparer,sortasc);}}});})();$.widget("ui.highChart",{version:"@VERSION",defaultElement:"<div>",options:{disabled:null,text:true,title:"",label:null,icons:{primary:null,secondary:null},refresh:false,interval:320,unitsY:"",className:"ui-highchart",click:function(e){}},chart:null,fetch:function(){var that=this;var build=function(){if(that.options.model){that.options.model.fetch({success:function(statsModel){var data=[];that.chart.series[0].setData(statsModel.get("data"));that.options.model.set({startDate:Date.now().toString(N2.data.timeURIFormat)});if(that.options.refresh===true){N2.data.setTimeout(build,4000);}}});}}
build();},_create:function(){var that=this;this.element.html("Creating graph...");if(!this.element.attr("id")){this.element.attr({id:"graph-"+(Math.ceil(100000000*Math.random()))});}
this.renderChart(this.element);this.setData({interval:320,pointStart:1120183892628,data:[0]});},setData:function(options){var c=this.chart.get("main");if(c){if(options.click){this.options.click=options.click;}
if(options.pointStart){this.chart.get("max").options.pointStart=Number(options.pointStart);c.options.pointStart=Number(options.pointStart);}
if(options.interval){this.chart.get("max").pointInterval=options.interval*60*1000;c.pointInterval=options.interval*60*1000/320;}
if(options.data){c.setData(options.data);}
if(options.max){this.chart.yAxis[0].setExtremes(0,options.max,true);}
var maxValue=0;var maxIndex=0;_.each(options.data,function(value,index){if(value>maxValue){maxValue=value;maxIndex=index;}});this.chart.setTitle(null,{text:'Max '+maxValue+" at "+Highcharts.dateFormat('%a %b %e %Y %H:%M:%S',options.pointStart+options.interval*60*1000/320*maxIndex)});this.chart.get("max").setData([maxValue,maxValue]);}},showLoading:function(){this.chart.showLoading();},hideLoading:function(){this.chart.hideLoading();},renderChart:function(element){var realStartDate=new Date();if(this.options.startDate){realStartDate=Date.parseDate(this.options.startDate).addMinutes(-this.options.interval);}
var that=this;this.chart=new Highcharts.Chart({chart:{animation:false,renderTo:element.attr("id"),defaultSeriesType:'area',zoomType:'x',events:{click:function(e){that.options.click(e);},selection:function(event){if(event.xAxis){}}},className:that.options.className},title:{style:{font:'16px Arial,sans-serif; text-shadow: 0 1px 0 rgba(255, 255, 255, 0.6);'},text:that.options.title},xAxis:{type:'datetime',labels:{formatter:function(){return Highcharts.dateFormat('<span style="font-size: 8px;">%Y/%m/%d</span><br/><span style="font-size: 8px;">%H:%M:%S</span>',this.value);},rotation:45,y:30},maxZoom:320*60*1000,endOnTick:true},yAxis:{title:{text:that.options.unitsY},labels:{formatter:function(){return this.value;}}},tooltip:{formatter:function(e){return Highcharts.dateFormat('%Y/%m/%d <br/> %H:%M:%S',this.x)+"/"+this.y;}},plotOptions:{area:{marker:{enabled:false,symbol:'circle',radius:5,states:{hover:{enabled:true}}}},series:{animation:true}},series:[{id:"main",showInLegend:false,lineWidth:"0.4px",shadow:false,pointStart:realStartDate.getTime(),pointInterval:that.options.interval*60*1000/320},{id:"max",type:"spline",showInLegend:false,lineWidth:"0.6px",shadow:false,pointStart:realStartDate.getTime(),pointInterval:that.options.interval*60*1000/320,enableMouseTracking:false,marker:{enabled:false}}],credits:{enabled:false,text:'(c) 2011 N2'}});}});$.widget("ui.n2TimeSearch",{url:"",options:{keypress:function(){}},_create:function(){var that=this;var date;this.element.keyup(function(e){var input=that.element;if(input.val().length>0){date=Date.parse(input.val());if(date!==null&&date.compareTo(Date.now())<=0){that.element.css({color:"green"});input.keypress(function(event){if(event.which==13){input.unbind("keypress");that.element.val("");that.options.keypress(date);}});}else{that.element.css({color:"red"});input.unbind("keypress");}}else if(input.val()===""){date=Date.now();that.element.css({color:"green"});}else{that.element.css({color:"red"});input.keypress(function(event){if(event.which==13){input.unbind("keypress");that.element.val("");that.options.keypress(date);}});}});},setTargetUrl:function(url){this.url=url;}});$.widget("ui.n2Bar",{options:{},_create:function(){this.element.html("<span class=\"percent-complete-bar\"><span class=\"background\" style=\"width:"+this.options.value+"%\"></span></span>");return this.element;},_destroy:function(){this.element.empty();return this.element;}});(function($){$.fn.ezpz_hint=function(options){var defaults={hintClass:'ezpz-hint',hintName:'ezpz_hint_dummy_input'};var settings=$.extend(defaults,options);return this.each(function(i){var id=settings.hintName+'_'+i;var hint;var dummy_input;text=$(this).attr('title');$('<input type="text" id="'+id+'" value="" />').insertBefore($(this));hint=$(this).prev('input:first');hint.attr('class',$(this).attr('class'));hint.attr('size',$(this).attr('size'));hint.attr('autocomplete','off');hint.attr('tabIndex',$(this).attr('tabIndex'));hint.addClass(settings.hintClass);hint.val(text);$(this).hide();$(this).attr('autocomplete','off');hint.focus(function(){dummy_input=$(this);$(this).next('input:first').show();$(this).next('input:first').focus();$(this).next('input:first').unbind('blur').blur(function(){if($(this).val()==''){$(this).hide();dummy_input.show();}});$(this).hide();});if($(this).val()!=''){hint.focus();};});};})(jQuery);HostData=Backbone.Model.extend({initialize:function(options){this.set(options);},url:function(){var interval;if(this.get("interval")===undefined){interval=320;}else{interval=this.get("interval");}
var url="/n2/host/"+this.get("hostID")+"/graph/"+this.get("graphType");if(this.get("startDate")!==undefined){url+="/date/"+this.get("startDate");}
url+="/interval/"+interval;return url;}});Host=Knockback.Model.extend({defaults:{hostLabel:"",startDate:"",hostID:0,hostname:"",cpuUsage:0,status:"",recordTime:"",uptimeString:"",operatingSystem:"",hardwarePlatform:"",loadAverage:"",freeRAM:"",totalRAM:"",networkIn:0,networkOut:0,processList:"",freeSwapMemory:0,diskActivity:0,roundTripTime:0,packetLoss:0,ioWaitPercent:"",runningServices:[],virtualHosts:[],consoleSessions:[],mountedFilesystems:[],networkPorts:[]},defaultChildModels:{report:"HostReport"},defaultChildCollections:{events:"HostEvents"},url:function(){var url="/n2/host/"+this.get("hostID");if(this.get("startDate")){url+="/date/"+this.get("startDate");}
return url;}});HostReport=Knockback.Model.extend({defaults:{html:""},url:function(){return"/n2/host/"+this.parent.get("hostID")+"/analysis";}});HostEvents=Knockback.Collection.extend({initialize:function(){this.model=HostEvent;},url:function(){return"/n2/host/"+this.parent.get("hostID")+"/eventlog";},parse:function(o){if(o&&o.eventLog){return o.eventLog;}}});HostEvent=Knockback.Model.extend({defaults:{problems:"",status:"",text:"",timeStamp:""}});User=Knockback.Model.extend({defaults:{id:0,username:"",isAdmin:false},url:function(){return"/n2/user/"+this.get("username");}});Hosts=Backbone.Collection.extend({url:"/n2/host/"});(function(){var AUTHORIZED=1;var _inconvenientStatuses={"DEAD":10,"CRIT":20,"STALE":30,"ALERT":40,"WARN":60};var _statusSortorder={"DEAD":10,"CRIT":20,"STALE":30,"ALERT":40,"WARN":60,"INIT0":90,"INIT1":100,"INIT2":110,"INIT3":120,"INIT3":130,"INIT4":140,"INIT5":150,"INIT6":160,"INIT7":170,"INIT8":180,"ACKED":9998,"OK":9999};var _redirect=function(fragment){window.location.href=fragment;};N2Router=Knockback.Router.extend({initialize:function(){var pendingRequests=0;N2.data.beforeSend=function(xhr){if(pendingRequests===0){$("#loadingIndicator").fadeIn();}
pendingRequests++;};N2.data.complete=function(xhr){pendingRequests--;if(pendingRequests===0){$("#loadingIndicator").fadeOut();}};$("#boot").trail();Backbone.history.start();},state:{isAuthorized:false,session:{},currentUser:{},hosts:new Hosts(),hostsLoopIsRunning:false,hostsLoop:null,callback:null,previousCallback:null},routes:{"!showLogin":{callback:"showLogin",trail:"#login"},"!showLogin/redirect/*redirect":{as:"!showLogin"},"!hosts/:hostID/information/date/:startDate":{access:AUTHORIZED,callback:"hostInformation",trail:"#hostInformation"},"!hosts/:hostID/information":{as:"!hosts/:hostID/information/date/:startDate"},"!hosts/:hostID/details/date/:startDate":{access:AUTHORIZED,callback:"hostDetails",trail:"#hostDetails"},"!hosts/:hostID/details":{as:"!hosts/:hostID/details/date/:startDate"},"!hosts/:hostID/report":{access:AUTHORIZED,callback:"hostReport",trail:"#hostReport"},"!hosts/:hostID/statistics/interval/:interval":{access:AUTHORIZED,callback:"hostStatisticsInterval",trail:"#hostGraphs"},"!hosts/:hostID/statistics/date/:startDate/interval/:interval":{access:AUTHORIZED,callback:"hostStatistics",trail:"#hostGraphs"},"!hosts/:hostID/statistics/date/:startDate":{as:"!hosts/:hostID/statistics/date/:startDate/interval/:interval"},"!hosts/:hostID/statistics":{as:"!hosts/:hostID/statistics/date/:startDate/interval/:interval"},"!hosts/:hostID/events":{access:AUTHORIZED,callback:"hostEvents",trail:"#hostEvents"},"!hosts/filtered/*filter":{access:AUTHORIZED,callback:"hosts",trail:"#main"},"!hosts":{as:"!hosts/filtered/*filter"},"!war":{access:AUTHORIZED,callback:"war"},"!peace":{access:AUTHORIZED,callback:"peace"},"!logout":"logout",".*":{callback:"index"}},actions:{war:function(){$.cookie("N2WAR",true);$("html").css({zoom:1.7});$(".slick-header").css({zoom:1.015});$("#hostsGrid").slickGrid("autosizeColumns");$("#hostsGrid").slickGrid("autosizeColumns");_redirect("#!hosts/filtered/issues");},peace:function(){$.cookie("N2WAR",null);this.peaceMode();$("#hostsGrid").slickGrid("autosizeColumns");$("#hostsGrid").slickGrid("autosizeColumns");_redirect("#!hosts/filtered/all");},index:function(){this.navigate("!hosts",true);},hosts:function(filter){if(!this.state.sizeHack){this.state.sizeHack=true;if($.cookie("N2WAR")=="true"){$("html").css({zoom:1.7});$(".slick-header").css({zoom:1.015});$("#hostsGrid").slickGrid("autosizeColumns");$("#hostsGrid").slickGrid("autosizeColumns");}}
if(_.isArray(this.state.session.get("limit"))&&this.state.session.get("limit").length==1){$("#backButton").remove();_redirect("#!hosts/"+this.state.session.get("limit")[0]+"/information");return;}
if(!filter||!GridPresets.hosts[filter]){_redirect("#!hosts/filtered/all");}else{if(filter!=="all"){$("#search").val("");$("#search").autocomplete("search","");}
if(viewModel.gridView()!==filter){viewModel.gridView(filter);$("#hostsGrid").slickGrid("destroy");$("#hostsGrid").slickGrid(GridPresets.hosts[filter]);$("#hostsGrid").slickGrid("autosizeColumns");$(window).unbind("resize",this.gridResize);$(window).bind("resize",this.gridResize);}
if(this.state.callback!==this.state.previousCallback){this.state.hostsLoopIsRunning=false;this.hostsLoopStop();this.hostsLoopStart();}
$("#hostsGrid").slickGrid("setData",this.state.hosts.toJSON());var that=this;var resetBinding=function(hosts){$("#hostsGrid").slickGrid("setData",hosts.toJSON());};this.state.hosts.bind("reset",resetBinding);return function(){that.state.hosts.unbind("reset",resetBinding);}}},showLogin:function(redirect){this.flush();this.peaceMode();var that=this;viewModel.redirect(redirect);},hostInformation:function(hostID,startDate){viewModel.hostView("information");viewModel.isRepeating(!startDate);this.state.currentHost=new Host({hostID:hostID,startDate:startDate});var that=this;var loop=function(repeat){that.state.currentHost.fetch({success:function(){$("#hostInformation .overlay").fadeOut(100);$("#bigLoader").stop().fadeOut();viewModel.host(that.state.currentHost.viewModel);if(repeat){N2.data.setTimeout(function(){loop(true);},N2.data.timeOutDurations.host);}},error:_.bind(that.errorHandler,that)});}
loop(!startDate);},hostStatisticsInterval:function(hostID,interval){this.actions.hostStatistics.call(this,hostID,null,interval);},hostStatistics:function(hostID,startDate,interval){interval=interval?interval:320;viewModel.hostView("statistics");viewModel.isRepeating(!startDate);viewModel.interval(interval);var that=this;this.state.currentHost=new Host({hostID:hostID,startDate:startDate});var d=!_.isUndefined(startDate)&&!_.isNull(startDate)?Date.parseDate(startDate):new Date().addMinutes(new Date().getTimezoneOffset()*-1);var charts={hostLoadChart:{graphType:"load"},cpuUsageChart:{graphType:"cpu"},networkInChart:{graphType:"netin"},networkOutChart:{graphType:"netout"},diskIOChart:{graphType:"diskio"},RTTChart:{graphType:"rtt"},ramChart:{graphType:"ram"},swapChart:{graphType:"swap"},totalMemoryChart:{graphType:"totalmem"},ioWaitChart:{graphType:"iowait"},processesChart:{graphType:"nproc"}};var chartStates={};_.each(charts,function(chart,chartId){chartStates[chartId]=true;});var loop=function(chartId,shouldLoop){var doLoop=function(chartId){var isFinished=true;if(chartId){chartStates[chartId]=false;}
_.each(charts,function(chart,chartId){if(chartStates[chartId]===true){isFinished=false;}});if(isFinished===true){$("#hostGraphs .overlay").fadeOut(100);}
if(isFinished===true&&shouldLoop===true){_.each(charts,function(chart,chartId){chartStates[chartId]=true;});$("#bigLoader").stop().fadeOut();N2.data.setTimeout(function(){_.each(charts,function(chart,chartId){chartLoop(hostID,chartId,chart.graphType,d,interval);});},N2.data.timeOutDurations.chart);}}
if(!chartId){_.each(charts,function(chart,chartId){chartLoop(hostID,chartId,chart.graphType,d,interval);});}else{doLoop(chartId);}};var realStartDate=d.addMinutes(-interval);var chartLoop=function(hostID,chartId,graphType,d,interval){var bb=new HostData({hostID:hostID,graphType:graphType,interval:interval,startDate:startDate});$("#"+chartId).highChart("showLoading");bb.fetch({success:function(statsModel){$("#"+chartId).highChart("setData",{interval:interval,pointStart:realStartDate.getTime(),data:statsModel.get("data"),max:statsModel.get("max"),click:function(e){var isoDate=new Date(e.xAxis[0].value).toString("yyyy-MM-ddThh:mm");window.location.href=viewModel.hostUrl()+"/information/date/"+isoDate;}});$("#"+chartId).highChart("hideLoading");loop(chartId,!startDate);},error:_.bind(that.errorHandler,that)});};this.state.currentHost.fetch({success:function(host){viewModel.host(host.viewModel);loop(null,!startDate);},error:_.bind(that.errorHandler,that)});},hostDetails:function(hostID,startDate){viewModel.hostView("details");viewModel.isRepeating(!startDate);var that=this;this.state.currentHost=new Host({hostID:hostID,startDate:startDate});var loop=function(repeat){that.state.currentHost.fetch({success:function(host){$("#hostDetails .overlay").fadeOut(100);$("#bigLoader").stop().fadeOut();viewModel.host(that.state.currentHost.viewModel);var m=[];if(_.isArray(that.state.currentHost.get("mountedFilesystems"))){m=that.state.currentHost.get("mountedFilesystems");$("#mountsGrid").slickGrid("setData",_.clone(m));}
var c=[];_.each(that.state.currentHost.get("networkPorts"),function(value,port){var e=_.clone(value);e.port=Number(port);e.id=e.port;c.push(e);});$("#tcpGrid").slickGrid("setData",c);c=[];_.each(that.state.currentHost.get("processList"),function(value,pid){var e=_.clone(value);e.pid=pid;c.push(e);});$("#processGrid").slickGrid("setData",c);c=[];_.each(that.state.currentHost.get("runningServices"),function(value,index){c.push({id:(index+1),service:value});});$("#runningServicesGrid").slickGrid("setData",c);c=[];_.each(that.state.currentHost.get("virtualHosts"),function(value,index){c.push({hostname:index,connections:value.count});});$("#virtualHostsGrid").slickGrid("setData",c);c=[];_.each(that.state.currentHost.get("consoleSessions"),function(value,vhost){var e=_.clone(value);e.vhost=vhost;c.push(e);});$("#consoleSessionsGrid").slickGrid("setData",c);},error:_.bind(that.errorHandler,that)});if(repeat){N2.data.setTimeout(function(){loop(true);},N2.data.timeOutDurations.host);}}
loop(!startDate);},hostEvents:function(hostID){var that=this;viewModel.hostView("events");this.state.currentHost=new Host({hostID:hostID});var loop=function(repeat){that.state.currentHost.get("events").fetch({success:function(collection,rawCollection){$("#hostEvents .overlay").fadeOut(100);$("#bigLoader").stop().fadeOut();_.each(rawCollection.eventLog,function(e,i){e.hostID=hostID;});$("#eventLogGrid").slickGrid("setData",rawCollection.eventLog);N2.data.setTimeout(function(){loop();},N2.data.timeOutDurations.host);},error:_.bind(that.errorHandler,that)});};this.state.currentHost.fetch({success:function(){viewModel.host(that.state.currentHost.viewModel);loop();},error:_.bind(that.errorHandler,that)});},hostReport:function(hostID){var that=this;viewModel.hostView("report");this.state.currentHost=new Host({hostID:hostID});var loop=function(repeat){that.state.currentHost.get("report").fetch({success:function(){$("#hostReport .overlay").fadeOut(100);$("#bigLoader").stop().fadeOut();N2.data.setTimeout(function(){loop();},N2.data.timeOutDurations.host);},error:_.bind(that.errorHandler,that)});};this.state.currentHost.fetch({success:function(){viewModel.host(that.state.currentHost.viewModel);loop();},error:_.bind(that.errorHandler,that)});},logout:function(){this.flush();_redirect("#!showLogin");}},gridResize:function(){$("#hostsGrid").slickGrid("autosizeColumns");},peaceMode:function(){$("html").css({zoom:1});$(".slick-header").css({zoom:1});},warMode:function(){$("html").css({zoom:1.7});$(".slick-header").css({zoom:1.015});},flush:function(){N2.data.flushDefaultRequestChannel();viewModel.hostsWarningTotal("");viewModel.hostsTotal("");viewModel.host(new Host().viewModel);viewModel.hostLimit([]);$("#hostsGrid").slickGrid("setData",[]);this.hostsLoopStop();this.state.session={};$.cookie("N2SESSID",null);},before:function(options,proceed,fragment){this.state.previousCallback=this.state.callback;this.state.hosts.unbind("reset");var that=this;N2.data.flushDefaultRequestChannel();viewModel.fragment(fragment);viewModel.isRepeating(false);viewModel.callback(options.callback);this.state.callback=options.callback;var authorizedProceed=function(){if(options.trail){if(_.isString(options.trail)){$(options.trail).trail();}else if(options.trail.target){$(options.trail.target).trail({withLost:options.trail.withLost,withFound:options.trail.withFound});}}
if($.cookie("N2WAR")=="true"){that.warMode();}
proceed();}
if(options.access===undefined||options.access!==AUTHORIZED){authorizedProceed();}else{var that=this;this.checkSessionValidity({authorized:function(){that.hostsLoopStart();authorizedProceed();},unauthorized:function(){that.flush();_redirect("#!showLogin"+(fragment?"/redirect/"+fragment:""));}});}},checkSessionValidity:function(options){var authorized=function(){if(options&&_.isFunction(options.authorized)){options.authorized();}};var unauthorized=function(){if(options&&_.isFunction(options.unauthorized)){options.unauthorized();}}
if(this.state.isAuthorized===true){authorized();}else{if($.cookie("N2SESSID")!=null){var that=this;var s=new N2.data.model.Session();s.url="/n2/session/"+$.cookie("N2SESSID");s.fetch({success:function(s){var l=[];if(_.isArray(s.get("limit"))){l=s.get("limit");}
viewModel.hostLimit(l);that.state.session=s;var username=s.get("username");that.state.currentUser=new User();that.state.currentUser.ignoreQueue=true;that.state.currentUser.url="/n2/user/"+username;that.state.currentUser.fetch({success:function(u){that.state.isAuthorized=true;that.state.currentUser=u;viewModel.user(that.state.currentUser.viewModel);authorized();},error:function(u,xhr){if(xhr.status=="403"){that.state.isAuthorized=false;that.state.currentUser=null;unauthorized();}else{that.errorHandler(u,xhr);}}});},error:function(s){unauthorized();}});}else{unauthorized();}}},hostsLoopStart:function(){if(this.state.hostsLoopIsRunning===false){this.state.hostsLoopIsRunning=true;var that=this;this.state.hostsLoopShouldRestart=true;this.state.hosts.requestChannel="hostsLoop";this.state.runHostsLoop=function(){if(that.state.hostsLoopShouldRestart==true){that.state.hostsLoop();}else{that.state.hostsLoopIsRunning=false;}};this.state.hostsLoop=function(){that.state.hosts.fetch({success:function(collection,rawCollection){$("#bigLoader").stop().fadeOut();var warnings=0;var warningStatuses={};_.each(rawCollection,function(host){if(_inconvenientStatuses[host.status]){if(!warningStatuses[host.status]){warningStatuses[host.status]=0;}
warningStatuses[host.status]++;warnings++;}});viewModel.hostsTotal(collection.length);viewModel.hostsWarningTotal(warnings);that.state.hostsLoopTimeout=setTimeout(that.state.hostsLoop,N2.data.timeOutDurations.grid);},error:_.bind(that.errorHandler,that)})};this.state.hostsLoop();}},hostsLoopStop:function(){this.state.hostsLoopShouldRestart=false;clearTimeout(this.state.hostsLoopTimeout);N2.data.flushRequestChannel("hostsLoop");},login:function(){var username=$("#username").val();var password=$("#password").val();var redirect=$("#redirect").val();$("#password").val("");this.state.session=new N2.data.model.Session({username:username,password:password});$('#loginForm').dialog("disable");var that=this;this.state.session.save({},{success:function(s){$('#loginForm').dialog("enable");viewModel.hostLimit(s.get("limit"));if(redirect!=""){_redirect("#"+redirect);}else{_redirect("#!hosts");}},error:function(s,xmlHttpRequest){$('#loginForm').dialog("enable");$("#hiddenLogin").parent().effect("shake",{times:2,distance:5},20);$("#loginMessage").html(xmlHttpRequest.responseText);}});},errorHandler:function(model,xhr){switch(xhr.status){case"0":break;case 403:this.flush();$("#loggedOut").trail();break;case 500:this.flush();$("#500").trail();break;case 502:this.flush();$("#502").trail();break;default:}}});})();Date.parseDate=function(date,withSeconds){if(withSeconds){var parts=date.match(/([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})/);return new Date(parts[1],parts[2]-1,parts[3],parts[4],parts[5],parts[6]);}else{var parts=date.match(/([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})/);return new Date(parts[1],parts[2]-1,parts[3],parts[4],parts[5]);}};var viewModel={host:ko.observable(new Host().viewModel),user:ko.observable(new User().viewModel),callback:ko.observable(""),hostView:ko.observable(""),redirect:ko.observable(""),interval:ko.observable(""),gridView:ko.observable(""),hostsWarningTotal:ko.observable(""),hostsTotal:ko.observable(""),groups:ko.observableArray([]),isRepeating:ko.observable(false),hostSearch:ko.observable(""),hostLimit:ko.observable(0),fragment:ko.observable(""),hostUrlWrap:function(value){if(this.host().hostID()==0){return"#";}else{return this.hostUrl()+"/"+value+(this.host().startDate()?"/date/"+this.host().startDate():"");}},hostDate:function(){if(this.host()&&this.host().startDate()!==null&&this.host().startDate()!==""){return Date.parseDate(this.host().startDate());}
return new Date();},formatDate:function(d){if(d){return d.toString('yyyy-MM-ddTHH:mm');}},newDate:function(f,amount){var d;try{if(this.host()){if(this.host().startDate()){d=Date.parseDate(this.host().startDate());}else{if(amount>0){return;}
d=Date.now();}
d[f].call(d,amount);if(d.compareTo(Date.now())==1){return;}
return d;}}catch(e){return;}},magicDateUrl:function(f,amount,e){var d=this.newDate(f,amount);if(d){if($("#"+e).length){$("#"+e).button('enable');}
return this.hostUrl()+'/'+this.hostView()+'/date/'+this.formatDate(d)+(this.hostView()=="statistics"?"/interval/"+this.interval():"");}else{if($("#"+e).length){$("#"+e).button('disable');}
return"";}}};viewModel.hostUrl=ko.dependentObservable(function(){if(this.host().hostID()==0){return"#";}else{return"#!hosts/"+this.host().hostID();}},viewModel);viewModel.hostView.subscribe(function(hostView){$("#hostMenu label").removeClass("ui-state-active");$("label[for='"+hostView+"Button']").addClass("ui-state-active");});viewModel.interval.subscribe(function(interval){$("#intervalMenu label").removeClass("ui-state-active");$("label[for='interval"+interval+"']").addClass("ui-state-active");});viewModel.gridView.subscribe(function(filter){$("#gridMenu label").removeClass("ui-state-active");$("label[for='"+filter+"Button']").addClass("ui-state-active");});viewModel.hostLimit.subscribe(function(hosts){if(hosts.length==1){$("#singleHostHideBackButton, #hostsTotal, #hostWarningsTotal").css({display:"none"});}else{$("#singleHostHideBackButton, #hostsTotal, #hostWarningsTotal").css({display:"block"});}});viewModel.shouldShowDetails=ko.dependentObservable(function(){return true;if(this.host().hostID()!==0){if((this.host().processList()&&_.keys(this.host().processList()).length>0)||(this.host().networkPorts()&&_.keys(this.host().networkPorts()).length>0)||this.host().runningServices().length>0||this.host().virtualHosts().length>0||this.host().mountedFilesystems().length>0||(this.host().consoleSessions()&&_.keys(this.host().consoleSessions()).length>0)){$("#detailsButton, label[for='detailsButton']").fadeIn();return true;}else{$("#detailsButton, label[for='detailsButton']").fadeOut();return false;}}else{return true;}},viewModel);(function(){var inconvenientStatuses={"DEAD":10,"CRIT":20,"STALE":30,"ALERT":40,"WARN":60};var statusSortorder={"DEAD":10,"CRIT":20,"STALE":30,"ALERT":40,"WARN":60,"INIT0":90,"INIT1":100,"INIT2":110,"INIT3":120,"INIT3":130,"INIT4":140,"INIT5":150,"INIT6":160,"INIT7":170,"INIT8":180,"ACKED":9998,"OK":9999};var statusComparer=function(a,b){var x=statusSortorder[a["status"]];x=x?x:10000;var y=statusSortorder[b["status"]];y=y?y:10001;return(x==y?0:(x>y?1:-1));};var formatters={cpuUsage:function(row,cell,value,columnDef,dataContext){return"<div style=\"width: 100%; text-align: right;\">"+value.toFixed(2)+" %</div>";},cpuUsageBar:function(row,cell,value,columnDef,dataContext){if(value==null||value==="")
return"";var color;if(value>70){color="red";}else if(value>30){color="silver";}else{color="green";}
return"<div><span class=\"percent-complete-bar\"><span class=\"background\" style=\"width:"+value.toFixed(2)+"%\"></span></span></div>";},load:function(row,cell,value,columnDef,dataContext){if(value==null||value==="")
return"";return"<div><span class=\"percent-complete-bar\"><span class=\"background\" style=\"width:"+value.toFixed(2)+"%\"></span></span></div>";},roundTripTime:function(row,cell,value,columnDef,dataContext){return value+" ms";},status:function(row,cell,value,columnDef,dataContext){return"<span class=\"host-status-"+value+"\">"+value+"</span>"+(dataContext["statusFlags"]!==""?" ("+dataContext["statusFlags"]+")":"");},statusLame:function(row,cell,value,columnDef,dataContext){return"<span class=\"host-status-"+value+"\">"+value+"</span>"+(dataContext["problems"]!==""?" ("+dataContext["problems"]+")":"");},fixedTwo:function(row,cell,value,columnDef,dataContext){return value.toFixed(2);},GB:function(row,cell,value,columnDef,dataContext){return value.toFixed(2)+" GB"},percent:function(row,cell,value,columnDef,dataContext){return value.toFixed(2)+" %"},diskSize:function(row,cell,value,columnDef,dataContext){return value==0?"Unknown":value.toFixed(2)+"GB";},MB:function(row,cell,value,columnDef,dataContext){return value.toFixed(2)+" MB"},date:function(row,cell,value,columnDef,dataContext){return Date.parseDate(value.substring(0,16));},dateWithSeconds:function(row,cell,value,columnDef,dataContext){return Date.parseDate(value,true);},netIO:function(row,cell,value,columnDef,dataContext){return value+" Mb/s";},rtt:function(row,cell,value,columnDef,dataContext){return value+" ms";},iops:function(row,cell,value,columnDef,dataContext){return value+" io/s";}};GridPresets={host:{tcp:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"port",name:"Port",field:"port",sortable:true},{id:"connectedState",name:"Connected State",field:"connectedState",sortable:true},{id:"otherState",name:"Other State",field:"otherState",sortable:true}]},runningServices:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"service",name:"Service",field:"service",sortable:true}]},mounts:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"mountPoint",name:"Mount Point",field:"mountPoint",sortable:true},{id:"diskSize",name:"Disk Size",field:"diskSize",sortable:true,formatter:formatters.diskSize},{id:"filesystemType",name:"File System Type",field:"filesystemType",sortable:true},{id:"usage",name:"Usage",field:"usage",sortable:true,formatter:formatters.percent}]},processes:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"pid",name:"Process Id",field:"pid",sortable:true},{id:"name",name:"Name",field:"name",sortable:true},{id:"cpuUsage",name:"CPU Usage",field:"cpuUsage",sortable:true,formatter:formatters.percent},{id:"memoryUsage",name:"Memory Usage",field:"memoryUsage",sortable:true,formatter:formatters.percent}],sort:{column:"cpuUsage",direction:"descending"}},eventLog:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"timeStamp",name:"Date",field:"timeStamp",sortable:true,formatter:formatters.dateWithSeconds},{id:"status",name:"Status",field:"status",sortable:true,formatter:formatters.statusLame,comparer:statusComparer},{id:"problems",name:"Problems",field:"problems",sortable:true},{id:"text",name:"Description",field:"text",sortable:true}],sort:{column:"timeStamp",direction:"descending"},dblClick:function(item){window.location.href="#!hosts/"+item.hostID+"/information/date/"+item.timeStamp.substring(0,16);}},virtualHosts:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"hostname",name:"Virtual host",field:"hostname",sortable:true},{id:"connections",name:"TCP connections",field:"connections",sortable:true}],sort:{column:"hostname",direction:"descending"}},consoleSessions:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"vhost",name:"Virtual host",field:"vhost",sortable:true},{id:"remoteHost",name:"Remote",field:"remoteHost",sortable:true},{id:"userName",name:"User name",field:"userName",sortable:true}],sort:{column:"vhost",direction:"descending"}}},hosts:{all:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"label",name:"Host name",field:"label",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"n2-cell"},{id:"ip",name:"IP",field:"id",sortable:true,rerenderOnResize:true,resizable:true},{id:"status",name:"Status",field:"status",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.status,comparer:statusComparer},{id:"networkIn",name:"Net in",field:"networkIn",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.netIO},{id:"networkOut",name:"Net out",field:"networkOut",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.netIO},{id:"diskIO",name:"Disk IO",field:"diskIO",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.iops},{id:"roundTripTime",name:"Roundtrip time",field:"roundTripTime",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.rtt},{id:"loadAverage",name:"Load average",field:"loadAverage",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.fixedTwo},{id:"cpuUsage",name:"CPU Usage",field:"cpuUsage",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.cpuUsage},{id:"cpuUsageBar",name:"CPU Usage graph",field:"cpuUsage",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.cpuUsageBar},],sort:{column:"cpuUsage",direction:"descending"},dblClick:function(item){window.location.href="#!hosts/"+item.id+"/information";},filters:[function(item,filterData){if(filterData.hostSearch){var term=filterData.hostSearch.toLowerCase();var label=item.label.toLowerCase();var status=item.status.toLowerCase();var statusFlags=item.statusFlags.toLowerCase();if(term!==""){return(label.indexOf(term)!==-1||status.indexOf(term)!==-1||item.id.indexOf(term)!==-1||statusFlags.indexOf(term)!==-1);}}
return true;}]},issues:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},columns:[{id:"label",name:"Host name",field:"label",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"n2-cell"},{id:"ip",name:"IP",field:"id",sortable:true,rerenderOnResize:true,resizable:true},{id:"status",name:"Status",field:"status",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.status,comparer:statusComparer},{id:"networkIn",name:"Net in",field:"networkIn",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.netIO},{id:"networkOut",name:"Net out",field:"networkOut",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.netIO},{id:"diskIO",name:"Disk IO",field:"diskIO",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.iops},{id:"roundTripTime",name:"Roundtrip time",field:"roundTripTime",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.rtt},{id:"loadAverage",name:"Load average",field:"loadAverage",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right",formatter:formatters.fixedTwo},{id:"cpuUsage",name:"CPU Usage",field:"cpuUsage",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.cpuUsage},{id:"cpuUsageBar",name:"CPU Usage graph",field:"cpuUsage",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.cpuUsageBar},],sort:{column:"status",direction:"ascending"},dblClick:function(item){window.location.href="#!hosts/"+item.id+"/information";},filters:[function(item,filterData){return inconvenientStatuses[item.status];}]},cumbersome:{options:{rowHeight:N2.data.config.grid.rowHeight,headerHeight:N2.data.config.grid.headerHeight,headerRowHeight:N2.data.config.grid.headerRowHeight},options:{rowHeight:140,hideHeader:true},columns:[{id:"label",name:"Host name",field:"label",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"n2-cell"},{id:"ip",name:"IP",field:"ip",sortable:true,rerenderOnResize:true,resizable:true},{id:"status",name:"Status",field:"status",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.status},{id:"cpuUsage",name:"CPU Usage",field:"cpuUsage",sortable:true,rerenderOnResize:true,resizable:true,formatter:formatters.cpuUsage},{id:"networkIn",name:"Net in",field:"networkIn",sortable:true,rerenderOnResize:true,resizable:true,cssClass:"cell-right"},{id:"group",name:"group",field:"groupDescription",sortable:true,rerenderOnResize:true,resizable:true}],sort:{column:"status",direction:"descending"},grouping:{by:"groupDescription",render:function(item){var ss=function(a,b){var x=statusSortorder[a["status"]];x=x?x:10000;var y=statusSortorder[b["status"]];y=y?y:10001;return(x==y?0:(x>y?1:-1));};var d=_.clone(item.rows);d.sort(ss);var i=0;var saddestHosts=[];while(i<4){var host=d[i];if(host){saddestHosts.push(host);}
i++;}
var warnings=0;var networkIn=0;var networkOut=0;var f=false;var warningStatuses={};_.each(item.rows,function(row){if(!f){f=true;}
networkIn+=row.networkIn;networkOut+=row.networkOut;if(inconvenientStatuses[row.status]){if(!warningStatuses[row.status]){warningStatuses[row.status]=0;}
warningStatuses[row.status]++;warnings++;}});return $.tmpl($("#groupedHostsTemplate"),{groupDescription:item.value,total:item.count,warnings:warnings,networkIn:networkIn,networkOut:networkOut,hosts:saddestHosts,warningStatuses:warningStatuses}).html();},compare:function(a,b){return a.value-b.value;},collapsed:true,keepCollapsed:true,aggregators:[new Slick.Data.Aggregators.Max("cpuUsage")]}}}};})();(function($){var _showBigLoader=function(){$("#bootLoaderSpinner").html("");var cl=new CanvasLoader('bootLoaderSpinner');cl.setColor('#ffffff');cl.setShape('roundRect');cl.setDiameter(80);cl.setDensity(20);cl.setRange(0.5);cl.setSpeed(1);cl.show();$("#bigLoader").stop().show();};var _hideBigLoader=function(){$("#bigLoader").stop().fadeOut(400,function(){$("#bootLoaderSpinner").html("");});};N2trailConfig={nodes:{unsupportedInternetExplorer:{beforeFirstVisit:function(){$('.message',this).dialog({title:"Unsupported version of Internet Explorer",draggable:false,autoOpen:true,width:334,modal:true,closeOnEscape:false,resizable:false,show:'fade'});$(".ui-dialog-titlebar-close").hide();},beforeVisit:function(){$('.message',this).dialog('open');},beforeLeave:function(){$('.message',this).dialog('close');}},login:{beforeFirstVisit:function(){$('#loginForm').dialog({title:"N2 Login",draggable:false,autoOpen:true,width:334,modal:true,closeOnEscape:false,resizable:false,show:'fade',buttons:{"Login":function(){$("#loginForm").submit();return false;}}});$("#loginForm").bind("submit",function(){n2Router.login();return false;});$(".ui-dialog-titlebar-close").hide();var submit=function(event){if(event.which==13){$("#loginForm").submit();}};$("#username").bind("keypress",submit);$("#password").bind("keypress",submit);},beforeVisit:function(){$('#loginForm').dialog('open');},beforeLeave:function(){$('#loginForm').dialog('close');}},main:{beforeFirstVisit:function(){$("#logout").button({icons:{primary:"ui-icon-power"}});$("#warAndPeace").bind("mouseover",function(){$("#warAndPeace span").show();});$("#warAndPeace").bind("mouseout",function(){$("#warAndPeace span").hide();});$("#war, #peace").button();$("#warAndPeace span").hide();},beforeVisit:function(){$("#hostsSearch","#gridMenu").show();}},grid:{beforeFirstVisit:function(){$("#gridMenu").buttonset();$("#search").ezpz_hint();$("#search").autocomplete({minLength:0,source:function(o){if(viewModel.gridView()!="all"&&o.term.length>0){document.location.href="#!hosts/filtered/all";}
$("#hostsGrid").slickGrid("filter","hostSearch",o.term);}});_showBigLoader();},visit:function(){this.css({visibility:"visible"});$("#gridMenu, #hostsSearch").show();},leave:function(){_hideBigLoader();this.css({visibility:"hidden"});$("#gridMenu, #hostsSearch").hide();}},host:{beforeFirstVisit:function(){$("#timeControlList").buttonset();$("#hostMenu").buttonset();$("#hostTimeSearch").n2TimeSearch({keypress:function(date){var url=viewModel.hostUrl()+"/"+viewModel.hostView()+"/date/"
+date.toString("yyyy-MM-ddTHH:mm")
+(viewModel.hostView()=="statistics"&&viewModel.interval()?"/interval/"+viewModel.interval():"");document.location.href=url;}});$("#hostTimeSearch").ezpz_hint();$("#backButton a").button({icons:{primary:"ui-icon-circle-arrow-w"}});},beforeVisit:function(){$("#bigLoader").stop().hide();$("#hostMenu, #backButton").show();},beforeLeave:function(){$("#hostMenu, #backButton").hide();}},hostDetails:{beforeFirstVisit:function(){$("#tcpGrid").slickGrid(GridPresets.host.tcp);$("#mountsGrid").slickGrid(GridPresets.host.mounts);$("#processGrid").slickGrid(GridPresets.host.processes);$("#runningServicesGrid").slickGrid(GridPresets.host.runningServices);$("#virtualHostsGrid").slickGrid(GridPresets.host.virtualHosts);$("#consoleSessionsGrid").slickGrid(GridPresets.host.consoleSessions);},beforeVisit:function(){_showBigLoader();$("#hostDetails .overlay").show();$("#timeControls").show();},beforeLeave:function(){_hideBigLoader();$("#timeControls").hide();}},hostInformation:{beforeVisit:function(){_showBigLoader();$("#hostInformation .overlay").show();$("#timeControls").show();},beforeLeave:function(){_hideBigLoader();$("#timeControls").hide();}},hostGraphs:{visit:function(){this.css({position:"static",top:"0px"})},leave:function(){this.css({position:"absolute",top:"99999999em"})},beforeFirstVisit:function(){$("#intervalMenu").buttonset();$("#hostLoadChart").highChart({title:"Load"});$("#cpuUsageChart").highChart({title:"CPU Usage (%)"});$("#networkInChart").highChart({title:"Network in (Mb/s)"});$("#networkOutChart").highChart({title:"Network Out (Mb/s)"});$("#diskIOChart").highChart({title:"Disk IO (io/s)"});$("#RTTChart").highChart({title:"Roundtrip time (ms)"});$("#ramChart").highChart({title:"RAM (MB)"});$("#swapChart").highChart({title:"Swap (MB)"});$("#totalMemoryChart").highChart({title:"Total Memory (MB)"});$("#ioWaitChart").highChart({title:"IO Wait"});$("#processesChart").highChart({title:"Processes"});},beforeVisit:function(){_showBigLoader();$("#hostGraphs .overlay").show();$("#timeControls, #intervalMenu").show();},beforeLeave:function(){_hideBigLoader();$("#timeControls, #intervalMenu").hide();}},hostEvents:{beforeFirstVisit:function(){$("#eventLogGrid").slickGrid(GridPresets.host.eventLog);},beforeVisit:function(){_showBigLoader();$("#hostEvents .overlay").show();},beforeLeave:function(){_hideBigLoader();}},hostReport:{beforeVisit:function(){_showBigLoader();$("#hostReport .overlay").show();},beforeLeave:function(){_hideBigLoader();}}}};})(jQuery);